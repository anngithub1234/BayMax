function Yx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qx={exports:{}},af={},Kx={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ic=Symbol.for("react.element"),ZT=Symbol.for("react.portal"),$T=Symbol.for("react.fragment"),XT=Symbol.for("react.strict_mode"),YT=Symbol.for("react.profiler"),qT=Symbol.for("react.provider"),KT=Symbol.for("react.context"),QT=Symbol.for("react.forward_ref"),JT=Symbol.for("react.suspense"),eC=Symbol.for("react.memo"),tC=Symbol.for("react.lazy"),n_=Symbol.iterator;function nC(t){return t===null||typeof t!="object"?null:(t=n_&&t[n_]||t["@@iterator"],typeof t=="function"?t:null)}var Qx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jx=Object.assign,e2={};function Cl(t,e,n){this.props=t,this.context=e,this.refs=e2,this.updater=n||Qx}Cl.prototype.isReactComponent={};Cl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function t2(){}t2.prototype=Cl.prototype;function Fp(t,e,n){this.props=t,this.context=e,this.refs=e2,this.updater=n||Qx}var Up=Fp.prototype=new t2;Up.constructor=Fp;Jx(Up,Cl.prototype);Up.isPureReactComponent=!0;var r_=Array.isArray,n2=Object.prototype.hasOwnProperty,Vp={current:null},r2={key:!0,ref:!0,__self:!0,__source:!0};function i2(t,e,n){var r,s={},l=null,d=null;if(e!=null)for(r in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(l=""+e.key),e)n2.call(e,r)&&!r2.hasOwnProperty(r)&&(s[r]=e[r]);var y=arguments.length-2;if(y===1)s.children=n;else if(1<y){for(var x=Array(y),w=0;w<y;w++)x[w]=arguments[w+2];s.children=x}if(t&&t.defaultProps)for(r in y=t.defaultProps,y)s[r]===void 0&&(s[r]=y[r]);return{$$typeof:Ic,type:t,key:l,ref:d,props:s,_owner:Vp.current}}function rC(t,e){return{$$typeof:Ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ic}function iC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var i_=/\/+/g;function f0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iC(""+t.key):e.toString(36)}function zh(t,e,n,r,s){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(l){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case Ic:case ZT:d=!0}}if(d)return d=t,s=s(d),t=r===""?"."+f0(d,0):r,r_(s)?(n="",t!=null&&(n=t.replace(i_,"$&/")+"/"),zh(s,e,n,"",function(w){return w})):s!=null&&(zp(s)&&(s=rC(s,n+(!s.key||d&&d.key===s.key?"":(""+s.key).replace(i_,"$&/")+"/")+t)),e.push(s)),1;if(d=0,r=r===""?".":r+":",r_(t))for(var y=0;y<t.length;y++){l=t[y];var x=r+f0(l,y);d+=zh(l,e,n,x,s)}else if(x=nC(t),typeof x=="function")for(t=x.call(t),y=0;!(l=t.next()).done;)l=l.value,x=r+f0(l,y++),d+=zh(l,e,n,x,s);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function dh(t,e,n){if(t==null)return t;var r=[],s=0;return zh(t,r,"","",function(l){return e.call(n,l,s++)}),r}function sC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xr={current:null},jh={transition:null},oC={ReactCurrentDispatcher:xr,ReactCurrentBatchConfig:jh,ReactCurrentOwner:Vp};rt.Children={map:dh,forEach:function(t,e,n){dh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dh(t,function(){e++}),e},toArray:function(t){return dh(t,function(e){return e})||[]},only:function(t){if(!zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=Cl;rt.Fragment=$T;rt.Profiler=YT;rt.PureComponent=Fp;rt.StrictMode=XT;rt.Suspense=JT;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oC;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jx({},t.props),s=t.key,l=t.ref,d=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,d=Vp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var y=t.type.defaultProps;for(x in e)n2.call(e,x)&&!r2.hasOwnProperty(x)&&(r[x]=e[x]===void 0&&y!==void 0?y[x]:e[x])}var x=arguments.length-2;if(x===1)r.children=n;else if(1<x){y=Array(x);for(var w=0;w<x;w++)y[w]=arguments[w+2];r.children=y}return{$$typeof:Ic,type:t.type,key:s,ref:l,props:r,_owner:d}};rt.createContext=function(t){return t={$$typeof:KT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qT,_context:t},t.Consumer=t};rt.createElement=i2;rt.createFactory=function(t){var e=i2.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:QT,render:t}};rt.isValidElement=zp;rt.lazy=function(t){return{$$typeof:tC,_payload:{_status:-1,_result:t},_init:sC}};rt.memo=function(t,e){return{$$typeof:eC,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=jh.transition;jh.transition={};try{t()}finally{jh.transition=e}};rt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};rt.useCallback=function(t,e){return xr.current.useCallback(t,e)};rt.useContext=function(t){return xr.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return xr.current.useDeferredValue(t)};rt.useEffect=function(t,e){return xr.current.useEffect(t,e)};rt.useId=function(){return xr.current.useId()};rt.useImperativeHandle=function(t,e,n){return xr.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return xr.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return xr.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return xr.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return xr.current.useReducer(t,e,n)};rt.useRef=function(t){return xr.current.useRef(t)};rt.useState=function(t){return xr.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return xr.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return xr.current.useTransition()};rt.version="18.2.0";Kx.exports=rt;var me=Kx.exports;const s2=Bp(me),aC=Yx({__proto__:null,default:s2},[me]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC=me,uC=Symbol.for("react.element"),cC=Symbol.for("react.fragment"),hC=Object.prototype.hasOwnProperty,dC=lC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fC={key:!0,ref:!0,__self:!0,__source:!0};function o2(t,e,n){var r,s={},l=null,d=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(d=e.ref);for(r in e)hC.call(e,r)&&!fC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:uC,type:t,key:l,ref:d,props:s,_owner:dC.current}}af.Fragment=cC;af.jsx=o2;af.jsxs=o2;qx.exports=af;var P=qx.exports,c1={},a2={exports:{}},Wr={},l2={exports:{}},u2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,Oe){var pe=ne.length;ne.push(Oe);e:for(;0<pe;){var Be=pe-1>>>1,De=ne[Be];if(0<s(De,Oe))ne[Be]=Oe,ne[pe]=De,pe=Be;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var Oe=ne[0],pe=ne.pop();if(pe!==Oe){ne[0]=pe;e:for(var Be=0,De=ne.length,It=De>>>1;Be<It;){var je=2*(Be+1)-1,tt=ne[je],ue=je+1,wn=ne[ue];if(0>s(tt,pe))ue<De&&0>s(wn,tt)?(ne[Be]=wn,ne[ue]=pe,Be=ue):(ne[Be]=tt,ne[je]=pe,Be=je);else if(ue<De&&0>s(wn,pe))ne[Be]=wn,ne[ue]=pe,Be=ue;else break e}}return Oe}function s(ne,Oe){var pe=ne.sortIndex-Oe.sortIndex;return pe!==0?pe:ne.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,y=d.now();t.unstable_now=function(){return d.now()-y}}var x=[],w=[],C=1,I=null,O=3,V=!1,W=!1,j=!1,J=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ne){for(var Oe=n(w);Oe!==null;){if(Oe.callback===null)r(w);else if(Oe.startTime<=ne)r(w),Oe.sortIndex=Oe.expirationTime,e(x,Oe);else break;Oe=n(w)}}function G(ne){if(j=!1,B(ne),!W)if(n(x)!==null)W=!0,et(ae);else{var Oe=n(w);Oe!==null&&ke(G,Oe.startTime-ne)}}function ae(ne,Oe){W=!1,j&&(j=!1,F(le),le=-1),V=!0;var pe=O;try{for(B(Oe),I=n(x);I!==null&&(!(I.expirationTime>Oe)||ne&&!Ze());){var Be=I.callback;if(typeof Be=="function"){I.callback=null,O=I.priorityLevel;var De=Be(I.expirationTime<=Oe);Oe=t.unstable_now(),typeof De=="function"?I.callback=De:I===n(x)&&r(x),B(Oe)}else r(x);I=n(x)}if(I!==null)var It=!0;else{var je=n(w);je!==null&&ke(G,je.startTime-Oe),It=!1}return It}finally{I=null,O=pe,V=!1}}var ie=!1,Y=null,le=-1,te=5,Me=-1;function Ze(){return!(t.unstable_now()-Me<te)}function Ce(){if(Y!==null){var ne=t.unstable_now();Me=ne;var Oe=!0;try{Oe=Y(!0,ne)}finally{Oe?Je():(ie=!1,Y=null)}}else ie=!1}var Je;if(typeof D=="function")Je=function(){D(Ce)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,ee=gt.port2;gt.port1.onmessage=Ce,Je=function(){ee.postMessage(null)}}else Je=function(){J(Ce,0)};function et(ne){Y=ne,ie||(ie=!0,Je())}function ke(ne,Oe){le=J(function(){ne(t.unstable_now())},Oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){W||V||(W=!0,et(ae))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return n(x)},t.unstable_next=function(ne){switch(O){case 1:case 2:case 3:var Oe=3;break;default:Oe=O}var pe=O;O=Oe;try{return ne()}finally{O=pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,Oe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var pe=O;O=ne;try{return Oe()}finally{O=pe}},t.unstable_scheduleCallback=function(ne,Oe,pe){var Be=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Be+pe:Be):pe=Be,ne){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=pe+De,ne={id:C++,callback:Oe,priorityLevel:ne,startTime:pe,expirationTime:De,sortIndex:-1},pe>Be?(ne.sortIndex=pe,e(w,ne),n(x)===null&&ne===n(w)&&(j?(F(le),le=-1):j=!0,ke(G,pe-Be))):(ne.sortIndex=De,e(x,ne),W||V||(W=!0,et(ae))),ne},t.unstable_shouldYield=Ze,t.unstable_wrapCallback=function(ne){var Oe=O;return function(){var pe=O;O=Oe;try{return ne.apply(this,arguments)}finally{O=pe}}}})(u2);l2.exports=u2;var pC=l2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2=me,jr=pC;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h2=new Set,Wu={};function xa(t,e){hl(t,e),hl(t+"Capture",e)}function hl(t,e){for(Wu[t]=e,t=0;t<e.length;t++)h2.add(e[t])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h1=Object.prototype.hasOwnProperty,gC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s_={},o_={};function mC(t){return h1.call(o_,t)?!0:h1.call(s_,t)?!1:gC.test(t)?o_[t]=!0:(s_[t]=!0,!1)}function _C(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yC(t,e,n,r){if(e===null||typeof e>"u"||_C(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wr(t,e,n,r,s,l,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=d}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new wr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var jp=/[\-:]([a-z])/g;function Hp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jp,Hp);Gn[e]=new wr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jp,Hp);Gn[e]=new wr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jp,Hp);Gn[e]=new wr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new wr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wp(t,e,n,r){var s=Gn.hasOwnProperty(e)?Gn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yC(e,n,s,r)&&(n=null),r||s===null?mC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bs=c2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fh=Symbol.for("react.element"),Va=Symbol.for("react.portal"),za=Symbol.for("react.fragment"),Gp=Symbol.for("react.strict_mode"),d1=Symbol.for("react.profiler"),d2=Symbol.for("react.provider"),f2=Symbol.for("react.context"),Zp=Symbol.for("react.forward_ref"),f1=Symbol.for("react.suspense"),p1=Symbol.for("react.suspense_list"),$p=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),p2=Symbol.for("react.offscreen"),a_=Symbol.iterator;function ou(t){return t===null||typeof t!="object"?null:(t=a_&&t[a_]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,p0;function xu(t){if(p0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);p0=e&&e[1]||""}return`
`+p0+t}var g0=!1;function m0(t,e){if(!t||g0)return"";g0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(w){var r=w}Reflect.construct(t,[],e)}else{try{e.call()}catch(w){r=w}t.call(e.prototype)}else{try{throw Error()}catch(w){r=w}t()}}catch(w){if(w&&r&&typeof w.stack=="string"){for(var s=w.stack.split(`
`),l=r.stack.split(`
`),d=s.length-1,y=l.length-1;1<=d&&0<=y&&s[d]!==l[y];)y--;for(;1<=d&&0<=y;d--,y--)if(s[d]!==l[y]){if(d!==1||y!==1)do if(d--,y--,0>y||s[d]!==l[y]){var x=`
`+s[d].replace(" at new "," at ");return t.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",t.displayName)),x}while(1<=d&&0<=y);break}}}finally{g0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xu(t):""}function xC(t){switch(t.tag){case 5:return xu(t.type);case 16:return xu("Lazy");case 13:return xu("Suspense");case 19:return xu("SuspenseList");case 0:case 2:case 15:return t=m0(t.type,!1),t;case 11:return t=m0(t.type.render,!1),t;case 1:return t=m0(t.type,!0),t;default:return""}}function g1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case za:return"Fragment";case Va:return"Portal";case d1:return"Profiler";case Gp:return"StrictMode";case f1:return"Suspense";case p1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case f2:return(t.displayName||"Context")+".Consumer";case d2:return(t._context.displayName||"Context")+".Provider";case Zp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $p:return e=t.displayName||null,e!==null?e:g1(t.type)||"Memo";case Zs:e=t._payload,t=t._init;try{return g1(t(e))}catch{}}return null}function wC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g1(e);case 8:return e===Gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function g2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vC(t){var e=g2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(d){r=""+d,l.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ph(t){t._valueTracker||(t._valueTracker=vC(t))}function m2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=g2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function m1(t,e){var n=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function l_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _2(t,e){e=e.checked,e!=null&&Wp(t,"checked",e,!1)}function _1(t,e){_2(t,e);var n=mo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?y1(t,e.type,n):e.hasOwnProperty("defaultValue")&&y1(t,e.type,mo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function u_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function y1(t,e,n){(e!=="number"||sd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wu=Array.isArray;function tl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function x1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function c_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(wu(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mo(n)}}function y2(t,e){var n=mo(e.value),r=mo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function h_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function x2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function w1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?x2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gh,w2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gh=gh||document.createElement("div"),gh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EC=["Webkit","ms","Moz","O"];Object.keys(Su).forEach(function(t){EC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Su[e]=Su[t]})});function v2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Su.hasOwnProperty(t)&&Su[t]?(""+e).trim():e+"px"}function E2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=v2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var AC=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v1(t,e){if(e){if(AC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function E1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A1=null;function Xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var T1=null,nl=null,rl=null;function d_(t){if(t=Rc(t)){if(typeof T1!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=df(e),T1(t.stateNode,t.type,e))}}function A2(t){nl?rl?rl.push(t):rl=[t]:nl=t}function T2(){if(nl){var t=nl,e=rl;if(rl=nl=null,d_(t),e)for(t=0;t<e.length;t++)d_(e[t])}}function C2(t,e){return t(e)}function I2(){}var _0=!1;function S2(t,e,n){if(_0)return t(e,n);_0=!0;try{return C2(t,e,n)}finally{_0=!1,(nl!==null||rl!==null)&&(I2(),T2())}}function Zu(t,e){var n=t.stateNode;if(n===null)return null;var r=df(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var C1=!1;if(vs)try{var au={};Object.defineProperty(au,"passive",{get:function(){C1=!0}}),window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch{C1=!1}function TC(t,e,n,r,s,l,d,y,x){var w=Array.prototype.slice.call(arguments,3);try{e.apply(n,w)}catch(C){this.onError(C)}}var bu=!1,od=null,ad=!1,I1=null,CC={onError:function(t){bu=!0,od=t}};function IC(t,e,n,r,s,l,d,y,x){bu=!1,od=null,TC.apply(CC,arguments)}function SC(t,e,n,r,s,l,d,y,x){if(IC.apply(this,arguments),bu){if(bu){var w=od;bu=!1,od=null}else throw Error(fe(198));ad||(ad=!0,I1=w)}}function wa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function b2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f_(t){if(wa(t)!==t)throw Error(fe(188))}function bC(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return f_(s),t;if(l===r)return f_(s),e;l=l.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=l;else{for(var d=!1,y=s.child;y;){if(y===n){d=!0,n=s,r=l;break}if(y===r){d=!0,r=s,n=l;break}y=y.sibling}if(!d){for(y=l.child;y;){if(y===n){d=!0,n=l,r=s;break}if(y===r){d=!0,r=l,n=s;break}y=y.sibling}if(!d)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function R2(t){return t=bC(t),t!==null?N2(t):null}function N2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=N2(t);if(e!==null)return e;t=t.sibling}return null}var P2=jr.unstable_scheduleCallback,p_=jr.unstable_cancelCallback,RC=jr.unstable_shouldYield,NC=jr.unstable_requestPaint,on=jr.unstable_now,PC=jr.unstable_getCurrentPriorityLevel,Yp=jr.unstable_ImmediatePriority,O2=jr.unstable_UserBlockingPriority,ld=jr.unstable_NormalPriority,OC=jr.unstable_LowPriority,M2=jr.unstable_IdlePriority,lf=null,Wi=null;function MC(t){if(Wi&&typeof Wi.onCommitFiberRoot=="function")try{Wi.onCommitFiberRoot(lf,t,void 0,(t.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:LC,kC=Math.log,DC=Math.LN2;function LC(t){return t>>>=0,t===0?32:31-(kC(t)/DC|0)|0}var mh=64,_h=4194304;function vu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ud(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,l=t.pingedLanes,d=n&268435455;if(d!==0){var y=d&~s;y!==0?r=vu(y):(l&=d,l!==0&&(r=vu(l)))}else d=n&~s,d!==0?r=vu(d):l!==0&&(r=vu(l));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,l=e&-e,s>=l||s===16&&(l&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ti(e),s=1<<n,r|=t[n],e&=~s;return r}function BC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,l=t.pendingLanes;0<l;){var d=31-Ti(l),y=1<<d,x=s[d];x===-1?(!(y&n)||y&r)&&(s[d]=BC(y,e)):x<=e&&(t.expiredLanes|=y),l&=~y}}function S1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function k2(){var t=mh;return mh<<=1,!(mh&4194240)&&(mh=64),t}function y0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ti(e),t[e]=n}function UC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ti(n),l=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~l}}function qp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ti(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Et=0;function D2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var L2,Kp,B2,F2,U2,b1=!1,yh=[],io=null,so=null,oo=null,$u=new Map,Xu=new Map,Xs=[],VC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g_(t,e){switch(t){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":$u.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xu.delete(e.pointerId)}}function lu(t,e,n,r,s,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},e!==null&&(e=Rc(e),e!==null&&Kp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zC(t,e,n,r,s){switch(e){case"focusin":return io=lu(io,t,e,n,r,s),!0;case"dragenter":return so=lu(so,t,e,n,r,s),!0;case"mouseover":return oo=lu(oo,t,e,n,r,s),!0;case"pointerover":var l=s.pointerId;return $u.set(l,lu($u.get(l)||null,t,e,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Xu.set(l,lu(Xu.get(l)||null,t,e,n,r,s)),!0}return!1}function V2(t){var e=$o(t.target);if(e!==null){var n=wa(e);if(n!==null){if(e=n.tag,e===13){if(e=b2(n),e!==null){t.blockedOn=e,U2(t.priority,function(){B2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=R1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);A1=r,n.target.dispatchEvent(r),A1=null}else return e=Rc(n),e!==null&&Kp(e),t.blockedOn=n,!1;e.shift()}return!0}function m_(t,e,n){Hh(t)&&n.delete(e)}function jC(){b1=!1,io!==null&&Hh(io)&&(io=null),so!==null&&Hh(so)&&(so=null),oo!==null&&Hh(oo)&&(oo=null),$u.forEach(m_),Xu.forEach(m_)}function uu(t,e){t.blockedOn===e&&(t.blockedOn=null,b1||(b1=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,jC)))}function Yu(t){function e(s){return uu(s,t)}if(0<yh.length){uu(yh[0],t);for(var n=1;n<yh.length;n++){var r=yh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(io!==null&&uu(io,t),so!==null&&uu(so,t),oo!==null&&uu(oo,t),$u.forEach(e),Xu.forEach(e),n=0;n<Xs.length;n++)r=Xs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xs.length&&(n=Xs[0],n.blockedOn===null);)V2(n),n.blockedOn===null&&Xs.shift()}var il=bs.ReactCurrentBatchConfig,cd=!0;function HC(t,e,n,r){var s=Et,l=il.transition;il.transition=null;try{Et=1,Qp(t,e,n,r)}finally{Et=s,il.transition=l}}function WC(t,e,n,r){var s=Et,l=il.transition;il.transition=null;try{Et=4,Qp(t,e,n,r)}finally{Et=s,il.transition=l}}function Qp(t,e,n,r){if(cd){var s=R1(t,e,n,r);if(s===null)b0(t,e,r,hd,n),g_(t,r);else if(zC(s,t,e,n,r))r.stopPropagation();else if(g_(t,r),e&4&&-1<VC.indexOf(t)){for(;s!==null;){var l=Rc(s);if(l!==null&&L2(l),l=R1(t,e,n,r),l===null&&b0(t,e,r,hd,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else b0(t,e,r,null,n)}}var hd=null;function R1(t,e,n,r){if(hd=null,t=Xp(r),t=$o(t),t!==null)if(e=wa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=b2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hd=t,null}function z2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PC()){case Yp:return 1;case O2:return 4;case ld:case OC:return 16;case M2:return 536870912;default:return 16}default:return 16}}var to=null,Jp=null,Wh=null;function j2(){if(Wh)return Wh;var t,e=Jp,n=e.length,r,s="value"in to?to.value:to.textContent,l=s.length;for(t=0;t<n&&e[t]===s[t];t++);var d=n-t;for(r=1;r<=d&&e[n-r]===s[l-r];r++);return Wh=s.slice(t,1<r?1-r:void 0)}function Gh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xh(){return!0}function __(){return!1}function Gr(t){function e(n,r,s,l,d){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var y in t)t.hasOwnProperty(y)&&(n=t[y],this[y]=n?n(l):l[y]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?xh:__,this.isPropagationStopped=__,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xh)},persist:function(){},isPersistent:xh}),e}var Il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eg=Gr(Il),bc=Kt({},Il,{view:0,detail:0}),GC=Gr(bc),x0,w0,cu,uf=Kt({},bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cu&&(cu&&t.type==="mousemove"?(x0=t.screenX-cu.screenX,w0=t.screenY-cu.screenY):w0=x0=0,cu=t),x0)},movementY:function(t){return"movementY"in t?t.movementY:w0}}),y_=Gr(uf),ZC=Kt({},uf,{dataTransfer:0}),$C=Gr(ZC),XC=Kt({},bc,{relatedTarget:0}),v0=Gr(XC),YC=Kt({},Il,{animationName:0,elapsedTime:0,pseudoElement:0}),qC=Gr(YC),KC=Kt({},Il,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QC=Gr(KC),JC=Kt({},Il,{data:0}),x_=Gr(JC),eI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nI[t])?!!e[t]:!1}function tg(){return rI}var iI=Kt({},bc,{key:function(t){if(t.key){var e=eI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tg,charCode:function(t){return t.type==="keypress"?Gh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sI=Gr(iI),oI=Kt({},uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w_=Gr(oI),aI=Kt({},bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tg}),lI=Gr(aI),uI=Kt({},Il,{propertyName:0,elapsedTime:0,pseudoElement:0}),cI=Gr(uI),hI=Kt({},uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dI=Gr(hI),fI=[9,13,27,32],ng=vs&&"CompositionEvent"in window,Ru=null;vs&&"documentMode"in document&&(Ru=document.documentMode);var pI=vs&&"TextEvent"in window&&!Ru,H2=vs&&(!ng||Ru&&8<Ru&&11>=Ru),v_=String.fromCharCode(32),E_=!1;function W2(t,e){switch(t){case"keyup":return fI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ja=!1;function gI(t,e){switch(t){case"compositionend":return G2(e);case"keypress":return e.which!==32?null:(E_=!0,v_);case"textInput":return t=e.data,t===v_&&E_?null:t;default:return null}}function mI(t,e){if(ja)return t==="compositionend"||!ng&&W2(t,e)?(t=j2(),Wh=Jp=to=null,ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H2&&e.locale!=="ko"?null:e.data;default:return null}}var _I={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_I[t.type]:e==="textarea"}function Z2(t,e,n,r){A2(r),e=dd(e,"onChange"),0<e.length&&(n=new eg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Nu=null,qu=null;function yI(t){rw(t,0)}function cf(t){var e=Ga(t);if(m2(e))return t}function xI(t,e){if(t==="change")return e}var $2=!1;if(vs){var E0;if(vs){var A0="oninput"in document;if(!A0){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),A0=typeof T_.oninput=="function"}E0=A0}else E0=!1;$2=E0&&(!document.documentMode||9<document.documentMode)}function C_(){Nu&&(Nu.detachEvent("onpropertychange",X2),qu=Nu=null)}function X2(t){if(t.propertyName==="value"&&cf(qu)){var e=[];Z2(e,qu,t,Xp(t)),S2(yI,e)}}function wI(t,e,n){t==="focusin"?(C_(),Nu=e,qu=n,Nu.attachEvent("onpropertychange",X2)):t==="focusout"&&C_()}function vI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cf(qu)}function EI(t,e){if(t==="click")return cf(e)}function AI(t,e){if(t==="input"||t==="change")return cf(e)}function TI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ii=typeof Object.is=="function"?Object.is:TI;function Ku(t,e){if(Ii(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h1.call(e,s)||!Ii(t[s],e[s]))return!1}return!0}function I_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S_(t,e){var n=I_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=I_(n)}}function Y2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Y2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q2(){for(var t=window,e=sd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sd(t.document)}return e}function rg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CI(t){var e=q2(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Y2(n.ownerDocument.documentElement,n)){if(r!==null&&rg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!t.extend&&l>r&&(s=r,r=l,l=s),s=S_(n,l);var d=S_(n,r);s&&d&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),l>r?(t.addRange(e),t.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var II=vs&&"documentMode"in document&&11>=document.documentMode,Ha=null,N1=null,Pu=null,P1=!1;function b_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;P1||Ha==null||Ha!==sd(r)||(r=Ha,"selectionStart"in r&&rg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pu&&Ku(Pu,r)||(Pu=r,r=dd(N1,"onSelect"),0<r.length&&(e=new eg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ha)))}function wh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wa={animationend:wh("Animation","AnimationEnd"),animationiteration:wh("Animation","AnimationIteration"),animationstart:wh("Animation","AnimationStart"),transitionend:wh("Transition","TransitionEnd")},T0={},K2={};vs&&(K2=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function hf(t){if(T0[t])return T0[t];if(!Wa[t])return t;var e=Wa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in K2)return T0[t]=e[n];return t}var Q2=hf("animationend"),J2=hf("animationiteration"),ew=hf("animationstart"),tw=hf("transitionend"),nw=new Map,R_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(t,e){nw.set(t,e),xa(e,[t])}for(var C0=0;C0<R_.length;C0++){var I0=R_[C0],SI=I0.toLowerCase(),bI=I0[0].toUpperCase()+I0.slice(1);Ao(SI,"on"+bI)}Ao(Q2,"onAnimationEnd");Ao(J2,"onAnimationIteration");Ao(ew,"onAnimationStart");Ao("dblclick","onDoubleClick");Ao("focusin","onFocus");Ao("focusout","onBlur");Ao(tw,"onTransitionEnd");hl("onMouseEnter",["mouseout","mouseover"]);hl("onMouseLeave",["mouseout","mouseover"]);hl("onPointerEnter",["pointerout","pointerover"]);hl("onPointerLeave",["pointerout","pointerover"]);xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eu));function N_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SC(r,e,void 0,t),t.currentTarget=null}function rw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var l=void 0;if(e)for(var d=r.length-1;0<=d;d--){var y=r[d],x=y.instance,w=y.currentTarget;if(y=y.listener,x!==l&&s.isPropagationStopped())break e;N_(s,y,w),l=x}else for(d=0;d<r.length;d++){if(y=r[d],x=y.instance,w=y.currentTarget,y=y.listener,x!==l&&s.isPropagationStopped())break e;N_(s,y,w),l=x}}}if(ad)throw t=I1,ad=!1,I1=null,t}function Ft(t,e){var n=e[L1];n===void 0&&(n=e[L1]=new Set);var r=t+"__bubble";n.has(r)||(iw(e,t,2,!1),n.add(r))}function S0(t,e,n){var r=0;e&&(r|=4),iw(n,t,r,e)}var vh="_reactListening"+Math.random().toString(36).slice(2);function Qu(t){if(!t[vh]){t[vh]=!0,h2.forEach(function(n){n!=="selectionchange"&&(RI.has(n)||S0(n,!1,t),S0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vh]||(e[vh]=!0,S0("selectionchange",!1,e))}}function iw(t,e,n,r){switch(z2(e)){case 1:var s=HC;break;case 4:s=WC;break;default:s=Qp}n=s.bind(null,e,n,t),s=void 0,!C1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function b0(t,e,n,r,s){var l=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var y=r.stateNode.containerInfo;if(y===s||y.nodeType===8&&y.parentNode===s)break;if(d===4)for(d=r.return;d!==null;){var x=d.tag;if((x===3||x===4)&&(x=d.stateNode.containerInfo,x===s||x.nodeType===8&&x.parentNode===s))return;d=d.return}for(;y!==null;){if(d=$o(y),d===null)return;if(x=d.tag,x===5||x===6){r=l=d;continue e}y=y.parentNode}}r=r.return}S2(function(){var w=l,C=Xp(n),I=[];e:{var O=nw.get(t);if(O!==void 0){var V=eg,W=t;switch(t){case"keypress":if(Gh(n)===0)break e;case"keydown":case"keyup":V=sI;break;case"focusin":W="focus",V=v0;break;case"focusout":W="blur",V=v0;break;case"beforeblur":case"afterblur":V=v0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=y_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=$C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=lI;break;case Q2:case J2:case ew:V=qC;break;case tw:V=cI;break;case"scroll":V=GC;break;case"wheel":V=dI;break;case"copy":case"cut":case"paste":V=QC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=w_}var j=(e&4)!==0,J=!j&&t==="scroll",F=j?O!==null?O+"Capture":null:O;j=[];for(var D=w,B;D!==null;){B=D;var G=B.stateNode;if(B.tag===5&&G!==null&&(B=G,F!==null&&(G=Zu(D,F),G!=null&&j.push(Ju(D,G,B)))),J)break;D=D.return}0<j.length&&(O=new V(O,W,null,n,C),I.push({event:O,listeners:j}))}}if(!(e&7)){e:{if(O=t==="mouseover"||t==="pointerover",V=t==="mouseout"||t==="pointerout",O&&n!==A1&&(W=n.relatedTarget||n.fromElement)&&($o(W)||W[Es]))break e;if((V||O)&&(O=C.window===C?C:(O=C.ownerDocument)?O.defaultView||O.parentWindow:window,V?(W=n.relatedTarget||n.toElement,V=w,W=W?$o(W):null,W!==null&&(J=wa(W),W!==J||W.tag!==5&&W.tag!==6)&&(W=null)):(V=null,W=w),V!==W)){if(j=y_,G="onMouseLeave",F="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(j=w_,G="onPointerLeave",F="onPointerEnter",D="pointer"),J=V==null?O:Ga(V),B=W==null?O:Ga(W),O=new j(G,D+"leave",V,n,C),O.target=J,O.relatedTarget=B,G=null,$o(C)===w&&(j=new j(F,D+"enter",W,n,C),j.target=B,j.relatedTarget=J,G=j),J=G,V&&W)t:{for(j=V,F=W,D=0,B=j;B;B=ka(B))D++;for(B=0,G=F;G;G=ka(G))B++;for(;0<D-B;)j=ka(j),D--;for(;0<B-D;)F=ka(F),B--;for(;D--;){if(j===F||F!==null&&j===F.alternate)break t;j=ka(j),F=ka(F)}j=null}else j=null;V!==null&&P_(I,O,V,j,!1),W!==null&&J!==null&&P_(I,J,W,j,!0)}}e:{if(O=w?Ga(w):window,V=O.nodeName&&O.nodeName.toLowerCase(),V==="select"||V==="input"&&O.type==="file")var ae=xI;else if(A_(O))if($2)ae=AI;else{ae=vI;var ie=wI}else(V=O.nodeName)&&V.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(ae=EI);if(ae&&(ae=ae(t,w))){Z2(I,ae,n,C);break e}ie&&ie(t,O,w),t==="focusout"&&(ie=O._wrapperState)&&ie.controlled&&O.type==="number"&&y1(O,"number",O.value)}switch(ie=w?Ga(w):window,t){case"focusin":(A_(ie)||ie.contentEditable==="true")&&(Ha=ie,N1=w,Pu=null);break;case"focusout":Pu=N1=Ha=null;break;case"mousedown":P1=!0;break;case"contextmenu":case"mouseup":case"dragend":P1=!1,b_(I,n,C);break;case"selectionchange":if(II)break;case"keydown":case"keyup":b_(I,n,C)}var Y;if(ng)e:{switch(t){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else ja?W2(t,n)&&(le="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(le="onCompositionStart");le&&(H2&&n.locale!=="ko"&&(ja||le!=="onCompositionStart"?le==="onCompositionEnd"&&ja&&(Y=j2()):(to=C,Jp="value"in to?to.value:to.textContent,ja=!0)),ie=dd(w,le),0<ie.length&&(le=new x_(le,t,null,n,C),I.push({event:le,listeners:ie}),Y?le.data=Y:(Y=G2(n),Y!==null&&(le.data=Y)))),(Y=pI?gI(t,n):mI(t,n))&&(w=dd(w,"onBeforeInput"),0<w.length&&(C=new x_("onBeforeInput","beforeinput",null,n,C),I.push({event:C,listeners:w}),C.data=Y))}rw(I,e)})}function Ju(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Zu(t,n),l!=null&&r.unshift(Ju(t,l,s)),l=Zu(t,e),l!=null&&r.push(Ju(t,l,s))),t=t.return}return r}function ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function P_(t,e,n,r,s){for(var l=e._reactName,d=[];n!==null&&n!==r;){var y=n,x=y.alternate,w=y.stateNode;if(x!==null&&x===r)break;y.tag===5&&w!==null&&(y=w,s?(x=Zu(n,l),x!=null&&d.unshift(Ju(n,x,y))):s||(x=Zu(n,l),x!=null&&d.push(Ju(n,x,y)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var NI=/\r\n?/g,PI=/\u0000|\uFFFD/g;function O_(t){return(typeof t=="string"?t:""+t).replace(NI,`
`).replace(PI,"")}function Eh(t,e,n){if(e=O_(e),O_(t)!==e&&n)throw Error(fe(425))}function fd(){}var O1=null,M1=null;function k1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var D1=typeof setTimeout=="function"?setTimeout:void 0,OI=typeof clearTimeout=="function"?clearTimeout:void 0,M_=typeof Promise=="function"?Promise:void 0,MI=typeof queueMicrotask=="function"?queueMicrotask:typeof M_<"u"?function(t){return M_.resolve(null).then(t).catch(kI)}:D1;function kI(t){setTimeout(function(){throw t})}function R0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Yu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Yu(e)}function ao(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),Ui="__reactFiber$"+Sl,ec="__reactProps$"+Sl,Es="__reactContainer$"+Sl,L1="__reactEvents$"+Sl,DI="__reactListeners$"+Sl,LI="__reactHandles$"+Sl;function $o(t){var e=t[Ui];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Es]||n[Ui]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k_(t);t!==null;){if(n=t[Ui])return n;t=k_(t)}return e}t=n,n=t.parentNode}return null}function Rc(t){return t=t[Ui]||t[Es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ga(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function df(t){return t[ec]||null}var B1=[],Za=-1;function To(t){return{current:t}}function zt(t){0>Za||(t.current=B1[Za],B1[Za]=null,Za--)}function kt(t,e){Za++,B1[Za]=t.current,t.current=e}var _o={},sr=To(_o),Ir=To(!1),oa=_o;function dl(t,e){var n=t.type.contextTypes;if(!n)return _o;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=e[l];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Sr(t){return t=t.childContextTypes,t!=null}function pd(){zt(Ir),zt(sr)}function D_(t,e,n){if(sr.current!==_o)throw Error(fe(168));kt(sr,e),kt(Ir,n)}function sw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,wC(t)||"Unknown",s));return Kt({},n,r)}function gd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_o,oa=sr.current,kt(sr,t),kt(Ir,Ir.current),!0}function L_(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=sw(t,e,oa),r.__reactInternalMemoizedMergedChildContext=t,zt(Ir),zt(sr),kt(sr,t)):zt(Ir),kt(Ir,n)}var cs=null,ff=!1,N0=!1;function ow(t){cs===null?cs=[t]:cs.push(t)}function BI(t){ff=!0,ow(t)}function Co(){if(!N0&&cs!==null){N0=!0;var t=0,e=Et;try{var n=cs;for(Et=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cs=null,ff=!1}catch(s){throw cs!==null&&(cs=cs.slice(t+1)),P2(Yp,Co),s}finally{Et=e,N0=!1}}return null}var $a=[],Xa=0,md=null,_d=0,ti=[],ni=0,aa=null,hs=1,ds="";function Wo(t,e){$a[Xa++]=_d,$a[Xa++]=md,md=t,_d=e}function aw(t,e,n){ti[ni++]=hs,ti[ni++]=ds,ti[ni++]=aa,aa=t;var r=hs;t=ds;var s=32-Ti(r)-1;r&=~(1<<s),n+=1;var l=32-Ti(e)+s;if(30<l){var d=s-s%5;l=(r&(1<<d)-1).toString(32),r>>=d,s-=d,hs=1<<32-Ti(e)+s|n<<s|r,ds=l+t}else hs=1<<l|n<<s|r,ds=t}function ig(t){t.return!==null&&(Wo(t,1),aw(t,1,0))}function sg(t){for(;t===md;)md=$a[--Xa],$a[Xa]=null,_d=$a[--Xa],$a[Xa]=null;for(;t===aa;)aa=ti[--ni],ti[ni]=null,ds=ti[--ni],ti[ni]=null,hs=ti[--ni],ti[ni]=null}var zr=null,Ur=null,Gt=!1,wi=null;function lw(t,e){var n=ii(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function B_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zr=t,Ur=ao(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zr=t,Ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=aa!==null?{id:hs,overflow:ds}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ii(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zr=t,Ur=null,!0):!1;default:return!1}}function F1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function U1(t){if(Gt){var e=Ur;if(e){var n=e;if(!B_(t,e)){if(F1(t))throw Error(fe(418));e=ao(n.nextSibling);var r=zr;e&&B_(t,e)?lw(r,n):(t.flags=t.flags&-4097|2,Gt=!1,zr=t)}}else{if(F1(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Gt=!1,zr=t}}}function F_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zr=t}function Ah(t){if(t!==zr)return!1;if(!Gt)return F_(t),Gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!k1(t.type,t.memoizedProps)),e&&(e=Ur)){if(F1(t))throw uw(),Error(fe(418));for(;e;)lw(t,e),e=ao(e.nextSibling)}if(F_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ur=ao(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ur=null}}else Ur=zr?ao(t.stateNode.nextSibling):null;return!0}function uw(){for(var t=Ur;t;)t=ao(t.nextSibling)}function fl(){Ur=zr=null,Gt=!1}function og(t){wi===null?wi=[t]:wi.push(t)}var FI=bs.ReactCurrentBatchConfig;function _i(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var yd=To(null),xd=null,Ya=null,ag=null;function lg(){ag=Ya=xd=null}function ug(t){var e=yd.current;zt(yd),t._currentValue=e}function V1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sl(t,e){xd=t,ag=Ya=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Cr=!0),t.firstContext=null)}function oi(t){var e=t._currentValue;if(ag!==t)if(t={context:t,memoizedValue:e,next:null},Ya===null){if(xd===null)throw Error(fe(308));Ya=t,xd.dependencies={lanes:0,firstContext:t}}else Ya=Ya.next=t;return e}var Xo=null;function cg(t){Xo===null?Xo=[t]:Xo.push(t)}function cw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cg(e)):(n.next=s.next,s.next=n),e.interleaved=n,As(t,r)}function As(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $s=!1;function hg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ft&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,As(t,n)}return s=r.interleaved,s===null?(e.next=e,cg(r)):(e.next=s.next,s.next=e),r.interleaved=e,As(t,n)}function Zh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qp(t,n)}}function U_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=d:l=l.next=d,n=n.next}while(n!==null);l===null?s=l=e:l=l.next=e}else s=l=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wd(t,e,n,r){var s=t.updateQueue;$s=!1;var l=s.firstBaseUpdate,d=s.lastBaseUpdate,y=s.shared.pending;if(y!==null){s.shared.pending=null;var x=y,w=x.next;x.next=null,d===null?l=w:d.next=w,d=x;var C=t.alternate;C!==null&&(C=C.updateQueue,y=C.lastBaseUpdate,y!==d&&(y===null?C.firstBaseUpdate=w:y.next=w,C.lastBaseUpdate=x))}if(l!==null){var I=s.baseState;d=0,C=w=x=null,y=l;do{var O=y.lane,V=y.eventTime;if((r&O)===O){C!==null&&(C=C.next={eventTime:V,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var W=t,j=y;switch(O=e,V=n,j.tag){case 1:if(W=j.payload,typeof W=="function"){I=W.call(V,I,O);break e}I=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=j.payload,O=typeof W=="function"?W.call(V,I,O):W,O==null)break e;I=Kt({},I,O);break e;case 2:$s=!0}}y.callback!==null&&y.lane!==0&&(t.flags|=64,O=s.effects,O===null?s.effects=[y]:O.push(y))}else V={eventTime:V,lane:O,tag:y.tag,payload:y.payload,callback:y.callback,next:null},C===null?(w=C=V,x=I):C=C.next=V,d|=O;if(y=y.next,y===null){if(y=s.shared.pending,y===null)break;O=y,y=O.next,O.next=null,s.lastBaseUpdate=O,s.shared.pending=null}}while(1);if(C===null&&(x=I),s.baseState=x,s.firstBaseUpdate=w,s.lastBaseUpdate=C,e=s.shared.interleaved,e!==null){s=e;do d|=s.lane,s=s.next;while(s!==e)}else l===null&&(s.shared.lanes=0);ua|=d,t.lanes=d,t.memoizedState=I}}function V_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var dw=new c2.Component().refs;function z1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pf={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_r(),s=co(t),l=_s(r,s);l.payload=e,n!=null&&(l.callback=n),e=lo(t,l,s),e!==null&&(Ci(e,t,s,r),Zh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_r(),s=co(t),l=_s(r,s);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=lo(t,l,s),e!==null&&(Ci(e,t,s,r),Zh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_r(),r=co(t),s=_s(n,r);s.tag=2,e!=null&&(s.callback=e),e=lo(t,s,r),e!==null&&(Ci(e,t,r,n),Zh(e,t,r))}};function z_(t,e,n,r,s,l,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,l,d):e.prototype&&e.prototype.isPureReactComponent?!Ku(n,r)||!Ku(s,l):!0}function fw(t,e,n){var r=!1,s=_o,l=e.contextType;return typeof l=="object"&&l!==null?l=oi(l):(s=Sr(e)?oa:sr.current,r=e.contextTypes,l=(r=r!=null)?dl(t,s):_o),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),e}function j_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pf.enqueueReplaceState(e,e.state,null)}function j1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=dw,hg(t);var l=e.contextType;typeof l=="object"&&l!==null?s.context=oi(l):(l=Sr(e)?oa:sr.current,s.context=dl(t,l)),s.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(z1(t,e,l,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pf.enqueueReplaceState(s,s.state,null),wd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(d){var y=s.refs;y===dw&&(y=s.refs={}),d===null?delete y[l]:y[l]=d},e._stringRef=l,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function Th(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function H_(t){var e=t._init;return e(t._payload)}function pw(t){function e(F,D){if(t){var B=F.deletions;B===null?(F.deletions=[D],F.flags|=16):B.push(D)}}function n(F,D){if(!t)return null;for(;D!==null;)e(F,D),D=D.sibling;return null}function r(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function s(F,D){return F=ho(F,D),F.index=0,F.sibling=null,F}function l(F,D,B){return F.index=B,t?(B=F.alternate,B!==null?(B=B.index,B<D?(F.flags|=2,D):B):(F.flags|=2,D)):(F.flags|=1048576,D)}function d(F){return t&&F.alternate===null&&(F.flags|=2),F}function y(F,D,B,G){return D===null||D.tag!==6?(D=B0(B,F.mode,G),D.return=F,D):(D=s(D,B),D.return=F,D)}function x(F,D,B,G){var ae=B.type;return ae===za?C(F,D,B.props.children,G,B.key):D!==null&&(D.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Zs&&H_(ae)===D.type)?(G=s(D,B.props),G.ref=hu(F,D,B),G.return=F,G):(G=Qh(B.type,B.key,B.props,null,F.mode,G),G.ref=hu(F,D,B),G.return=F,G)}function w(F,D,B,G){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=F0(B,F.mode,G),D.return=F,D):(D=s(D,B.children||[]),D.return=F,D)}function C(F,D,B,G,ae){return D===null||D.tag!==7?(D=ea(B,F.mode,G,ae),D.return=F,D):(D=s(D,B),D.return=F,D)}function I(F,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=B0(""+D,F.mode,B),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case fh:return B=Qh(D.type,D.key,D.props,null,F.mode,B),B.ref=hu(F,null,D),B.return=F,B;case Va:return D=F0(D,F.mode,B),D.return=F,D;case Zs:var G=D._init;return I(F,G(D._payload),B)}if(wu(D)||ou(D))return D=ea(D,F.mode,B,null),D.return=F,D;Th(F,D)}return null}function O(F,D,B,G){var ae=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ae!==null?null:y(F,D,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case fh:return B.key===ae?x(F,D,B,G):null;case Va:return B.key===ae?w(F,D,B,G):null;case Zs:return ae=B._init,O(F,D,ae(B._payload),G)}if(wu(B)||ou(B))return ae!==null?null:C(F,D,B,G,null);Th(F,B)}return null}function V(F,D,B,G,ae){if(typeof G=="string"&&G!==""||typeof G=="number")return F=F.get(B)||null,y(D,F,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case fh:return F=F.get(G.key===null?B:G.key)||null,x(D,F,G,ae);case Va:return F=F.get(G.key===null?B:G.key)||null,w(D,F,G,ae);case Zs:var ie=G._init;return V(F,D,B,ie(G._payload),ae)}if(wu(G)||ou(G))return F=F.get(B)||null,C(D,F,G,ae,null);Th(D,G)}return null}function W(F,D,B,G){for(var ae=null,ie=null,Y=D,le=D=0,te=null;Y!==null&&le<B.length;le++){Y.index>le?(te=Y,Y=null):te=Y.sibling;var Me=O(F,Y,B[le],G);if(Me===null){Y===null&&(Y=te);break}t&&Y&&Me.alternate===null&&e(F,Y),D=l(Me,D,le),ie===null?ae=Me:ie.sibling=Me,ie=Me,Y=te}if(le===B.length)return n(F,Y),Gt&&Wo(F,le),ae;if(Y===null){for(;le<B.length;le++)Y=I(F,B[le],G),Y!==null&&(D=l(Y,D,le),ie===null?ae=Y:ie.sibling=Y,ie=Y);return Gt&&Wo(F,le),ae}for(Y=r(F,Y);le<B.length;le++)te=V(Y,F,le,B[le],G),te!==null&&(t&&te.alternate!==null&&Y.delete(te.key===null?le:te.key),D=l(te,D,le),ie===null?ae=te:ie.sibling=te,ie=te);return t&&Y.forEach(function(Ze){return e(F,Ze)}),Gt&&Wo(F,le),ae}function j(F,D,B,G){var ae=ou(B);if(typeof ae!="function")throw Error(fe(150));if(B=ae.call(B),B==null)throw Error(fe(151));for(var ie=ae=null,Y=D,le=D=0,te=null,Me=B.next();Y!==null&&!Me.done;le++,Me=B.next()){Y.index>le?(te=Y,Y=null):te=Y.sibling;var Ze=O(F,Y,Me.value,G);if(Ze===null){Y===null&&(Y=te);break}t&&Y&&Ze.alternate===null&&e(F,Y),D=l(Ze,D,le),ie===null?ae=Ze:ie.sibling=Ze,ie=Ze,Y=te}if(Me.done)return n(F,Y),Gt&&Wo(F,le),ae;if(Y===null){for(;!Me.done;le++,Me=B.next())Me=I(F,Me.value,G),Me!==null&&(D=l(Me,D,le),ie===null?ae=Me:ie.sibling=Me,ie=Me);return Gt&&Wo(F,le),ae}for(Y=r(F,Y);!Me.done;le++,Me=B.next())Me=V(Y,F,le,Me.value,G),Me!==null&&(t&&Me.alternate!==null&&Y.delete(Me.key===null?le:Me.key),D=l(Me,D,le),ie===null?ae=Me:ie.sibling=Me,ie=Me);return t&&Y.forEach(function(Ce){return e(F,Ce)}),Gt&&Wo(F,le),ae}function J(F,D,B,G){if(typeof B=="object"&&B!==null&&B.type===za&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case fh:e:{for(var ae=B.key,ie=D;ie!==null;){if(ie.key===ae){if(ae=B.type,ae===za){if(ie.tag===7){n(F,ie.sibling),D=s(ie,B.props.children),D.return=F,F=D;break e}}else if(ie.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Zs&&H_(ae)===ie.type){n(F,ie.sibling),D=s(ie,B.props),D.ref=hu(F,ie,B),D.return=F,F=D;break e}n(F,ie);break}else e(F,ie);ie=ie.sibling}B.type===za?(D=ea(B.props.children,F.mode,G,B.key),D.return=F,F=D):(G=Qh(B.type,B.key,B.props,null,F.mode,G),G.ref=hu(F,D,B),G.return=F,F=G)}return d(F);case Va:e:{for(ie=B.key;D!==null;){if(D.key===ie)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){n(F,D.sibling),D=s(D,B.children||[]),D.return=F,F=D;break e}else{n(F,D);break}else e(F,D);D=D.sibling}D=F0(B,F.mode,G),D.return=F,F=D}return d(F);case Zs:return ie=B._init,J(F,D,ie(B._payload),G)}if(wu(B))return W(F,D,B,G);if(ou(B))return j(F,D,B,G);Th(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(n(F,D.sibling),D=s(D,B),D.return=F,F=D):(n(F,D),D=B0(B,F.mode,G),D.return=F,F=D),d(F)):n(F,D)}return J}var pl=pw(!0),gw=pw(!1),Nc={},Gi=To(Nc),tc=To(Nc),nc=To(Nc);function Yo(t){if(t===Nc)throw Error(fe(174));return t}function dg(t,e){switch(kt(nc,e),kt(tc,t),kt(Gi,Nc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:w1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=w1(e,t)}zt(Gi),kt(Gi,e)}function gl(){zt(Gi),zt(tc),zt(nc)}function mw(t){Yo(nc.current);var e=Yo(Gi.current),n=w1(e,t.type);e!==n&&(kt(tc,t),kt(Gi,n))}function fg(t){tc.current===t&&(zt(Gi),zt(tc))}var Yt=To(0);function vd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var P0=[];function pg(){for(var t=0;t<P0.length;t++)P0[t]._workInProgressVersionPrimary=null;P0.length=0}var $h=bs.ReactCurrentDispatcher,O0=bs.ReactCurrentBatchConfig,la=0,qt=null,yn=null,Nn=null,Ed=!1,Ou=!1,rc=0,UI=0;function qn(){throw Error(fe(321))}function gg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ii(t[n],e[n]))return!1;return!0}function mg(t,e,n,r,s,l){if(la=l,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$h.current=t===null||t.memoizedState===null?HI:WI,t=n(r,s),Ou){l=0;do{if(Ou=!1,rc=0,25<=l)throw Error(fe(301));l+=1,Nn=yn=null,e.updateQueue=null,$h.current=GI,t=n(r,s)}while(Ou)}if($h.current=Ad,e=yn!==null&&yn.next!==null,la=0,Nn=yn=qt=null,Ed=!1,e)throw Error(fe(300));return t}function _g(){var t=rc!==0;return rc=0,t}function Bi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?qt.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function ai(){if(yn===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=yn.next;var e=Nn===null?qt.memoizedState:Nn.next;if(e!==null)Nn=e,yn=t;else{if(t===null)throw Error(fe(310));yn=t,t={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Nn===null?qt.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function ic(t,e){return typeof e=="function"?e(t):e}function M0(t){var e=ai(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=yn,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var d=s.next;s.next=l.next,l.next=d}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var y=d=null,x=null,w=l;do{var C=w.lane;if((la&C)===C)x!==null&&(x=x.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),r=w.hasEagerState?w.eagerState:t(r,w.action);else{var I={lane:C,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};x===null?(y=x=I,d=r):x=x.next=I,qt.lanes|=C,ua|=C}w=w.next}while(w!==null&&w!==l);x===null?d=r:x.next=y,Ii(r,e.memoizedState)||(Cr=!0),e.memoizedState=r,e.baseState=d,e.baseQueue=x,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do l=s.lane,qt.lanes|=l,ua|=l,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function k0(t){var e=ai(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,l=e.memoizedState;if(s!==null){n.pending=null;var d=s=s.next;do l=t(l,d.action),d=d.next;while(d!==s);Ii(l,e.memoizedState)||(Cr=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,r]}function _w(){}function yw(t,e){var n=qt,r=ai(),s=e(),l=!Ii(r.memoizedState,s);if(l&&(r.memoizedState=s,Cr=!0),r=r.queue,yg(vw.bind(null,n,r,t),[t]),r.getSnapshot!==e||l||Nn!==null&&Nn.memoizedState.tag&1){if(n.flags|=2048,sc(9,ww.bind(null,n,r,s,e),void 0,null),On===null)throw Error(fe(349));la&30||xw(n,e,s)}return s}function xw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ww(t,e,n,r){e.value=n,e.getSnapshot=r,Ew(e)&&Aw(t)}function vw(t,e,n){return n(function(){Ew(e)&&Aw(t)})}function Ew(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ii(t,n)}catch{return!0}}function Aw(t){var e=As(t,1);e!==null&&Ci(e,t,1,-1)}function W_(t){var e=Bi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:t},e.queue=t,t=t.dispatch=jI.bind(null,qt,t),[e.memoizedState,t]}function sc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tw(){return ai().memoizedState}function Xh(t,e,n,r){var s=Bi();qt.flags|=t,s.memoizedState=sc(1|e,n,void 0,r===void 0?null:r)}function gf(t,e,n,r){var s=ai();r=r===void 0?null:r;var l=void 0;if(yn!==null){var d=yn.memoizedState;if(l=d.destroy,r!==null&&gg(r,d.deps)){s.memoizedState=sc(e,n,l,r);return}}qt.flags|=t,s.memoizedState=sc(1|e,n,l,r)}function G_(t,e){return Xh(8390656,8,t,e)}function yg(t,e){return gf(2048,8,t,e)}function Cw(t,e){return gf(4,2,t,e)}function Iw(t,e){return gf(4,4,t,e)}function Sw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bw(t,e,n){return n=n!=null?n.concat([t]):null,gf(4,4,Sw.bind(null,e,t),n)}function xg(){}function Rw(t,e){var n=ai();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Nw(t,e){var n=ai();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Pw(t,e,n){return la&21?(Ii(n,e)||(n=k2(),qt.lanes|=n,ua|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Cr=!0),t.memoizedState=n)}function VI(t,e){var n=Et;Et=n!==0&&4>n?n:4,t(!0);var r=O0.transition;O0.transition={};try{t(!1),e()}finally{Et=n,O0.transition=r}}function Ow(){return ai().memoizedState}function zI(t,e,n){var r=co(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mw(t))kw(e,n);else if(n=cw(t,e,n,r),n!==null){var s=_r();Ci(n,t,r,s),Dw(n,e,r)}}function jI(t,e,n){var r=co(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mw(t))kw(e,s);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var d=e.lastRenderedState,y=l(d,n);if(s.hasEagerState=!0,s.eagerState=y,Ii(y,d)){var x=e.interleaved;x===null?(s.next=s,cg(e)):(s.next=x.next,x.next=s),e.interleaved=s;return}}catch{}finally{}n=cw(t,e,s,r),n!==null&&(s=_r(),Ci(n,t,r,s),Dw(n,e,r))}}function Mw(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function kw(t,e){Ou=Ed=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qp(t,n)}}var Ad={readContext:oi,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},HI={readContext:oi,useCallback:function(t,e){return Bi().memoizedState=[t,e===void 0?null:e],t},useContext:oi,useEffect:G_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xh(4194308,4,Sw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xh(4,2,t,e)},useMemo:function(t,e){var n=Bi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zI.bind(null,qt,t),[r.memoizedState,t]},useRef:function(t){var e=Bi();return t={current:t},e.memoizedState=t},useState:W_,useDebugValue:xg,useDeferredValue:function(t){return Bi().memoizedState=t},useTransition:function(){var t=W_(!1),e=t[0];return t=VI.bind(null,t[1]),Bi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qt,s=Bi();if(Gt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),On===null)throw Error(fe(349));la&30||xw(r,e,n)}s.memoizedState=n;var l={value:n,getSnapshot:e};return s.queue=l,G_(vw.bind(null,r,l,t),[t]),r.flags|=2048,sc(9,ww.bind(null,r,l,n,e),void 0,null),n},useId:function(){var t=Bi(),e=On.identifierPrefix;if(Gt){var n=ds,r=hs;n=(r&~(1<<32-Ti(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WI={readContext:oi,useCallback:Rw,useContext:oi,useEffect:yg,useImperativeHandle:bw,useInsertionEffect:Cw,useLayoutEffect:Iw,useMemo:Nw,useReducer:M0,useRef:Tw,useState:function(){return M0(ic)},useDebugValue:xg,useDeferredValue:function(t){var e=ai();return Pw(e,yn.memoizedState,t)},useTransition:function(){var t=M0(ic)[0],e=ai().memoizedState;return[t,e]},useMutableSource:_w,useSyncExternalStore:yw,useId:Ow,unstable_isNewReconciler:!1},GI={readContext:oi,useCallback:Rw,useContext:oi,useEffect:yg,useImperativeHandle:bw,useInsertionEffect:Cw,useLayoutEffect:Iw,useMemo:Nw,useReducer:k0,useRef:Tw,useState:function(){return k0(ic)},useDebugValue:xg,useDeferredValue:function(t){var e=ai();return yn===null?e.memoizedState=t:Pw(e,yn.memoizedState,t)},useTransition:function(){var t=k0(ic)[0],e=ai().memoizedState;return[t,e]},useMutableSource:_w,useSyncExternalStore:yw,useId:Ow,unstable_isNewReconciler:!1};function ml(t,e){try{var n="",r=e;do n+=xC(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:s,digest:null}}function D0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function H1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZI=typeof WeakMap=="function"?WeakMap:Map;function Lw(t,e,n){n=_s(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cd||(Cd=!0,J1=r),H1(t,e)},n}function Bw(t,e,n){n=_s(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){H1(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){H1(t,e),typeof r!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),n}function Z_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ZI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=oS.bind(null,t,e,n),e.then(t,t))}function $_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function X_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_s(-1,1),e.tag=2,lo(n,e,1))),n.lanes|=1),t)}var $I=bs.ReactCurrentOwner,Cr=!1;function gr(t,e,n,r){e.child=t===null?gw(e,null,n,r):pl(e,t.child,n,r)}function Y_(t,e,n,r,s){n=n.render;var l=e.ref;return sl(e,s),r=mg(t,e,n,r,l,s),n=_g(),t!==null&&!Cr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ts(t,e,s)):(Gt&&n&&ig(e),e.flags|=1,gr(t,e,r,s),e.child)}function q_(t,e,n,r,s){if(t===null){var l=n.type;return typeof l=="function"&&!Sg(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,Fw(t,e,l,r,s)):(t=Qh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&s)){var d=l.memoizedProps;if(n=n.compare,n=n!==null?n:Ku,n(d,r)&&t.ref===e.ref)return Ts(t,e,s)}return e.flags|=1,t=ho(l,r),t.ref=e.ref,t.return=e,e.child=t}function Fw(t,e,n,r,s){if(t!==null){var l=t.memoizedProps;if(Ku(l,r)&&t.ref===e.ref)if(Cr=!1,e.pendingProps=r=l,(t.lanes&s)!==0)t.flags&131072&&(Cr=!0);else return e.lanes=t.lanes,Ts(t,e,s)}return W1(t,e,n,r,s)}function Uw(t,e,n){var r=e.pendingProps,s=r.children,l=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Ka,Br),Br|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(Ka,Br),Br|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,kt(Ka,Br),Br|=r}else l!==null?(r=l.baseLanes|n,e.memoizedState=null):r=n,kt(Ka,Br),Br|=r;return gr(t,e,s,n),e.child}function Vw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function W1(t,e,n,r,s){var l=Sr(n)?oa:sr.current;return l=dl(e,l),sl(e,s),n=mg(t,e,n,r,l,s),r=_g(),t!==null&&!Cr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ts(t,e,s)):(Gt&&r&&ig(e),e.flags|=1,gr(t,e,n,s),e.child)}function K_(t,e,n,r,s){if(Sr(n)){var l=!0;gd(e)}else l=!1;if(sl(e,s),e.stateNode===null)Yh(t,e),fw(e,n,r),j1(e,n,r,s),r=!0;else if(t===null){var d=e.stateNode,y=e.memoizedProps;d.props=y;var x=d.context,w=n.contextType;typeof w=="object"&&w!==null?w=oi(w):(w=Sr(n)?oa:sr.current,w=dl(e,w));var C=n.getDerivedStateFromProps,I=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function";I||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==r||x!==w)&&j_(e,d,r,w),$s=!1;var O=e.memoizedState;d.state=O,wd(e,r,d,s),x=e.memoizedState,y!==r||O!==x||Ir.current||$s?(typeof C=="function"&&(z1(e,n,C,r),x=e.memoizedState),(y=$s||z_(e,n,y,r,O,x,w))?(I||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=x),d.props=r,d.state=x,d.context=w,r=y):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{d=e.stateNode,hw(t,e),y=e.memoizedProps,w=e.type===e.elementType?y:_i(e.type,y),d.props=w,I=e.pendingProps,O=d.context,x=n.contextType,typeof x=="object"&&x!==null?x=oi(x):(x=Sr(n)?oa:sr.current,x=dl(e,x));var V=n.getDerivedStateFromProps;(C=typeof V=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==I||O!==x)&&j_(e,d,r,x),$s=!1,O=e.memoizedState,d.state=O,wd(e,r,d,s);var W=e.memoizedState;y!==I||O!==W||Ir.current||$s?(typeof V=="function"&&(z1(e,n,V,r),W=e.memoizedState),(w=$s||z_(e,n,w,r,O,W,x)||!1)?(C||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,W,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,W,x)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&O===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&O===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=W),d.props=r,d.state=W,d.context=x,r=w):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&O===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&O===t.memoizedState||(e.flags|=1024),r=!1)}return G1(t,e,n,r,l,s)}function G1(t,e,n,r,s,l){Vw(t,e);var d=(e.flags&128)!==0;if(!r&&!d)return s&&L_(e,n,!1),Ts(t,e,l);r=e.stateNode,$I.current=e;var y=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&d?(e.child=pl(e,t.child,null,l),e.child=pl(e,null,y,l)):gr(t,e,y,l),e.memoizedState=r.state,s&&L_(e,n,!0),e.child}function zw(t){var e=t.stateNode;e.pendingContext?D_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D_(t,e.context,!1),dg(t,e.containerInfo)}function Q_(t,e,n,r,s){return fl(),og(s),e.flags|=256,gr(t,e,n,r),e.child}var Z1={dehydrated:null,treeContext:null,retryLane:0};function $1(t){return{baseLanes:t,cachePool:null,transitions:null}}function jw(t,e,n){var r=e.pendingProps,s=Yt.current,l=!1,d=(e.flags&128)!==0,y;if((y=d)||(y=t!==null&&t.memoizedState===null?!1:(s&2)!==0),y?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kt(Yt,s&1),t===null)return U1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=r.children,t=r.fallback,l?(r=e.mode,l=e.child,d={mode:"hidden",children:d},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=d):l=yf(d,r,0,null),t=ea(t,r,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=$1(n),e.memoizedState=Z1,t):wg(e,d));if(s=t.memoizedState,s!==null&&(y=s.dehydrated,y!==null))return XI(t,e,d,r,y,s,n);if(l){l=r.fallback,d=e.mode,s=t.child,y=s.sibling;var x={mode:"hidden",children:r.children};return!(d&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=x,e.deletions=null):(r=ho(s,x),r.subtreeFlags=s.subtreeFlags&14680064),y!==null?l=ho(y,l):(l=ea(l,d,n,null),l.flags|=2),l.return=e,r.return=e,r.sibling=l,e.child=r,r=l,l=e.child,d=t.child.memoizedState,d=d===null?$1(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=t.childLanes&~n,e.memoizedState=Z1,r}return l=t.child,t=l.sibling,r=ho(l,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wg(t,e){return e=yf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ch(t,e,n,r){return r!==null&&og(r),pl(e,t.child,null,n),t=wg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XI(t,e,n,r,s,l,d){if(n)return e.flags&256?(e.flags&=-257,r=D0(Error(fe(422))),Ch(t,e,d,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=r.fallback,s=e.mode,r=yf({mode:"visible",children:r.children},s,0,null),l=ea(l,s,d,null),l.flags|=2,r.return=e,l.return=e,r.sibling=l,e.child=r,e.mode&1&&pl(e,t.child,null,d),e.child.memoizedState=$1(d),e.memoizedState=Z1,l);if(!(e.mode&1))return Ch(t,e,d,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var y=r.dgst;return r=y,l=Error(fe(419)),r=D0(l,r,void 0),Ch(t,e,d,r)}if(y=(d&t.childLanes)!==0,Cr||y){if(r=On,r!==null){switch(d&-d){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|d)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,As(t,s),Ci(r,t,s,-1))}return Ig(),r=D0(Error(fe(421))),Ch(t,e,d,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aS.bind(null,t),s._reactRetry=e,null):(t=l.treeContext,Ur=ao(s.nextSibling),zr=e,Gt=!0,wi=null,t!==null&&(ti[ni++]=hs,ti[ni++]=ds,ti[ni++]=aa,hs=t.id,ds=t.overflow,aa=e),e=wg(e,r.children),e.flags|=4096,e)}function J_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),V1(t.return,e,n)}function L0(t,e,n,r,s){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Hw(t,e,n){var r=e.pendingProps,s=r.revealOrder,l=r.tail;if(gr(t,e,r.children,n),r=Yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J_(t,n,e);else if(t.tag===19)J_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kt(Yt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),L0(e,!1,s,n,l);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}L0(e,!0,n,null,l);break;case"together":L0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ua|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=ho(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ho(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YI(t,e,n){switch(e.tag){case 3:zw(e),fl();break;case 5:mw(e);break;case 1:Sr(e.type)&&gd(e);break;case 4:dg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;kt(yd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kt(Yt,Yt.current&1),e.flags|=128,null):n&e.child.childLanes?jw(t,e,n):(kt(Yt,Yt.current&1),t=Ts(t,e,n),t!==null?t.sibling:null);kt(Yt,Yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kt(Yt,Yt.current),r)break;return null;case 22:case 23:return e.lanes=0,Uw(t,e,n)}return Ts(t,e,n)}var Ww,X1,Gw,Zw;Ww=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};X1=function(){};Gw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Yo(Gi.current);var l=null;switch(n){case"input":s=m1(t,s),r=m1(t,r),l=[];break;case"select":s=Kt({},s,{value:void 0}),r=Kt({},r,{value:void 0}),l=[];break;case"textarea":s=x1(t,s),r=x1(t,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fd)}v1(n,r);var d;n=null;for(w in s)if(!r.hasOwnProperty(w)&&s.hasOwnProperty(w)&&s[w]!=null)if(w==="style"){var y=s[w];for(d in y)y.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Wu.hasOwnProperty(w)?l||(l=[]):(l=l||[]).push(w,null));for(w in r){var x=r[w];if(y=s!=null?s[w]:void 0,r.hasOwnProperty(w)&&x!==y&&(x!=null||y!=null))if(w==="style")if(y){for(d in y)!y.hasOwnProperty(d)||x&&x.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in x)x.hasOwnProperty(d)&&y[d]!==x[d]&&(n||(n={}),n[d]=x[d])}else n||(l||(l=[]),l.push(w,n)),n=x;else w==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,y=y?y.__html:void 0,x!=null&&y!==x&&(l=l||[]).push(w,x)):w==="children"?typeof x!="string"&&typeof x!="number"||(l=l||[]).push(w,""+x):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(Wu.hasOwnProperty(w)?(x!=null&&w==="onScroll"&&Ft("scroll",t),l||y===x||(l=[])):(l=l||[]).push(w,x))}n&&(l=l||[]).push("style",n);var w=l;(e.updateQueue=w)&&(e.flags|=4)}};Zw=function(t,e,n,r){n!==r&&(e.flags|=4)};function du(t,e){if(!Gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qI(t,e,n){var r=e.pendingProps;switch(sg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(e),null;case 1:return Sr(e.type)&&pd(),Kn(e),null;case 3:return r=e.stateNode,gl(),zt(Ir),zt(sr),pg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ah(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wi!==null&&(np(wi),wi=null))),X1(t,e),Kn(e),null;case 5:fg(e);var s=Yo(nc.current);if(n=e.type,t!==null&&e.stateNode!=null)Gw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return Kn(e),null}if(t=Yo(Gi.current),Ah(e)){r=e.stateNode,n=e.type;var l=e.memoizedProps;switch(r[Ui]=e,r[ec]=l,t=(e.mode&1)!==0,n){case"dialog":Ft("cancel",r),Ft("close",r);break;case"iframe":case"object":case"embed":Ft("load",r);break;case"video":case"audio":for(s=0;s<Eu.length;s++)Ft(Eu[s],r);break;case"source":Ft("error",r);break;case"img":case"image":case"link":Ft("error",r),Ft("load",r);break;case"details":Ft("toggle",r);break;case"input":l_(r,l),Ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ft("invalid",r);break;case"textarea":c_(r,l),Ft("invalid",r)}v1(n,l),s=null;for(var d in l)if(l.hasOwnProperty(d)){var y=l[d];d==="children"?typeof y=="string"?r.textContent!==y&&(l.suppressHydrationWarning!==!0&&Eh(r.textContent,y,t),s=["children",y]):typeof y=="number"&&r.textContent!==""+y&&(l.suppressHydrationWarning!==!0&&Eh(r.textContent,y,t),s=["children",""+y]):Wu.hasOwnProperty(d)&&y!=null&&d==="onScroll"&&Ft("scroll",r)}switch(n){case"input":ph(r),u_(r,l,!0);break;case"textarea":ph(r),h_(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=fd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{d=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=x2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=d.createElement(n,{is:r.is}):(t=d.createElement(n),n==="select"&&(d=t,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):t=d.createElementNS(t,n),t[Ui]=e,t[ec]=r,Ww(t,e,!1,!1),e.stateNode=t;e:{switch(d=E1(n,r),n){case"dialog":Ft("cancel",t),Ft("close",t),s=r;break;case"iframe":case"object":case"embed":Ft("load",t),s=r;break;case"video":case"audio":for(s=0;s<Eu.length;s++)Ft(Eu[s],t);s=r;break;case"source":Ft("error",t),s=r;break;case"img":case"image":case"link":Ft("error",t),Ft("load",t),s=r;break;case"details":Ft("toggle",t),s=r;break;case"input":l_(t,r),s=m1(t,r),Ft("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Kt({},r,{value:void 0}),Ft("invalid",t);break;case"textarea":c_(t,r),s=x1(t,r),Ft("invalid",t);break;default:s=r}v1(n,s),y=s;for(l in y)if(y.hasOwnProperty(l)){var x=y[l];l==="style"?E2(t,x):l==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&w2(t,x)):l==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Gu(t,x):typeof x=="number"&&Gu(t,""+x):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Wu.hasOwnProperty(l)?x!=null&&l==="onScroll"&&Ft("scroll",t):x!=null&&Wp(t,l,x,d))}switch(n){case"input":ph(t),u_(t,r,!1);break;case"textarea":ph(t),h_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mo(r.value));break;case"select":t.multiple=!!r.multiple,l=r.value,l!=null?tl(t,!!r.multiple,l,!1):r.defaultValue!=null&&tl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kn(e),null;case 6:if(t&&e.stateNode!=null)Zw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=Yo(nc.current),Yo(Gi.current),Ah(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ui]=e,(l=r.nodeValue!==n)&&(t=zr,t!==null))switch(t.tag){case 3:Eh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Eh(r.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ui]=e,e.stateNode=r}return Kn(e),null;case 13:if(zt(Yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gt&&Ur!==null&&e.mode&1&&!(e.flags&128))uw(),fl(),e.flags|=98560,l=!1;else if(l=Ah(e),r!==null&&r.dehydrated!==null){if(t===null){if(!l)throw Error(fe(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(fe(317));l[Ui]=e}else fl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kn(e),l=!1}else wi!==null&&(np(wi),wi=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?xn===0&&(xn=3):Ig())),e.updateQueue!==null&&(e.flags|=4),Kn(e),null);case 4:return gl(),X1(t,e),t===null&&Qu(e.stateNode.containerInfo),Kn(e),null;case 10:return ug(e.type._context),Kn(e),null;case 17:return Sr(e.type)&&pd(),Kn(e),null;case 19:if(zt(Yt),l=e.memoizedState,l===null)return Kn(e),null;if(r=(e.flags&128)!==0,d=l.rendering,d===null)if(r)du(l,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(d=vd(t),d!==null){for(e.flags|=128,du(l,!1),r=d.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)l=n,t=r,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,t=d.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(Yt,Yt.current&1|2),e.child}t=t.sibling}l.tail!==null&&on()>_l&&(e.flags|=128,r=!0,du(l,!1),e.lanes=4194304)}else{if(!r)if(t=vd(d),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),du(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Gt)return Kn(e),null}else 2*on()-l.renderingStartTime>_l&&n!==1073741824&&(e.flags|=128,r=!0,du(l,!1),e.lanes=4194304);l.isBackwards?(d.sibling=e.child,e.child=d):(n=l.last,n!==null?n.sibling=d:e.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=on(),e.sibling=null,n=Yt.current,kt(Yt,r?n&1|2:n&1),e):(Kn(e),null);case 22:case 23:return Cg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Br&1073741824&&(Kn(e),e.subtreeFlags&6&&(e.flags|=8192)):Kn(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function KI(t,e){switch(sg(e),e.tag){case 1:return Sr(e.type)&&pd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gl(),zt(Ir),zt(sr),pg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fg(e),null;case 13:if(zt(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));fl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Yt),null;case 4:return gl(),null;case 10:return ug(e.type._context),null;case 22:case 23:return Cg(),null;case 24:return null;default:return null}}var Ih=!1,er=!1,QI=typeof WeakSet=="function"?WeakSet:Set,Te=null;function qa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tn(t,e,r)}else n.current=null}function Y1(t,e,n){try{n()}catch(r){tn(t,e,r)}}var ey=!1;function JI(t,e){if(O1=cd,t=q2(),rg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var d=0,y=-1,x=-1,w=0,C=0,I=t,O=null;t:for(;;){for(var V;I!==n||s!==0&&I.nodeType!==3||(y=d+s),I!==l||r!==0&&I.nodeType!==3||(x=d+r),I.nodeType===3&&(d+=I.nodeValue.length),(V=I.firstChild)!==null;)O=I,I=V;for(;;){if(I===t)break t;if(O===n&&++w===s&&(y=d),O===l&&++C===r&&(x=d),(V=I.nextSibling)!==null)break;I=O,O=I.parentNode}I=V}n=y===-1||x===-1?null:{start:y,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(M1={focusedElem:t,selectionRange:n},cd=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var W=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(W!==null){var j=W.memoizedProps,J=W.memoizedState,F=e.stateNode,D=F.getSnapshotBeforeUpdate(e.elementType===e.type?j:_i(e.type,j),J);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=e.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(G){tn(e,e.return,G)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return W=ey,ey=!1,W}function Mu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var l=s.destroy;s.destroy=void 0,l!==void 0&&Y1(e,n,l)}s=s.next}while(s!==r)}}function mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function q1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $w(t){var e=t.alternate;e!==null&&(t.alternate=null,$w(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ui],delete e[ec],delete e[L1],delete e[DI],delete e[LI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xw(t){return t.tag===5||t.tag===3||t.tag===4}function ty(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function K1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fd));else if(r!==4&&(t=t.child,t!==null))for(K1(t,e,n),t=t.sibling;t!==null;)K1(t,e,n),t=t.sibling}function Q1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Q1(t,e,n),t=t.sibling;t!==null;)Q1(t,e,n),t=t.sibling}var Un=null,yi=!1;function Hs(t,e,n){for(n=n.child;n!==null;)Yw(t,e,n),n=n.sibling}function Yw(t,e,n){if(Wi&&typeof Wi.onCommitFiberUnmount=="function")try{Wi.onCommitFiberUnmount(lf,n)}catch{}switch(n.tag){case 5:er||qa(n,e);case 6:var r=Un,s=yi;Un=null,Hs(t,e,n),Un=r,yi=s,Un!==null&&(yi?(t=Un,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Un.removeChild(n.stateNode));break;case 18:Un!==null&&(yi?(t=Un,n=n.stateNode,t.nodeType===8?R0(t.parentNode,n):t.nodeType===1&&R0(t,n),Yu(t)):R0(Un,n.stateNode));break;case 4:r=Un,s=yi,Un=n.stateNode.containerInfo,yi=!0,Hs(t,e,n),Un=r,yi=s;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,d=l.destroy;l=l.tag,d!==void 0&&(l&2||l&4)&&Y1(n,e,d),s=s.next}while(s!==r)}Hs(t,e,n);break;case 1:if(!er&&(qa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(y){tn(n,e,y)}Hs(t,e,n);break;case 21:Hs(t,e,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,Hs(t,e,n),er=r):Hs(t,e,n);break;default:Hs(t,e,n)}}function ny(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QI),e.forEach(function(r){var s=lS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=t,d=e,y=d;e:for(;y!==null;){switch(y.tag){case 5:Un=y.stateNode,yi=!1;break e;case 3:Un=y.stateNode.containerInfo,yi=!0;break e;case 4:Un=y.stateNode.containerInfo,yi=!0;break e}y=y.return}if(Un===null)throw Error(fe(160));Yw(l,d,s),Un=null,yi=!1;var x=s.alternate;x!==null&&(x.return=null),s.return=null}catch(w){tn(s,e,w)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qw(e,t),e=e.sibling}function qw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mi(e,t),Li(t),r&4){try{Mu(3,t,t.return),mf(3,t)}catch(j){tn(t,t.return,j)}try{Mu(5,t,t.return)}catch(j){tn(t,t.return,j)}}break;case 1:mi(e,t),Li(t),r&512&&n!==null&&qa(n,n.return);break;case 5:if(mi(e,t),Li(t),r&512&&n!==null&&qa(n,n.return),t.flags&32){var s=t.stateNode;try{Gu(s,"")}catch(j){tn(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var l=t.memoizedProps,d=n!==null?n.memoizedProps:l,y=t.type,x=t.updateQueue;if(t.updateQueue=null,x!==null)try{y==="input"&&l.type==="radio"&&l.name!=null&&_2(s,l),E1(y,d);var w=E1(y,l);for(d=0;d<x.length;d+=2){var C=x[d],I=x[d+1];C==="style"?E2(s,I):C==="dangerouslySetInnerHTML"?w2(s,I):C==="children"?Gu(s,I):Wp(s,C,I,w)}switch(y){case"input":_1(s,l);break;case"textarea":y2(s,l);break;case"select":var O=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var V=l.value;V!=null?tl(s,!!l.multiple,V,!1):O!==!!l.multiple&&(l.defaultValue!=null?tl(s,!!l.multiple,l.defaultValue,!0):tl(s,!!l.multiple,l.multiple?[]:"",!1))}s[ec]=l}catch(j){tn(t,t.return,j)}}break;case 6:if(mi(e,t),Li(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,l=t.memoizedProps;try{s.nodeValue=l}catch(j){tn(t,t.return,j)}}break;case 3:if(mi(e,t),Li(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yu(e.containerInfo)}catch(j){tn(t,t.return,j)}break;case 4:mi(e,t),Li(t);break;case 13:mi(e,t),Li(t),s=t.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Ag=on())),r&4&&ny(t);break;case 22:if(C=n!==null&&n.memoizedState!==null,t.mode&1?(er=(w=er)||C,mi(e,t),er=w):mi(e,t),Li(t),r&8192){if(w=t.memoizedState!==null,(t.stateNode.isHidden=w)&&!C&&t.mode&1)for(Te=t,C=t.child;C!==null;){for(I=Te=C;Te!==null;){switch(O=Te,V=O.child,O.tag){case 0:case 11:case 14:case 15:Mu(4,O,O.return);break;case 1:qa(O,O.return);var W=O.stateNode;if(typeof W.componentWillUnmount=="function"){r=O,n=O.return;try{e=r,W.props=e.memoizedProps,W.state=e.memoizedState,W.componentWillUnmount()}catch(j){tn(r,n,j)}}break;case 5:qa(O,O.return);break;case 22:if(O.memoizedState!==null){iy(I);continue}}V!==null?(V.return=O,Te=V):iy(I)}C=C.sibling}e:for(C=null,I=t;;){if(I.tag===5){if(C===null){C=I;try{s=I.stateNode,w?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(y=I.stateNode,x=I.memoizedProps.style,d=x!=null&&x.hasOwnProperty("display")?x.display:null,y.style.display=v2("display",d))}catch(j){tn(t,t.return,j)}}}else if(I.tag===6){if(C===null)try{I.stateNode.nodeValue=w?"":I.memoizedProps}catch(j){tn(t,t.return,j)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===t)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===t)break e;for(;I.sibling===null;){if(I.return===null||I.return===t)break e;C===I&&(C=null),I=I.return}C===I&&(C=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:mi(e,t),Li(t),r&4&&ny(t);break;case 21:break;default:mi(e,t),Li(t)}}function Li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xw(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gu(s,""),r.flags&=-33);var l=ty(t);Q1(t,l,s);break;case 3:case 4:var d=r.stateNode.containerInfo,y=ty(t);K1(t,y,d);break;default:throw Error(fe(161))}}catch(x){tn(t,t.return,x)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eS(t,e,n){Te=t,Kw(t)}function Kw(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var s=Te,l=s.child;if(s.tag===22&&r){var d=s.memoizedState!==null||Ih;if(!d){var y=s.alternate,x=y!==null&&y.memoizedState!==null||er;y=Ih;var w=er;if(Ih=d,(er=x)&&!w)for(Te=s;Te!==null;)d=Te,x=d.child,d.tag===22&&d.memoizedState!==null?sy(s):x!==null?(x.return=d,Te=x):sy(s);for(;l!==null;)Te=l,Kw(l),l=l.sibling;Te=s,Ih=y,er=w}ry(t)}else s.subtreeFlags&8772&&l!==null?(l.return=s,Te=l):ry(t)}}function ry(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:er||mf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!er)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:_i(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&V_(e,l,r);break;case 3:var d=e.updateQueue;if(d!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}V_(e,d,n)}break;case 5:var y=e.stateNode;if(n===null&&e.flags&4){n=y;var x=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var w=e.alternate;if(w!==null){var C=w.memoizedState;if(C!==null){var I=C.dehydrated;I!==null&&Yu(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}er||e.flags&512&&q1(e)}catch(O){tn(e,e.return,O)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function iy(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function sy(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mf(4,e)}catch(x){tn(e,n,x)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(x){tn(e,s,x)}}var l=e.return;try{q1(e)}catch(x){tn(e,l,x)}break;case 5:var d=e.return;try{q1(e)}catch(x){tn(e,d,x)}}}catch(x){tn(e,e.return,x)}if(e===t){Te=null;break}var y=e.sibling;if(y!==null){y.return=e.return,Te=y;break}Te=e.return}}var tS=Math.ceil,Td=bs.ReactCurrentDispatcher,vg=bs.ReactCurrentOwner,si=bs.ReactCurrentBatchConfig,ft=0,On=null,fn=null,Hn=0,Br=0,Ka=To(0),xn=0,oc=null,ua=0,_f=0,Eg=0,ku=null,Tr=null,Ag=0,_l=1/0,us=null,Cd=!1,J1=null,uo=null,Sh=!1,no=null,Id=0,Du=0,ep=null,qh=-1,Kh=0;function _r(){return ft&6?on():qh!==-1?qh:qh=on()}function co(t){return t.mode&1?ft&2&&Hn!==0?Hn&-Hn:FI.transition!==null?(Kh===0&&(Kh=k2()),Kh):(t=Et,t!==0||(t=window.event,t=t===void 0?16:z2(t.type)),t):1}function Ci(t,e,n,r){if(50<Du)throw Du=0,ep=null,Error(fe(185));Sc(t,n,r),(!(ft&2)||t!==On)&&(t===On&&(!(ft&2)&&(_f|=n),xn===4&&Ys(t,Hn)),br(t,r),n===1&&ft===0&&!(e.mode&1)&&(_l=on()+500,ff&&Co()))}function br(t,e){var n=t.callbackNode;FC(t,e);var r=ud(t,t===On?Hn:0);if(r===0)n!==null&&p_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&p_(n),e===1)t.tag===0?BI(oy.bind(null,t)):ow(oy.bind(null,t)),MI(function(){!(ft&6)&&Co()}),n=null;else{switch(D2(r)){case 1:n=Yp;break;case 4:n=O2;break;case 16:n=ld;break;case 536870912:n=M2;break;default:n=ld}n=sv(n,Qw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qw(t,e){if(qh=-1,Kh=0,ft&6)throw Error(fe(327));var n=t.callbackNode;if(ol()&&t.callbackNode!==n)return null;var r=ud(t,t===On?Hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sd(t,r);else{e=r;var s=ft;ft|=2;var l=ev();(On!==t||Hn!==e)&&(us=null,_l=on()+500,Jo(t,e));do try{iS();break}catch(y){Jw(t,y)}while(1);lg(),Td.current=l,ft=s,fn!==null?e=0:(On=null,Hn=0,e=xn)}if(e!==0){if(e===2&&(s=S1(t),s!==0&&(r=s,e=tp(t,s))),e===1)throw n=oc,Jo(t,0),Ys(t,r),br(t,on()),n;if(e===6)Ys(t,r);else{if(s=t.current.alternate,!(r&30)&&!nS(s)&&(e=Sd(t,r),e===2&&(l=S1(t),l!==0&&(r=l,e=tp(t,l))),e===1))throw n=oc,Jo(t,0),Ys(t,r),br(t,on()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:Go(t,Tr,us);break;case 3:if(Ys(t,r),(r&130023424)===r&&(e=Ag+500-on(),10<e)){if(ud(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_r(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=D1(Go.bind(null,t,Tr,us),e);break}Go(t,Tr,us);break;case 4:if(Ys(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var d=31-Ti(r);l=1<<d,d=e[d],d>s&&(s=d),r&=~l}if(r=s,r=on()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tS(r/1960))-r,10<r){t.timeoutHandle=D1(Go.bind(null,t,Tr,us),r);break}Go(t,Tr,us);break;case 5:Go(t,Tr,us);break;default:throw Error(fe(329))}}}return br(t,on()),t.callbackNode===n?Qw.bind(null,t):null}function tp(t,e){var n=ku;return t.current.memoizedState.isDehydrated&&(Jo(t,e).flags|=256),t=Sd(t,e),t!==2&&(e=Tr,Tr=n,e!==null&&np(e)),t}function np(t){Tr===null?Tr=t:Tr.push.apply(Tr,t)}function nS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Ii(l(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ys(t,e){for(e&=~Eg,e&=~_f,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ti(e),r=1<<n;t[n]=-1,e&=~r}}function oy(t){if(ft&6)throw Error(fe(327));ol();var e=ud(t,0);if(!(e&1))return br(t,on()),null;var n=Sd(t,e);if(t.tag!==0&&n===2){var r=S1(t);r!==0&&(e=r,n=tp(t,r))}if(n===1)throw n=oc,Jo(t,0),Ys(t,e),br(t,on()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Go(t,Tr,us),br(t,on()),null}function Tg(t,e){var n=ft;ft|=1;try{return t(e)}finally{ft=n,ft===0&&(_l=on()+500,ff&&Co())}}function ca(t){no!==null&&no.tag===0&&!(ft&6)&&ol();var e=ft;ft|=1;var n=si.transition,r=Et;try{if(si.transition=null,Et=1,t)return t()}finally{Et=r,si.transition=n,ft=e,!(ft&6)&&Co()}}function Cg(){Br=Ka.current,zt(Ka)}function Jo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OI(n)),fn!==null)for(n=fn.return;n!==null;){var r=n;switch(sg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pd();break;case 3:gl(),zt(Ir),zt(sr),pg();break;case 5:fg(r);break;case 4:gl();break;case 13:zt(Yt);break;case 19:zt(Yt);break;case 10:ug(r.type._context);break;case 22:case 23:Cg()}n=n.return}if(On=t,fn=t=ho(t.current,null),Hn=Br=e,xn=0,oc=null,Eg=_f=ua=0,Tr=ku=null,Xo!==null){for(e=0;e<Xo.length;e++)if(n=Xo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var d=l.next;l.next=s,r.next=d}n.pending=r}Xo=null}return t}function Jw(t,e){do{var n=fn;try{if(lg(),$h.current=Ad,Ed){for(var r=qt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ed=!1}if(la=0,Nn=yn=qt=null,Ou=!1,rc=0,vg.current=null,n===null||n.return===null){xn=1,oc=e,fn=null;break}e:{var l=t,d=n.return,y=n,x=e;if(e=Hn,y.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var w=x,C=y,I=C.tag;if(!(C.mode&1)&&(I===0||I===11||I===15)){var O=C.alternate;O?(C.updateQueue=O.updateQueue,C.memoizedState=O.memoizedState,C.lanes=O.lanes):(C.updateQueue=null,C.memoizedState=null)}var V=$_(d);if(V!==null){V.flags&=-257,X_(V,d,y,l,e),V.mode&1&&Z_(l,w,e),e=V,x=w;var W=e.updateQueue;if(W===null){var j=new Set;j.add(x),e.updateQueue=j}else W.add(x);break e}else{if(!(e&1)){Z_(l,w,e),Ig();break e}x=Error(fe(426))}}else if(Gt&&y.mode&1){var J=$_(d);if(J!==null){!(J.flags&65536)&&(J.flags|=256),X_(J,d,y,l,e),og(ml(x,y));break e}}l=x=ml(x,y),xn!==4&&(xn=2),ku===null?ku=[l]:ku.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var F=Lw(l,x,e);U_(l,F);break e;case 1:y=x;var D=l.type,B=l.stateNode;if(!(l.flags&128)&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(uo===null||!uo.has(B)))){l.flags|=65536,e&=-e,l.lanes|=e;var G=Bw(l,y,e);U_(l,G);break e}}l=l.return}while(l!==null)}nv(n)}catch(ae){e=ae,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(1)}function ev(){var t=Td.current;return Td.current=Ad,t===null?Ad:t}function Ig(){(xn===0||xn===3||xn===2)&&(xn=4),On===null||!(ua&268435455)&&!(_f&268435455)||Ys(On,Hn)}function Sd(t,e){var n=ft;ft|=2;var r=ev();(On!==t||Hn!==e)&&(us=null,Jo(t,e));do try{rS();break}catch(s){Jw(t,s)}while(1);if(lg(),ft=n,Td.current=r,fn!==null)throw Error(fe(261));return On=null,Hn=0,xn}function rS(){for(;fn!==null;)tv(fn)}function iS(){for(;fn!==null&&!RC();)tv(fn)}function tv(t){var e=iv(t.alternate,t,Br);t.memoizedProps=t.pendingProps,e===null?nv(t):fn=e,vg.current=null}function nv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KI(n,e),n!==null){n.flags&=32767,fn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,fn=null;return}}else if(n=qI(n,e,Br),n!==null){fn=n;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=t}while(e!==null);xn===0&&(xn=5)}function Go(t,e,n){var r=Et,s=si.transition;try{si.transition=null,Et=1,sS(t,e,n,r)}finally{si.transition=s,Et=r}return null}function sS(t,e,n,r){do ol();while(no!==null);if(ft&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(UC(t,l),t===On&&(fn=On=null,Hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sh||(Sh=!0,sv(ld,function(){return ol(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=si.transition,si.transition=null;var d=Et;Et=1;var y=ft;ft|=4,vg.current=null,JI(t,n),qw(n,t),CI(M1),cd=!!O1,M1=O1=null,t.current=n,eS(n),NC(),ft=y,Et=d,si.transition=l}else t.current=n;if(Sh&&(Sh=!1,no=t,Id=s),l=t.pendingLanes,l===0&&(uo=null),MC(n.stateNode),br(t,on()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cd)throw Cd=!1,t=J1,J1=null,t;return Id&1&&t.tag!==0&&ol(),l=t.pendingLanes,l&1?t===ep?Du++:(Du=0,ep=t):Du=0,Co(),null}function ol(){if(no!==null){var t=D2(Id),e=si.transition,n=Et;try{if(si.transition=null,Et=16>t?16:t,no===null)var r=!1;else{if(t=no,no=null,Id=0,ft&6)throw Error(fe(331));var s=ft;for(ft|=4,Te=t.current;Te!==null;){var l=Te,d=l.child;if(Te.flags&16){var y=l.deletions;if(y!==null){for(var x=0;x<y.length;x++){var w=y[x];for(Te=w;Te!==null;){var C=Te;switch(C.tag){case 0:case 11:case 15:Mu(8,C,l)}var I=C.child;if(I!==null)I.return=C,Te=I;else for(;Te!==null;){C=Te;var O=C.sibling,V=C.return;if($w(C),C===w){Te=null;break}if(O!==null){O.return=V,Te=O;break}Te=V}}}var W=l.alternate;if(W!==null){var j=W.child;if(j!==null){W.child=null;do{var J=j.sibling;j.sibling=null,j=J}while(j!==null)}}Te=l}}if(l.subtreeFlags&2064&&d!==null)d.return=l,Te=d;else e:for(;Te!==null;){if(l=Te,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Mu(9,l,l.return)}var F=l.sibling;if(F!==null){F.return=l.return,Te=F;break e}Te=l.return}}var D=t.current;for(Te=D;Te!==null;){d=Te;var B=d.child;if(d.subtreeFlags&2064&&B!==null)B.return=d,Te=B;else e:for(d=D;Te!==null;){if(y=Te,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:mf(9,y)}}catch(ae){tn(y,y.return,ae)}if(y===d){Te=null;break e}var G=y.sibling;if(G!==null){G.return=y.return,Te=G;break e}Te=y.return}}if(ft=s,Co(),Wi&&typeof Wi.onPostCommitFiberRoot=="function")try{Wi.onPostCommitFiberRoot(lf,t)}catch{}r=!0}return r}finally{Et=n,si.transition=e}}return!1}function ay(t,e,n){e=ml(n,e),e=Lw(t,e,1),t=lo(t,e,1),e=_r(),t!==null&&(Sc(t,1,e),br(t,e))}function tn(t,e,n){if(t.tag===3)ay(t,t,n);else for(;e!==null;){if(e.tag===3){ay(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(uo===null||!uo.has(r))){t=ml(n,t),t=Bw(e,t,1),e=lo(e,t,1),t=_r(),e!==null&&(Sc(e,1,t),br(e,t));break}}e=e.return}}function oS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_r(),t.pingedLanes|=t.suspendedLanes&n,On===t&&(Hn&n)===n&&(xn===4||xn===3&&(Hn&130023424)===Hn&&500>on()-Ag?Jo(t,0):Eg|=n),br(t,e)}function rv(t,e){e===0&&(t.mode&1?(e=_h,_h<<=1,!(_h&130023424)&&(_h=4194304)):e=1);var n=_r();t=As(t,e),t!==null&&(Sc(t,e,n),br(t,n))}function aS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rv(t,n)}function lS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),rv(t,n)}var iv;iv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ir.current)Cr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Cr=!1,YI(t,e,n);Cr=!!(t.flags&131072)}else Cr=!1,Gt&&e.flags&1048576&&aw(e,_d,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yh(t,e),t=e.pendingProps;var s=dl(e,sr.current);sl(e,n),s=mg(null,e,r,t,s,n);var l=_g();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sr(r)?(l=!0,gd(e)):l=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hg(e),s.updater=pf,e.stateNode=s,s._reactInternals=e,j1(e,r,t,n),e=G1(null,e,r,!0,l,n)):(e.tag=0,Gt&&l&&ig(e),gr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cS(r),t=_i(r,t),s){case 0:e=W1(null,e,r,t,n);break e;case 1:e=K_(null,e,r,t,n);break e;case 11:e=Y_(null,e,r,t,n);break e;case 14:e=q_(null,e,r,_i(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_i(r,s),W1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_i(r,s),K_(t,e,r,s,n);case 3:e:{if(zw(e),t===null)throw Error(fe(387));r=e.pendingProps,l=e.memoizedState,s=l.element,hw(t,e),wd(e,r,null,n);var d=e.memoizedState;if(r=d.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){s=ml(Error(fe(423)),e),e=Q_(t,e,r,n,s);break e}else if(r!==s){s=ml(Error(fe(424)),e),e=Q_(t,e,r,n,s);break e}else for(Ur=ao(e.stateNode.containerInfo.firstChild),zr=e,Gt=!0,wi=null,n=gw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fl(),r===s){e=Ts(t,e,n);break e}gr(t,e,r,n)}e=e.child}return e;case 5:return mw(e),t===null&&U1(e),r=e.type,s=e.pendingProps,l=t!==null?t.memoizedProps:null,d=s.children,k1(r,s)?d=null:l!==null&&k1(r,l)&&(e.flags|=32),Vw(t,e),gr(t,e,d,n),e.child;case 6:return t===null&&U1(e),null;case 13:return jw(t,e,n);case 4:return dg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pl(e,null,r,n):gr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_i(r,s),Y_(t,e,r,s,n);case 7:return gr(t,e,e.pendingProps,n),e.child;case 8:return gr(t,e,e.pendingProps.children,n),e.child;case 12:return gr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,l=e.memoizedProps,d=s.value,kt(yd,r._currentValue),r._currentValue=d,l!==null)if(Ii(l.value,d)){if(l.children===s.children&&!Ir.current){e=Ts(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var y=l.dependencies;if(y!==null){d=l.child;for(var x=y.firstContext;x!==null;){if(x.context===r){if(l.tag===1){x=_s(-1,n&-n),x.tag=2;var w=l.updateQueue;if(w!==null){w=w.shared;var C=w.pending;C===null?x.next=x:(x.next=C.next,C.next=x),w.pending=x}}l.lanes|=n,x=l.alternate,x!==null&&(x.lanes|=n),V1(l.return,n,e),y.lanes|=n;break}x=x.next}}else if(l.tag===10)d=l.type===e.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(fe(341));d.lanes|=n,y=d.alternate,y!==null&&(y.lanes|=n),V1(d,n,e),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===e){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}gr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,sl(e,n),s=oi(s),r=r(s),e.flags|=1,gr(t,e,r,n),e.child;case 14:return r=e.type,s=_i(r,e.pendingProps),s=_i(r.type,s),q_(t,e,r,s,n);case 15:return Fw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_i(r,s),Yh(t,e),e.tag=1,Sr(r)?(t=!0,gd(e)):t=!1,sl(e,n),fw(e,r,s),j1(e,r,s,n),G1(null,e,r,!0,t,n);case 19:return Hw(t,e,n);case 22:return Uw(t,e,n)}throw Error(fe(156,e.tag))};function sv(t,e){return P2(t,e)}function uS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(t,e,n,r){return new uS(t,e,n,r)}function Sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cS(t){if(typeof t=="function")return Sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zp)return 11;if(t===$p)return 14}return 2}function ho(t,e){var n=t.alternate;return n===null?(n=ii(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qh(t,e,n,r,s,l){var d=2;if(r=t,typeof t=="function")Sg(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case za:return ea(n.children,s,l,e);case Gp:d=8,s|=8;break;case d1:return t=ii(12,n,e,s|2),t.elementType=d1,t.lanes=l,t;case f1:return t=ii(13,n,e,s),t.elementType=f1,t.lanes=l,t;case p1:return t=ii(19,n,e,s),t.elementType=p1,t.lanes=l,t;case p2:return yf(n,s,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case d2:d=10;break e;case f2:d=9;break e;case Zp:d=11;break e;case $p:d=14;break e;case Zs:d=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=ii(d,n,e,s),e.elementType=t,e.type=r,e.lanes=l,e}function ea(t,e,n,r){return t=ii(7,t,r,e),t.lanes=n,t}function yf(t,e,n,r){return t=ii(22,t,r,e),t.elementType=p2,t.lanes=n,t.stateNode={isHidden:!1},t}function B0(t,e,n){return t=ii(6,t,null,e),t.lanes=n,t}function F0(t,e,n){return e=ii(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y0(0),this.expirationTimes=y0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bg(t,e,n,r,s,l,d,y,x){return t=new hS(t,e,n,y,x),e===1?(e=1,l===!0&&(e|=8)):e=0,l=ii(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hg(l),t}function dS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Va,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ov(t){if(!t)return _o;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(Sr(n))return sw(t,n,e)}return e}function av(t,e,n,r,s,l,d,y,x){return t=bg(n,r,!0,t,s,l,d,y,x),t.context=ov(null),n=t.current,r=_r(),s=co(n),l=_s(r,s),l.callback=e??null,lo(n,l,s),t.current.lanes=s,Sc(t,s,r),br(t,r),t}function xf(t,e,n,r){var s=e.current,l=_r(),d=co(s);return n=ov(n),e.context===null?e.context=n:e.pendingContext=n,e=_s(l,d),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=lo(s,e,d),t!==null&&(Ci(t,s,d,l),Zh(t,s,d)),d}function bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ly(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rg(t,e){ly(t,e),(t=t.alternate)&&ly(t,e)}function fS(){return null}var lv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ng(t){this._internalRoot=t}wf.prototype.render=Ng.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));xf(t,e,null,null)};wf.prototype.unmount=Ng.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ca(function(){xf(null,t,null,null)}),e[Es]=null}};function wf(t){this._internalRoot=t}wf.prototype.unstable_scheduleHydration=function(t){if(t){var e=F2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xs.length&&e!==0&&e<Xs[n].priority;n++);Xs.splice(n,0,t),n===0&&V2(t)}};function Pg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uy(){}function pS(t,e,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var w=bd(d);l.call(w)}}var d=av(e,r,t,0,null,!1,!1,"",uy);return t._reactRootContainer=d,t[Es]=d.current,Qu(t.nodeType===8?t.parentNode:t),ca(),d}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var y=r;r=function(){var w=bd(x);y.call(w)}}var x=bg(t,0,!1,null,null,!1,!1,"",uy);return t._reactRootContainer=x,t[Es]=x.current,Qu(t.nodeType===8?t.parentNode:t),ca(function(){xf(e,x,n,r)}),x}function Ef(t,e,n,r,s){var l=n._reactRootContainer;if(l){var d=l;if(typeof s=="function"){var y=s;s=function(){var x=bd(d);y.call(x)}}xf(e,d,t,s)}else d=pS(n,e,t,s,r);return bd(d)}L2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vu(e.pendingLanes);n!==0&&(qp(e,n|1),br(e,on()),!(ft&6)&&(_l=on()+500,Co()))}break;case 13:ca(function(){var r=As(t,1);if(r!==null){var s=_r();Ci(r,t,1,s)}}),Rg(t,1)}};Kp=function(t){if(t.tag===13){var e=As(t,134217728);if(e!==null){var n=_r();Ci(e,t,134217728,n)}Rg(t,134217728)}};B2=function(t){if(t.tag===13){var e=co(t),n=As(t,e);if(n!==null){var r=_r();Ci(n,t,e,r)}Rg(t,e)}};F2=function(){return Et};U2=function(t,e){var n=Et;try{return Et=t,e()}finally{Et=n}};T1=function(t,e,n){switch(e){case"input":if(_1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=df(r);if(!s)throw Error(fe(90));m2(r),_1(r,s)}}}break;case"textarea":y2(t,n);break;case"select":e=n.value,e!=null&&tl(t,!!n.multiple,e,!1)}};C2=Tg;I2=ca;var gS={usingClientEntryPoint:!1,Events:[Rc,Ga,df,A2,T2,Tg]},fu={findFiberByHostInstance:$o,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mS={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=R2(t),t===null?null:t.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||fS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bh.isDisabled&&bh.supportsFiber)try{lf=bh.inject(mS),Wi=bh}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gS;Wr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pg(e))throw Error(fe(200));return dS(t,e,null,n)};Wr.createRoot=function(t,e){if(!Pg(t))throw Error(fe(299));var n=!1,r="",s=lv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bg(t,1,!1,null,null,n,!1,r,s),t[Es]=e.current,Qu(t.nodeType===8?t.parentNode:t),new Ng(e)};Wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=R2(e),t=t===null?null:t.stateNode,t};Wr.flushSync=function(t){return ca(t)};Wr.hydrate=function(t,e,n){if(!vf(e))throw Error(fe(200));return Ef(null,t,e,!0,n)};Wr.hydrateRoot=function(t,e,n){if(!Pg(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",d=lv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),e=av(e,null,t,1,n??null,s,!1,l,d),t[Es]=e.current,Qu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wf(e)};Wr.render=function(t,e,n){if(!vf(e))throw Error(fe(200));return Ef(null,t,e,!1,n)};Wr.unmountComponentAtNode=function(t){if(!vf(t))throw Error(fe(40));return t._reactRootContainer?(ca(function(){Ef(null,null,t,!1,function(){t._reactRootContainer=null,t[Es]=null})}),!0):!1};Wr.unstable_batchedUpdates=Tg;Wr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vf(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Ef(t,e,n,!1,r)};Wr.version="18.2.0-next-9e3b772b8-20220608";function uv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uv)}catch(t){console.error(t)}}uv(),a2.exports=Wr;var _S=a2.exports,cy=_S;c1.createRoot=cy.createRoot,c1.hydrateRoot=cy.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ac(){return ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ac.apply(this,arguments)}var ro;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ro||(ro={}));const hy="popstate";function yS(t){t===void 0&&(t={});function e(r,s){let{pathname:l,search:d,hash:y}=r.location;return rp("",{pathname:l,search:d,hash:y},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Rd(s)}return wS(e,n,null,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Og(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xS(){return Math.random().toString(36).substr(2,8)}function dy(t,e){return{usr:t.state,key:t.key,idx:e}}function rp(t,e,n,r){return n===void 0&&(n=null),ac({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bl(e):e,{state:n,key:e&&e.key||r||xS()})}function Rd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,d=s.history,y=ro.Pop,x=null,w=C();w==null&&(w=0,d.replaceState(ac({},d.state,{idx:w}),""));function C(){return(d.state||{idx:null}).idx}function I(){y=ro.Pop;let J=C(),F=J==null?null:J-w;w=J,x&&x({action:y,location:j.location,delta:F})}function O(J,F){y=ro.Push;let D=rp(j.location,J,F);n&&n(D,J),w=C()+1;let B=dy(D,w),G=j.createHref(D);try{d.pushState(B,"",G)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;s.location.assign(G)}l&&x&&x({action:y,location:j.location,delta:1})}function V(J,F){y=ro.Replace;let D=rp(j.location,J,F);n&&n(D,J),w=C();let B=dy(D,w),G=j.createHref(D);d.replaceState(B,"",G),l&&x&&x({action:y,location:j.location,delta:0})}function W(J){let F=s.location.origin!=="null"?s.location.origin:s.location.href,D=typeof J=="string"?J:Rd(J);return an(F,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,F)}let j={get action(){return y},get location(){return t(s,d)},listen(J){if(x)throw new Error("A history only accepts one active listener");return s.addEventListener(hy,I),x=J,()=>{s.removeEventListener(hy,I),x=null}},createHref(J){return e(s,J)},createURL:W,encodeLocation(J){let F=W(J);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:O,replace:V,go(J){return d.go(J)}};return j}var fy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fy||(fy={}));function vS(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?bl(e):e,s=Mg(r.pathname||"/",n);if(s==null)return null;let l=cv(t);ES(l);let d=null;for(let y=0;d==null&&y<l.length;++y)d=PS(l[y],kS(s));return d}function cv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,d,y)=>{let x={relativePath:y===void 0?l.path||"":y,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};x.relativePath.startsWith("/")&&(an(x.relativePath.startsWith(r),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(r.length));let w=fo([r,x.relativePath]),C=n.concat(x);l.children&&l.children.length>0&&(an(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),cv(l.children,e,C,w)),!(l.path==null&&!l.index)&&e.push({path:w,score:RS(w,l.index),routesMeta:C})};return t.forEach((l,d)=>{var y;if(l.path===""||!((y=l.path)!=null&&y.includes("?")))s(l,d);else for(let x of hv(l.path))s(l,d,x)}),e}function hv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let d=hv(r.join("/")),y=[];return y.push(...d.map(x=>x===""?l:[l,x].join("/"))),s&&y.push(...d),y.map(x=>t.startsWith("/")&&x===""?"/":x)}function ES(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const AS=/^:\w+$/,TS=3,CS=2,IS=1,SS=10,bS=-2,py=t=>t==="*";function RS(t,e){let n=t.split("/"),r=n.length;return n.some(py)&&(r+=bS),e&&(r+=CS),n.filter(s=>!py(s)).reduce((s,l)=>s+(AS.test(l)?TS:l===""?IS:SS),r)}function NS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function PS(t,e){let{routesMeta:n}=t,r={},s="/",l=[];for(let d=0;d<n.length;++d){let y=n[d],x=d===n.length-1,w=s==="/"?e:e.slice(s.length)||"/",C=OS({path:y.relativePath,caseSensitive:y.caseSensitive,end:x},w);if(!C)return null;Object.assign(r,C.params);let I=y.route;l.push({params:r,pathname:fo([s,C.pathname]),pathnameBase:FS(fo([s,C.pathnameBase])),route:I}),C.pathnameBase!=="/"&&(s=fo([s,C.pathnameBase]))}return l}function OS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let l=s[0],d=l.replace(/(.)\/+$/,"$1"),y=s.slice(1);return{params:r.reduce((w,C,I)=>{if(C==="*"){let O=y[I]||"";d=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}return w[C]=DS(y[I]||"",C),w},{}),pathname:l,pathnameBase:d,pattern:t}}function MS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Og(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(d,y)=>(r.push(y),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kS(t){try{return decodeURI(t)}catch(e){return Og(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function DS(t,e){try{return decodeURIComponent(t)}catch(n){return Og(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Mg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function LS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bl(t):t;return{pathname:n?n.startsWith("/")?n:BS(n,e):e,search:US(r),hash:VS(s)}}function BS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function U0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kg(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=bl(t):(s=ac({},t),an(!s.pathname||!s.pathname.includes("?"),U0("?","pathname","search",s)),an(!s.pathname||!s.pathname.includes("#"),U0("#","pathname","hash",s)),an(!s.search||!s.search.includes("#"),U0("#","search","hash",s)));let l=t===""||s.pathname==="",d=l?"/":s.pathname,y;if(r||d==null)y=n;else{let I=e.length-1;if(d.startsWith("..")){let O=d.split("/");for(;O[0]==="..";)O.shift(),I-=1;s.pathname=O.join("/")}y=I>=0?e[I]:"/"}let x=LS(s,y),w=d&&d!=="/"&&d.endsWith("/"),C=(l||d===".")&&n.endsWith("/");return!x.pathname.endsWith("/")&&(w||C)&&(x.pathname+="/"),x}const fo=t=>t.join("/").replace(/\/\/+/g,"/"),FS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),US=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dv=["post","put","patch","delete"];new Set(dv);const jS=["get",...dv];new Set(jS);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}const Lg=me.createContext(null),HS=me.createContext(null),Rl=me.createContext(null),Af=me.createContext(null),Io=me.createContext({outlet:null,matches:[],isDataRoute:!1}),fv=me.createContext(null);function WS(t,e){let{relative:n}=e===void 0?{}:e;Nl()||an(!1);let{basename:r,navigator:s}=me.useContext(Rl),{hash:l,pathname:d,search:y}=gv(t,{relative:n}),x=d;return r!=="/"&&(x=d==="/"?r:fo([r,d])),s.createHref({pathname:x,search:y,hash:l})}function Nl(){return me.useContext(Af)!=null}function Pc(){return Nl()||an(!1),me.useContext(Af).location}function pv(t){me.useContext(Rl).static||me.useLayoutEffect(t)}function Tf(){let{isDataRoute:t}=me.useContext(Io);return t?r3():GS()}function GS(){Nl()||an(!1);let t=me.useContext(Lg),{basename:e,navigator:n}=me.useContext(Rl),{matches:r}=me.useContext(Io),{pathname:s}=Pc(),l=JSON.stringify(kg(r).map(x=>x.pathnameBase)),d=me.useRef(!1);return pv(()=>{d.current=!0}),me.useCallback(function(x,w){if(w===void 0&&(w={}),!d.current)return;if(typeof x=="number"){n.go(x);return}let C=Dg(x,JSON.parse(l),s,w.relative==="path");t==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:fo([e,C.pathname])),(w.replace?n.replace:n.push)(C,w.state,w)},[e,n,l,s,t])}function gv(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=me.useContext(Io),{pathname:s}=Pc(),l=JSON.stringify(kg(r).map(d=>d.pathnameBase));return me.useMemo(()=>Dg(t,JSON.parse(l),s,n==="path"),[t,l,s,n])}function ZS(t,e){return $S(t,e)}function $S(t,e,n){Nl()||an(!1);let{navigator:r}=me.useContext(Rl),{matches:s}=me.useContext(Io),l=s[s.length-1],d=l?l.params:{};l&&l.pathname;let y=l?l.pathnameBase:"/";l&&l.route;let x=Pc(),w;if(e){var C;let j=typeof e=="string"?bl(e):e;y==="/"||(C=j.pathname)!=null&&C.startsWith(y)||an(!1),w=j}else w=x;let I=w.pathname||"/",O=y==="/"?I:I.slice(y.length)||"/",V=vS(t,{pathname:O}),W=QS(V&&V.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:fo([y,r.encodeLocation?r.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?y:fo([y,r.encodeLocation?r.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),s,n);return e&&W?me.createElement(Af.Provider,{value:{location:Nd({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:ro.Pop}},W):W}function XS(){let t=n3(),e=zS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},l=null;return me.createElement(me.Fragment,null,me.createElement("h2",null,"Unexpected Application Error!"),me.createElement("h3",{style:{fontStyle:"italic"}},e),n?me.createElement("pre",{style:s},n):null,l)}const YS=me.createElement(XS,null);class qS extends me.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?me.createElement(Io.Provider,{value:this.props.routeContext},me.createElement(fv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KS(t){let{routeContext:e,match:n,children:r}=t,s=me.useContext(Lg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),me.createElement(Io.Provider,{value:e},r)}function QS(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let l=t,d=(r=n)==null?void 0:r.errors;if(d!=null){let y=l.findIndex(x=>x.route.id&&(d==null?void 0:d[x.route.id]));y>=0||an(!1),l=l.slice(0,Math.min(l.length,y+1))}return l.reduceRight((y,x,w)=>{let C=x.route.id?d==null?void 0:d[x.route.id]:null,I=null;n&&(I=x.route.errorElement||YS);let O=e.concat(l.slice(0,w+1)),V=()=>{let W;return C?W=I:x.route.Component?W=me.createElement(x.route.Component,null):x.route.element?W=x.route.element:W=y,me.createElement(KS,{match:x,routeContext:{outlet:y,matches:O,isDataRoute:n!=null},children:W})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?me.createElement(qS,{location:n.location,revalidation:n.revalidation,component:I,error:C,children:V(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):V()},null)}var mv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mv||{}),Pd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pd||{});function JS(t){let e=me.useContext(Lg);return e||an(!1),e}function e3(t){let e=me.useContext(HS);return e||an(!1),e}function t3(t){let e=me.useContext(Io);return e||an(!1),e}function _v(t){let e=t3(),n=e.matches[e.matches.length-1];return n.route.id||an(!1),n.route.id}function n3(){var t;let e=me.useContext(fv),n=e3(Pd.UseRouteError),r=_v(Pd.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function r3(){let{router:t}=JS(mv.UseNavigateStable),e=_v(Pd.UseNavigateStable),n=me.useRef(!1);return pv(()=>{n.current=!0}),me.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Nd({fromRouteId:e},l)))},[t,e])}function i3(t){let{to:e,replace:n,state:r,relative:s}=t;Nl()||an(!1);let{matches:l}=me.useContext(Io),{pathname:d}=Pc(),y=Tf(),x=Dg(e,kg(l).map(C=>C.pathnameBase),d,s==="path"),w=JSON.stringify(x);return me.useEffect(()=>y(JSON.parse(w),{replace:n,state:r,relative:s}),[y,w,s,n,r]),null}function ls(t){an(!1)}function s3(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ro.Pop,navigator:l,static:d=!1}=t;Nl()&&an(!1);let y=e.replace(/^\/*/,"/"),x=me.useMemo(()=>({basename:y,navigator:l,static:d}),[y,l,d]);typeof r=="string"&&(r=bl(r));let{pathname:w="/",search:C="",hash:I="",state:O=null,key:V="default"}=r,W=me.useMemo(()=>{let j=Mg(w,y);return j==null?null:{location:{pathname:j,search:C,hash:I,state:O,key:V},navigationType:s}},[y,w,C,I,O,V,s]);return W==null?null:me.createElement(Rl.Provider,{value:x},me.createElement(Af.Provider,{children:n,value:W}))}function o3(t){let{children:e,location:n}=t;return ZS(ip(e),n)}new Promise(()=>{});function ip(t,e){e===void 0&&(e=[]);let n=[];return me.Children.forEach(t,(r,s)=>{if(!me.isValidElement(r))return;let l=[...e,s];if(r.type===me.Fragment){n.push.apply(n,ip(r.props.children,l));return}r.type!==ls&&an(!1),!r.props.index||!r.props.children||an(!1);let d={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=ip(r.props.children,l)),n.push(d)}),n}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sp(){return sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sp.apply(this,arguments)}function a3(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,l;for(l=0;l<r.length;l++)s=r[l],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function l3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function u3(t,e){return t.button===0&&(!e||e==="_self")&&!l3(t)}const c3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],h3="startTransition",gy=aC[h3];function d3(t){let{basename:e,children:n,future:r,window:s}=t,l=me.useRef();l.current==null&&(l.current=yS({window:s,v5Compat:!0}));let d=l.current,[y,x]=me.useState({action:d.action,location:d.location}),{v7_startTransition:w}=r||{},C=me.useCallback(I=>{w&&gy?gy(()=>x(I)):x(I)},[x,w]);return me.useLayoutEffect(()=>d.listen(C),[d,C]),me.createElement(s3,{basename:e,children:n,location:y.location,navigationType:y.action,navigator:d})}const f3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",p3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,op=me.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:l,replace:d,state:y,target:x,to:w,preventScrollReset:C}=e,I=a3(e,c3),{basename:O}=me.useContext(Rl),V,W=!1;if(typeof w=="string"&&p3.test(w)&&(V=w,f3))try{let D=new URL(window.location.href),B=w.startsWith("//")?new URL(D.protocol+w):new URL(w),G=Mg(B.pathname,O);B.origin===D.origin&&G!=null?w=G+B.search+B.hash:W=!0}catch{}let j=WS(w,{relative:s}),J=g3(w,{replace:d,state:y,target:x,preventScrollReset:C,relative:s});function F(D){r&&r(D),D.defaultPrevented||J(D)}return me.createElement("a",sp({},I,{href:V||j,onClick:W||l?r:F,ref:n,target:x}))});var my;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(my||(my={}));var _y;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_y||(_y={}));function g3(t,e){let{target:n,replace:r,state:s,preventScrollReset:l,relative:d}=e===void 0?{}:e,y=Tf(),x=Pc(),w=gv(t,{relative:d});return me.useCallback(C=>{if(u3(C,n)){C.preventDefault();let I=r!==void 0?r:Rd(x)===Rd(w);y(t,{replace:I,state:s,preventScrollReset:l,relative:d})}},[x,y,w,r,s,n,t,l,d])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},m3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=t[n++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=t[n++],d=t[n++],y=t[n++],x=((s&7)<<18|(l&63)<<12|(d&63)<<6|y&63)-65536;e[r++]=String.fromCharCode(55296+(x>>10)),e[r++]=String.fromCharCode(56320+(x&1023))}else{const l=t[n++],d=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|d&63)}}return e.join("")},xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const l=t[s],d=s+1<t.length,y=d?t[s+1]:0,x=s+2<t.length,w=x?t[s+2]:0,C=l>>2,I=(l&3)<<4|y>>4;let O=(y&15)<<2|w>>6,V=w&63;x||(V=64,d||(O=64)),r.push(n[C],n[I],n[O],n[V])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):m3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const l=n[t.charAt(s++)],y=s<t.length?n[t.charAt(s)]:0;++s;const w=s<t.length?n[t.charAt(s)]:64;++s;const I=s<t.length?n[t.charAt(s)]:64;if(++s,l==null||y==null||w==null||I==null)throw new _3;const O=l<<2|y>>4;if(r.push(O),w!==64){const V=y<<4&240|w>>2;if(r.push(V),I!==64){const W=w<<6&192|I;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y3=function(t){const e=yv(t);return xv.encodeByteArray(e,!0)},Od=function(t){return y3(t).replace(/\./g,"")},wv=function(t){try{return xv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=()=>x3().__FIREBASE_DEFAULTS__,v3=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},E3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wv(t[1]);return e&&JSON.parse(e)},Cf=()=>{try{return w3()||v3()||E3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vv=t=>{var e,n;return(n=(e=Cf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ev=t=>{const e=vv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Av=()=>{var t;return(t=Cf())===null||t===void 0?void 0:t.config},Tv=t=>{var e;return(e=Cf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t),y="";return[Od(JSON.stringify(n)),Od(JSON.stringify(d)),y].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function C3(){var t;const e=(t=Cf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function S3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b3(){const t=or();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function R3(){try{return typeof indexedDB=="object"}catch{return!1}}function N3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="FirebaseError";class Ki extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=P3,Object.setPrototypeOf(this,Ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oc.prototype.create)}}class Oc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,l=this.errors[e],d=l?O3(l,r):"Error",y=`${this.serviceName}: ${d} (${s}).`;return new Ki(s,y,r)}}function O3(t,e){return t.replace(M3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const M3=/\{\$([^}]+)}/g;function k3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Md(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const l=t[s],d=e[s];if(yy(l)&&yy(d)){if(!Md(l,d))return!1}else if(l!==d)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Au(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function Tu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function D3(t,e){const n=new L3(t,e);return n.subscribe.bind(n)}class L3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");B3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=V0),s.error===void 0&&(s.error=V0),s.complete===void 0&&(s.complete=V0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function V0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new A3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V3(e))try{this.getOrInitializeService({instanceIdentifier:Zo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=Zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zo){return this.instances.has(e)}getOptions(e=Zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(l);r===y&&d.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(s,l);const d=this.instances.get(s);return d&&e(d,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zo){return this.component?this.component.multipleInstances?e:Zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U3(t){return t===Zo?void 0:t}function V3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const j3={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},H3=at.INFO,W3={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},G3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=W3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bg{constructor(e){this.name=e,this._logLevel=H3,this._logHandler=G3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const Z3=(t,e)=>e.some(n=>t instanceof n);let xy,wy;function $3(){return xy||(xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X3(){return wy||(wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Iv=new WeakMap,ap=new WeakMap,Sv=new WeakMap,z0=new WeakMap,Fg=new WeakMap;function Y3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",l),t.removeEventListener("error",d)},l=()=>{n(po(t.result)),s()},d=()=>{r(t.error),s()};t.addEventListener("success",l),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Iv.set(n,t)}).catch(()=>{}),Fg.set(e,t),e}function q3(t){if(ap.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",d),t.removeEventListener("abort",d)},l=()=>{n(),s()},d=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",l),t.addEventListener("error",d),t.addEventListener("abort",d)});ap.set(t,e)}let lp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Sv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return po(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K3(t){lp=t(lp)}function Q3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(j0(this),e,...n);return Sv.set(r,e.sort?e.sort():[e]),po(r)}:X3().includes(t)?function(...e){return t.apply(j0(this),e),po(Iv.get(this))}:function(...e){return po(t.apply(j0(this),e))}}function J3(t){return typeof t=="function"?Q3(t):(t instanceof IDBTransaction&&q3(t),Z3(t,$3())?new Proxy(t,lp):t)}function po(t){if(t instanceof IDBRequest)return Y3(t);if(z0.has(t))return z0.get(t);const e=J3(t);return e!==t&&(z0.set(t,e),Fg.set(e,t)),e}const j0=t=>Fg.get(t);function e4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:l}={}){const d=indexedDB.open(t,e),y=po(d);return r&&d.addEventListener("upgradeneeded",x=>{r(po(d.result),x.oldVersion,x.newVersion,po(d.transaction),x)}),n&&d.addEventListener("blocked",x=>n(x.oldVersion,x.newVersion,x)),y.then(x=>{l&&x.addEventListener("close",()=>l()),s&&x.addEventListener("versionchange",w=>s(w.oldVersion,w.newVersion,w))}).catch(()=>{}),y}const t4=["get","getKey","getAll","getAllKeys","count"],n4=["put","add","delete","clear"],H0=new Map;function vy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(H0.get(e))return H0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=n4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||t4.includes(n)))return;const l=async function(d,...y){const x=this.transaction(d,s?"readwrite":"readonly");let w=x.store;return r&&(w=w.index(y.shift())),(await Promise.all([w[n](...y),s&&x.done]))[0]};return H0.set(e,l),l}K3(t=>({...t,get:(e,n,r)=>vy(e,n)||t.get(e,n,r),has:(e,n)=>!!vy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const up="@firebase/app",Ey="0.9.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new Bg("@firebase/app"),s4="@firebase/app-compat",o4="@firebase/analytics-compat",a4="@firebase/analytics",l4="@firebase/app-check-compat",u4="@firebase/app-check",c4="@firebase/auth",h4="@firebase/auth-compat",d4="@firebase/database",f4="@firebase/database-compat",p4="@firebase/functions",g4="@firebase/functions-compat",m4="@firebase/installations",_4="@firebase/installations-compat",y4="@firebase/messaging",x4="@firebase/messaging-compat",w4="@firebase/performance",v4="@firebase/performance-compat",E4="@firebase/remote-config",A4="@firebase/remote-config-compat",T4="@firebase/storage",C4="@firebase/storage-compat",I4="@firebase/firestore",S4="@firebase/firestore-compat",b4="firebase",R4="10.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",N4={[up]:"fire-core",[s4]:"fire-core-compat",[a4]:"fire-analytics",[o4]:"fire-analytics-compat",[u4]:"fire-app-check",[l4]:"fire-app-check-compat",[c4]:"fire-auth",[h4]:"fire-auth-compat",[d4]:"fire-rtdb",[f4]:"fire-rtdb-compat",[p4]:"fire-fn",[g4]:"fire-fn-compat",[m4]:"fire-iid",[_4]:"fire-iid-compat",[y4]:"fire-fcm",[x4]:"fire-fcm-compat",[w4]:"fire-perf",[v4]:"fire-perf-compat",[E4]:"fire-rc",[A4]:"fire-rc-compat",[T4]:"fire-gcs",[C4]:"fire-gcs-compat",[I4]:"fire-fst",[S4]:"fire-fst-compat","fire-js":"fire-js",[b4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map,hp=new Map;function P4(t,e){try{t.container.addComponent(e)}catch(n){ha.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function da(t){const e=t.name;if(hp.has(e))return ha.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,t);for(const n of kd.values())P4(n,t);return!0}function If(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},go=new Oc("app","Firebase",O4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw go.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=R4;function bv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:cp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw go.create("bad-app-name",{appName:String(s)});if(n||(n=Av()),!n)throw go.create("no-options");const l=kd.get(s);if(l){if(Md(n,l.options)&&Md(r,l.config))return l;throw go.create("duplicate-app",{appName:s})}const d=new z3(s);for(const x of hp.values())d.addComponent(x);const y=new M4(n,r,d);return kd.set(s,y),y}function Ug(t=cp){const e=kd.get(t);if(!e&&t===cp&&Av())return bv();if(!e)throw go.create("no-app",{appName:t});return e}function Zi(t,e,n){var r;let s=(r=N4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const l=s.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const y=[`Unable to register library "${s}" with version "${e}":`];l&&y.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&d&&y.push("and"),d&&y.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ha.warn(y.join(" "));return}da(new yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="firebase-heartbeat-database",D4=1,lc="firebase-heartbeat-store";let W0=null;function Rv(){return W0||(W0=e4(k4,D4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(lc)}}}).catch(t=>{throw go.create("idb-open",{originalErrorMessage:t.message})})),W0}async function L4(t){try{return await(await Rv()).transaction(lc).objectStore(lc).get(Nv(t))}catch(e){if(e instanceof Ki)ha.warn(e.message);else{const n=go.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ha.warn(n.message)}}}async function Ay(t,e){try{const r=(await Rv()).transaction(lc,"readwrite");await r.objectStore(lc).put(e,Nv(t)),await r.done}catch(n){if(n instanceof Ki)ha.warn(n.message);else{const r=go.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ha.warn(r.message)}}}function Nv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=1024,F4=30*24*60*60*1e3;class U4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ty();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=F4}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ty(),{heartbeatsToSend:n,unsentEntries:r}=V4(this._heartbeatsCache.heartbeats),s=Od(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ty(){return new Date().toISOString().substring(0,10)}function V4(t,e=B4){const n=[];let r=t.slice();for(const s of t){const l=n.find(d=>d.agent===s.agent);if(l){if(l.dates.push(s.date),Cy(n)>e){l.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R3()?N3().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await L4(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Cy(t){return Od(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t){da(new yo("platform-logger",e=>new r4(e),"PRIVATE")),da(new yo("heartbeat",e=>new U4(e),"PRIVATE")),Zi(up,Ey,t),Zi(up,Ey,"esm2017"),Zi("fire-js","")}j4("");var H4="firebase",W4="10.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi(H4,W4,"app");function Vg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Iy(t){return t!==void 0&&t.enterprise!==void 0}class G4{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function Pv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z4=Pv,Ov=new Oc("auth","Firebase",Pv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new Bg("@firebase/auth");function $4(t,...e){Dd.logLevel<=at.WARN&&Dd.warn(`Auth (${va}): ${t}`,...e)}function Jh(t,...e){Dd.logLevel<=at.ERROR&&Dd.error(`Auth (${va}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,...e){throw zg(t,...e)}function $i(t,...e){return zg(t,...e)}function X4(t,e,n){const r=Object.assign(Object.assign({},Z4()),{[e]:n});return new Oc("auth","Firebase",r).create(e,{appName:t.name})}function zg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ov.create(t,...e)}function Ue(t,e,...n){if(!t)throw zg(e,...n)}function fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jh(e),new Error(e)}function Cs(t,e){t||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Y4(){return Sy()==="http:"||Sy()==="https:"}function Sy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y4()||I3()||"connection"in navigator)?navigator.onLine:!0}function K4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cs(n>e,"Short delay should be less than long delay!"),this.isMobile=T3()||S3()}get(){return q4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e){Cs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new kc(3e4,6e4);function Ea(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function So(t,e,n,r,s={}){return kv(t,s,async()=>{let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});const y=Mc(Object.assign({key:t.config.apiKey},d)).slice(1),x=await t._getAdditionalHeaders();return x["Content-Type"]="application/json",t.languageCode&&(x["X-Firebase-Locale"]=t.languageCode),Mv.fetch()(Dv(t,t.config.apiHost,n,y),Object.assign({method:e,headers:x,referrerPolicy:"no-referrer"},l))})}async function kv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Q4),e);try{const s=new eb(t),l=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Rh(t,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const y=l.ok?d.errorMessage:d.error.message,[x,w]=y.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rh(t,"credential-already-in-use",d);if(x==="EMAIL_EXISTS")throw Rh(t,"email-already-in-use",d);if(x==="USER_DISABLED")throw Rh(t,"user-disabled",d);const C=r[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw X4(t,C,w);Si(t,C)}}catch(s){if(s instanceof Ki)throw s;Si(t,"network-request-failed",{message:String(s)})}}async function Dc(t,e,n,r,s={}){const l=await So(t,e,n,r,s);return"mfaPendingCredential"in l&&Si(t,"multi-factor-auth-required",{_serverResponse:l}),l}function Dv(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?jg(t.config,s):`${t.config.apiScheme}://${s}`}class eb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($i(this.auth,"network-request-failed")),J4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=$i(t,e,r);return s.customData._tokenResponse=n,s}async function tb(t,e){return So(t,"GET","/v2/recaptchaConfig",Ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(t,e){return So(t,"POST","/v1/accounts:delete",e)}async function rb(t,e){return So(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ib(t,e=!1){const n=kn(t),r=await n.getIdToken(e),s=Hg(r);Ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Lu(G0(s.auth_time)),issuedAtTime:Lu(G0(s.iat)),expirationTime:Lu(G0(s.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function G0(t){return Number(t)*1e3}function Hg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const s=wv(n);return s?JSON.parse(s):(Jh("Failed to decode base64 JWT payload"),null)}catch(s){return Jh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function sb(t){const e=Hg(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ki&&ob(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ob({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(t){var e;const n=t.auth,r=await t.getIdToken(),s=await yl(t,rb(n,{idToken:r}));Ue(s==null?void 0:s.users.length,n,"internal-error");const l=s.users[0];t._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?cb(l.providerUserInfo):[],y=ub(t.providerData,d),x=t.isAnonymous,w=!(t.email&&l.passwordHash)&&!(y!=null&&y.length),C=x?w:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:y,metadata:new Lv(l.createdAt,l.lastLoginAt),isAnonymous:C};Object.assign(t,I)}async function lb(t){const e=kn(t);await Ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ub(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function cb(t){return t.map(e=>{var{providerId:n}=e,r=Vg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(t,e){const n=await kv(t,{},async()=>{const r=Mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=t.config,d=Dv(t,s,"/v1/token",`key=${l}`),y=await t._getAdditionalHeaders();return y["Content-Type"]="application/x-www-form-urlencoded",Mv.fetch()(d,{method:"POST",headers:y,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Ue(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:l}=await hb(e,n);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:l}=n,d=new uc;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),s&&(Ue(typeof s=="string","internal-error",{appName:e}),d.accessToken=s),l&&(Ue(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uc,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ta{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,l=Vg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ab(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Lv(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await yl(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ib(this,e)}reload(){return lb(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ta(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ld(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await yl(this,nb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,l,d,y,x,w,C;const I=(r=n.displayName)!==null&&r!==void 0?r:void 0,O=(s=n.email)!==null&&s!==void 0?s:void 0,V=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,W=(d=n.photoURL)!==null&&d!==void 0?d:void 0,j=(y=n.tenantId)!==null&&y!==void 0?y:void 0,J=(x=n._redirectEventId)!==null&&x!==void 0?x:void 0,F=(w=n.createdAt)!==null&&w!==void 0?w:void 0,D=(C=n.lastLoginAt)!==null&&C!==void 0?C:void 0,{uid:B,emailVerified:G,isAnonymous:ae,providerData:ie,stsTokenManager:Y}=n;Ue(B&&Y,e,"internal-error");const le=uc.fromJSON(this.name,Y);Ue(typeof B=="string",e,"internal-error"),Ws(I,e.name),Ws(O,e.name),Ue(typeof G=="boolean",e,"internal-error"),Ue(typeof ae=="boolean",e,"internal-error"),Ws(V,e.name),Ws(W,e.name),Ws(j,e.name),Ws(J,e.name),Ws(F,e.name),Ws(D,e.name);const te=new ta({uid:B,auth:e,email:O,emailVerified:G,displayName:I,isAnonymous:ae,photoURL:W,phoneNumber:V,tenantId:j,stsTokenManager:le,createdAt:F,lastLoginAt:D});return ie&&Array.isArray(ie)&&(te.providerData=ie.map(Me=>Object.assign({},Me))),J&&(te._redirectEventId=J),te}static async _fromIdTokenResponse(e,n,r=!1){const s=new uc;s.updateFromServerResponse(n);const l=new ta({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ld(l),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Map;function ps(t){Cs(t instanceof Function,"Expected a class definition");let e=by.get(t);return e?(Cs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,by.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bv.type="NONE";const Ry=Bv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e,n){return`firebase:${t}:${e}:${n}`}class al{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=ed(this.userKey,s.apiKey,l),this.fullPersistenceKey=ed("persistence",s.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new al(ps(Ry),e,r);const s=(await Promise.all(n.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let l=s[0]||ps(Ry);const d=ed(r,e.config.apiKey,e.name);let y=null;for(const w of n)try{const C=await w._get(d);if(C){const I=ta._fromJSON(e,C);w!==l&&(y=I),l=w;break}}catch{}const x=s.filter(w=>w._shouldAllowMigration);return!l._shouldAllowMigration||!x.length?new al(l,e,r):(l=x[0],y&&await l._set(d,y.toJSON()),await Promise.all(n.map(async w=>{if(w!==l)try{await w._remove(d)}catch{}})),new al(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jv(e))return"Blackberry";if(Hv(e))return"Webos";if(Wg(e))return"Safari";if((e.includes("chrome/")||Uv(e))&&!e.includes("edge/"))return"Chrome";if(zv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Fv(t=or()){return/firefox\//i.test(t)}function Wg(t=or()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Uv(t=or()){return/crios\//i.test(t)}function Vv(t=or()){return/iemobile/i.test(t)}function zv(t=or()){return/android/i.test(t)}function jv(t=or()){return/blackberry/i.test(t)}function Hv(t=or()){return/webos/i.test(t)}function Sf(t=or()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function db(t=or()){var e;return Sf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fb(){return b3()&&document.documentMode===10}function Wv(t=or()){return Sf(t)||zv(t)||Hv(t)||jv(t)||/windows phone/i.test(t)||Vv(t)}function pb(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e=[]){let n;switch(t){case"Browser":n=Ny(or());break;case"Worker":n=`${Ny(or())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${va}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=l=>new Promise((d,y)=>{try{const x=e(l);d(x)}catch(x){y(x)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(t,e={}){return So(t,"GET","/v2/passwordPolicy",Ea(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=6;class yb{constructor(e){var n,r,s,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:_b,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,l,d,y;const x={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,x),this.validatePasswordCharacterOptions(e,x),x.isValid&&(x.isValid=(n=x.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),x.isValid&&(x.isValid=(r=x.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),x.isValid&&(x.isValid=(s=x.containsLowercaseLetter)!==null&&s!==void 0?s:!0),x.isValid&&(x.isValid=(l=x.containsUppercaseLetter)!==null&&l!==void 0?l:!0),x.isValid&&(x.isValid=(d=x.containsNumericCharacter)!==null&&d!==void 0?d:!0),x.isValid&&(x.isValid=(y=x.containsNonAlphanumericCharacter)!==null&&y!==void 0?y:!0),x}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Py(this),this.idTokenSubscription=new Py(this),this.beforeStateQueue=new gb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ov,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await al.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,y=s==null?void 0:s._redirectEventId,x=await this.tryRedirectSignIn(e);(!d||d===y)&&(x!=null&&x.user)&&(s=x.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(d){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ld(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?kn(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mb(this),n=new yb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await al.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(y,this,"internal-error"),y.then(()=>{d||l(this.currentUser)}),typeof n=="function"){const x=e.addObserver(n,r,s);return()=>{d=!0,x()}}else{const x=e.addObserver(n);return()=>{d=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Aa(t){return kn(t)}class Py{constructor(e){this.auth=e,this.observer=null,this.addObserver=D3(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Zv(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const l=$i("internal-error");l.customData=s,n(l)},r.type="text/javascript",r.charset="UTF-8",wb().appendChild(r)})}function vb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Eb="https://www.google.com/recaptcha/enterprise.js?render=",Ab="recaptcha-enterprise",Tb="NO_RECAPTCHA";class Cb{constructor(e){this.type=Ab,this.auth=Aa(e)}async verify(e="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,y)=>{tb(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const w=new G4(x);return l.tenantId==null?l._agentRecaptchaConfig=w:l._tenantRecaptchaConfigs[l.tenantId]=w,d(w.siteKey)}}).catch(x=>{y(x)})})}function s(l,d,y){const x=window.grecaptcha;Iy(x)?x.enterprise.ready(()=>{x.enterprise.execute(l,{action:e}).then(w=>{d(w)}).catch(()=>{d(Tb)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,d)=>{r(this.auth).then(y=>{if(!n&&Iy(window.grecaptcha))s(y,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}Zv(Eb+y).then(()=>{s(y,l,d)}).catch(x=>{d(x)})}}).catch(y=>{d(y)})})}}async function Bd(t,e,n,r=!1){const s=new Cb(t);let l;try{l=await s.verify(n)}catch{l=await s.verify(n,!0)}const d=Object.assign({},e);return r?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t,e){const n=If(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),l=n.getOptions();if(Md(l,e??{}))return s;Si(s,"already-initialized")}return n.initialize({options:e})}function Sb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ps);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bb(t,e,n){const r=Aa(t);Ue(r._canInitEmulator,r,"emulator-config-failed"),Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),l=$v(e),{host:d,port:y}=Rb(e),x=y===null?"":`:${y}`;r.config.emulator={url:`${l}//${d}${x}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:d,port:y,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||Nb()}function $v(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rb(t){const e=$v(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:Oy(r.substr(l.length+1))}}else{const[l,d]=r.split(":");return{host:l,port:Oy(d)}}}function Oy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Nb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function Pb(t,e){return So(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z0(t,e){return Dc(t,"POST","/v1/accounts:signInWithPassword",Ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(t,e){return Dc(t,"POST","/v1/accounts:signInWithEmailLink",Ea(t,e))}async function Mb(t,e){return Dc(t,"POST","/v1/accounts:signInWithEmailLink",Ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends Gg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new cc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new cc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const s=await Bd(e,r,"signInWithPassword");return Z0(e,s)}else return Z0(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await Bd(e,r,"signInWithPassword");return Z0(e,l)}else return Promise.reject(s)});case"emailLink":return Ob(e,{email:this._email,oobCode:this._password});default:Si(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return Pb(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Mb(e,{idToken:n,email:this._email,oobCode:this._password});default:Si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(t,e){return Dc(t,"POST","/v1/accounts:signInWithIdp",Ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="http://localhost";class fa extends Gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Si("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,l=Vg(n,["providerId","signInMethod"]);if(!r||!s)return null;const d=new fa(r,s);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return ll(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ll(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ll(e,n)}buildRequest(){const e={requestUri:kb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Lb(t){const e=Au(Tu(t)).link,n=e?Au(Tu(e)).deep_link_id:null,r=Au(Tu(t)).deep_link_id;return(r?Au(Tu(r)).link:null)||r||n||e||t}class Zg{constructor(e){var n,r,s,l,d,y;const x=Au(Tu(e)),w=(n=x.apiKey)!==null&&n!==void 0?n:null,C=(r=x.oobCode)!==null&&r!==void 0?r:null,I=Db((s=x.mode)!==null&&s!==void 0?s:null);Ue(w&&C&&I,"argument-error"),this.apiKey=w,this.operation=I,this.code=C,this.continueUrl=(l=x.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=x.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(y=x.tenantId)!==null&&y!==void 0?y:null}static parseLink(e){const n=Lb(e);try{return new Zg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.providerId=Pl.PROVIDER_ID}static credential(e,n){return cc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zg.parseLink(n);return Ue(r,"argument-error"),cc._fromEmailAndCode(e,r.code,r.tenantId)}}Pl.PROVIDER_ID="password";Pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends Xv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Lc{constructor(){super("facebook.com")}static credential(e){return fa._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fa._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ks.credential(n,r)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Lc{constructor(){super("github.com")}static credential(e){return fa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Lc{constructor(){super("twitter.com")}static credential(e,n){return fa._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Js.credential(n,r)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(t,e){return Dc(t,"POST","/v1/accounts:signUp",Ea(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const l=await ta._fromIdTokenResponse(e,r,s),d=My(r);return new pa({user:l,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=My(r);return new pa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function My(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends Ki{constructor(e,n,r,s){var l;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fd(e,n,r,s)}}function Yv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Fd._fromErrorAndOperation(t,l,e,r):l})}async function Bb(t,e,n=!1){const r=await yl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const l=await yl(t,Yv(r,s,e,t),n);Ue(l.idToken,r,"internal-error");const d=Hg(l.idToken);Ue(d,r,"internal-error");const{sub:y}=d;return Ue(t.uid===y,r,"user-mismatch"),pa._forOperation(t,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Si(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qv(t,e,n=!1){const r="signIn",s=await Yv(t,r,e),l=await pa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(l.user),l}async function Ub(t,e){return qv(Aa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kv(t){const e=Aa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Vb(t,e,n){var r;const s=Aa(t),l={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let d;if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const w=await Bd(s,l,"signUpPassword");d=$0(s,w)}else d=$0(s,l).catch(async w=>{if(w.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const C=await Bd(s,l,"signUpPassword");return $0(s,C)}throw w});const y=await d.catch(w=>{throw w.code==="auth/password-does-not-meet-requirements"&&Kv(t),w}),x=await pa._fromIdTokenResponse(s,"signIn",y);return await s._updateCurrentUser(x.user),x}function zb(t,e,n){return Ub(kn(t),Pl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Kv(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t,e){return So(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=kn(t),l={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await yl(r,jb(r.auth,l));r.displayName=d.displayName||null,r.photoURL=d.photoUrl||null;const y=r.providerData.find(({providerId:x})=>x==="password");y&&(y.displayName=r.displayName,y.photoURL=r.photoURL),await r._updateTokensIfNecessary(d)}function Wb(t,e,n,r){return kn(t).onIdTokenChanged(e,n,r)}function Gb(t,e,n){return kn(t).beforeAuthStateChanged(e,n)}function Zb(t,e,n,r){return kn(t).onAuthStateChanged(e,n,r)}function $b(t){return kn(t).signOut()}const Ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){const t=or();return Wg(t)||Sf(t)}const Yb=1e3,qb=10;class Jv extends Qv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Xb()&&pb(),this.fallbackToPolling=Wv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,x)=>{this.notifyListeners(d,x)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const d=this.storage.getItem(r);if(e.newValue!==d)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},l=this.storage.getItem(r);fb()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qb):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Yb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jv.type="LOCAL";const Kb=Jv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends Qv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eE.type="SESSION";const tE=eE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:l}=n.data,d=this.handlersMap[s];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const y=Array.from(d).map(async w=>w(n.origin,l)),x=await Qb(y);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:x})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,d;return new Promise((y,x)=>{const w=$g("",20);s.port1.start();const C=setTimeout(()=>{x(new Error("unsupported_event"))},r);d={messageChannel:s,onMessage(I){const O=I;if(O.data.eventId===w)switch(O.data.status){case"ack":clearTimeout(C),l=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),y(O.data.response);break;default:clearTimeout(C),clearTimeout(l),x(new Error("invalid_response"));break}}},this.handlers.add(d),s.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:w,data:n},[s.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){return window}function eR(t){Xi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function tR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rR(){return nE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="firebaseLocalStorageDb",iR=1,Vd="firebaseLocalStorage",iE="fbase_key";class Bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rf(t,e){return t.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function sR(){const t=indexedDB.deleteDatabase(rE);return new Bc(t).toPromise()}function fp(){const t=indexedDB.open(rE,iR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Vd,{keyPath:iE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Vd)?e(r):(r.close(),await sR(),e(await fp()))})})}async function ky(t,e,n){const r=Rf(t,!0).put({[iE]:e,value:n});return new Bc(r).toPromise()}async function oR(t,e){const n=Rf(t,!1).get(e),r=await new Bc(n).toPromise();return r===void 0?null:r.value}function Dy(t,e){const n=Rf(t,!0).delete(e);return new Bc(n).toPromise()}const aR=800,lR=3;class sE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bf._getInstance(rR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tR(),!this.activeServiceWorker)return;this.sender=new Jb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fp();return await ky(e,Ud,"1"),await Dy(e,Ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ky(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Rf(s,!1).getAll();return new Bc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sE.type="LOCAL";const uR=sE;new kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e){return e?ps(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends Gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ll(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ll(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hR(t){return qv(t.auth,new Xg(t),t.bypassAuthState)}function dR(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),Fb(n,new Xg(t),t.bypassAuthState)}async function fR(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),Bb(n,new Xg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:l,error:d,type:y}=e;if(d){this.reject(d);return}const x={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(x))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hR;case"linkViaPopup":case"linkViaRedirect":return fR;case"reauthViaPopup":case"reauthViaRedirect":return dR;default:Si(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new kc(2e3,1e4);class Qa extends oE{constructor(e,n,r,s,l){super(e,n,s,l),this.provider=r,this.authWindow=null,this.pollId=null,Qa.currentPopupAction&&Qa.currentPopupAction.cancel(),Qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Cs(this.filter.length===1,"Popup operations only handle one event");const e=$g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pR.get())};e()}}Qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="pendingRedirect",td=new Map;class mR extends oE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=td.get(this.auth._key());if(!e){try{const r=await _R(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _R(t,e){const n=wR(e),r=xR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function yR(t,e){td.set(t._key(),e)}function xR(t){return ps(t._redirectPersistence)}function wR(t){return ed(gR,t.config.apiKey,t.name)}async function vR(t,e,n=!1){const r=Aa(t),s=cR(r,e),d=await new mR(r,s,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=10*60*1e3;class AR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($i(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ER&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ly(e))}saveEventToCache(e){this.cachedEventUids.add(Ly(e)),this.lastProcessedEventTime=Date.now()}}function Ly(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e={}){return So(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SR=/^https?/;async function bR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CR(t);for(const n of e)try{if(RR(n))return}catch{}Si(t,"unauthorized-domain")}function RR(t){const e=dp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const d=new URL(t);return d.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!SR.test(n))return!1;if(IR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new kc(3e4,6e4);function By(){const t=Xi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PR(t){return new Promise((e,n)=>{var r,s,l;function d(){By(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{By(),n($i(t,"network-request-failed"))},timeout:NR.get()})}if(!((s=(r=Xi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=Xi().gapi)===null||l===void 0)&&l.load)d();else{const y=vb("iframefcb");return Xi()[y]=()=>{gapi.load?d():n($i(t,"network-request-failed"))},Zv(`https://apis.google.com/js/api.js?onload=${y}`).catch(x=>n(x))}}).catch(e=>{throw nd=null,e})}let nd=null;function OR(t){return nd=nd||PR(t),nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new kc(5e3,15e3),kR="__/auth/iframe",DR="emulator/auth/iframe",LR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FR(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jg(e,DR):`https://${t.config.authDomain}/${kR}`,r={apiKey:e.apiKey,appName:t.name,v:va},s=BR.get(t.config.apiHost);s&&(r.eid=s);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${Mc(r).slice(1)}`}async function UR(t){const e=await OR(t),n=Xi().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:FR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LR,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const d=$i(t,"network-request-failed"),y=Xi().setTimeout(()=>{l(d)},MR.get());function x(){Xi().clearTimeout(y),s(r)}r.ping(x).then(x,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zR=500,jR=600,HR="_blank",WR="http://localhost";class Fy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GR(t,e,n,r=zR,s=jR){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let y="";const x=Object.assign(Object.assign({},VR),{width:r.toString(),height:s.toString(),top:l,left:d}),w=or().toLowerCase();n&&(y=Uv(w)?HR:n),Fv(w)&&(e=e||WR,x.scrollbars="yes");const C=Object.entries(x).reduce((O,[V,W])=>`${O}${V}=${W},`,"");if(db(w)&&y!=="_self")return ZR(e||"",y),new Fy(null);const I=window.open(e||"",y,C);Ue(I,t,"popup-blocked");try{I.focus()}catch{}return new Fy(I)}function ZR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="__/auth/handler",XR="emulator/auth/handler",YR=encodeURIComponent("fac");async function Uy(t,e,n,r,s,l){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const d={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:va,eventId:s};if(e instanceof Xv){e.setDefaultLanguage(t.languageCode),d.providerId=e.providerId||"",k3(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,I]of Object.entries(l||{}))d[C]=I}if(e instanceof Lc){const C=e.getScopes().filter(I=>I!=="");C.length>0&&(d.scopes=C.join(","))}t.tenantId&&(d.tid=t.tenantId);const y=d;for(const C of Object.keys(y))y[C]===void 0&&delete y[C];const x=await t._getAppCheckToken(),w=x?`#${YR}=${encodeURIComponent(x)}`:"";return`${qR(t)}?${Mc(y).slice(1)}${w}`}function qR({config:t}){return t.emulator?jg(t,XR):`https://${t.authDomain}/${$R}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="webStorageSupport";class KR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tE,this._completeRedirectFn=vR,this._overrideRedirectResult=yR}async _openPopup(e,n,r,s){var l;Cs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await Uy(e,n,r,dp(),s);return GR(e,d,$g())}async _openRedirect(e,n,r,s){await this._originValidation(e);const l=await Uy(e,n,r,dp(),s);return eR(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:l}=this.eventManagers[n];return s?Promise.resolve(s):(Cs(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UR(e),r=new AR(e);return n.register("authEvent",s=>(Ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(X0,{type:X0},s=>{var l;const d=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[X0];d!==void 0&&n(!!d),Si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wv()||Wg()||Sf()}}const QR=KR;var Vy="@firebase/auth",zy="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function tN(t){da(new yo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=r.options;Ue(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const x={apiKey:d,authDomain:y,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gv(t)},w=new xb(r,s,l,x);return Sb(w,n),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),da(new yo("auth-internal",e=>{const n=Aa(e.getProvider("auth").getImmediate());return(r=>new JR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zi(Vy,zy,eN(t)),Zi(Vy,zy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=5*60,rN=Tv("authIdTokenMaxAge")||nN;let jy=null;const iN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rN)return;const s=n==null?void 0:n.token;jy!==s&&(jy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sN(t=Ug()){const e=If(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ib(t,{popupRedirectResolver:QR,persistence:[uR,Kb,tE]}),r=Tv("authTokenSyncURL");if(r){const l=iN(r);Gb(n,l,()=>l(n.currentUser)),Wb(n,d=>l(d))}const s=vv("auth");return s&&bb(n,`http://${s}`),n}tN("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="firebasestorage.googleapis.com",uE="storageBucket",oN=2*60*1e3,aN=10*60*1e3,lN=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends Ki{constructor(e,n,r=0){super(Y0(e),`Firebase Storage: ${n} (${Y0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Y0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jt||(jt={}));function Y0(t){return"storage/"+t}function Yg(){const t="An unknown error occurred, please check the error payload for server response.";return new Qt(jt.UNKNOWN,t)}function uN(t){return new Qt(jt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cN(t){return new Qt(jt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hN(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qt(jt.UNAUTHENTICATED,t)}function dN(){return new Qt(jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fN(t){return new Qt(jt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cE(){return new Qt(jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hE(){return new Qt(jt.CANCELED,"User canceled the upload/download.")}function pN(t){return new Qt(jt.INVALID_URL,"Invalid URL '"+t+"'.")}function gN(t){return new Qt(jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function mN(){return new Qt(jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uE+"' property when initializing the app?")}function dE(){return new Qt(jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _N(){return new Qt(jt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function yN(){return new Qt(jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xN(t){return new Qt(jt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pp(t){return new Qt(jt.INVALID_ARGUMENT,t)}function fE(){return new Qt(jt.APP_DELETED,"The Firebase app was deleted.")}function wN(t){return new Qt(jt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bu(t,e){return new Qt(jt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function pu(t){throw new Qt(jt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vr.makeFromUrl(e,n)}catch{return new Vr(e,"")}if(r.path==="")return r;throw gN(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function l(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const d="(/(.*))?$",y=new RegExp("^gs://"+s+d,"i"),x={bucket:1,path:3};function w(G){G.path_=decodeURIComponent(G.path)}const C="v[A-Za-z0-9_]+",I=n.replace(/[.]/g,"\\."),O="(/([^?#]*).*)?$",V=new RegExp(`^https?://${I}/${C}/b/${s}/o${O}`,"i"),W={bucket:1,path:3},j=n===lE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,J="([^?#]*)",F=new RegExp(`^https?://${j}/${s}/${J}`,"i"),B=[{regex:y,indices:x,postModify:l},{regex:V,indices:W,postModify:w},{regex:F,indices:{bucket:1,path:2},postModify:w}];for(let G=0;G<B.length;G++){const ae=B[G],ie=ae.regex.exec(e);if(ie){const Y=ie[ae.indices.bucket];let le=ie[ae.indices.path];le||(le=""),r=new Vr(Y,le),ae.postModify(r);break}}if(r==null)throw pN(e);return r}}class vN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t,e,n){let r=1,s=null,l=null,d=!1,y=0;function x(){return y===2}let w=!1;function C(...J){w||(w=!0,e.apply(null,J))}function I(J){s=setTimeout(()=>{s=null,t(V,x())},J)}function O(){l&&clearTimeout(l)}function V(J,...F){if(w){O();return}if(J){O(),C.call(null,J,...F);return}if(x()||d){O(),C.call(null,J,...F);return}r<64&&(r*=2);let B;y===1?(y=2,B=0):B=(r+Math.random())*1e3,I(B)}let W=!1;function j(J){W||(W=!0,O(),!w&&(s!==null?(J||(y=2),clearTimeout(s),I(0)):J||(y=1)))}return I(0),l=setTimeout(()=>{d=!0,j(!0)},n),j}function AN(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){return t!==void 0}function CN(t){return typeof t=="function"}function IN(t){return typeof t=="object"&&!Array.isArray(t)}function Nf(t){return typeof t=="string"||t instanceof String}function Hy(t){return qg()&&t instanceof Blob}function qg(){return typeof Blob<"u"&&!C3()}function Wy(t,e,n,r){if(r<e)throw pp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw pp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function pE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(na||(na={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r,s,l,d,y,x,w,C,I,O=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=y,this.errorCallback_=x,this.timeout_=w,this.progressCallback_=C,this.connectionFactory_=I,this.retry=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,W)=>{this.resolve_=V,this.reject_=W,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Nh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=y=>{const x=y.loaded,w=y.lengthComputable?y.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,w)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const y=l.getErrorCode()===na.NO_ERROR,x=l.getStatus();if(!y||gE(x,this.additionalRetryCodes_)&&this.retry){const C=l.getErrorCode()===na.ABORT;r(!1,new Nh(!1,null,C));return}const w=this.successCodes_.indexOf(x)!==-1;r(!0,new Nh(w,l))})},n=(r,s)=>{const l=this.resolve_,d=this.reject_,y=s.connection;if(s.wasSuccessCode)try{const x=this.callback_(y,y.getResponse());TN(x)?l(x):l()}catch(x){d(x)}else if(y!==null){const x=Yg();x.serverResponse=y.getErrorText(),this.errorCallback_?d(this.errorCallback_(y,x)):d(x)}else if(s.canceled){const x=this.appDelete_?fE():hE();d(x)}else{const x=cE();d(x)}};this.canceled_?n(!1,new Nh(!1,null,!0)):this.backoffId_=EN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function bN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function RN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ON(t,e,n,r,s,l,d=!0){const y=pE(t.urlParams),x=t.url+y,w=Object.assign({},t.headers);return NN(w,e),bN(w,n),RN(w,l),PN(w,r),new SN(x,t.method,w,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kN(...t){const e=MN();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(qg())return new Blob(t);throw new Qt(jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DN(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){if(typeof atob>"u")throw xN("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class q0{constructor(e,n){this.data=e,this.contentType=n||null}}function BN(t,e){switch(t){case zi.RAW:return new q0(mE(e));case zi.BASE64:case zi.BASE64URL:return new q0(_E(t,e));case zi.DATA_URL:return new q0(UN(e),VN(e))}throw Yg()}function mE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const l=r,d=t.charCodeAt(++n);r=65536|(l&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function FN(t){let e;try{e=decodeURIComponent(t)}catch{throw Bu(zi.DATA_URL,"Malformed data URL.")}return mE(e)}function _E(t,e){switch(t){case zi.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw Bu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case zi.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw Bu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=LN(e)}catch(s){throw s.message.includes("polyfill")?s:Bu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class yE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Bu(zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=zN(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function UN(t){const e=new yE(t);return e.base64?_E(zi.BASE64,e.rest):FN(e.rest)}function VN(t){return new yE(t).contentType}function zN(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){let r=0,s="";Hy(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Hy(this.data_)){const r=this.data_,s=DN(r,e,n);return s===null?null:new eo(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new eo(r,!0)}}static getBlob(...e){if(qg()){const n=e.map(r=>r instanceof eo?r.data_:r);return new eo(kN.apply(null,n))}else{const n=e.map(d=>Nf(d)?BN(zi.RAW,d).data:d.data_);let r=0;n.forEach(d=>{r+=d.byteLength});const s=new Uint8Array(r);let l=0;return n.forEach(d=>{for(let y=0;y<d.length;y++)s[l++]=d[y]}),new eo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t){let e;try{e=JSON.parse(t)}catch{return null}return IN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function HN(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function wE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t,e){return e}class pr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||WN}}let Ph=null;function GN(t){return!Nf(t)||t.length<2?t:wE(t)}function vE(){if(Ph)return Ph;const t=[];t.push(new pr("bucket")),t.push(new pr("generation")),t.push(new pr("metageneration")),t.push(new pr("name","fullPath",!0));function e(l,d){return GN(d)}const n=new pr("name");n.xform=e,t.push(n);function r(l,d){return d!==void 0?Number(d):d}const s=new pr("size");return s.xform=r,t.push(s),t.push(new pr("timeCreated")),t.push(new pr("updated")),t.push(new pr("md5Hash",null,!0)),t.push(new pr("cacheControl",null,!0)),t.push(new pr("contentDisposition",null,!0)),t.push(new pr("contentEncoding",null,!0)),t.push(new pr("contentLanguage",null,!0)),t.push(new pr("contentType",null,!0)),t.push(new pr("metadata","customMetadata",!0)),Ph=t,Ph}function ZN(t,e){function n(){const r=t.bucket,s=t.fullPath,l=new Vr(r,s);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:n})}function $N(t,e,n){const r={};r.type="file";const s=n.length;for(let l=0;l<s;l++){const d=n[l];r[d.local]=d.xform(r,e[d.server])}return ZN(r,t),r}function EE(t,e,n){const r=xE(e);return r===null?null:$N(t,r,n)}function XN(t,e,n,r){const s=xE(e);if(s===null||!Nf(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const d=encodeURIComponent;return l.split(",").map(w=>{const C=t.bucket,I=t.fullPath,O="/b/"+d(C)+"/o/"+d(I),V=Fc(O,n,r),W=pE({alt:"media",token:w});return V+W})[0]}function AE(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const l=e[s];l.writable&&(n[l.server]=t[l.local])}return JSON.stringify(n)}class Ol{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t){if(!t)throw Yg()}function Kg(t,e){function n(r,s){const l=EE(t,s,e);return ys(l!==null),l}return n}function YN(t,e){function n(r,s){const l=EE(t,s,e);return ys(l!==null),XN(l,s,t.host,t._protocol)}return n}function Uc(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=dN():s=hN():n.getStatus()===402?s=cN(t.bucket):n.getStatus()===403?s=fN(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function TE(t){const e=Uc(t);function n(r,s){let l=e(r,s);return r.getStatus()===404&&(l=uN(t.path)),l.serverResponse=s.serverResponse,l}return n}function qN(t,e,n){const r=e.fullServerUrl(),s=Fc(r,t.host,t._protocol),l="GET",d=t.maxOperationRetryTime,y=new Ol(s,l,Kg(t,n),d);return y.errorHandler=TE(e),y}function KN(t,e,n){const r=e.fullServerUrl(),s=Fc(r,t.host,t._protocol),l="GET",d=t.maxOperationRetryTime,y=new Ol(s,l,YN(t,n),d);return y.errorHandler=TE(e),y}function QN(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function CE(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=QN(null,e)),r}function JN(t,e,n,r,s){const l=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function y(){let B="";for(let G=0;G<2;G++)B=B+Math.random().toString().slice(2);return B}const x=y();d["Content-Type"]="multipart/related; boundary="+x;const w=CE(e,r,s),C=AE(w,n),I="--"+x+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+C+`\r
--`+x+`\r
Content-Type: `+w.contentType+`\r
\r
`,O=`\r
--`+x+"--",V=eo.getBlob(I,r,O);if(V===null)throw dE();const W={name:w.fullPath},j=Fc(l,t.host,t._protocol),J="POST",F=t.maxUploadRetryTime,D=new Ol(j,J,Kg(t,n),F);return D.urlParams=W,D.headers=d,D.body=V.uploadData(),D.errorHandler=Uc(e),D}class zd{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Qg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ys(!1)}return ys(!!n&&(e||["active"]).indexOf(n)!==-1),n}function e8(t,e,n,r,s){const l=e.bucketOnlyServerUrl(),d=CE(e,r,s),y={name:d.fullPath},x=Fc(l,t.host,t._protocol),w="POST",C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},I=AE(d,n),O=t.maxUploadRetryTime;function V(j){Qg(j);let J;try{J=j.getResponseHeader("X-Goog-Upload-URL")}catch{ys(!1)}return ys(Nf(J)),J}const W=new Ol(x,w,V,O);return W.urlParams=y,W.headers=C,W.body=I,W.errorHandler=Uc(e),W}function t8(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function l(w){const C=Qg(w,["active","final"]);let I=null;try{I=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ys(!1)}I||ys(!1);const O=Number(I);return ys(!isNaN(O)),new zd(O,r.size(),C==="final")}const d="POST",y=t.maxUploadRetryTime,x=new Ol(n,d,l,y);return x.headers=s,x.errorHandler=Uc(e),x}const Gy=256*1024;function n8(t,e,n,r,s,l,d,y){const x=new zd(0,0);if(d?(x.current=d.current,x.total=d.total):(x.current=0,x.total=r.size()),r.size()!==x.total)throw _N();const w=x.total-x.current;let C=w;s>0&&(C=Math.min(C,s));const I=x.current,O=I+C;let V="";C===0?V="finalize":w===C?V="upload, finalize":V="upload";const W={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${x.current}`},j=r.slice(I,O);if(j===null)throw dE();function J(G,ae){const ie=Qg(G,["active","final"]),Y=x.current+C,le=r.size();let te;return ie==="final"?te=Kg(e,l)(G,ae):te=null,new zd(Y,le,ie==="final",te)}const F="POST",D=e.maxUploadRetryTime,B=new Ol(n,F,J,D);return B.headers=W,B.body=j.uploadData(),B.progressCallback=y||null,B.errorHandler=Uc(t),B}const Ar={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function K0(t){switch(t){case"running":case"pausing":case"canceling":return Ar.RUNNING;case"paused":return Ar.PAUSED;case"success":return Ar.SUCCESS;case"canceled":return Ar.CANCELED;case"error":return Ar.ERROR;default:return Ar.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,n,r){if(CN(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class i8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=na.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=na.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=na.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw pu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const l in s)s.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,s[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class s8 extends i8{initXhr(){this.xhr_.responseType="text"}}function Fa(){return new s8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=vE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(jt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(gE(s.status,[]))if(l)s=cE();else{this.sleepTime=Math.max(this.sleepTime*2,lN),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(jt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,l)=>{this._resolve=s,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=e8(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Fa,e,n);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=t8(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(s,Fa,n,r);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Gy*this._chunkMultiplier,n=new zd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,l)=>{let d;try{d=n8(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(x){this._error=x,this._transition("error");return}const y=this._ref.storage._makeRequest(d,Fa,s,l,!1);this._request=y,y.getPromise().then(x=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(x.current),x.finalized?(this._metadata=x.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Gy*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=qN(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Fa,e,n);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=JN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Fa,e,n);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=hE(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=K0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const l=new r8(n||void 0,r||void 0,s||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(K0(this._state)){case Ar.SUCCESS:Da(this._resolve.bind(null,this.snapshot))();break;case Ar.CANCELED:case Ar.ERROR:const n=this._reject;Da(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(K0(this._state)){case Ar.RUNNING:case Ar.PAUSED:e.next&&Da(e.next.bind(e,this.snapshot))();break;case Ar.SUCCESS:e.complete&&Da(e.complete.bind(e))();break;case Ar.CANCELED:case Ar.ERROR:e.error&&Da(e.error.bind(e,this._error))();break;default:e.error&&Da(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){this._service=e,n instanceof Vr?this._location=n:this._location=Vr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ga(e,n)}get root(){const e=new Vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wE(this._location.path)}get storage(){return this._service}get parent(){const e=jN(this._location.path);if(e===null)return null;const n=new Vr(this._location.bucket,e);return new ga(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw wN(e)}}function a8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new o8(t,new eo(e),n)}function l8(t){t._throwIfRoot("getDownloadURL");const e=KN(t.storage,t._location,vE());return t.storage.makeRequestWithTokens(e,Fa).then(n=>{if(n===null)throw yN();return n})}function u8(t,e){const n=HN(t._location.path,e),r=new Vr(t._location.bucket,n);return new ga(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(t){return/^[A-Za-z]+:\/\//.test(t)}function h8(t,e){return new ga(t,e)}function IE(t,e){if(t instanceof Jg){const n=t;if(n._bucket==null)throw mN();const r=new ga(n,n._bucket);return e!=null?IE(r,e):r}else return e!==void 0?u8(t,e):t}function d8(t,e){if(e&&c8(e)){if(t instanceof Jg)return h8(t,e);throw pp("To use ref(service, url), the first argument must be a Storage instance.")}else return IE(t,e)}function Zy(t,e){const n=e==null?void 0:e[uE];return n==null?null:Vr.makeFromBucketSpec(n,t)}function f8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Cv(s,t.app.options.projectId))}class Jg{constructor(e,n,r,s,l){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=l,this._bucket=null,this._host=lE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oN,this._maxUploadRetryTime=aN,this._requests=new Set,s!=null?this._bucket=Vr.makeFromBucketSpec(s,this._host):this._bucket=Zy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vr.makeFromBucketSpec(this._url,e):this._bucket=Zy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ga(this,e)}_makeRequest(e,n,r,s,l=!0){if(this._deleted)return new vN(fE());{const d=ON(e,this._appId,r,s,n,this._firebaseVersion,l);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const $y="@firebase/storage",Xy="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="storage";function p8(t,e,n){return t=kn(t),a8(t,e,n)}function g8(t){return t=kn(t),l8(t)}function m8(t,e){return t=kn(t),d8(t,e)}function _8(t=Ug(),e){t=kn(t);const r=If(t,SE).getImmediate({identifier:e}),s=Ev("storage");return s&&y8(r,...s),r}function y8(t,e,n,r={}){f8(t,e,n,r)}function x8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Jg(n,r,s,e,va)}function w8(){da(new yo(SE,x8,"PUBLIC").setMultipleInstances(!0)),Zi($y,Xy,""),Zi($y,Xy,"esm2017")}w8();var v8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},we,em=em||{},Ve=v8||self;function Pf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Vc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function E8(t){return Object.prototype.hasOwnProperty.call(t,Q0)&&t[Q0]||(t[Q0]=++A8)}var Q0="closure_uid_"+(1e9*Math.random()>>>0),A8=0;function T8(t,e,n){return t.call.apply(t.bind,arguments)}function C8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function rr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?rr=T8:rr=C8,rr.apply(null,arguments)}function Oh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Bn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,l){for(var d=Array(arguments.length-2),y=2;y<arguments.length;y++)d[y-2]=arguments[y];return e.prototype[s].apply(r,d)}}function bo(){this.s=this.s,this.o=this.o}var I8=0;bo.prototype.s=!1;bo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),I8!=0)&&E8(this)};bo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bE=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function tm(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Yy(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Pf(r)){const s=t.length||0,l=r.length||0;t.length=s+l;for(let d=0;d<l;d++)t[s+d]=r[d]}else t.push(r)}}function ir(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ir.prototype.h=function(){this.defaultPrevented=!0};var S8=function(){if(!Ve.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ve.addEventListener("test",()=>{},e),Ve.removeEventListener("test",()=>{},e)}catch{}return t}();function hc(t){return/^[\s\xa0]*$/.test(t)}function Of(){var t=Ve.navigator;return t&&(t=t.userAgent)?t:""}function Vi(t){return Of().indexOf(t)!=-1}function nm(t){return nm[" "](t),t}nm[" "]=function(){};function b8(t,e){var n=wP;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var R8=Vi("Opera"),xl=Vi("Trident")||Vi("MSIE"),RE=Vi("Edge"),gp=RE||xl,NE=Vi("Gecko")&&!(Of().toLowerCase().indexOf("webkit")!=-1&&!Vi("Edge"))&&!(Vi("Trident")||Vi("MSIE"))&&!Vi("Edge"),N8=Of().toLowerCase().indexOf("webkit")!=-1&&!Vi("Edge");function PE(){var t=Ve.document;return t?t.documentMode:void 0}var mp;e:{var J0="",e1=function(){var t=Of();if(NE)return/rv:([^\);]+)(\)|;)/.exec(t);if(RE)return/Edge\/([\d\.]+)/.exec(t);if(xl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(N8)return/WebKit\/(\S+)/.exec(t);if(R8)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(e1&&(J0=e1?e1[1]:""),xl){var t1=PE();if(t1!=null&&t1>parseFloat(J0)){mp=String(t1);break e}}mp=J0}var _p;if(Ve.document&&xl){var qy=PE();_p=qy||parseInt(mp,10)||void 0}else _p=void 0;var P8=_p;function dc(t,e){if(ir.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(NE){e:{try{nm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:O8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&dc.$.h.call(this)}}Bn(dc,ir);var O8={2:"touch",3:"pen",4:"mouse"};dc.prototype.h=function(){dc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var zc="closure_listenable_"+(1e6*Math.random()|0),M8=0;function k8(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++M8,this.fa=this.ia=!1}function Mf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function rm(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function D8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function OE(t){const e={};for(const n in t)e[n]=t[n];return e}const Ky="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ME(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let l=0;l<Ky.length;l++)n=Ky[l],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function kf(t){this.src=t,this.g={},this.h=0}kf.prototype.add=function(t,e,n,r,s){var l=t.toString();t=this.g[l],t||(t=this.g[l]=[],this.h++);var d=xp(t,e,r,s);return-1<d?(e=t[d],n||(e.ia=!1)):(e=new k8(e,this.src,l,!!r,s),e.ia=n,t.push(e)),e};function yp(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=bE(r,e),l;(l=0<=s)&&Array.prototype.splice.call(r,s,1),l&&(Mf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function xp(t,e,n,r){for(var s=0;s<t.length;++s){var l=t[s];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==r)return s}return-1}var im="closure_lm_"+(1e6*Math.random()|0),n1={};function kE(t,e,n,r,s){if(r&&r.once)return LE(t,e,n,r,s);if(Array.isArray(e)){for(var l=0;l<e.length;l++)kE(t,e[l],n,r,s);return null}return n=am(n),t&&t[zc]?t.O(e,n,Vc(r)?!!r.capture:!!r,s):DE(t,e,n,!1,r,s)}function DE(t,e,n,r,s,l){if(!e)throw Error("Invalid event type");var d=Vc(s)?!!s.capture:!!s,y=om(t);if(y||(t[im]=y=new kf(t)),n=y.add(e,n,r,d,l),n.proxy)return n;if(r=L8(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)S8||(s=d),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(FE(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function L8(){function t(n){return e.call(t.src,t.listener,n)}const e=B8;return t}function LE(t,e,n,r,s){if(Array.isArray(e)){for(var l=0;l<e.length;l++)LE(t,e[l],n,r,s);return null}return n=am(n),t&&t[zc]?t.P(e,n,Vc(r)?!!r.capture:!!r,s):DE(t,e,n,!0,r,s)}function BE(t,e,n,r,s){if(Array.isArray(e))for(var l=0;l<e.length;l++)BE(t,e[l],n,r,s);else r=Vc(r)?!!r.capture:!!r,n=am(n),t&&t[zc]?(t=t.i,e=String(e).toString(),e in t.g&&(l=t.g[e],n=xp(l,n,r,s),-1<n&&(Mf(l[n]),Array.prototype.splice.call(l,n,1),l.length==0&&(delete t.g[e],t.h--)))):t&&(t=om(t))&&(e=t.g[e.toString()],t=-1,e&&(t=xp(e,n,r,s)),(n=-1<t?e[t]:null)&&sm(n))}function sm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[zc])yp(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(FE(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=om(e))?(yp(n,t),n.h==0&&(n.src=null,e[im]=null)):Mf(t)}}}function FE(t){return t in n1?n1[t]:n1[t]="on"+t}function B8(t,e){if(t.fa)t=!0;else{e=new dc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&sm(t),t=n.call(r,e)}return t}function om(t){return t=t[im],t instanceof kf?t:null}var r1="__closure_events_fn_"+(1e9*Math.random()>>>0);function am(t){return typeof t=="function"?t:(t[r1]||(t[r1]=function(e){return t.handleEvent(e)}),t[r1])}function Dn(){bo.call(this),this.i=new kf(this),this.S=this,this.J=null}Bn(Dn,bo);Dn.prototype[zc]=!0;Dn.prototype.removeEventListener=function(t,e,n,r){BE(this,t,e,n,r)};function Wn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ir(e,t);else if(e instanceof ir)e.target=e.target||t;else{var s=e;e=new ir(r,t),ME(e,s)}if(s=!0,n)for(var l=n.length-1;0<=l;l--){var d=e.g=n[l];s=Mh(d,r,!0,e)&&s}if(d=e.g=t,s=Mh(d,r,!0,e)&&s,s=Mh(d,r,!1,e)&&s,n)for(l=0;l<n.length;l++)d=e.g=n[l],s=Mh(d,r,!1,e)&&s}Dn.prototype.N=function(){if(Dn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mf(n[r]);delete t.g[e],t.h--}}this.J=null};Dn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Dn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Mh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.fa&&d.capture==n){var y=d.listener,x=d.la||d.src;d.ia&&yp(t.i,d),s=y.call(x,r)!==!1&&s}}return s&&!r.defaultPrevented}var lm=Ve.JSON.stringify;class F8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function U8(){var t=um;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class V8{constructor(){this.h=this.g=null}add(e,n){const r=UE.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var UE=new F8(()=>new z8,t=>t.reset());class z8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function j8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function H8(t){Ve.setTimeout(()=>{throw t},0)}let fc,pc=!1,um=new V8,VE=()=>{const t=Ve.Promise.resolve(void 0);fc=()=>{t.then(W8)}};var W8=()=>{for(var t;t=U8();){try{t.h.call(t.g)}catch(n){H8(n)}var e=UE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}pc=!1};function Df(t,e){Dn.call(this),this.h=t||1,this.g=e||Ve,this.j=rr(this.qb,this),this.l=Date.now()}Bn(Df,Dn);we=Df.prototype;we.ga=!1;we.T=null;we.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Wn(this,"tick"),this.ga&&(cm(this),this.start()))}};we.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function cm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}we.N=function(){Df.$.N.call(this),cm(this),delete this.g};function hm(t,e,n){if(typeof t=="function")n&&(t=rr(t,n));else if(t&&typeof t.handleEvent=="function")t=rr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ve.setTimeout(t,e||0)}function zE(t){t.g=hm(()=>{t.g=null,t.i&&(t.i=!1,zE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class G8 extends bo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zE(this)}N(){super.N(),this.g&&(Ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gc(t){bo.call(this),this.h=t,this.g={}}Bn(gc,bo);var Qy=[];function jE(t,e,n,r){Array.isArray(n)||(n&&(Qy[0]=n.toString()),n=Qy);for(var s=0;s<n.length;s++){var l=kE(e,n[s],r||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function HE(t){rm(t.g,function(e,n){this.g.hasOwnProperty(n)&&sm(e)},t),t.g={}}gc.prototype.N=function(){gc.$.N.call(this),HE(this)};gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lf(){this.g=!0}Lf.prototype.Ea=function(){this.g=!1};function Z8(t,e,n,r,s,l){t.info(function(){if(t.g)if(l)for(var d="",y=l.split("&"),x=0;x<y.length;x++){var w=y[x].split("=");if(1<w.length){var C=w[0];w=w[1];var I=C.split("_");d=2<=I.length&&I[1]=="type"?d+(C+"="+w+"&"):d+(C+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+d})}function $8(t,e,n,r,s,l,d){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+l+" "+d})}function Ja(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Y8(t,n)+(r?" "+r:"")})}function X8(t,e){t.info(function(){return"TIMEOUT: "+e})}Lf.prototype.info=function(){};function Y8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var l=s[0];if(l!="noop"&&l!="stop"&&l!="close")for(var d=1;d<s.length;d++)s[d]=""}}}}return lm(n)}catch{return e}}var Ta={},Jy=null;function Bf(){return Jy=Jy||new Dn}Ta.Ta="serverreachability";function WE(t){ir.call(this,Ta.Ta,t)}Bn(WE,ir);function mc(t){const e=Bf();Wn(e,new WE(e))}Ta.STAT_EVENT="statevent";function GE(t,e){ir.call(this,Ta.STAT_EVENT,t),this.stat=e}Bn(GE,ir);function mr(t){const e=Bf();Wn(e,new GE(e,t))}Ta.Ua="timingevent";function ZE(t,e){ir.call(this,Ta.Ua,t),this.size=e}Bn(ZE,ir);function jc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ve.setTimeout(function(){t()},e)}var Ff={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$E={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function dm(){}dm.prototype.h=null;function ex(t){return t.h||(t.h=t.i())}function XE(){}var Hc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fm(){ir.call(this,"d")}Bn(fm,ir);function pm(){ir.call(this,"c")}Bn(pm,ir);var wp;function Uf(){}Bn(Uf,dm);Uf.prototype.g=function(){return new XMLHttpRequest};Uf.prototype.i=function(){return{}};wp=new Uf;function Wc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new gc(this),this.P=q8,t=gp?125:void 0,this.V=new Df(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new YE}function YE(){this.i=null,this.g="",this.h=!1}var q8=45e3,vp={},jd={};we=Wc.prototype;we.setTimeout=function(t){this.P=t};function Ep(t,e,n){t.L=1,t.v=zf(Is(e)),t.s=n,t.S=!0,qE(t,null)}function qE(t,e){t.G=Date.now(),Gc(t),t.A=Is(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),iA(n.i,"t",r),t.C=0,n=t.l.J,t.h=new YE,t.g=CA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new G8(rr(t.Pa,t,t.g),t.O)),jE(t.U,t.g,"readystatechange",t.nb),e=t.I?OE(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),mc(),Z8(t.j,t.u,t.A,t.m,t.W,t.s)}we.nb=function(t){t=t.target;const e=this.M;e&&ji(t)==3?e.l():this.Pa(t)};we.Pa=function(t){try{if(t==this.g)e:{const C=ji(this.g);var e=this.g.Ia();const I=this.g.da();if(!(3>C)&&(C!=3||gp||this.g&&(this.h.h||this.g.ja()||ix(this.g)))){this.J||C!=4||e==7||(e==8||0>=I?mc(3):mc(2)),Vf(this);var n=this.g.da();this.ca=n;t:if(KE(this)){var r=ix(this.g);t="";var s=r.length,l=ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qo(this),Fu(this);var d="";break t}this.h.i=new Ve.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:l&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,d=this.h.g}else d=this.g.ja();if(this.i=n==200,$8(this.j,this.u,this.A,this.m,this.W,C,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var y,x=this.g;if((y=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hc(y)){var w=y;break t}}w=null}if(n=w)Ja(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ap(this,n);else{this.i=!1,this.o=3,mr(12),qo(this),Fu(this);break e}}this.S?(QE(this,C,d),gp&&this.i&&C==3&&(jE(this.U,this.V,"tick",this.mb),this.V.start())):(Ja(this.j,this.m,d,null),Ap(this,d)),C==4&&qo(this),this.i&&!this.J&&(C==4?vA(this.l,this):(this.i=!1,Gc(this)))}else _P(this.g),n==400&&0<d.indexOf("Unknown SID")?(this.o=3,mr(12)):(this.o=0,mr(13)),qo(this),Fu(this)}}}catch{}finally{}};function KE(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function QE(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=K8(t,n),s==jd){e==4&&(t.o=4,mr(14),r=!1),Ja(t.j,t.m,null,"[Incomplete Response]");break}else if(s==vp){t.o=4,mr(15),Ja(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ja(t.j,t.m,s,null),Ap(t,s);KE(t)&&s!=jd&&s!=vp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,mr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),wm(e),e.M=!0,mr(11))):(Ja(t.j,t.m,n,"[Invalid Chunked Response]"),qo(t),Fu(t))}we.mb=function(){if(this.g){var t=ji(this.g),e=this.g.ja();this.C<e.length&&(Vf(this),QE(this,t,e),this.i&&t!=4&&Gc(this))}};function K8(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?jd:(n=Number(e.substring(n,r)),isNaN(n)?vp:(r+=1,r+n>e.length?jd:(e=e.slice(r,r+n),t.C=r+n,e)))}we.cancel=function(){this.J=!0,qo(this)};function Gc(t){t.Y=Date.now()+t.P,JE(t,t.P)}function JE(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=jc(rr(t.lb,t),e)}function Vf(t){t.B&&(Ve.clearTimeout(t.B),t.B=null)}we.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(X8(this.j,this.A),this.L!=2&&(mc(),mr(17)),qo(this),this.o=2,Fu(this)):JE(this,this.Y-t)};function Fu(t){t.l.H==0||t.J||vA(t.l,t)}function qo(t){Vf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,cm(t.V),HE(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ap(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Tp(n.i,t))){if(!t.K&&Tp(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Gd(n),Gf(n);else break e;xm(n),mr(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=jc(rr(n.ib,n),6e3));if(1>=aA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ko(n,11)}else if((t.K||n.g==t)&&Gd(n),!hc(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let w=s[e];if(n.V=w[0],w=w[1],n.H==2)if(w[0]=="c"){n.K=w[1],n.pa=w[2];const C=w[3];C!=null&&(n.ra=C,n.l.info("VER="+n.ra));const I=w[4];I!=null&&(n.Ga=I,n.l.info("SVER="+n.Ga));const O=w[5];O!=null&&typeof O=="number"&&0<O&&(r=1.5*O,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const V=t.g;if(V){const W=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var l=r.i;l.g||W.indexOf("spdy")==-1&&W.indexOf("quic")==-1&&W.indexOf("h2")==-1||(l.j=l.l,l.g=new Set,l.h&&(gm(l,l.h),l.h=null))}if(r.F){const j=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;j&&(r.Da=j,Vt(r.I,r.F,j))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var d=t;if(r.wa=TA(r,r.J?r.pa:null,r.Y),d.K){lA(r.i,d);var y=d,x=r.L;x&&y.setTimeout(x),y.B&&(Vf(y),Gc(y)),r.g=d}else xA(r);0<n.j.length&&Zf(n)}else w[0]!="stop"&&w[0]!="close"||Ko(n,7);else n.H==3&&(w[0]=="stop"||w[0]=="close"?w[0]=="stop"?Ko(n,7):ym(n):w[0]!="noop"&&n.h&&n.h.Aa(w),n.A=0)}}mc(4)}catch{}}function Q8(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Pf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function J8(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Pf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function eA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Pf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=J8(t),r=Q8(t),s=r.length,l=0;l<s;l++)e.call(void 0,r[l],n&&n[l],t)}var tA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eP(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var l=t[n].substring(0,r);s=t[n].substring(r+1)}else l=t[n];e(l,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ra(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ra){this.h=t.h,Hd(this,t.j),this.s=t.s,this.g=t.g,Wd(this,t.m),this.l=t.l;var e=t.i,n=new _c;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),tx(this,n),this.o=t.o}else t&&(e=String(t).match(tA))?(this.h=!1,Hd(this,e[1]||"",!0),this.s=Cu(e[2]||""),this.g=Cu(e[3]||"",!0),Wd(this,e[4]),this.l=Cu(e[5]||"",!0),tx(this,e[6]||"",!0),this.o=Cu(e[7]||"")):(this.h=!1,this.i=new _c(null,this.h))}ra.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Iu(e,nx,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Iu(e,nx,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Iu(n,n.charAt(0)=="/"?rP:nP,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Iu(n,sP)),t.join("")};function Is(t){return new ra(t)}function Hd(t,e,n){t.j=n?Cu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function tx(t,e,n){e instanceof _c?(t.i=e,oP(t.i,t.h)):(n||(e=Iu(e,iP)),t.i=new _c(e,t.h))}function Vt(t,e,n){t.i.set(e,n)}function zf(t){return Vt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Cu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Iu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,tP),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function tP(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var nx=/[#\/\?@]/g,nP=/[#\?:]/g,rP=/[#\?]/g,iP=/[#\?@]/g,sP=/#/g;function _c(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ro(t){t.g||(t.g=new Map,t.h=0,t.i&&eP(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}we=_c.prototype;we.add=function(t,e){Ro(this),this.i=null,t=Ml(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function nA(t,e){Ro(t),e=Ml(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function rA(t,e){return Ro(t),e=Ml(t,e),t.g.has(e)}we.forEach=function(t,e){Ro(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};we.ta=function(){Ro(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let l=0;l<s.length;l++)n.push(e[r])}return n};we.Z=function(t){Ro(this);let e=[];if(typeof t=="string")rA(this,t)&&(e=e.concat(this.g.get(Ml(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};we.set=function(t,e){return Ro(this),this.i=null,t=Ml(this,t),rA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};we.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function iA(t,e,n){nA(t,e),0<n.length&&(t.i=null,t.g.set(Ml(t,e),tm(n)),t.h+=n.length)}we.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const l=encodeURIComponent(String(r)),d=this.Z(r);for(r=0;r<d.length;r++){var s=l;d[r]!==""&&(s+="="+encodeURIComponent(String(d[r]))),t.push(s)}}return this.i=t.join("&")};function Ml(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function oP(t,e){e&&!t.j&&(Ro(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(nA(this,r),iA(this,s,n))},t)),t.j=e}var aP=class{constructor(t,e){this.g=t,this.map=e}};function sA(t){this.l=t||lP,Ve.PerformanceNavigationTiming?(t=Ve.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ve.g&&Ve.g.Ka&&Ve.g.Ka()&&Ve.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lP=10;function oA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function aA(t){return t.h?1:t.g?t.g.size:0}function Tp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function gm(t,e){t.g?t.g.add(e):t.h=e}function lA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}sA.prototype.cancel=function(){if(this.i=uA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function uA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return tm(t.i)}var uP=class{stringify(t){return Ve.JSON.stringify(t,void 0)}parse(t){return Ve.JSON.parse(t,void 0)}};function cP(){this.g=new uP}function hP(t,e,n){const r=n||"";try{eA(t,function(s,l){let d=s;Vc(s)&&(d=lm(s)),e.push(r+l+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function dP(t,e){const n=new Lf;if(Ve.Image){const r=new Image;r.onload=Oh(kh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Oh(kh,n,r,"TestLoadImage: error",!1,e),r.onabort=Oh(kh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oh(kh,n,r,"TestLoadImage: timeout",!1,e),Ve.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function kh(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function jf(t){this.l=t.ec||null,this.j=t.ob||!1}Bn(jf,dm);jf.prototype.g=function(){return new Hf(this.l,this.j)};jf.prototype.i=function(t){return function(){return t}}({});function Hf(t,e){Dn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=mm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bn(Hf,Dn);var mm=0;we=Hf.prototype;we.open=function(t,e){if(this.readyState!=mm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,yc(this)};we.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ve).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};we.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zc(this)),this.readyState=mm};we.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,yc(this)),this.g&&(this.readyState=3,yc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ve.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function cA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}we.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Zc(this):yc(this),this.readyState==3&&cA(this)}};we.Za=function(t){this.g&&(this.response=this.responseText=t,Zc(this))};we.Ya=function(t){this.g&&(this.response=t,Zc(this))};we.ka=function(){this.g&&Zc(this)};function Zc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,yc(t)}we.setRequestHeader=function(t,e){this.v.append(t,e)};we.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};we.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function yc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Hf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var fP=Ve.JSON.parse;function nn(t){Dn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hA,this.L=this.M=!1}Bn(nn,Dn);var hA="",pP=/^https?$/i,gP=["POST","PUT"];we=nn.prototype;we.Oa=function(t){this.M=t};we.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wp.g(),this.C=this.u?ex(this.u):ex(wp),this.g.onreadystatechange=rr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(l){rx(this,l);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const l of r.keys())n.set(l,r.get(l));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(l=>l.toLowerCase()=="content-type"),s=Ve.FormData&&t instanceof Ve.FormData,!(0<=bE(gP,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,d]of n)this.g.setRequestHeader(l,d);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{pA(this),0<this.B&&((this.L=mP(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rr(this.ua,this)):this.A=hm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){rx(this,l)}};function mP(t){return xl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}we.ua=function(){typeof em<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wn(this,"timeout"),this.abort(8))};function rx(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,dA(t),Wf(t)}function dA(t){t.F||(t.F=!0,Wn(t,"complete"),Wn(t,"error"))}we.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Wn(this,"complete"),Wn(this,"abort"),Wf(this))};we.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wf(this,!0)),nn.$.N.call(this)};we.La=function(){this.s||(this.G||this.v||this.l?fA(this):this.kb())};we.kb=function(){fA(this)};function fA(t){if(t.h&&typeof em<"u"&&(!t.C[1]||ji(t)!=4||t.da()!=2)){if(t.v&&ji(t)==4)hm(t.La,0,t);else if(Wn(t,"readystatechange"),ji(t)==4){t.h=!1;try{const d=t.da();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=d===0){var s=String(t.I).match(tA)[1]||null;!s&&Ve.self&&Ve.self.location&&(s=Ve.self.location.protocol.slice(0,-1)),r=!pP.test(s?s.toLowerCase():"")}n=r}if(n)Wn(t,"complete"),Wn(t,"success");else{t.m=6;try{var l=2<ji(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.da()+"]",dA(t)}}finally{Wf(t)}}}}function Wf(t,e){if(t.g){pA(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Wn(t,"ready");try{n.onreadystatechange=r}catch{}}}function pA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ve.clearTimeout(t.A),t.A=null)}we.isActive=function(){return!!this.g};function ji(t){return t.g?t.g.readyState:0}we.da=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}};we.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};we.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),fP(e)}};function ix(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case hA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function _P(t){const e={};t=(t.g&&2<=ji(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(hc(t[r]))continue;var n=j8(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const l=e[s]||[];e[s]=l,l.push(n)}D8(e,function(r){return r.join(", ")})}we.Ia=function(){return this.m};we.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function gA(t){let e="";return rm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function _m(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Vt(t,e,n))}function gu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function mA(t){this.Ga=0,this.j=[],this.l=new Lf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=gu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=gu("baseRetryDelayMs",5e3,t),this.hb=gu("retryDelaySeedMs",1e4,t),this.eb=gu("forwardChannelMaxRetries",2,t),this.xa=gu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new sA(t&&t.concurrentRequestLimit),this.Ja=new cP,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}we=mA.prototype;we.ra=8;we.H=1;function ym(t){if(_A(t),t.H==3){var e=t.W++,n=Is(t.I);if(Vt(n,"SID",t.K),Vt(n,"RID",e),Vt(n,"TYPE","terminate"),$c(t,n),e=new Wc(t,t.l,e),e.L=2,e.v=zf(Is(n)),n=!1,Ve.navigator&&Ve.navigator.sendBeacon)try{n=Ve.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Ve.Image&&(new Image().src=e.v,n=!0),n||(e.g=CA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Gc(e)}AA(t)}function Gf(t){t.g&&(wm(t),t.g.cancel(),t.g=null)}function _A(t){Gf(t),t.u&&(Ve.clearTimeout(t.u),t.u=null),Gd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ve.clearTimeout(t.m),t.m=null)}function Zf(t){if(!oA(t.i)&&!t.m){t.m=!0;var e=t.Na;fc||VE(),pc||(fc(),pc=!0),um.add(e,t),t.C=0}}function yP(t,e){return aA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=jc(rr(t.Na,t,e),EA(t,t.C)),t.C++,!0)}we.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Wc(this,this.l,t);let l=this.s;if(this.U&&(l?(l=OE(l),ME(l,this.U)):l=this.U),this.o!==null||this.O||(s.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=yA(this,s,e),n=Is(this.I),Vt(n,"RID",t),Vt(n,"CVER",22),this.F&&Vt(n,"X-HTTP-Session-Id",this.F),$c(this,n),l&&(this.O?e="headers="+encodeURIComponent(String(gA(l)))+"&"+e:this.o&&_m(n,this.o,l)),gm(this.i,s),this.bb&&Vt(n,"TYPE","init"),this.P?(Vt(n,"$req",e),Vt(n,"SID","null"),s.aa=!0,Ep(s,n,null)):Ep(s,n,e),this.H=2}}else this.H==3&&(t?sx(this,t):this.j.length==0||oA(this.i)||sx(this))};function sx(t,e){var n;e?n=e.m:n=t.W++;const r=Is(t.I);Vt(r,"SID",t.K),Vt(r,"RID",n),Vt(r,"AID",t.V),$c(t,r),t.o&&t.s&&_m(r,t.o,t.s),n=new Wc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=yA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),gm(t.i,n),Ep(n,r,e)}function $c(t,e){t.na&&rm(t.na,function(n,r){Vt(e,r,n)}),t.h&&eA({},function(n,r){Vt(e,r,n)})}function yA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?rr(t.h.Va,t.h,t):null;e:{var s=t.j;let l=-1;for(;;){const d=["count="+n];l==-1?0<n?(l=s[0].g,d.push("ofs="+l)):l=0:d.push("ofs="+l);let y=!0;for(let x=0;x<n;x++){let w=s[x].g;const C=s[x].map;if(w-=l,0>w)l=Math.max(0,s[x].g-100),y=!1;else try{hP(C,d,"req"+w+"_")}catch{r&&r(C)}}if(y){r=d.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function xA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;fc||VE(),pc||(fc(),pc=!0),um.add(e,t),t.A=0}}function xm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=jc(rr(t.Ma,t),EA(t,t.A)),t.A++,!0)}we.Ma=function(){if(this.u=null,wA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=jc(rr(this.jb,this),t)}};we.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,mr(10),Gf(this),wA(this))};function wm(t){t.B!=null&&(Ve.clearTimeout(t.B),t.B=null)}function wA(t){t.g=new Wc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Is(t.wa);Vt(e,"RID","rpc"),Vt(e,"SID",t.K),Vt(e,"AID",t.V),Vt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Vt(e,"TO",t.qa),Vt(e,"TYPE","xmlhttp"),$c(t,e),t.o&&t.s&&_m(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=zf(Is(e)),n.s=null,n.S=!0,qE(n,t)}we.ib=function(){this.v!=null&&(this.v=null,Gf(this),xm(this),mr(19))};function Gd(t){t.v!=null&&(Ve.clearTimeout(t.v),t.v=null)}function vA(t,e){var n=null;if(t.g==e){Gd(t),wm(t),t.g=null;var r=2}else if(Tp(t.i,e))n=e.F,lA(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Bf(),Wn(r,new ZE(r,n)),Zf(t)}else xA(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&yP(t,e)||r==2&&xm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ko(t,5);break;case 4:Ko(t,10);break;case 3:Ko(t,6);break;default:Ko(t,2)}}}function EA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ko(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=rr(t.pb,t);n||(n=new ra("//www.google.com/images/cleardot.gif"),Ve.location&&Ve.location.protocol=="http"||Hd(n,"https"),zf(n)),dP(n.toString(),r)}else mr(2);t.H=0,t.h&&t.h.za(e),AA(t),_A(t)}we.pb=function(t){t?(this.l.info("Successfully pinged google.com"),mr(2)):(this.l.info("Failed to ping google.com"),mr(1))};function AA(t){if(t.H=0,t.ma=[],t.h){const e=uA(t.i);(e.length!=0||t.j.length!=0)&&(Yy(t.ma,e),Yy(t.ma,t.j),t.i.i.length=0,tm(t.j),t.j.length=0),t.h.ya()}}function TA(t,e,n){var r=n instanceof ra?Is(n):new ra(n);if(r.g!="")e&&(r.g=e+"."+r.g),Wd(r,r.m);else{var s=Ve.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var l=new ra(null);r&&Hd(l,r),e&&(l.g=e),s&&Wd(l,s),n&&(l.l=n),r=l}return n=t.F,e=t.Da,n&&e&&Vt(r,n,e),Vt(r,"VER",t.ra),$c(t,r),r}function CA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new nn(new jf({ob:!0})):new nn(t.va),e.Oa(t.J),e}we.isActive=function(){return!!this.h&&this.h.isActive(this)};function IA(){}we=IA.prototype;we.Ba=function(){};we.Aa=function(){};we.za=function(){};we.ya=function(){};we.isActive=function(){return!0};we.Va=function(){};function Zd(){if(xl&&!(10<=Number(P8)))throw Error("Environmental error: no available transport.")}Zd.prototype.g=function(t,e){return new Hr(t,e)};function Hr(t,e){Dn.call(this),this.g=new mA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!hc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new kl(this)}Bn(Hr,Dn);Hr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;mr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=TA(t,null,t.Y),Zf(t)};Hr.prototype.close=function(){ym(this.g)};Hr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=lm(t),t=n);e.j.push(new aP(e.fb++,t)),e.H==3&&Zf(e)};Hr.prototype.N=function(){this.g.h=null,delete this.j,ym(this.g),delete this.g,Hr.$.N.call(this)};function SA(t){fm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Bn(SA,fm);function bA(){pm.call(this),this.status=1}Bn(bA,pm);function kl(t){this.g=t}Bn(kl,IA);kl.prototype.Ba=function(){Wn(this.g,"a")};kl.prototype.Aa=function(t){Wn(this.g,new SA(t))};kl.prototype.za=function(t){Wn(this.g,new bA)};kl.prototype.ya=function(){Wn(this.g,"b")};function xP(){this.blockSize=-1}function Yi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Bn(Yi,xP);Yi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function i1(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var l=t.g[3],d=e+(l^n&(s^l))+r[0]+3614090360&4294967295;e=n+(d<<7&4294967295|d>>>25),d=l+(s^e&(n^s))+r[1]+3905402710&4294967295,l=e+(d<<12&4294967295|d>>>20),d=s+(n^l&(e^n))+r[2]+606105819&4294967295,s=l+(d<<17&4294967295|d>>>15),d=n+(e^s&(l^e))+r[3]+3250441966&4294967295,n=s+(d<<22&4294967295|d>>>10),d=e+(l^n&(s^l))+r[4]+4118548399&4294967295,e=n+(d<<7&4294967295|d>>>25),d=l+(s^e&(n^s))+r[5]+1200080426&4294967295,l=e+(d<<12&4294967295|d>>>20),d=s+(n^l&(e^n))+r[6]+2821735955&4294967295,s=l+(d<<17&4294967295|d>>>15),d=n+(e^s&(l^e))+r[7]+4249261313&4294967295,n=s+(d<<22&4294967295|d>>>10),d=e+(l^n&(s^l))+r[8]+1770035416&4294967295,e=n+(d<<7&4294967295|d>>>25),d=l+(s^e&(n^s))+r[9]+2336552879&4294967295,l=e+(d<<12&4294967295|d>>>20),d=s+(n^l&(e^n))+r[10]+4294925233&4294967295,s=l+(d<<17&4294967295|d>>>15),d=n+(e^s&(l^e))+r[11]+2304563134&4294967295,n=s+(d<<22&4294967295|d>>>10),d=e+(l^n&(s^l))+r[12]+1804603682&4294967295,e=n+(d<<7&4294967295|d>>>25),d=l+(s^e&(n^s))+r[13]+4254626195&4294967295,l=e+(d<<12&4294967295|d>>>20),d=s+(n^l&(e^n))+r[14]+2792965006&4294967295,s=l+(d<<17&4294967295|d>>>15),d=n+(e^s&(l^e))+r[15]+1236535329&4294967295,n=s+(d<<22&4294967295|d>>>10),d=e+(s^l&(n^s))+r[1]+4129170786&4294967295,e=n+(d<<5&4294967295|d>>>27),d=l+(n^s&(e^n))+r[6]+3225465664&4294967295,l=e+(d<<9&4294967295|d>>>23),d=s+(e^n&(l^e))+r[11]+643717713&4294967295,s=l+(d<<14&4294967295|d>>>18),d=n+(l^e&(s^l))+r[0]+3921069994&4294967295,n=s+(d<<20&4294967295|d>>>12),d=e+(s^l&(n^s))+r[5]+3593408605&4294967295,e=n+(d<<5&4294967295|d>>>27),d=l+(n^s&(e^n))+r[10]+38016083&4294967295,l=e+(d<<9&4294967295|d>>>23),d=s+(e^n&(l^e))+r[15]+3634488961&4294967295,s=l+(d<<14&4294967295|d>>>18),d=n+(l^e&(s^l))+r[4]+3889429448&4294967295,n=s+(d<<20&4294967295|d>>>12),d=e+(s^l&(n^s))+r[9]+568446438&4294967295,e=n+(d<<5&4294967295|d>>>27),d=l+(n^s&(e^n))+r[14]+3275163606&4294967295,l=e+(d<<9&4294967295|d>>>23),d=s+(e^n&(l^e))+r[3]+4107603335&4294967295,s=l+(d<<14&4294967295|d>>>18),d=n+(l^e&(s^l))+r[8]+1163531501&4294967295,n=s+(d<<20&4294967295|d>>>12),d=e+(s^l&(n^s))+r[13]+2850285829&4294967295,e=n+(d<<5&4294967295|d>>>27),d=l+(n^s&(e^n))+r[2]+4243563512&4294967295,l=e+(d<<9&4294967295|d>>>23),d=s+(e^n&(l^e))+r[7]+1735328473&4294967295,s=l+(d<<14&4294967295|d>>>18),d=n+(l^e&(s^l))+r[12]+2368359562&4294967295,n=s+(d<<20&4294967295|d>>>12),d=e+(n^s^l)+r[5]+4294588738&4294967295,e=n+(d<<4&4294967295|d>>>28),d=l+(e^n^s)+r[8]+2272392833&4294967295,l=e+(d<<11&4294967295|d>>>21),d=s+(l^e^n)+r[11]+1839030562&4294967295,s=l+(d<<16&4294967295|d>>>16),d=n+(s^l^e)+r[14]+4259657740&4294967295,n=s+(d<<23&4294967295|d>>>9),d=e+(n^s^l)+r[1]+2763975236&4294967295,e=n+(d<<4&4294967295|d>>>28),d=l+(e^n^s)+r[4]+1272893353&4294967295,l=e+(d<<11&4294967295|d>>>21),d=s+(l^e^n)+r[7]+4139469664&4294967295,s=l+(d<<16&4294967295|d>>>16),d=n+(s^l^e)+r[10]+3200236656&4294967295,n=s+(d<<23&4294967295|d>>>9),d=e+(n^s^l)+r[13]+681279174&4294967295,e=n+(d<<4&4294967295|d>>>28),d=l+(e^n^s)+r[0]+3936430074&4294967295,l=e+(d<<11&4294967295|d>>>21),d=s+(l^e^n)+r[3]+3572445317&4294967295,s=l+(d<<16&4294967295|d>>>16),d=n+(s^l^e)+r[6]+76029189&4294967295,n=s+(d<<23&4294967295|d>>>9),d=e+(n^s^l)+r[9]+3654602809&4294967295,e=n+(d<<4&4294967295|d>>>28),d=l+(e^n^s)+r[12]+3873151461&4294967295,l=e+(d<<11&4294967295|d>>>21),d=s+(l^e^n)+r[15]+530742520&4294967295,s=l+(d<<16&4294967295|d>>>16),d=n+(s^l^e)+r[2]+3299628645&4294967295,n=s+(d<<23&4294967295|d>>>9),d=e+(s^(n|~l))+r[0]+4096336452&4294967295,e=n+(d<<6&4294967295|d>>>26),d=l+(n^(e|~s))+r[7]+1126891415&4294967295,l=e+(d<<10&4294967295|d>>>22),d=s+(e^(l|~n))+r[14]+2878612391&4294967295,s=l+(d<<15&4294967295|d>>>17),d=n+(l^(s|~e))+r[5]+4237533241&4294967295,n=s+(d<<21&4294967295|d>>>11),d=e+(s^(n|~l))+r[12]+1700485571&4294967295,e=n+(d<<6&4294967295|d>>>26),d=l+(n^(e|~s))+r[3]+2399980690&4294967295,l=e+(d<<10&4294967295|d>>>22),d=s+(e^(l|~n))+r[10]+4293915773&4294967295,s=l+(d<<15&4294967295|d>>>17),d=n+(l^(s|~e))+r[1]+2240044497&4294967295,n=s+(d<<21&4294967295|d>>>11),d=e+(s^(n|~l))+r[8]+1873313359&4294967295,e=n+(d<<6&4294967295|d>>>26),d=l+(n^(e|~s))+r[15]+4264355552&4294967295,l=e+(d<<10&4294967295|d>>>22),d=s+(e^(l|~n))+r[6]+2734768916&4294967295,s=l+(d<<15&4294967295|d>>>17),d=n+(l^(s|~e))+r[13]+1309151649&4294967295,n=s+(d<<21&4294967295|d>>>11),d=e+(s^(n|~l))+r[4]+4149444226&4294967295,e=n+(d<<6&4294967295|d>>>26),d=l+(n^(e|~s))+r[11]+3174756917&4294967295,l=e+(d<<10&4294967295|d>>>22),d=s+(e^(l|~n))+r[2]+718787259&4294967295,s=l+(d<<15&4294967295|d>>>17),d=n+(l^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(d<<21&4294967295|d>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+l&4294967295}Yi.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,l=0;l<e;){if(s==0)for(;l<=n;)i1(this,t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<e;)if(r[s++]=t.charCodeAt(l++),s==this.blockSize){i1(this,r),s=0;break}}else for(;l<e;)if(r[s++]=t[l++],s==this.blockSize){i1(this,r),s=0;break}}this.h=s,this.i+=e};Yi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function At(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var l=t[s]|0;r&&l==e||(n[s]=l,r=!1)}this.g=n}var wP={};function vm(t){return-128<=t&&128>t?b8(t,function(e){return new At([e|0],0>e?-1:0)}):new At([t|0],0>t?-1:0)}function Hi(t){if(isNaN(t)||!isFinite(t))return ul;if(0>t)return jn(Hi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Cp;return new At(e,0)}function RA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return jn(RA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Hi(Math.pow(e,8)),r=ul,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),d=parseInt(t.substring(s,s+l),e);8>l?(l=Hi(Math.pow(e,l)),r=r.R(l).add(Hi(d))):(r=r.R(n),r=r.add(Hi(d)))}return r}var Cp=4294967296,ul=vm(0),Ip=vm(1),ox=vm(16777216);we=At.prototype;we.ea=function(){if(ri(this))return-jn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Cp+r)*e,e*=Cp}return t};we.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(gs(this))return"0";if(ri(this))return"-"+jn(this).toString(t);for(var e=Hi(Math.pow(t,6)),n=this,r="";;){var s=Xd(n,e).g;n=$d(n,s.R(e));var l=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,gs(n))return l+r;for(;6>l.length;)l="0"+l;r=l+r}};we.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function gs(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ri(t){return t.h==-1}we.X=function(t){return t=$d(this,t),ri(t)?-1:gs(t)?0:1};function jn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new At(n,~t.h).add(Ip)}we.abs=function(){return ri(this)?jn(this):this};we.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var l=r+(this.D(s)&65535)+(t.D(s)&65535),d=(l>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=d>>>16,l&=65535,d&=65535,n[s]=d<<16|l}return new At(n,n[n.length-1]&-2147483648?-1:0)};function $d(t,e){return t.add(jn(e))}we.R=function(t){if(gs(this)||gs(t))return ul;if(ri(this))return ri(t)?jn(this).R(jn(t)):jn(jn(this).R(t));if(ri(t))return jn(this.R(jn(t)));if(0>this.X(ox)&&0>t.X(ox))return Hi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var l=this.D(r)>>>16,d=this.D(r)&65535,y=t.D(s)>>>16,x=t.D(s)&65535;n[2*r+2*s]+=d*x,Dh(n,2*r+2*s),n[2*r+2*s+1]+=l*x,Dh(n,2*r+2*s+1),n[2*r+2*s+1]+=d*y,Dh(n,2*r+2*s+1),n[2*r+2*s+2]+=l*y,Dh(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new At(n,0)};function Dh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function mu(t,e){this.g=t,this.h=e}function Xd(t,e){if(gs(e))throw Error("division by zero");if(gs(t))return new mu(ul,ul);if(ri(t))return e=Xd(jn(t),e),new mu(jn(e.g),jn(e.h));if(ri(e))return e=Xd(t,jn(e)),new mu(jn(e.g),e.h);if(30<t.g.length){if(ri(t)||ri(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ip,r=e;0>=r.X(t);)n=ax(n),r=ax(r);var s=La(n,1),l=La(r,1);for(r=La(r,2),n=La(n,2);!gs(r);){var d=l.add(r);0>=d.X(t)&&(s=s.add(n),l=d),r=La(r,1),n=La(n,1)}return e=$d(t,s.R(e)),new mu(s,e)}for(s=ul;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),l=Hi(n),d=l.R(e);ri(d)||0<d.X(t);)n-=r,l=Hi(n),d=l.R(e);gs(l)&&(l=Ip),s=s.add(l),t=$d(t,d)}return new mu(s,t)}we.gb=function(t){return Xd(this,t).h};we.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new At(n,this.h&t.h)};we.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new At(n,this.h|t.h)};we.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new At(n,this.h^t.h)};function ax(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new At(n,t.h)}function La(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],l=0;l<r;l++)s[l]=0<e?t.D(l+n)>>>e|t.D(l+n+1)<<32-e:t.D(l+n);return new At(s,t.h)}Zd.prototype.createWebChannel=Zd.prototype.g;Hr.prototype.send=Hr.prototype.u;Hr.prototype.open=Hr.prototype.m;Hr.prototype.close=Hr.prototype.close;Ff.NO_ERROR=0;Ff.TIMEOUT=8;Ff.HTTP_ERROR=6;$E.COMPLETE="complete";XE.EventType=Hc;Hc.OPEN="a";Hc.CLOSE="b";Hc.ERROR="c";Hc.MESSAGE="d";Dn.prototype.listen=Dn.prototype.O;nn.prototype.listenOnce=nn.prototype.P;nn.prototype.getLastError=nn.prototype.Sa;nn.prototype.getLastErrorCode=nn.prototype.Ia;nn.prototype.getStatus=nn.prototype.da;nn.prototype.getResponseJson=nn.prototype.Wa;nn.prototype.getResponseText=nn.prototype.ja;nn.prototype.send=nn.prototype.ha;nn.prototype.setWithCredentials=nn.prototype.Oa;Yi.prototype.digest=Yi.prototype.l;Yi.prototype.reset=Yi.prototype.reset;Yi.prototype.update=Yi.prototype.j;At.prototype.add=At.prototype.add;At.prototype.multiply=At.prototype.R;At.prototype.modulo=At.prototype.gb;At.prototype.compare=At.prototype.X;At.prototype.toNumber=At.prototype.ea;At.prototype.toString=At.prototype.toString;At.prototype.getBits=At.prototype.D;At.fromNumber=Hi;At.fromString=RA;var vP=function(){return new Zd},EP=function(){return Bf()},s1=Ff,AP=$E,TP=Ta,lx={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Lh=XE,CP=nn,IP=At;const ux="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="10.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new Bg("@firebase/firestore");function _u(){return ma.logLevel}function Pe(t,...e){if(ma.logLevel<=at.DEBUG){const n=e.map(Em);ma.debug(`Firestore (${Dl}): ${t}`,...n)}}function _a(t,...e){if(ma.logLevel<=at.ERROR){const n=e.map(Em);ma.error(`Firestore (${Dl}): ${t}`,...n)}}function Yd(t,...e){if(ma.logLevel<=at.WARN){const n=e.map(Em);ma.warn(`Firestore (${Dl}): ${t}`,...n)}}function Em(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t="Unexpected state"){const e=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: `+t;throw _a(e),new Error(e)}function Ln(t,e){t||lt()}function Ht(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Ki{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jn.UNAUTHENTICATED))}shutdown(){}}class bP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RP{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=x=>this.i!==r?(r=this.i,n(x)):Promise.resolve();let l=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ia,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const x=l;e.enqueueRetryable(async()=>{await x.promise,await s(this.currentUser)})},y=x=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(x=>y(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?y(x):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ia)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ln(typeof r.accessToken=="string"),new NA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ln(e===null||typeof e=="string"),new Jn(e)}}class NP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class PP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new NP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=l=>{l.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.R;return this.R=l.token,Pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?s(l):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ln(typeof n.token=="string"),this.R=n.token,new OP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=kP(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<n&&(r+=e.charAt(s[l]%e.length))}return r}}function Mt(t,e){return t<e?-1:t>e?1:0}function wl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ze(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xt(e)}static min(){return new Xt(new Mn(0,0))}static max(){return new Xt(new Mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r){n===void 0?n=0:n>e.length&&lt(),r===void 0?r=e.length-n:r>e.length-n&&lt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const l=e.get(s),d=n.get(s);if(l<d)return-1;if(l>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dn extends xc{construct(e,n,r){return new dn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ze(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new dn(n)}static emptyPath(){return new dn([])}}const DP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends xc{construct(e,n,r){return new nr(e,n,r)}static isValidIdentifier(e){return DP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nr(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const l=()=>{if(r.length===0)throw new ze(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;s<e.length;){const y=e[s];if(y==="\\"){if(s+1===e.length)throw new ze(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[s+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new ze(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=x,s+=2}else y==="`"?(d=!d,s++):y!=="."||d?(r+=y,s++):(l(),s++)}if(l(),d)throw new ze(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(n)}static emptyPath(){return new nr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(dn.fromString(e))}static fromName(e){return new qe(dn.fromString(e).popFirst(5))}static empty(){return new qe(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new dn(e.slice()))}}function LP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Xt.fromTimestamp(r===1e9?new Mn(n+1,0):new Mn(n,r));return new xo(s,qe.empty(),e)}function BP(t){return new xo(t.readTime,t.key,-1)}class xo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xo(Xt.min(),qe.empty(),-1)}static max(){return new xo(Xt.max(),qe.empty(),-1)}}function FP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=qe.comparator(t.documentKey,e.documentKey),n!==0?n:Mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==UP)throw t;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):he.reject(n)}static resolve(e){return new he((n,r)=>{n(e)})}static reject(e){return new he((n,r)=>{r(e)})}static waitFor(e){return new he((n,r)=>{let s=0,l=0,d=!1;e.forEach(y=>{++s,y.next(()=>{++l,d&&l===s&&n()},x=>r(x))}),d=!0,l===s&&n()})}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next(s=>s?he.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,l)=>{r.push(n.call(this,s,l))}),this.waitFor(r)}static mapArray(e,n){return new he((r,s)=>{const l=e.length,d=new Array(l);let y=0;for(let x=0;x<l;x++){const w=x;n(e[w]).next(C=>{d[w]=C,++y,y===l&&r(d)},C=>s(C))}})}static doWhile(e,n){return new he((r,s)=>{const l=()=>{e()===!0?n().next(()=>{l()},s):r()};l()})}}function $f(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}MA.ae=-1;function Am(t){return t==null}function qd(t){return t===0&&1/t==-1/0}function zP(t){return typeof t=="number"&&Number.isInteger(t)&&!qd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){this.comparator=e,this.root=n||Vn.EMPTY}insert(e,n){return new Rr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?r(e.key,n):1,n&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,n,r,s,l){this.key=e,this.value=n,this.color=r??Vn.RED,this.left=s??Vn.EMPTY,this.right=l??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,l){return new Vn(e??this.key,n??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,n,r),null):l===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Vn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(e,n,r,s,l){return this}insert(e,n,r){return new Vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hx(this.data.getIterator())}getIteratorFrom(e){return new hx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yr(this.comparator);return n.data=e,n}}class hx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new Ai([])}unionWith(e){let n=new yr(nr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ai(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new jP("Invalid base64 string: "+l):l}}(e);return new Ss(n)}static fromUint8Array(e){const n=function(s){let l="";for(let d=0;d<s.length;++d)l+=String.fromCharCode(s[d]);return l}(e);return new Ss(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ss.EMPTY_BYTE_STRING=new Ss("");const HP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(t){if(Ln(!!t),typeof t=="string"){let e=0;const n=HP.exec(t);if(Ln(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(t.seconds),nanos:zn(t.nanos)}}function zn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wc(t){return typeof t=="string"?Ss.fromBase64String(t):Ss.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function DA(t){const e=t.mapValue.fields.__previous_value__;return Tm(e)?DA(e):e}function Kd(t){const e=ya(t.mapValue.fields.__local_write_time__.timestampValue);return new Mn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n,r,s,l,d,y,x,w){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=x,this.useFetchStreams=w}}class Qd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function vl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tm(t)?4:GP(t)?9007199254740991:10:lt()}function qi(t,e){if(t===e)return!0;const n=vl(t);if(n!==vl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kd(t).isEqual(Kd(e));case 3:return function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const d=ya(s.timestampValue),y=ya(l.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,l){return wc(s.bytesValue).isEqual(wc(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,l){return zn(s.geoPointValue.latitude)===zn(l.geoPointValue.latitude)&&zn(s.geoPointValue.longitude)===zn(l.geoPointValue.longitude)}(t,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return zn(s.integerValue)===zn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const d=zn(s.doubleValue),y=zn(l.doubleValue);return d===y?qd(d)===qd(y):isNaN(d)&&isNaN(y)}return!1}(t,e);case 9:return wl(t.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:return function(s,l){const d=s.mapValue.fields||{},y=l.mapValue.fields||{};if(cx(d)!==cx(y))return!1;for(const x in d)if(d.hasOwnProperty(x)&&(y[x]===void 0||!qi(d[x],y[x])))return!1;return!0}(t,e);default:return lt()}}function vc(t,e){return(t.values||[]).find(n=>qi(n,e))!==void 0}function El(t,e){if(t===e)return 0;const n=vl(t),r=vl(e);if(n!==r)return Mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(t.booleanValue,e.booleanValue);case 2:return function(l,d){const y=zn(l.integerValue||l.doubleValue),x=zn(d.integerValue||d.doubleValue);return y<x?-1:y>x?1:y===x?0:isNaN(y)?isNaN(x)?0:-1:1}(t,e);case 3:return dx(t.timestampValue,e.timestampValue);case 4:return dx(Kd(t),Kd(e));case 5:return Mt(t.stringValue,e.stringValue);case 6:return function(l,d){const y=wc(l),x=wc(d);return y.compareTo(x)}(t.bytesValue,e.bytesValue);case 7:return function(l,d){const y=l.split("/"),x=d.split("/");for(let w=0;w<y.length&&w<x.length;w++){const C=Mt(y[w],x[w]);if(C!==0)return C}return Mt(y.length,x.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,d){const y=Mt(zn(l.latitude),zn(d.latitude));return y!==0?y:Mt(zn(l.longitude),zn(d.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(l,d){const y=l.values||[],x=d.values||[];for(let w=0;w<y.length&&w<x.length;++w){const C=El(y[w],x[w]);if(C)return C}return Mt(y.length,x.length)}(t.arrayValue,e.arrayValue);case 10:return function(l,d){if(l===Fh.mapValue&&d===Fh.mapValue)return 0;if(l===Fh.mapValue)return 1;if(d===Fh.mapValue)return-1;const y=l.fields||{},x=Object.keys(y),w=d.fields||{},C=Object.keys(w);x.sort(),C.sort();for(let I=0;I<x.length&&I<C.length;++I){const O=Mt(x[I],C[I]);if(O!==0)return O;const V=El(y[x[I]],w[C[I]]);if(V!==0)return V}return Mt(x.length,C.length)}(t.mapValue,e.mapValue);default:throw lt()}}function dx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Mt(t,e);const n=ya(t),r=ya(e),s=Mt(n.seconds,r.seconds);return s!==0?s:Mt(n.nanos,r.nanos)}function Al(t){return Sp(t)}function Sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ya(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return qe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const l of n.values||[])s?s=!1:r+=",",r+=Sp(l);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",l=!0;for(const d of r)l?l=!1:s+=",",s+=`${d}:${Sp(n.fields[d])}`;return s+"}"}(t.mapValue):lt()}function bp(t){return!!t&&"integerValue"in t}function Cm(t){return!!t&&"arrayValue"in t}function rd(t){return!!t&&"mapValue"in t}function Uu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Uu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(n)}setAll(e){let n=nr.emptyPath(),r={},s=[];e.forEach((d,y)=>{if(!n.isImmediateParentOf(y)){const x=this.getFieldsMap(n);this.applyChanges(x,r,s),r={},s=[],n=y.popLast()}d?r[y.lastSegment()]=Uu(d):s.push(y.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,s)}delete(e){const n=this.field(e.popLast());rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];rd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Xc(n,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new Ei(Uu(this.value))}}function LA(t){const e=[];return Xc(t.fields,(n,r)=>{const s=new nr([n]);if(rd(r)){const l=LA(r.mapValue).fields;if(l.length===0)e.push(s);else for(const d of l)e.push(s.child(d))}else e.push(s)}),new Ai(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,s,l,d,y){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=l,this.data=d,this.documentState=y}static newInvalidDocument(e){return new vi(e,0,Xt.min(),Xt.min(),Xt.min(),Ei.empty(),0)}static newFoundDocument(e,n,r,s){return new vi(e,1,n,Xt.min(),r,s,0)}static newNoDocument(e,n){return new vi(e,2,n,Xt.min(),Xt.min(),Ei.empty(),0)}static newUnknownDocument(e,n){return new vi(e,3,n,Xt.min(),Xt.min(),Ei.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.position=e,this.inclusive=n}}function fx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const l=e[s],d=t.position[s];if(l.field.isKeyField()?r=qe.comparator(qe.fromName(d.referenceValue),n.key):r=El(d,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function px(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{}class Pn extends BA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XP(e,n,r):n==="array-contains"?new KP(e,r):n==="in"?new QP(e,r):n==="not-in"?new JP(e,r):n==="array-contains-any"?new eO(e,r):new Pn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YP(e,r):new qP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(El(n,this.value)):n!==null&&vl(this.value)===vl(n)&&this.matchesComparison(El(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wo extends BA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new wo(e,n)}matches(e){return FA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function FA(t){return t.op==="and"}function UA(t){return $P(t)&&FA(t)}function $P(t){for(const e of t.filters)if(e instanceof wo)return!1;return!0}function Rp(t){if(t instanceof Pn)return t.field.canonicalString()+t.op.toString()+Al(t.value);if(UA(t))return t.filters.map(e=>Rp(e)).join(",");{const e=t.filters.map(n=>Rp(n)).join(",");return`${t.op}(${e})`}}function VA(t,e){return t instanceof Pn?function(r,s){return s instanceof Pn&&r.op===s.op&&r.field.isEqual(s.field)&&qi(r.value,s.value)}(t,e):t instanceof wo?function(r,s){return s instanceof wo&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((l,d,y)=>l&&VA(d,s.filters[y]),!0):!1}(t,e):void lt()}function zA(t){return t instanceof Pn?function(n){return`${n.field.canonicalString()} ${n.op} ${Al(n.value)}`}(t):t instanceof wo?function(n){return n.op.toString()+" {"+n.getFilters().map(zA).join(" ,")+"}"}(t):"Filter"}class XP extends Pn{constructor(e,n,r){super(e,n,r),this.key=qe.fromName(r.referenceValue)}matches(e){const n=qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class YP extends Pn{constructor(e,n){super(e,"in",n),this.keys=jA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qP extends Pn{constructor(e,n){super(e,"not-in",n),this.keys=jA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>qe.fromName(r.referenceValue))}class KP extends Pn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cm(n)&&vc(n.arrayValue,this.value)}}class QP extends Pn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vc(this.value.arrayValue,n)}}class JP extends Pn{constructor(e,n){super(e,"not-in",n)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vc(this.value.arrayValue,n)}}class eO extends Pn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n=null,r=[],s=[],l=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=d,this.endAt=y,this.he=null}}function gx(t,e=null,n=[],r=[],s=null,l=null,d=null){return new tO(t,e,n,r,s,l,d)}function Im(t){const e=Ht(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Am(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Al(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Al(r)).join(",")),e.he=n}return e.he}function Sm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!px(t.startAt,e.startAt)&&px(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n=null,r=[],s=[],l=null,d="F",y=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=d,this.startAt=y,this.endAt=x,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function nO(t,e,n,r,s,l,d,y){return new Xf(t,e,n,r,s,l,d,y)}function rO(t){return new Xf(t)}function mx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iO(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function sO(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function oO(t){return t.collectionGroup!==null}function zu(t){const e=Ht(t);if(e.Pe===null){e.Pe=[];const n=sO(e),r=iO(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Vu(n)),e.Pe.push(new Vu(nr.keyField(),"asc"));else{let s=!1;for(const l of e.explicitOrderBy)e.Pe.push(l),l.field.isKeyField()&&(s=!0);if(!s){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Vu(nr.keyField(),l))}}}return e.Pe}function sa(t){const e=Ht(t);return e.Ie||(e.Ie=aO(e,zu(t))),e.Ie}function aO(t,e){if(t.limitType==="F")return gx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const l=s.dir==="desc"?"asc":"desc";return new Vu(s.field,l)});const n=t.endAt?new Jd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jd(t.startAt.position,t.startAt.inclusive):null;return gx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Np(t,e,n){return new Xf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function HA(t,e){return Sm(sa(t),sa(e))&&t.limitType===e.limitType}function WA(t){return`${Im(sa(t))}|lt:${t.limitType}`}function yu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>zA(s)).join(", ")}]`),Am(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Al(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Al(s)).join(",")),`Target(${r})`}(sa(t))}; limitType=${t.limitType})`}function bm(t,e){return e.isFoundDocument()&&function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):qe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(t,e)&&function(r,s){for(const l of zu(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(d,y,x){const w=fx(d,y,x);return d.inclusive?w<=0:w<0}(r.startAt,zu(r),s)||r.endAt&&!function(d,y,x){const w=fx(d,y,x);return d.inclusive?w>=0:w>0}(r.endAt,zu(r),s))}(t,e)}function lO(t){return(e,n)=>{let r=!1;for(const s of zu(t)){const l=uO(s,e,n);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function uO(t,e,n){const r=t.field.isKeyField()?qe.comparator(e.key,n.key):function(l,d,y){const x=d.data.field(l),w=y.data.field(l);return x!==null&&w!==null?El(x,w):lt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xc(this.inner,(n,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return kA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=new Rr(qe.comparator);function ef(){return cO}const GA=new Rr(qe.comparator);function Uh(...t){let e=GA;for(const n of t)e=e.insert(n.key,n);return e}function ZA(t){let e=GA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qo(){return ju()}function $A(){return ju()}function ju(){return new Ll(t=>t.toString(),(t,e)=>t.isEqual(e))}const hO=new Rr(qe.comparator),dO=new yr(qe.comparator);function tr(...t){let e=dO;for(const n of t)e=e.add(n);return e}const fO=new yr(Mt);function pO(){return fO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qd(e)?"-0":e}}function YA(t){return{integerValue:""+t}}function gO(t,e){return zP(e)?YA(e):XA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this._=void 0}}function mO(t,e,n){return t instanceof tf?function(s,l){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Tm(l)&&(l=DA(l)),l&&(d.fields.__previous_value__=l),{mapValue:d}}(n,e):t instanceof Ec?KA(t,e):t instanceof Ac?QA(t,e):function(s,l){const d=qA(s,l),y=_x(d)+_x(s.Te);return bp(d)&&bp(s.Te)?YA(y):XA(s.serializer,y)}(t,e)}function _O(t,e,n){return t instanceof Ec?KA(t,e):t instanceof Ac?QA(t,e):n}function qA(t,e){return t instanceof nf?function(r){return bp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class tf extends Yf{}class Ec extends Yf{constructor(e){super(),this.elements=e}}function KA(t,e){const n=JA(e);for(const r of t.elements)n.some(s=>qi(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ac extends Yf{constructor(e){super(),this.elements=e}}function QA(t,e){let n=JA(e);for(const r of t.elements)n=n.filter(s=>!qi(s,r));return{arrayValue:{values:n}}}class nf extends Yf{constructor(e,n){super(),this.serializer=e,this.Te=n}}function _x(t){return zn(t.integerValue||t.doubleValue)}function JA(t){return Cm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yO(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ec&&s instanceof Ec||r instanceof Ac&&s instanceof Ac?wl(r.elements,s.elements,qi):r instanceof nf&&s instanceof nf?qi(r.Te,s.Te):r instanceof tf&&s instanceof tf}(t.transform,e.transform)}class xO{constructor(e,n){this.version=e,this.transformResults=n}}class xs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xs}static exists(e){return new xs(void 0,e)}static updateTime(e){return new xs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function id(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qf{}function eT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nT(t.key,xs.none()):new Yc(t.key,t.data,xs.none());{const n=t.data,r=Ei.empty();let s=new yr(nr.comparator);for(let l of e.fields)if(!s.has(l)){let d=n.field(l);d===null&&l.length>1&&(l=l.popLast(),d=n.field(l)),d===null?r.delete(l):r.set(l,d),s=s.add(l)}return new Ca(t.key,r,new Ai(s.toArray()),xs.none())}}function wO(t,e,n){t instanceof Yc?function(s,l,d){const y=s.value.clone(),x=xx(s.fieldTransforms,l,d.transformResults);y.setAll(x),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(t,e,n):t instanceof Ca?function(s,l,d){if(!id(s.precondition,l))return void l.convertToUnknownDocument(d.version);const y=xx(s.fieldTransforms,l,d.transformResults),x=l.data;x.setAll(tT(s)),x.setAll(y),l.convertToFoundDocument(d.version,x).setHasCommittedMutations()}(t,e,n):function(s,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function Hu(t,e,n,r){return t instanceof Yc?function(l,d,y,x){if(!id(l.precondition,d))return y;const w=l.value.clone(),C=wx(l.fieldTransforms,x,d);return w.setAll(C),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ca?function(l,d,y,x){if(!id(l.precondition,d))return y;const w=wx(l.fieldTransforms,x,d),C=d.data;return C.setAll(tT(l)),C.setAll(w),d.convertToFoundDocument(d.version,C).setHasLocalMutations(),y===null?null:y.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(I=>I.field))}(t,e,n,r):function(l,d,y){return id(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y}(t,e,n)}function vO(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),l=qA(r.transform,s||null);l!=null&&(n===null&&(n=Ei.empty()),n.set(r.field,l))}return n||null}function yx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wl(r,s,(l,d)=>yO(l,d))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yc extends qf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ca extends qf{constructor(e,n,r,s,l=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function tT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xx(t,e,n){const r=new Map;Ln(t.length===n.length);for(let s=0;s<n.length;s++){const l=t[s],d=l.transform,y=e.data.field(l.field);r.set(l.field,_O(d,y,n[s]))}return r}function wx(t,e,n){const r=new Map;for(const s of t){const l=s.transform,d=n.data.field(s.field);r.set(s.field,mO(l,d,e))}return r}class nT extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EO extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&wO(l,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$A();return this.mutations.forEach(s=>{const l=e.get(s.key),d=l.overlayedDocument;let y=this.applyToLocalView(d,l.mutatedFields);y=n.has(s.key)?null:y;const x=eT(d,y);x!==null&&r.set(s.key,x),d.isValidDocument()||d.convertToNoDocument(Xt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),tr())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,(n,r)=>yx(n,r))&&wl(this.baseMutations,e.baseMutations,(n,r)=>yx(n,r))}}class Rm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ln(e.mutations.length===r.length);let s=function(){return hO}();const l=e.mutations;for(let d=0;d<l.length;d++)s=s.insert(l[d].key,r[d].version);return new Rm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,ht;function CO(t){switch(t){default:return lt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function IO(t){if(t===void 0)return _a("GRPC error has no .code"),ge.UNKNOWN;switch(t){case hn.OK:return ge.OK;case hn.CANCELLED:return ge.CANCELLED;case hn.UNKNOWN:return ge.UNKNOWN;case hn.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case hn.INTERNAL:return ge.INTERNAL;case hn.UNAVAILABLE:return ge.UNAVAILABLE;case hn.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case hn.NOT_FOUND:return ge.NOT_FOUND;case hn.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case hn.ABORTED:return ge.ABORTED;case hn.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case hn.DATA_LOSS:return ge.DATA_LOSS;default:return lt()}}(ht=hn||(hn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new IP([4294967295,4294967295],0);class SO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RO(t,e){return Pp(t,e.toTimestamp())}function cl(t){return Ln(!!t),Xt.fromTimestamp(function(n){const r=ya(n);return new Mn(r.seconds,r.nanos)}(t))}function rT(t,e){return function(r){return new dn(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function NO(t){const e=dn.fromString(t);return Ln(FO(e)),e}function Op(t,e){return rT(t.databaseId,e.path)}function PO(t){const e=NO(t);return e.length===4?dn.emptyPath():MO(e)}function OO(t){return new dn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MO(t){return Ln(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vx(t,e,n){return{name:Op(t,e),fields:n.value.mapValue.fields}}function kO(t,e){let n;if(e instanceof Yc)n={update:vx(t,e.key,e.value)};else if(e instanceof nT)n={delete:Op(t,e.key)};else if(e instanceof Ca)n={update:vx(t,e.key,e.data),updateMask:BO(e.fieldMask)};else{if(!(e instanceof EO))return lt();n={verify:Op(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(l,d){const y=d.transform;if(y instanceof tf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Ec)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Ac)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof nf)return{fieldPath:d.field.canonicalString(),increment:y.Te};throw lt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,l){return l.updateTime!==void 0?{updateTime:RO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:lt()}(t,e.precondition)),n}function DO(t,e){return t&&t.length>0?(Ln(e!==void 0),t.map(n=>function(s,l){let d=s.updateTime?cl(s.updateTime):cl(l);return d.isEqual(Xt.min())&&(d=cl(l)),new xO(d,s.transformResults||[])}(n,e))):[]}function LO(t){let e=PO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ln(r===1);const C=n.from[0];C.allDescendants?s=C.collectionId:e=e.child(C.collectionId)}let l=[];n.where&&(l=function(I){const O=iT(I);return O instanceof wo&&UA(O)?O.getFilters():[O]}(n.where));let d=[];n.orderBy&&(d=function(I){return I.map(O=>function(W){return new Vu(Ua(W.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(W.direction))}(O))}(n.orderBy));let y=null;n.limit&&(y=function(I){let O;return O=typeof I=="object"?I.value:I,Am(O)?null:O}(n.limit));let x=null;n.startAt&&(x=function(I){const O=!!I.before,V=I.values||[];return new Jd(V,O)}(n.startAt));let w=null;return n.endAt&&(w=function(I){const O=!I.before,V=I.values||[];return new Jd(V,O)}(n.endAt)),nO(e,s,d,l,y,"F",x,w)}function iT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ua(n.unaryFilter.field);return Pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ua(n.unaryFilter.field);return Pn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ua(n.unaryFilter.field);return Pn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ua(n.unaryFilter.field);return Pn.create(d,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(t):t.fieldFilter!==void 0?function(n){return Pn.create(Ua(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wo.create(n.compositeFilter.filters.map(r=>iT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return lt()}}(n.compositeFilter.op))}(t):lt()}function Ua(t){return nr.fromServerFormat(t.fieldPath)}function BO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.ht=e}}function VO(t){const e=LO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.an=new jO}addToCollectionParentIndex(e,n){return this.an.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(xo.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class jO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new yr(dn.comparator),l=!s.has(r);return this.index[n]=s.add(r),l}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new yr(dn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new Tl(0)}static Ln(){return new Tl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.changes=new Ll(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Hu(r.mutation,s,Ai.empty(),Mn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,tr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=tr()){const s=Qo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(l=>{let d=Uh();return l.forEach((y,x)=>{d=d.insert(y,x.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const r=Qo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,tr()))}populateOverlays(e,n,r){const s=[];return r.forEach(l=>{n.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((d,y)=>{n.set(d,y)})})}computeViews(e,n,r,s){let l=ef();const d=ju(),y=function(){return ju()}();return n.forEach((x,w)=>{const C=r.get(w.key);s.has(w.key)&&(C===void 0||C.mutation instanceof Ca)?l=l.insert(w.key,w):C!==void 0?(d.set(w.key,C.mutation.getFieldMask()),Hu(C.mutation,w,C.mutation.getFieldMask(),Mn.now())):d.set(w.key,Ai.empty())}),this.recalculateAndSaveOverlays(e,l).next(x=>(x.forEach((w,C)=>d.set(w,C)),n.forEach((w,C)=>{var I;return y.set(w,new WO(C,(I=d.get(w))!==null&&I!==void 0?I:null))}),y))}recalculateAndSaveOverlays(e,n){const r=ju();let s=new Rr((d,y)=>d-y),l=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const y of d)y.keys().forEach(x=>{const w=n.get(x);if(w===null)return;let C=r.get(x)||Ai.empty();C=y.applyToLocalView(w,C),r.set(x,C);const I=(s.get(y.batchId)||tr()).add(x);s=s.insert(y.batchId,I)})}).next(()=>{const d=[],y=s.getReverseIterator();for(;y.hasNext();){const x=y.getNext(),w=x.key,C=x.value,I=$A();C.forEach(O=>{if(!l.has(O)){const V=eT(n.get(O),r.get(O));V!==null&&I.set(O,V),l=l.add(O)}}),d.push(this.documentOverlayCache.saveOverlays(e,w,I))}return he.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(d){return qe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(l=>{const d=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-l.size):he.resolve(Qo());let y=-1,x=l;return d.next(w=>he.forEach(w,(C,I)=>(y<I.largestBatchId&&(y=I.largestBatchId),l.get(C)?he.resolve():this.remoteDocumentCache.getEntry(e,C).next(O=>{x=x.insert(C,O)}))).next(()=>this.populateOverlays(e,w,l)).next(()=>this.computeViews(e,x,w,tr())).next(C=>({batchId:y,changes:ZA(C)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qe(n)).next(r=>{let s=Uh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const l=n.collectionGroup;let d=Uh();return this.indexManager.getCollectionParents(e,l).next(y=>he.forEach(y,x=>{const w=function(I,O){return new Xf(O,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(n,x.child(l));return this.getDocumentsMatchingCollectionQuery(e,w,r,s).next(C=>{C.forEach((I,O)=>{d=d.insert(I,O)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,l,s))).next(d=>{l.forEach((x,w)=>{const C=w.getKey();d.get(C)===null&&(d=d.insert(C,vi.newInvalidDocument(C)))});let y=Uh();return d.forEach((x,w)=>{const C=l.get(x);C!==void 0&&Hu(C.mutation,w,Ai.empty(),Mn.now()),bm(n,w)&&(y=y.insert(x,w))}),y})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return he.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:cl(s.createTime)}}(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(s){return{name:s.name,query:VO(s.bundledQuery),readTime:cl(s.readTime)}}(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.overlays=new Rr(qe.comparator),this.Pr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qo();return he.forEach(n,s=>this.getOverlay(e,s).next(l=>{l!==null&&r.set(s,l)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,l)=>{this.It(e,n,l)}),he.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Pr.get(r);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.Pr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const s=Qo(),l=n.length+1,d=new qe(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const x=y.getNext().value,w=x.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===l&&x.largestBatchId>r&&s.set(x.getKey(),x)}return he.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let l=new Rr((w,C)=>w-C);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>r){let C=l.get(w.largestBatchId);C===null&&(C=Qo(),l=l.insert(w.largestBatchId,C)),C.set(w.getKey(),w)}}const y=Qo(),x=l.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((w,C)=>y.set(w,C)),!(y.size()>=s)););return he.resolve(y)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const d=this.Pr.get(s.largestBatchId).delete(r.key);this.Pr.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new TO(n,r));let l=this.Pr.get(n);l===void 0&&(l=tr(),this.Pr.set(n,l)),this.Pr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.Ir=new yr(Rn.dr),this.Tr=new yr(Rn.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new Rn(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new Rn(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new qe(new dn([])),r=new Rn(n,e),s=new Rn(n,e+1),l=[];return this.Tr.forEachInRange([r,s],d=>{this.Rr(d),l.push(d.key)}),l}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new qe(new dn([])),r=new Rn(n,e),s=new Rn(n,e+1);let l=tr();return this.Tr.forEachInRange([r,s],d=>{l=l.add(d.key)}),l}containsKey(e){const n=new Rn(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rn{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return qe.comparator(e.key,n.key)||Mt(e.yr,n.yr)}static Er(e,n){return Mt(e.yr,n.yr)||qe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new yr(Rn.dr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const l=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new AO(l,n,r,s);this.mutationQueue.push(d);for(const y of s)this.Sr=this.Sr.add(new Rn(y.key,l)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return he.resolve(d)}lookupMutationBatch(e,n){return he.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Dr(r),l=s<0?0:s;return he.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rn(n,0),s=new Rn(n,Number.POSITIVE_INFINITY),l=[];return this.Sr.forEachInRange([r,s],d=>{const y=this.br(d.yr);l.push(y)}),he.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yr(Mt);return n.forEach(s=>{const l=new Rn(s,0),d=new Rn(s,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([l,d],y=>{r=r.add(y.yr)})}),he.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let l=r;qe.isDocumentKey(l)||(l=l.child(""));const d=new Rn(new qe(l),0);let y=new yr(Mt);return this.Sr.forEachWhile(x=>{const w=x.key.path;return!!r.isPrefixOf(w)&&(w.length===s&&(y=y.add(x.yr)),!0)},d),he.resolve(this.Cr(y))}Cr(e){const n=[];return e.forEach(r=>{const s=this.br(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ln(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return he.forEach(n.mutations,s=>{const l=new Rn(s.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new Rn(n,0),s=this.Sr.firstAfterOrEqual(r);return he.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.Fr=e,this.docs=function(){return new Rr(qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),l=s?s.size:0,d=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():vi.newInvalidDocument(n))}getEntries(e,n){let r=ef();return n.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():vi.newInvalidDocument(s))}),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let l=ef();const d=n.path,y=new qe(d.child("")),x=this.docs.getIteratorFrom(y);for(;x.hasNext();){const{key:w,value:{document:C}}=x.getNext();if(!d.isPrefixOf(w.path))break;w.path.length>d.length+1||FP(BP(C),r)<=0||(s.has(C.key)||bm(n,C))&&(l=l.insert(C.key,C.mutableCopy()))}return he.resolve(l)}getAllFromCollectionGroup(e,n,r,s){lt()}Mr(e,n){return he.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qO(this)}getSize(e){return he.resolve(this.size)}}class qO extends HO{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ur.addEntry(e,s)):this.ur.removeEntry(r)}),he.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.persistence=e,this.Or=new Ll(n=>Im(n),Sm),this.lastRemoteSnapshotVersion=Xt.min(),this.highestTargetId=0,this.Nr=0,this.Br=new Nm,this.targetCount=0,this.Lr=Tl.Bn()}forEachTarget(e,n){return this.Or.forEach((r,s)=>n(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),he.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Tl(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Qn(n),he.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let s=0;const l=[];return this.Or.forEach((d,y)=>{y.sequenceNumber<=n&&r.get(y.targetId)===null&&(this.Or.delete(d),l.push(this.removeMatchingKeysForTargetId(e,y.targetId)),s++)}),he.waitFor(l).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),he.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const s=this.persistence.referenceDelegate,l=[];return s&&n.forEach(d=>{l.push(s.markPotentiallyOrphaned(e,d))}),he.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.kr={},this.overlays={},this.qr=new MA(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new KO(this),this.indexManager=new zO,this.remoteDocumentCache=function(s){return new YO(s)}(r=>this.referenceDelegate.$r(r)),this.serializer=new UO(n),this.Ur=new ZO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $O,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new XO(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new JO(this.qr.next());return this.referenceDelegate.Wr(),r(s).next(l=>this.referenceDelegate.Gr(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}zr(e,n){return he.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class JO extends VP{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.jr=new Nm,this.Hr=null}static Jr(e){return new Pm(e)}get Yr(){if(this.Hr)return this.Hr;throw lt()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),he.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(s=>this.Yr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(l=>this.Yr.add(l.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Yr,r=>{const s=qe.fromPath(r);return this.Zr(e,s).next(l=>{l||n.removeEntry(s,Xt.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return he.or([()=>he.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=s}static $i(e,n){let r=tr(),s=tr();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Om(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,s){const l={result:null};return this.Hi(e,n).next(d=>{l.result=d}).next(()=>{if(!l.result)return this.Ji(e,n,s,r).next(d=>{l.result=d})}).next(()=>{if(l.result)return;const d=new eM;return this.Yi(e,n,d).next(y=>{if(l.result=y,this.Wi)return this.Zi(e,n,d,y.size)})}).next(()=>l.result)}Zi(e,n,r,s){return r.documentReadCount<this.Gi?(_u()<=at.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",yu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),he.resolve()):(_u()<=at.DEBUG&&Pe("QueryEngine","Query:",yu(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.zi*s?(_u()<=at.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",yu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sa(n))):he.resolve())}Hi(e,n){if(mx(n))return he.resolve(null);let r=sa(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Np(n,null,"F"),r=sa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const d=tr(...l);return this.ji.getDocuments(e,d).next(y=>this.indexManager.getMinOffset(e,r).next(x=>{const w=this.Xi(n,y);return this.es(n,w,d,x.readTime)?this.Hi(e,Np(n,null,"F")):this.ts(e,w,n,x)}))})))}Ji(e,n,r,s){return mx(n)||s.isEqual(Xt.min())?he.resolve(null):this.ji.getDocuments(e,r).next(l=>{const d=this.Xi(n,l);return this.es(n,d,r,s)?he.resolve(null):(_u()<=at.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yu(n)),this.ts(e,d,n,LP(s,-1)).next(y=>y))})}Xi(e,n){let r=new yr(lO(e));return n.forEach((s,l)=>{bm(e,l)&&(r=r.add(l))}),r}es(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Yi(e,n,r){return _u()<=at.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",yu(n)),this.ji.getDocumentsMatchingQuery(e,n,xo.min(),r)}ts(e,n,r,s){return this.ji.getDocumentsMatchingQuery(e,r,s).next(l=>(n.forEach(d=>{l=l.insert(d.key,d)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,n,r,s){this.persistence=e,this.ns=n,this.serializer=s,this.rs=new Rr(Mt),this.ss=new Ll(l=>Im(l),Sm),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GO(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function rM(t,e,n,r){return new nM(t,e,n,r)}async function sT(t,e){const n=Ht(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const d=[],y=[];let x=tr();for(const w of s){d.push(w.batchId);for(const C of w.mutations)x=x.add(C.key)}for(const w of l){y.push(w.batchId);for(const C of w.mutations)x=x.add(C.key)}return n.localDocuments.getDocuments(r,x).next(w=>({cs:w,removedBatchIds:d,addedBatchIds:y}))})})}function iM(t,e){const n=Ht(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=n._s.newChangeBuffer({trackRemovals:!0});return function(y,x,w,C){const I=w.batch,O=I.keys();let V=he.resolve();return O.forEach(W=>{V=V.next(()=>C.getEntry(x,W)).next(j=>{const J=w.docVersions.get(W);Ln(J!==null),j.version.compareTo(J)<0&&(I.applyToRemoteDocument(j,w),j.isValidDocument()&&(j.setReadTime(w.commitVersion),C.addEntry(j)))})}),V.next(()=>y.mutationQueue.removeMutationBatch(x,I))}(n,r,e,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(y){let x=tr();for(let w=0;w<y.mutationResults.length;++w)y.mutationResults[w].transformResults.length>0&&(x=x.add(y.batch.mutations[w].key));return x}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function sM(t){const e=Ht(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function oM(t,e){const n=Ht(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class Ex{constructor(){this.activeTargetIds=pO()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aM{constructor(){this.ro=new Ex,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new Ex,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{so(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function o1(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class hM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${s}/databases/${l}`,this.wo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${l}`}get So(){return!1}bo(n,r,s,l,d){const y=o1(),x=this.Do(n,r);Pe("RestConnection",`Sending RPC '${n}' ${y}:`,x,s);const w={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(w,l,d),this.vo(n,x,w,s).then(C=>(Pe("RestConnection",`Received RPC '${n}' ${y}: `,C),C),C=>{throw Yd("RestConnection",`RPC '${n}' ${y} failed with error: `,C,"url: ",x,"request:",s),C})}Fo(n,r,s,l,d,y){return this.bo(n,r,s,l,d)}Co(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Dl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((l,d)=>n[d]=l),s&&s.headers.forEach((l,d)=>n[d]=l)}Do(n,r){const s=uM[n];return`${this.po}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const l=o1();return new Promise((d,y)=>{const x=new CP;x.setWithCredentials(!0),x.listenOnce(AP.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case s1.NO_ERROR:const C=x.getResponseJson();Pe(Qn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(C)),d(C);break;case s1.TIMEOUT:Pe(Qn,`RPC '${e}' ${l} timed out`),y(new ze(ge.DEADLINE_EXCEEDED,"Request time out"));break;case s1.HTTP_ERROR:const I=x.getStatus();if(Pe(Qn,`RPC '${e}' ${l} failed with status:`,I,"response text:",x.getResponseText()),I>0){let O=x.getResponseJson();Array.isArray(O)&&(O=O[0]);const V=O==null?void 0:O.error;if(V&&V.status&&V.message){const W=function(J){const F=J.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(F)>=0?F:ge.UNKNOWN}(V.status);y(new ze(W,V.message))}else y(new ze(ge.UNKNOWN,"Server responded with status "+x.getStatus()))}else y(new ze(ge.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Pe(Qn,`RPC '${e}' ${l} completed.`)}});const w=JSON.stringify(s);Pe(Qn,`RPC '${e}' ${l} sending request:`,s),x.send(n,"POST",w,r,15)})}Mo(e,n,r){const s=o1(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=vP(),y=EP(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(x.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(x.useFetchStreams=!0),this.Co(x.initMessageHeaders,n,r),x.encodeInitMessageHeaders=!0;const C=l.join("");Pe(Qn,`Creating RPC '${e}' stream ${s}: ${C}`,x);const I=d.createWebChannel(C,x);let O=!1,V=!1;const W=new cM({ho:J=>{V?Pe(Qn,`Not sending because RPC '${e}' stream ${s} is closed:`,J):(O||(Pe(Qn,`Opening RPC '${e}' stream ${s} transport.`),I.open(),O=!0),Pe(Qn,`RPC '${e}' stream ${s} sending:`,J),I.send(J))},Po:()=>I.close()}),j=(J,F,D)=>{J.listen(F,B=>{try{D(B)}catch(G){setTimeout(()=>{throw G},0)}})};return j(I,Lh.EventType.OPEN,()=>{V||Pe(Qn,`RPC '${e}' stream ${s} transport opened.`)}),j(I,Lh.EventType.CLOSE,()=>{V||(V=!0,Pe(Qn,`RPC '${e}' stream ${s} transport closed`),W.mo())}),j(I,Lh.EventType.ERROR,J=>{V||(V=!0,Yd(Qn,`RPC '${e}' stream ${s} transport errored:`,J),W.mo(new ze(ge.UNAVAILABLE,"The operation could not be completed")))}),j(I,Lh.EventType.MESSAGE,J=>{var F;if(!V){const D=J.data[0];Ln(!!D);const B=D,G=B.error||((F=B[0])===null||F===void 0?void 0:F.error);if(G){Pe(Qn,`RPC '${e}' stream ${s} received error:`,G);const ae=G.status;let ie=function(te){const Me=hn[te];if(Me!==void 0)return IO(Me)}(ae),Y=G.message;ie===void 0&&(ie=ge.INTERNAL,Y="Unknown error status: "+ae+" with message "+G.message),V=!0,W.mo(new ze(ie,Y)),I.close()}else Pe(Qn,`RPC '${e}' stream ${s} received:`,D),W.fo(D)}}),j(y,TP.STAT_EVENT,J=>{J.stat===lx.PROXY?Pe(Qn,`RPC '${e}' stream ${s} detected buffering proxy`):J.stat===lx.NOPROXY&&Pe(Qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{W.Vo()},0),W}}function a1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){return new SO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,r=1e3,s=1.5,l=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=s,this.No=l,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),s=Math.max(0,n-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,s,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n,r,s,l,d,y,x){this._i=e,this.Uo=r,this.Wo=s,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=x,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new oT(e,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(e,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,e!==4?this.Ho.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(_a(n.toString()),_a("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Go===n&&this.__(r,s)},r=>{e(()=>{const s=new ze(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(s)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(s=>{r(()=>this.a_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fM extends dM{constructor(e,n,r,s,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,d),this.serializer=l,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,n){return this.connection.Mo("Write",e,n)}onMessage(e){if(Ln(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const n=DO(e.writeResults,e.commitTime),r=cl(e.commitTime);return this.listener.T_(r,n)}return Ln(!e.writeResults||e.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=OO(this.serializer),this.n_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kO(this.serializer,r))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.R_=!1}V_(){if(this.R_)throw new ze(ge.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.bo(e,n,r,s,l)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ze(ge.UNKNOWN,s.toString())})}Fo(e,n,r,s){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Fo(e,n,r,l,d,s)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ze(ge.UNKNOWN,l.toString())})}terminate(){this.R_=!0}}class gM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,e==="Online"&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(_a(n),this.p_=!1):Pe("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,r,s,l){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=l,this.x_.so(d=>{r.enqueueAndForget(async()=>{Kc(this)&&(Pe("RemoteStore","Restarting streams for network reachability change."),await async function(x){const w=Ht(x);w.F_.add(4),await qc(w),w.O_.set("Unknown"),w.F_.delete(4),await Qf(w)}(this))})}),this.O_=new gM(r,s)}}async function Qf(t){if(Kc(t))for(const e of t.M_)await e(!0)}async function qc(t){for(const e of t.M_)await e(!1)}function Kc(t){return Ht(t).F_.size===0}async function aT(t,e,n){if(!$f(e))throw e;t.F_.add(1),await qc(t),t.O_.set("Offline"),n||(n=()=>sM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Pe("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await Qf(t)})}function lT(t,e){return e().catch(n=>aT(t,n,e))}async function Jf(t){const e=Ht(t),n=vo(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;_M(e);)try{const s=await oM(e.localStore,r);if(s===null){e.C_.length===0&&n.e_();break}r=s.batchId,yM(e,s)}catch(s){await aT(e,s)}uT(e)&&cT(e)}function _M(t){return Kc(t)&&t.C_.length<10}function yM(t,e){t.C_.push(e);const n=vo(t);n.Yo()&&n.I_&&n.d_(e.mutations)}function uT(t){return Kc(t)&&!vo(t).Jo()&&t.C_.length>0}function cT(t){vo(t).start()}async function xM(t){vo(t).A_()}async function wM(t){const e=vo(t);for(const n of t.C_)e.d_(n.mutations)}async function vM(t,e,n){const r=t.C_.shift(),s=Rm.from(r,e,n);await lT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Jf(t)}async function EM(t,e){e&&vo(t).I_&&await async function(r,s){if(function(d){return CO(d)&&d!==ge.ABORTED}(s.code)){const l=r.C_.shift();vo(r).Xo(),await lT(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),await Jf(r)}}(t,e),uT(t)&&cT(t)}async function Tx(t,e){const n=Ht(t);n.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Kc(n);n.F_.add(3),await qc(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await Qf(n)}async function AM(t,e){const n=Ht(t);e?(n.F_.delete(2),await Qf(n)):e||(n.F_.add(2),await qc(n),n.O_.set("Unknown"))}function vo(t){return t.L_||(t.L_=function(n,r,s){const l=Ht(n);return l.V_(),new fM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(t.datastore,t.asyncQueue,{Io:xM.bind(null,t),Eo:EM.bind(null,t),E_:wM.bind(null,t),T_:vM.bind(null,t)}),t.M_.push(async e=>{e?(t.L_.Xo(),await Jf(t)):(await t.L_.stop(),t.C_.length>0&&(Pe("RemoteStore",`Stopping write stream with ${t.C_.length} pending writes`),t.C_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n,r,s,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,l){const d=Date.now()+r,y=new Mm(e,n,d,s,l);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hT(t,e){if(_a("AsyncQueue",`${e}: ${t}`),$f(t))return new ze(ge.UNAVAILABLE,`${e}: ${t}`);throw t}class TM{constructor(){this.queries=new Ll(e=>WA(e),HA),this.onlineState="Unknown",this.K_=new Set}}function CM(t){t.K_.forEach(e=>{e.next()})}class IM{constructor(e,n,r,s,l,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.fa={},this.ga=new Ll(y=>WA(y),HA),this.pa=new Map,this.ya=new Set,this.wa=new Rr(qe.comparator),this.Sa=new Map,this.ba=new Nm,this.Da={},this.Ca=new Map,this.va=Tl.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function SM(t,e,n){const r=PM(t);try{const s=await function(d,y){const x=Ht(d),w=Mn.now(),C=y.reduce((V,W)=>V.add(W.key),tr());let I,O;return x.persistence.runTransaction("Locally write mutations","readwrite",V=>{let W=ef(),j=tr();return x._s.getEntries(V,C).next(J=>{W=J,W.forEach((F,D)=>{D.isValidDocument()||(j=j.add(F))})}).next(()=>x.localDocuments.getOverlayedDocuments(V,W)).next(J=>{I=J;const F=[];for(const D of y){const B=vO(D,I.get(D.key).overlayedDocument);B!=null&&F.push(new Ca(D.key,B,LA(B.value.mapValue),xs.exists(!0)))}return x.mutationQueue.addMutationBatch(V,w,F,y)}).next(J=>{O=J;const F=J.applyToLocalDocumentSet(I,j);return x.documentOverlayCache.saveOverlays(V,J.batchId,F)})}).then(()=>({batchId:O.batchId,changes:ZA(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(d,y,x){let w=d.Da[d.currentUser.toKey()];w||(w=new Rr(Mt)),w=w.insert(y,x),d.Da[d.currentUser.toKey()]=w}(r,s.batchId,n),await e0(r,s.changes),await Jf(r.remoteStore)}catch(s){const l=hT(s,"Failed to persist write");n.reject(l)}}function Cx(t,e,n){const r=Ht(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((l,d)=>{const y=d.view.U_(e);y.snapshot&&s.push(y.snapshot)}),function(d,y){const x=Ht(d);x.onlineState=y;let w=!1;x.queries.forEach((C,I)=>{for(const O of I.listeners)O.U_(y)&&(w=!0)}),w&&CM(x)}(r.eventManager,e),s.length&&r.fa.c_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bM(t,e){const n=Ht(t),r=e.batch.batchId;try{const s=await iM(n.localStore,e);fT(n,r,null),dT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await e0(n,s)}catch(s){await OA(s)}}async function RM(t,e,n){const r=Ht(t);try{const s=await function(d,y){const x=Ht(d);return x.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return x.mutationQueue.lookupMutationBatch(w,y).next(I=>(Ln(I!==null),C=I.keys(),x.mutationQueue.removeMutationBatch(w,I))).next(()=>x.mutationQueue.performConsistencyCheck(w)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(w,C,y)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>x.localDocuments.getDocuments(w,C))})}(r.localStore,e);fT(r,e,n),dT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await e0(r,s)}catch(s){await OA(s)}}function dT(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function fT(t,e,n){const r=Ht(t);let s=r.Da[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(n?l.reject(n):l.resolve(),s=s.remove(e)),r.Da[r.currentUser.toKey()]=s}}async function e0(t,e,n){const r=Ht(t),s=[],l=[],d=[];r.ga.isEmpty()||(r.ga.forEach((y,x)=>{d.push(r.Ma(x,e,n).then(w=>{if((w||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(x.targetId,w!=null&&w.fromCache?"not-current":"current"),w){s.push(w);const C=Om.$i(x.targetId,w);l.push(C)}}))}),await Promise.all(d),r.fa.c_(s),await async function(x,w){const C=Ht(x);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>he.forEach(w,O=>he.forEach(O.Qi,V=>C.persistence.referenceDelegate.addReference(I,O.targetId,V)).next(()=>he.forEach(O.Ki,V=>C.persistence.referenceDelegate.removeReference(I,O.targetId,V)))))}catch(I){if(!$f(I))throw I;Pe("LocalStore","Failed to update sequence numbers: "+I)}for(const I of w){const O=I.targetId;if(!I.fromCache){const V=C.rs.get(O),W=V.snapshotVersion,j=V.withLastLimboFreeSnapshotVersion(W);C.rs=C.rs.insert(O,j)}}}(r.localStore,l))}async function NM(t,e){const n=Ht(t);if(!n.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=await sT(n.localStore,e);n.currentUser=e,function(l,d){l.Ca.forEach(y=>{y.forEach(x=>{x.reject(new ze(ge.CANCELLED,d))})}),l.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await e0(n,r.cs)}}function PM(t){const e=Ht(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RM.bind(null,e),e}class Ix{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Kf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return rM(this.persistence,new tM,e.initialUser,this.serializer)}createPersistence(e){return new QO(Pm.Jr,this.serializer)}createSharedClientState(e){return new aM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NM.bind(null,this.syncEngine),await AM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TM}()}createDatastore(e){const n=Kf(e.databaseInfo.databaseId),r=function(l){return new hM(l)}(e.databaseInfo);return function(l,d,y,x){return new pM(l,d,y,x)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,l,d,y){return new mM(r,s,l,d,y)}(this.localStore,this.datastore,e.asyncQueue,n=>Cx(this.syncEngine,n,0),function(){return Ax.C()?new Ax:new lM}())}createSyncEngine(e,n){return function(s,l,d,y,x,w,C){const I=new IM(s,l,d,y,x,w);return C&&(I.Fa=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=Ht(n);Pe("RemoteStore","RemoteStore shutting down."),r.F_.add(5),await qc(r),r.x_.shutdown(),r.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jn.UNAUTHENTICATED,this.clientId=PA.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async l=>{Pe("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Pe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ze(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hT(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function l1(t,e){t.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await sT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DM(t);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Tx(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,l)=>Tx(e.remoteStore,l)),t._onlineComponents=e}function kM(t){return t.name==="FirebaseError"?t.code===ge.FAILED_PRECONDITION||t.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function DM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await l1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!kM(n))throw n;Yd("Error using user provided cache. Falling back to memory cache: "+n),await l1(t,new Ix)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),await l1(t,new Ix);return t._offlineComponents}async function LM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),await Sx(t,t._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),await Sx(t,new OM))),t._onlineComponents}function BM(t){return LM(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t,e,n){if(!n)throw new ze(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UM(t,e,n,r){if(e===!0&&r===!0)throw new ze(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rx(t){if(!qe.isDocumentKey(t))throw new ze(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function km(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lt()}function Mp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ze(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=km(t);throw new ze(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ze(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ze(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ze(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ze(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ze(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ze(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ze(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SP;switch(r.type){case"firstParty":return new PP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ze(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bx.get(n);r&&(Pe("ComponentProvider","Removing Datastore"),bx.delete(n),r.terminate())}(this),Promise.resolve()}}function VM(t,e,n,r={}){var s;const l=(t=Mp(t,Dm))._getSettings(),d=`${e}:${n}`;if(l.host!=="firestore.googleapis.com"&&l.host!==d&&Yd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:d,ssl:!1})),r.mockUserToken){let y,x;if(typeof r.mockUserToken=="string")y=r.mockUserToken,x=Jn.MOCK_USER;else{y=Cv(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ze(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Jn(w)}t._authCredentials=new bP(new NA(y,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lm(this.firestore,e,this._query)}}class ws{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ws(this.firestore,e,this._key)}}class Tc extends Lm{constructor(e,n,r){super(e,n,rO(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ws(this.firestore,null,new qe(e))}withConverter(e){return new Tc(this.firestore,e,this._path)}}function Px(t,e,...n){if(t=kn(t),arguments.length===1&&(e=PA.V()),FM("doc","path",e),t instanceof Dm){const r=dn.fromString(e,...n);return Rx(r),new ws(t,null,new qe(r))}{if(!(t instanceof ws||t instanceof Tc))throw new ze(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dn.fromString(e,...n));return Rx(r),new ws(t.firestore,t instanceof Tc?t.converter:null,new qe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new oT(this,"async_queue_retry"),this.ou=()=>{const n=a1();n&&Pe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=a1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=a1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new ia;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(e){if(!$f(e))throw e;Pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{this.nu=r,this.ru=!1;const s=function(d){let y=d.message||"";return d.stack&&(y=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),y}(r);throw _a("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const s=Mm.createAndSchedule(this,e,n,r,l=>this.cu(l));return this.tu.push(s),s}_u(){this.nu&&lt()}verifyOperationInProgress(){}async lu(){let e;do e=this.Za,await e;while(e!==this.Za)}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}class gT extends Dm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new zM}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mT(this),this._firestoreClient.terminate()}}function jM(t,e){const n=typeof t=="object"?t:Ug(),r=typeof t=="string"?t:e||"(default)",s=If(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=Ev("firestore");l&&VM(s,...l)}return s}function HM(t){return t._firestoreClient||mT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mT(t){var e,n,r;const s=t._freezeSettings(),l=function(y,x,w,C){return new WP(y,x,w,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,pT(C.experimentalLongPollingOptions),C.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new MM(t._authCredentials,t._appCheckCredentials,t._queue,l),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cc(Ss.fromBase64String(e))}catch(n){throw new ze(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cc(Ss.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=/^__.*__$/;class GM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yc(e,this.data,n,this.fieldTransforms)}}function wT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class Bm{constructor(e,n,r,s,l,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.du(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new Bm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Eu({path:r,Ru:!1});return s.Vu(e),s}mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Eu({path:r,Ru:!1});return s.du(),s}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return rf(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(e.length===0)throw this.gu("Document fields must not be empty");if(wT(this.Tu)&&WM.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class ZM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kf(e)}wu(e,n,r,s=!1){return new Bm({Tu:e,methodName:n,yu:r,path:nr.emptyPath(),Ru:!1,pu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $M(t){const e=t._freezeSettings(),n=Kf(t._databaseId);return new ZM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XM(t,e,n,r,s,l={}){const d=t.wu(l.merge||l.mergeFields?2:0,e,n,s);TT("Data must be an object, but it was:",d,r);const y=ET(r,d);let x,w;if(l.merge)x=new Ai(d.fieldMask),w=d.fieldTransforms;else if(l.mergeFields){const C=[];for(const I of l.mergeFields){const O=YM(e,I,n);if(!d.contains(O))throw new ze(ge.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);QM(C,O)||C.push(O)}x=new Ai(C),w=d.fieldTransforms.filter(I=>x.covers(I.field))}else x=null,w=d.fieldTransforms;return new GM(new Ei(y),x,w)}function vT(t,e){if(AT(t=kn(t)))return TT("Unsupported field value:",e,t),ET(t,e);if(t instanceof yT)return function(r,s){if(!wT(s.Tu))throw s.gu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&e.Tu!==4)throw e.gu("Nested arrays are not supported");return function(r,s){const l=[];let d=0;for(const y of r){let x=vT(y,s.fu(d));x==null&&(x={nullValue:"NULL_VALUE"}),l.push(x),d++}return{arrayValue:{values:l}}}(t,e)}return function(r,s){if((r=kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Mn.fromDate(r);return{timestampValue:Pp(s.serializer,l)}}if(r instanceof Mn){const l=new Mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pp(s.serializer,l)}}if(r instanceof xT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cc)return{bytesValue:bO(s.serializer,r._byteString)};if(r instanceof ws){const l=s.databaseId,d=r.firestore._databaseId;if(!d.isEqual(l))throw s.gu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:rT(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.gu(`Unsupported field value: ${km(r)}`)}(t,e)}function ET(t,e){const n={};return kA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xc(t,(r,s)=>{const l=vT(s,e.Au(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function AT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mn||t instanceof xT||t instanceof Cc||t instanceof ws||t instanceof yT)}function TT(t,e,n){if(!AT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=km(n);throw r==="an object"?e.gu(t+" a custom object"):e.gu(t+" "+r)}}function YM(t,e,n){if((e=kn(e))instanceof _T)return e._internalPath;if(typeof e=="string")return KM(t,e);throw rf("Field path arguments must be of type string or ",t,!1,void 0,n)}const qM=new RegExp("[~\\*/\\[\\]]");function KM(t,e,n){if(e.search(qM)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _T(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rf(t,e,n,r,s){const l=r&&!r.isEmpty(),d=s!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let x="";return(l||d)&&(x+=" (found",l&&(x+=` in field ${r}`),d&&(x+=` in document ${s}`),x+=")"),new ze(ge.INVALID_ARGUMENT,y+t+x)}function QM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Ox(t,e,n){t=Mp(t,ws);const r=Mp(t.firestore,gT),s=JM(t.converter,e,n);return e6(r,[XM($M(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xs.none())])}function e6(t,e){return function(r,s){const l=new ia;return r.asyncQueue.enqueueAndForget(async()=>SM(await BM(r),s,l)),l.promise}(HM(t),e)}(function(e,n=!0){(function(s){Dl=s})(va),da(new yo("firestore",(r,{instanceIdentifier:s,options:l})=>{const d=r.getProvider("app").getImmediate(),y=new gT(new RP(r.getProvider("auth-internal")),new MP(r.getProvider("app-check-internal")),function(w,C){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ze(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qd(w.options.projectId,C)}(d,s),d);return l=Object.assign({useFetchStreams:n},l),y._setSettings(l),y},"PUBLIC").setMultipleInstances(!0)),Zi(ux,"4.2.0",e),Zi(ux,"4.2.0","esm2017")})();const t6={apiKey:"AIzaSyC8nPaq2OkgG5amUJT12bwpk792qkdKphs",authDomain:"fintech-ff5aa.firebaseapp.com",projectId:"fintech-ff5aa",storageBucket:"fintech-ff5aa.appspot.com",messagingSenderId:"681892559066",appId:"1:681892559066:web:aea23a39c6add80a170de3"};bv(t6);const Qc=sN(),n6=_8(),Mx=jM(),CT=me.createContext(),r6=({children:t})=>{const[e,n]=me.useState({});return me.useEffect(()=>{const r=Zb(Qc,s=>{n(s),console.log(s)});return()=>{r()}},[]),P.jsx(CT.Provider,{value:{currentUser:e},children:t})};function i6(){const[t,e]=me.useState(!1),[n,r]=me.useState(!1),s=Tf(),l=async d=>{d.preventDefault(),r(!0),e(!1);const y=d.target.name.value,x=d.target.email.value,w=d.target.password.value,C=d.target.file.files[0];try{const I=await Vb(Qc,x,w),O=new Date().getTime(),V=m8(n6,`${y+O}`);await p8(V,C).then(async()=>{const W=await g8(V);try{await Hb(I.user,{displayName:y,photoURL:W}),await Ox(Px(Mx,"users",I.user.uid),{uid:I.user.uid,displayName:y,email:x,photoURL:W}),await Ox(Px(Mx,"userChats",I.user.uid),{}),r(!1),s("/")}catch(j){console.error(j),e(!0),r(!1)}})}catch(I){console.error(I),e(!0),r(!1)}};return P.jsx("div",{children:P.jsx("section",{class:"bg-green-100 dark:bg-gray-900",children:P.jsx("div",{class:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0",children:P.jsx("div",{class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:P.jsxs("div",{class:"p-6 space-y-4 md:space-y-6 sm:p-8",children:[P.jsx("h1",{class:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Sign in to your account"}),P.jsxs("form",{onSubmit:l,class:"space-y-4 md:space-y-6",children:[P.jsxs("div",{children:[P.jsx("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your Name"}),P.jsx("input",{type:"name",name:"name",id:"name",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",required:""})]}),P.jsxs("div",{children:[P.jsx("label",{for:"file",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Profile Picture"}),P.jsx("input",{type:"file",name:"file",id:"file",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",required:""})]}),P.jsxs("div",{children:[P.jsx("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your Email"}),P.jsx("input",{type:"email",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",required:""})]}),P.jsxs("div",{children:[P.jsx("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),P.jsx("input",{type:"password",name:"password",id:"password",placeholder:"",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""})]}),P.jsx("button",{type:"submit",class:"w-full text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Sumbit"}),n&&"Uploading and compressing the image, please wait...",t&&P.jsx("span",{children:"Something went wrong"}),P.jsxs("p",{class:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Already have an account yet? ",P.jsx("a",{href:"#",class:"font-medium text-green-600 hover:underline dark:text-primary-500",children:"Login"})]})]})]})})})})})}function s6(){const[t,e]=me.useState(null);return me.useEffect(()=>{const n=Qc.onAuthStateChanged(r=>{e(r||null)});return()=>{n()}},[]),P.jsx("div",{children:P.jsxs("div",{class:"sticky top-0 flex h-screen items-center justify-center",children:[P.jsx("img",{src:"/images/home.png",class:"h-full w-full object-cover"}),P.jsxs("div",{class:"absolute left-0 right-0 m-auto flex w-2/4 flex-col items-start justify-center gap-4 p-10 backdrop-blur-xl",children:[P.jsx("h2",{class:"text-2xl font-bold",children:"BayMax"}),P.jsx("p",{class:"font-sans text-lg text-white",children:"The innovative fintech app, is revolutionizing the way we manage our finances. With its user-friendly interface and cutting-edge features"}),t?P.jsxs(P.Fragment,{children:[P.jsxs("p",{className:"text-white",children:["Logged in as: ",t.email]}),P.jsx(op,{to:"/wallet",children:P.jsx("h3",{children:"Ready to check your wallet"})})]}):P.jsx(P.Fragment,{children:P.jsx(op,{to:"/login",children:P.jsx("h3",{children:"Sign in"})})})]})]})})}function o6(){const[t,e]=me.useState(!1),n=Tf(),r=async s=>{s.preventDefault();const l=s.target[0].value,d=s.target[1].value;try{await zb(Qc,l,d),n("/")}catch{e(!0)}};return P.jsx("div",{children:P.jsx("section",{class:"bg-green-100 dark:bg-gray-900",children:P.jsxs("div",{class:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0",children:[P.jsxs("a",{href:"#",class:"flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white",children:[P.jsx("img",{class:"w-8 h-8 mr-2",src:"/images/log.png",alt:"logo"}),"BayMax"]}),P.jsx("div",{class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:P.jsxs("div",{class:"p-6 space-y-4 md:space-y-6 sm:p-8",children:[P.jsx("h1",{class:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Login in to your account"}),P.jsxs("form",{onSubmit:r,class:"space-y-4 md:space-y-6",action:"#",children:[P.jsxs("div",{children:[P.jsx("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your email"}),P.jsx("input",{type:"email",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",required:""})]}),P.jsxs("div",{children:[P.jsx("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Password"}),P.jsx("input",{type:"password",name:"password",id:"password",placeholder:"",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""})]}),P.jsx("button",{type:"submit",class:"w-full text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Sign in"}),P.jsxs("p",{class:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Dont have an account yet? ",P.jsx(op,{to:"/signup",class:"font-medium text-green-600 hover:underline dark:text-primary-500",children:"Register"})]})]})]})})]})})})}function Jc(){const[t,e]=me.useState(!1),n=()=>{e(!t)},r=()=>{e(!1)};return P.jsx("div",{children:P.jsx("nav",{className:"bg-white border-gray-200 dark:bg-gray-900",children:P.jsxs("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4",children:[P.jsxs("a",{href:"/wallet",className:"flex items-center",children:[P.jsx("img",{src:"/images/log.png",className:"h-9 mr-4",alt:"Logo"}),P.jsx("span",{className:"self-center text-2xl font-semibold whitespace-nowrap dark:text-white",children:"BayMax"})]}),P.jsxs("button",{onClick:n,type:"button",className:"inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600","aria-controls":"navbar-sticky","aria-expanded":t,children:[P.jsx("span",{className:"sr-only",children:"Toggle Sidebar"}),P.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 14",children:P.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h15M1 7h15M1 13h15"})})]}),P.jsx("div",{className:`${t?"block":"hidden"} md:block w-full md:w-auto`,id:"navbar-default",children:P.jsxs("ul",{className:"font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700",children:[P.jsx("li",{children:P.jsx("a",{href:"/wallet",className:"block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white","aria-current":"page",onClick:r,children:"My Wallet"})}),P.jsx("li",{children:P.jsx("a",{href:"/transfer",className:"block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white",onClick:r,children:"Transfer"})}),P.jsx("li",{children:P.jsx("a",{href:"/payment",className:"block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white",onClick:r,children:"Pay"})}),P.jsx("li",{children:P.jsx("a",{href:"/cards",className:"block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white",onClick:r,children:"Profile"})}),P.jsx("li",{children:P.jsx("a",{href:"/support",className:"block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white",onClick:r,children:"Support"})}),P.jsx("li",{children:P.jsx("button",{onClick:()=>$b(Qc),type:"button",className:"text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center mr-3 md:mr-0 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:P.jsx("svg",{class:"w-4 h-4 text-white-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",children:P.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h11m0 0-4-4m4 4-4 4m-5 3H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h3"})})})})]})})]})})})}function a6(){const[t,e]=me.useState(0),[n,r]=me.useState([]),[s,l]=me.useState(0),[d,y]=me.useState(0),[x,w]=me.useState("");function C(){if(s<=0){w("Deposit amount must be greater than 0");return}e(O=>O+s),r(O=>[...O,{type:"deposit",amount:s,date:new Date}]),l(0)}function I(){if(d<=0||d>t){w("Invalid withdrawal amount");return}e(O=>O-d),r(O=>[...O,{type:"withdraw",amount:d,date:new Date}]),y(0)}return n.sort((O,V)=>V.date-O.date),P.jsxs("div",{children:[P.jsx(Jc,{}),P.jsxs("h1",{class:"max-w-screen-xl  flex-wrap justify-between mx-auto p-4 mb-4 text-3xl font-extrabold text-gray-900 dark:text-white md:text-5xl lg:text-6xl",children:[P.jsx("span",{class:"text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-600",children:"E-WALLET "}),"Name"]}),P.jsx("p",{class:"max-w-screen-xl justify-between mx-auto text-lg font-normal text-gray-800 lg:text-xl dark:text-gray-400",children:"Manage your e-Wallet with comfort, check balance, withraw, and get the transaction history"}),P.jsxs("div",{class:"max-w-screen-xl  flex-wrap justify-between mx-auto p-4 mb-4",children:[P.jsxs("h2",{className:"mt-4 text-xl font-semibold",children:["Balance: $",t]}),P.jsx("input",{class:"mb-4 w-50 bg-gray-100 text-gray-900 mt-2 p-3 rounded-lg focus:outline-none focus:shadow-outline",type:"number",placeholder:"Depositing Amount",value:s,onChange:O=>l(parseInt(O.target.value))}),P.jsx("button",{onClick:C,class:"text-white bg-green-600 hover:bg-green-700 mr-10 ml-3 mt-2 p-3 rounded-lg",children:"Deposit"}),P.jsx("input",{class:"w-50 bg-gray-100 text-gray-900 mt-2 p-3 rounded-lg focus:outline-none focus:shadow-outline",type:"number",placeholder:"Witdrawing Amout",value:d,onChange:O=>y(parseInt(O.target.value))}),P.jsx("button",{onClick:I,class:"text-white bg-green-600 hover:bg-green-700  ml-3 mt-2 p-3 rounded-lg",children:"Withdraw"}),x&&P.jsx("p",{className:"error",children:x}),P.jsx("h2",{className:"mt-4 text-xl font-semibold",children:"Transaction History"}),P.jsx("ul",{className:"bg-gray-100 p-4 rounded-lg",children:n.map(O=>P.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-300",children:[P.jsxs("div",{children:[O.type," ",O.amount," on"," ",O.date.toLocaleDateString()]}),P.jsx("div",{})]},O.date))})]})]})}function l6(){return P.jsxs("div",{children:[P.jsx(Jc,{}),P.jsxs("body",{className:"bg-gray-100",children:[P.jsx("div",{className:"bg-white",children:P.jsxs("div",{className:"flex justify-between items-center py-28 px-5",children:[P.jsxs("div",{className:"w-1/2",children:[P.jsx("h2",{className:"text-5xl font-semibold text-gray-800",children:"The all-in-one Fintech app."}),P.jsx("h3",{className:"text-xl font-semibold text-gray-600 mt-4",children:"BayMax with you wherever and whenever you need it. Koko has got your back, keep up to date with your balance, upcoming payments, and the latest and greatest."}),P.jsx("p",{className:"text-gray-600 mt-4",children:"BayMax is free and makes money from carefully selected partner offers that could help take your money further. We never sell your data. icas."})]}),P.jsx("div",{className:"w-1/2",children:P.jsx("img",{src:"https://source.unsplash.com/pz_L0YpSVvE",alt:"Imagen relacionada con el programa de fidelizacin",className:"w-full h-auto"})})]})}),P.jsxs("section",{class:"bg-white text-neutral-700 dark:text-neutral-300 flex justify-between items-center py-2 px-5",children:[P.jsx("div",{class:"mx-auto text-center md:max-w-xl lg:max-w-3xl"}),P.jsxs("div",{class:"grid gap-6 text-center md:grid-cols-4",children:[P.jsx("div",{children:P.jsx("div",{class:"block rounded-lg bg-green-400 shadow-lg dark:bg-neutral-700 dark:shadow-black/30",children:P.jsxs("div",{class:"p-6",children:[P.jsx("h4",{class:"mb-4 text-2xl font-semibold",children:"Pay how you like"}),P.jsx("hr",{class:"border-black"}),P.jsxs("p",{class:"mt-4",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"inline-block h-7 w-7 pr-2",viewBox:"0 0 24 24",children:P.jsx("path",{d:"M13 14.725c0-5.141 3.892-10.519 10-11.725l.984 2.126c-2.215.835-4.163 3.742-4.38 5.746 2.491.392 4.396 2.547 4.396 5.149 0 3.182-2.584 4.979-5.199 4.979-3.015 0-5.801-2.305-5.801-6.275zm-13 0c0-5.141 3.892-10.519 10-11.725l.984 2.126c-2.215.835-4.163 3.742-4.38 5.746 2.491.392 4.396 2.547 4.396 5.149 0 3.182-2.584 4.979-5.199 4.979-3.015 0-5.801-2.305-5.801-6.275z"})}),"Convenience of getting paying with multi optins even with your debit card"]})]})})}),P.jsx("div",{children:P.jsx("div",{class:"block rounded-lg bg-green-400 shadow-lg dark:bg-neutral-700 dark:shadow-black/30",children:P.jsxs("div",{class:"p-6",children:[P.jsx("h4",{class:"mb-4 text-2xl font-semibold",children:"Instant approval"}),P.jsx("hr",{class:"border-black"}),P.jsxs("p",{class:"mt-4",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"inline-block h-7 w-7 pr-2",viewBox:"0 0 24 24",children:P.jsx("path",{d:"M13 14.725c0-5.141 3.892-10.519 10-11.725l.984 2.126c-2.215.835-4.163 3.742-4.38 5.746 2.491.392 4.396 2.547 4.396 5.149 0 3.182-2.584 4.979-5.199 4.979-3.015 0-5.801-2.305-5.801-6.275zm-13 0c0-5.141 3.892-10.519 10-11.725l.984 2.126c-2.215.835-4.163 3.742-4.38 5.746 2.491.392 4.396 2.547 4.396 5.149 0 3.182-2.584 4.979-5.199 4.979-3.015 0-5.801-2.305-5.801-6.275z"})}),"Get instant approval to a spending limit that'll get you started off quickly."]})]})})}),P.jsx("div",{children:P.jsx("div",{class:"block rounded-lg bg-green-400 shadow-lg dark:bg-neutral-700 dark:shadow-black/30",children:P.jsxs("div",{class:"p-6",children:[P.jsx("h4",{class:"mb-4 text-2xl font-semibold",children:"Unlimeted offers"}),P.jsx("hr",{class:"border-black"}),P.jsxs("p",{class:"mt-4",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"inline-block h-7 w-7 pr-2",viewBox:"0 0 24 24",children:P.jsx("path",{d:"M13 14.725c0-5.141 3.892-10.519 10-11.725l.984 2.126c-2.215.835-4.163 3.742-4.38 5.746 2.491.392 4.396 2.547 4.396 5.149 0 3.182-2.584 4.979-5.199 4.979-3.015 0-5.801-2.305-5.801-6.275zm-13 0c0-5.141 3.892-10.519 10-11.725l.984 2.126c-2.215.835-4.163 3.742-4.38 5.746 2.491.392 4.396 2.547 4.396 5.149 0 3.182-2.584 4.979-5.199 4.979-3.015 0-5.801-2.305-5.801-6.275z"})}),"Get access to many more offers by paying with BayMax"]})]})})}),P.jsx("div",{children:P.jsx("div",{class:"block rounded-lg bg-green-400 shadow-lg dark:bg-neutral-700 dark:shadow-black/30",children:P.jsxs("div",{class:"p-6",children:[P.jsx("h4",{class:"mb-4 text-2xl font-semibold",children:" Collect points"}),P.jsx("hr",{class:"border-black"}),P.jsxs("p",{class:"mt-4",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"inline-block h-7 w-7 pr-2",viewBox:"0 0 24 24",children:P.jsx("path",{d:"M13 14.725c0-5.141 3.892-10.519 10-11.725l.984 2.126c-2.215.835-4.163 3.742-4.38 5.746 2.491.392 4.396 2.547 4.396 5.149 0 3.182-2.584 4.979-5.199 4.979-3.015 0-5.801-2.305-5.801-6.275zm-13 0c0-5.141 3.892-10.519 10-11.725l.984 2.126c-2.215.835-4.163 3.742-4.38 5.746 2.491.392 4.396 2.547 4.396 5.149 0 3.182-2.584 4.979-5.199 4.979-3.015 0-5.801-2.305-5.801-6.275z"})}),"All the payments done using BayMax recieve points."]})]})})})]})]}),P.jsxs("section",{class:"text-neutral-700 dark:text-neutral-300",children:[P.jsxs("div",{class:"mx-auto text-center md:max-w-xl lg:max-w-3xl",children:[P.jsx("h3",{class:"mb-6 text-3xl font-bold"}),P.jsx("h3",{class:"mb-6 text-3xl font-bold",children:"Support"})]}),P.jsxs("div",{class:"grid gap-6 text-center md:grid-cols-3 flex justify-between items-center py-2 px-5",children:[P.jsxs("div",{class:"block rounded-lg bg-white shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",children:[P.jsx("a",{href:"#!",children:P.jsx("img",{class:"rounded-t-lg",src:"https://source.unsplash.com/eBWzFKahEaU",alt:""})}),P.jsxs("div",{class:"p-6",children:[P.jsx("h5",{class:"mb-2 text-xl font-medium leading-tight text-neutral-800 dark:text-neutral-50",children:"Withdraw from wallet"}),P.jsx("p",{class:"mb-4 text-base text-neutral-600 dark:text-neutral-200",children:"If you are facing trouble when withrawing from your wallet"}),P.jsx("button",{type:"button",class:"inline-block rounded bg-green-600 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]",children:"Get Support"})]})]}),P.jsxs("div",{class:"block rounded-lg bg-white shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",children:[P.jsx("a",{href:"#!",children:P.jsx("img",{class:"rounded-t-lg",src:"https://source.unsplash.com/qF1XTSiGpqM",alt:""})}),P.jsxs("div",{class:"p-6",children:[P.jsx("h5",{class:"mb-2 text-xl font-medium leading-tight text-neutral-800 dark:text-neutral-50",children:"Deposite to wallet"}),P.jsx("p",{class:"mb-4 text-base text-neutral-600 dark:text-neutral-200",children:"How BayMax Wallet works, How to deposit to BayMax wallet"}),P.jsx("button",{type:"button",class:"inline-block rounded bg-green-600 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]",children:"Get Support"})]})]}),P.jsxs("div",{class:"block rounded-lg bg-white shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",children:[P.jsx("a",{href:"#!",children:P.jsx("img",{class:"rounded-t-lg",src:"https://source.unsplash.com/GdRvIi8mWzE",alt:""})}),P.jsxs("div",{class:"p-6",children:[P.jsx("h5",{class:"mb-2 text-xl font-medium leading-tight text-neutral-800 dark:text-neutral-50",children:"Transfers"}),P.jsx("p",{class:"mb-4 text-base text-neutral-600 dark:text-neutral-200",children:"Tranfer to another account using BayMax, Transfers only can made BayMax account to BayMax account"}),P.jsx("button",{type:"button",class:"inline-block rounded bg-green-600 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]",children:"Get Support"})]})]})]})]}),P.jsxs("section",{class:"text-neutral-700 dark:text-neutral-300",children:[P.jsxs("div",{class:"mx-auto text-center md:max-w-xl lg:max-w-3xl",children:[P.jsx("h3",{class:"mb-6 text-3xl font-bold"}),P.jsx("p",{class:"mb-6 pb-2 md:mb-12 md:pb-0"})]}),P.jsxs("div",{class:"grid gap-6 text-center md:grid-cols-3 flex justify-between items-center py-2 px-5",children:[P.jsxs("div",{class:"block rounded-lg bg-white shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",children:[P.jsx("a",{href:"#!",children:P.jsx("img",{class:"rounded-t-lg",src:"https://source.unsplash.com/Q59HmzK38eQ",alt:""})}),P.jsxs("div",{class:"p-6",children:[P.jsx("h5",{class:"mb-2 text-xl font-medium leading-tight text-neutral-800 dark:text-neutral-50",children:"Online payments"}),P.jsx("p",{class:"mb-4 text-base text-neutral-600 dark:text-neutral-200",children:"Cannot do online payments for bills using BayMax account"}),P.jsx("button",{type:"button",class:"inline-block rounded bg-green-600 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]",children:"Get Support"})]})]}),P.jsxs("div",{class:"block rounded-lg bg-white shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",children:[P.jsx("a",{href:"#!",children:P.jsx("img",{class:"rounded-t-lg",src:"https://source.unsplash.com/1IBf2TSLars",alt:""})}),P.jsxs("div",{class:"p-6",children:[P.jsx("h5",{class:"mb-2 text-xl font-medium leading-tight text-neutral-800 dark:text-neutral-50",children:"QR code Issue"}),P.jsx("p",{class:"mb-4 text-base text-neutral-600 dark:text-neutral-200",children:"having issues when scanning qr codes using the camera"}),P.jsx("button",{type:"button",class:"inline-block rounded bg-green-600 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]",children:"Get Support"})]})]}),P.jsxs("div",{class:"block rounded-lg bg-white shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",children:[P.jsx("a",{href:"#!",children:P.jsx("img",{class:"rounded-t-lg",src:"https://source.unsplash.com/p1g_npQXoM8",alt:""})}),P.jsxs("div",{class:"p-6",children:[P.jsx("h5",{class:"mb-2 text-xl font-medium leading-tight text-neutral-800 dark:text-neutral-50",children:"Partnered Shops"}),P.jsx("p",{class:"mb-4 text-base text-neutral-600 dark:text-neutral-200",children:"See list of partnered shop with us, see offers the have for BayMax account holders"}),P.jsx("button",{type:"button",class:"inline-block rounded bg-green-600 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] dark:shadow-[0_4px_9px_-4px_rgba(59,113,202,0.5)] dark:hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)] dark:active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.2),0_4px_18px_0_rgba(59,113,202,0.1)]",children:"Get Support"})]})]})]})]})]})]})}var kp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ba,function(n){var r="1.9.4";function s(a){var f,m,E,T;for(m=1,E=arguments.length;m<E;m++){T=arguments[m];for(f in T)a[f]=T[f]}return a}var l=Object.create||function(){function a(){}return function(f){return a.prototype=f,new a}}();function d(a,f){var m=Array.prototype.slice;if(a.bind)return a.bind.apply(a,m.call(arguments,1));var E=m.call(arguments,2);return function(){return a.apply(f,E.length?E.concat(m.call(arguments)):arguments)}}var y=0;function x(a){return"_leaflet_id"in a||(a._leaflet_id=++y),a._leaflet_id}function w(a,f,m){var E,T,N,U;return U=function(){E=!1,T&&(N.apply(m,T),T=!1)},N=function(){E?T=arguments:(a.apply(m,arguments),setTimeout(U,f),E=!0)},N}function C(a,f,m){var E=f[1],T=f[0],N=E-T;return a===E&&m?a:((a-T)%N+N)%N+T}function I(){return!1}function O(a,f){if(f===!1)return a;var m=Math.pow(10,f===void 0?6:f);return Math.round(a*m)/m}function V(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function W(a){return V(a).split(/\s+/)}function j(a,f){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?l(a.options):{});for(var m in f)a.options[m]=f[m];return a.options}function J(a,f,m){var E=[];for(var T in a)E.push(encodeURIComponent(m?T.toUpperCase():T)+"="+encodeURIComponent(a[T]));return(!f||f.indexOf("?")===-1?"?":"&")+E.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function D(a,f){return a.replace(F,function(m,E){var T=f[E];if(T===void 0)throw new Error("No value provided for variable "+m);return typeof T=="function"&&(T=T(f)),T})}var B=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function G(a,f){for(var m=0;m<a.length;m++)if(a[m]===f)return m;return-1}var ae="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ie(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Y=0;function le(a){var f=+new Date,m=Math.max(0,16-(f-Y));return Y=f+m,window.setTimeout(a,m)}var te=window.requestAnimationFrame||ie("RequestAnimationFrame")||le,Me=window.cancelAnimationFrame||ie("CancelAnimationFrame")||ie("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Ze(a,f,m){if(m&&te===le)a.call(f);else return te.call(window,d(a,f))}function Ce(a){a&&Me.call(window,a)}var Je={__proto__:null,extend:s,create:l,bind:d,get lastId(){return y},stamp:x,throttle:w,wrapNum:C,falseFn:I,formatNum:O,trim:V,splitWords:W,setOptions:j,getParamString:J,template:D,isArray:B,indexOf:G,emptyImageUrl:ae,requestFn:te,cancelFn:Me,requestAnimFrame:Ze,cancelAnimFrame:Ce};function gt(){}gt.extend=function(a){var f=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=f.__super__=this.prototype,E=l(m);E.constructor=f,f.prototype=E;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(f[T]=this[T]);return a.statics&&s(f,a.statics),a.includes&&(ee(a.includes),s.apply(null,[E].concat(a.includes))),s(E,a),delete E.statics,delete E.includes,E.options&&(E.options=m.options?l(m.options):{},s(E.options,a.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,U=E._initHooks.length;N<U;N++)E._initHooks[N].call(this)}},f},gt.include=function(a){var f=this.prototype.options;return s(this.prototype,a),a.options&&(this.prototype.options=f,this.mergeOptions(a.options)),this},gt.mergeOptions=function(a){return s(this.prototype.options,a),this},gt.addInitHook=function(a){var f=Array.prototype.slice.call(arguments,1),m=typeof a=="function"?a:function(){this[a].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function ee(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=B(a)?a:[a];for(var f=0;f<a.length;f++)a[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var et={on:function(a,f,m){if(typeof a=="object")for(var E in a)this._on(E,a[E],f);else{a=W(a);for(var T=0,N=a.length;T<N;T++)this._on(a[T],f,m)}return this},off:function(a,f,m){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var E in a)this._off(E,a[E],f);else{a=W(a);for(var T=arguments.length===1,N=0,U=a.length;N<U;N++)T?this._off(a[N]):this._off(a[N],f,m)}return this},_on:function(a,f,m,E){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(a,f,m)===!1){m===this&&(m=void 0);var T={fn:f,ctx:m};E&&(T.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(T)}},_off:function(a,f,m){var E,T,N;if(this._events&&(E=this._events[a],!!E)){if(arguments.length===1){if(this._firingCount)for(T=0,N=E.length;T<N;T++)E[T].fn=I;delete this._events[a];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var U=this._listens(a,f,m);if(U!==!1){var X=E[U];this._firingCount&&(X.fn=I,this._events[a]=E=E.slice()),E.splice(U,1)}}},fire:function(a,f,m){if(!this.listens(a,m))return this;var E=s({},f,{type:a,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var T=this._events[a];if(T){this._firingCount=this._firingCount+1||1;for(var N=0,U=T.length;N<U;N++){var X=T[N],Q=X.fn;X.once&&this.off(a,Q,X.ctx),Q.call(X.ctx||this,E)}this._firingCount--}}return m&&this._propagateEvent(E),this},listens:function(a,f,m,E){typeof a!="string"&&console.warn('"string" type argument expected');var T=f;typeof f!="function"&&(E=!!f,T=void 0,m=void 0);var N=this._events&&this._events[a];if(N&&N.length&&this._listens(a,T,m)!==!1)return!0;if(E){for(var U in this._eventParents)if(this._eventParents[U].listens(a,f,m,E))return!0}return!1},_listens:function(a,f,m){if(!this._events)return!1;var E=this._events[a]||[];if(!f)return!!E.length;m===this&&(m=void 0);for(var T=0,N=E.length;T<N;T++)if(E[T].fn===f&&E[T].ctx===m)return T;return!1},once:function(a,f,m){if(typeof a=="object")for(var E in a)this._on(E,a[E],f,!0);else{a=W(a);for(var T=0,N=a.length;T<N;T++)this._on(a[T],f,m,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[x(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[x(a)],this},_propagateEvent:function(a){for(var f in this._eventParents)this._eventParents[f].fire(a.type,s({layer:a.target,propagatedFrom:a.target},a),!0)}};et.addEventListener=et.on,et.removeEventListener=et.clearAllEventListeners=et.off,et.addOneTimeEventListener=et.once,et.fireEvent=et.fire,et.hasEventListeners=et.listens;var ke=gt.extend(et);function ne(a,f,m){this.x=m?Math.round(a):a,this.y=m?Math.round(f):f}var Oe=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(a){return this.clone()._add(pe(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(pe(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new ne(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new ne(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Oe(this.x),this.y=Oe(this.y),this},distanceTo:function(a){a=pe(a);var f=a.x-this.x,m=a.y-this.y;return Math.sqrt(f*f+m*m)},equals:function(a){return a=pe(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=pe(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function pe(a,f,m){return a instanceof ne?a:B(a)?new ne(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new ne(a.x,a.y):new ne(a,f,m)}function Be(a,f){if(a)for(var m=f?[a,f]:a,E=0,T=m.length;E<T;E++)this.extend(m[E])}Be.prototype={extend:function(a){var f,m;if(!a)return this;if(a instanceof ne||typeof a[0]=="number"||"x"in a)f=m=pe(a);else if(a=De(a),f=a.min,m=a.max,!f||!m)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=m.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(a){return pe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return pe(this.min.x,this.max.y)},getTopRight:function(){return pe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var f,m;return typeof a[0]=="number"||a instanceof ne?a=pe(a):a=De(a),a instanceof Be?(f=a.min,m=a.max):f=m=a,f.x>=this.min.x&&m.x<=this.max.x&&f.y>=this.min.y&&m.y<=this.max.y},intersects:function(a){a=De(a);var f=this.min,m=this.max,E=a.min,T=a.max,N=T.x>=f.x&&E.x<=m.x,U=T.y>=f.y&&E.y<=m.y;return N&&U},overlaps:function(a){a=De(a);var f=this.min,m=this.max,E=a.min,T=a.max,N=T.x>f.x&&E.x<m.x,U=T.y>f.y&&E.y<m.y;return N&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var f=this.min,m=this.max,E=Math.abs(f.x-m.x)*a,T=Math.abs(f.y-m.y)*a;return De(pe(f.x-E,f.y-T),pe(m.x+E,m.y+T))},equals:function(a){return a?(a=De(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function De(a,f){return!a||a instanceof Be?a:new Be(a,f)}function It(a,f){if(a)for(var m=f?[a,f]:a,E=0,T=m.length;E<T;E++)this.extend(m[E])}It.prototype={extend:function(a){var f=this._southWest,m=this._northEast,E,T;if(a instanceof tt)E=a,T=a;else if(a instanceof It){if(E=a._southWest,T=a._northEast,!E||!T)return this}else return a?this.extend(ue(a)||je(a)):this;return!f&&!m?(this._southWest=new tt(E.lat,E.lng),this._northEast=new tt(T.lat,T.lng)):(f.lat=Math.min(E.lat,f.lat),f.lng=Math.min(E.lng,f.lng),m.lat=Math.max(T.lat,m.lat),m.lng=Math.max(T.lng,m.lng)),this},pad:function(a){var f=this._southWest,m=this._northEast,E=Math.abs(f.lat-m.lat)*a,T=Math.abs(f.lng-m.lng)*a;return new It(new tt(f.lat-E,f.lng-T),new tt(m.lat+E,m.lng+T))},getCenter:function(){return new tt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new tt(this.getNorth(),this.getWest())},getSouthEast:function(){return new tt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof tt||"lat"in a?a=ue(a):a=je(a);var f=this._southWest,m=this._northEast,E,T;return a instanceof It?(E=a.getSouthWest(),T=a.getNorthEast()):E=T=a,E.lat>=f.lat&&T.lat<=m.lat&&E.lng>=f.lng&&T.lng<=m.lng},intersects:function(a){a=je(a);var f=this._southWest,m=this._northEast,E=a.getSouthWest(),T=a.getNorthEast(),N=T.lat>=f.lat&&E.lat<=m.lat,U=T.lng>=f.lng&&E.lng<=m.lng;return N&&U},overlaps:function(a){a=je(a);var f=this._southWest,m=this._northEast,E=a.getSouthWest(),T=a.getNorthEast(),N=T.lat>f.lat&&E.lat<m.lat,U=T.lng>f.lng&&E.lng<m.lng;return N&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,f){return a?(a=je(a),this._southWest.equals(a.getSouthWest(),f)&&this._northEast.equals(a.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function je(a,f){return a instanceof It?a:new It(a,f)}function tt(a,f,m){if(isNaN(a)||isNaN(f))throw new Error("Invalid LatLng object: ("+a+", "+f+")");this.lat=+a,this.lng=+f,m!==void 0&&(this.alt=+m)}tt.prototype={equals:function(a,f){if(!a)return!1;a=ue(a);var m=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return m<=(f===void 0?1e-9:f)},toString:function(a){return"LatLng("+O(this.lat,a)+", "+O(this.lng,a)+")"},distanceTo:function(a){return St.distance(this,ue(a))},wrap:function(){return St.wrapLatLng(this)},toBounds:function(a){var f=180*a/40075017,m=f/Math.cos(Math.PI/180*this.lat);return je([this.lat-f,this.lng-m],[this.lat+f,this.lng+m])},clone:function(){return new tt(this.lat,this.lng,this.alt)}};function ue(a,f,m){return a instanceof tt?a:B(a)&&typeof a[0]!="object"?a.length===3?new tt(a[0],a[1],a[2]):a.length===2?new tt(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new tt(a.lat,"lng"in a?a.lng:a.lon,a.alt):f===void 0?null:new tt(a,f,m)}var wn={latLngToPoint:function(a,f){var m=this.projection.project(a),E=this.scale(f);return this.transformation._transform(m,E)},pointToLatLng:function(a,f){var m=this.scale(f),E=this.transformation.untransform(a,m);return this.projection.unproject(E)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var f=this.projection.bounds,m=this.scale(a),E=this.transformation.transform(f.min,m),T=this.transformation.transform(f.max,m);return new Be(E,T)},infinite:!1,wrapLatLng:function(a){var f=this.wrapLng?C(a.lng,this.wrapLng,!0):a.lng,m=this.wrapLat?C(a.lat,this.wrapLat,!0):a.lat,E=a.alt;return new tt(m,f,E)},wrapLatLngBounds:function(a){var f=a.getCenter(),m=this.wrapLatLng(f),E=f.lat-m.lat,T=f.lng-m.lng;if(E===0&&T===0)return a;var N=a.getSouthWest(),U=a.getNorthEast(),X=new tt(N.lat-E,N.lng-T),Q=new tt(U.lat-E,U.lng-T);return new It(X,Q)}},St=s({},wn,{wrapLng:[-180,180],R:6371e3,distance:function(a,f){var m=Math.PI/180,E=a.lat*m,T=f.lat*m,N=Math.sin((f.lat-a.lat)*m/2),U=Math.sin((f.lng-a.lng)*m/2),X=N*N+Math.cos(E)*Math.cos(T)*U*U,Q=2*Math.atan2(Math.sqrt(X),Math.sqrt(1-X));return this.R*Q}}),Rs=6378137,Qi={R:Rs,MAX_LATITUDE:85.0511287798,project:function(a){var f=Math.PI/180,m=this.MAX_LATITUDE,E=Math.max(Math.min(m,a.lat),-m),T=Math.sin(E*f);return new ne(this.R*a.lng*f,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(a){var f=180/Math.PI;return new tt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*f,a.x*f/this.R)},bounds:function(){var a=Rs*Math.PI;return new Be([-a,-a],[a,a])}()};function vn(a,f,m,E){if(B(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=f,this._c=m,this._d=E}vn.prototype={transform:function(a,f){return this._transform(a.clone(),f)},_transform:function(a,f){return f=f||1,a.x=f*(this._a*a.x+this._b),a.y=f*(this._c*a.y+this._d),a},untransform:function(a,f){return f=f||1,new ne((a.x/f-this._b)/this._a,(a.y/f-this._d)/this._c)}};function bi(a,f,m,E){return new vn(a,f,m,E)}var it=s({},St,{code:"EPSG:3857",projection:Qi,transformation:function(){var a=.5/(Math.PI*Qi.R);return bi(a,.5,-a,.5)}()}),Ns=s({},it,{code:"EPSG:900913"});function Nr(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ps(a,f){var m="",E,T,N,U,X,Q;for(E=0,N=a.length;E<N;E++){for(X=a[E],T=0,U=X.length;T<U;T++)Q=X[T],m+=(T?"L":"M")+Q.x+" "+Q.y;m+=f?Se.svg?"z":"x":""}return m||"M0 0"}var rn=document.documentElement.style,mt="ActiveXObject"in window,st=mt&&!document.addEventListener,No="msLaunchUri"in navigator&&!("documentMode"in document),Ie=Dt("webkit"),Po=Dt("android"),Bl=Dt("android 2")||Dt("android 3"),li=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Fl=Po&&Dt("Google")&&li<537&&!("AudioNode"in window),ar=!!window.opera,Ul=!No&&Dt("chrome"),ui=Dt("gecko")&&!Ie&&!ar&&!mt,Fn=!Ul&&Dt("safari"),Vl=Dt("phantom"),Oo="OTransition"in rn,t0=navigator.platform.indexOf("Win")===0,Zt=mt&&"transition"in rn,_e="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Bl,Jt="MozPerspective"in rn,xt=!window.L_DISABLE_3D&&(Zt||_e||Jt)&&!Oo&&!Vl,Tt=typeof orientation<"u"||Dt("mobile"),Mo=Tt&&Ie,zl=Tt&&_e,jl=!window.PointerEvent&&window.MSPointerEvent,ut=!!(window.PointerEvent||jl),Ri="ontouchstart"in window||!!window.TouchEvent,eh=!window.L_NO_TOUCH&&(Ri||ut),th=Tt&&ar,Pr=Tt&&ui,Hl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,En=function(){var a=!1;try{var f=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",I,f),window.removeEventListener("testPassiveEventSupport",I,f)}catch{}return a}(),Os=function(){return!!document.createElement("canvas").getContext}(),Ms=!!(document.createElementNS&&Nr("svg").createSVGRect),Zr=!!Ms&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),n0=!Ms&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var f=a.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}}(),Ji=navigator.platform.indexOf("Mac")===0,Wl=navigator.platform.indexOf("Linux")===0;function Dt(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Se={ie:mt,ielt9:st,edge:No,webkit:Ie,android:Po,android23:Bl,androidStock:Fl,opera:ar,chrome:Ul,gecko:ui,safari:Fn,phantom:Vl,opera12:Oo,win:t0,ie3d:Zt,webkit3d:_e,gecko3d:Jt,any3d:xt,mobile:Tt,mobileWebkit:Mo,mobileWebkit3d:zl,msPointer:jl,pointer:ut,touch:eh,touchNative:Ri,mobileOpera:th,mobileGecko:Pr,retina:Hl,passiveEvents:En,canvas:Os,svg:Ms,vml:n0,inlineSvg:Zr,mac:Ji,linux:Wl},lr=Se.msPointer?"MSPointerDown":"pointerdown",ve=Se.msPointer?"MSPointerMove":"pointermove",es=Se.msPointer?"MSPointerUp":"pointerup",Ia=Se.msPointer?"MSPointerCancel":"pointercancel",An={touchstart:lr,touchmove:ve,touchend:es,touchcancel:Ia},ts={touchstart:Ni,touchmove:Do,touchend:Do,touchcancel:Do},ci={},ko=!1;function $r(a,f,m){return f==="touchstart"&&Nt(),ts[f]?(m=ts[f].bind(this,m),a.addEventListener(An[f],m,!1),m):(console.warn("wrong event specified:",f),I)}function r0(a,f,m){if(!An[f]){console.warn("wrong event specified:",f);return}a.removeEventListener(An[f],m,!1)}function i0(a){ci[a.pointerId]=a}function Xr(a){ci[a.pointerId]&&(ci[a.pointerId]=a)}function Tn(a){delete ci[a.pointerId]}function Nt(){ko||(document.addEventListener(lr,i0,!0),document.addEventListener(ve,Xr,!0),document.addEventListener(es,Tn,!0),document.addEventListener(Ia,Tn,!0),ko=!0)}function Do(a,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var m in ci)f.touches.push(ci[m]);f.changedTouches=[f],a(f)}}function Ni(a,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&gn(f),Do(a,f)}function Gl(a){var f={},m,E;for(E in a)m=a[E],f[E]=m&&m.bind?m.bind(a):m;return a=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var re=200;function s0(a,f){a.addEventListener("dblclick",f);var m=0,E;function T(N){if(N.detail!==1){E=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var U=Ds(N);if(!(U.some(function(Q){return Q instanceof HTMLLabelElement&&Q.attributes.for})&&!U.some(function(Q){return Q instanceof HTMLInputElement||Q instanceof HTMLSelectElement}))){var X=Date.now();X-m<=re?(E++,E===2&&f(Gl(N))):E=1,m=X}}}return a.addEventListener("click",T),{dblclick:f,simDblclick:T}}function Wt(a,f){a.removeEventListener("dblclick",f.dblclick),a.removeEventListener("click",f.simDblclick)}var Pi=$(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Lo=$(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),dt=Lo==="webkitTransition"||Lo==="OTransition"?Lo+"End":"transitionend";function ct(a){return typeof a=="string"?document.getElementById(a):a}function $e(a,f){var m=a.style[f]||a.currentStyle&&a.currentStyle[f];if((!m||m==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(a,null);m=E?E[f]:null}return m==="auto"?null:m}function nt(a,f,m){var E=document.createElement(a);return E.className=f||"",m&&m.appendChild(E),E}function bt(a){var f=a.parentNode;f&&f.removeChild(a)}function ks(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Pt(a){var f=a.parentNode;f&&f.lastChild!==a&&f.appendChild(a)}function ur(a){var f=a.parentNode;f&&f.firstChild!==a&&f.insertBefore(a,f.firstChild)}function Zl(a,f){if(a.classList!==void 0)return a.classList.contains(f);var m=hi(a);return m.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(m)}function be(a,f){if(a.classList!==void 0)for(var m=W(f),E=0,T=m.length;E<T;E++)a.classList.add(m[E]);else if(!Zl(a,f)){var N=hi(a);$l(a,(N?N+" ":"")+f)}}function _t(a,f){a.classList!==void 0?a.classList.remove(f):$l(a,V((" "+hi(a)+" ").replace(" "+f+" "," ")))}function $l(a,f){a.className.baseVal===void 0?a.className=f:a.className.baseVal=f}function hi(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Xe(a,f){"opacity"in a.style?a.style.opacity=f:"filter"in a.style&&Cn(a,f)}function Cn(a,f){var m=!1,E="DXImageTransform.Microsoft.Alpha";try{m=a.filters.item(E)}catch{if(f===1)return}f=Math.round(f*100),m?(m.Enabled=f!==100,m.Opacity=f):a.style.filter+=" progid:"+E+"(opacity="+f+")"}function $(a){for(var f=document.documentElement.style,m=0;m<a.length;m++)if(a[m]in f)return a[m];return!1}function M(a,f,m){var E=f||new ne(0,0);a.style[Pi]=(Se.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(m?" scale("+m+")":"")}function ye(a,f){a._leaflet_pos=f,Se.any3d?M(a,f):(a.style.left=f.x+"px",a.style.top=f.y+"px")}function Ot(a){return a._leaflet_pos||new ne(0,0)}var In,Bo,Fo;if("onselectstart"in document)In=function(){Fe(window,"selectstart",gn)},Bo=function(){xe(window,"selectstart",gn)};else{var Sn=$(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);In=function(){if(Sn){var a=document.documentElement.style;Fo=a[Sn],a[Sn]="none"}},Bo=function(){Sn&&(document.documentElement.style[Sn]=Fo,Fo=void 0)}}function Re(){Fe(window,"dragstart",gn)}function Rt(){xe(window,"dragstart",gn)}var Uo,Xl;function Vo(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(ns(),Uo=a,Xl=a.style.outlineStyle,a.style.outlineStyle="none",Fe(window,"keydown",ns))}function ns(){Uo&&(Uo.style.outlineStyle=Xl,Uo=void 0,Xl=void 0,xe(window,"keydown",ns))}function Sa(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Yl(a){var f=a.getBoundingClientRect();return{x:f.width/a.offsetWidth||1,y:f.height/a.offsetHeight||1,boundingClientRect:f}}var ln={__proto__:null,TRANSFORM:Pi,TRANSITION:Lo,TRANSITION_END:dt,get:ct,getStyle:$e,create:nt,remove:bt,empty:ks,toFront:Pt,toBack:ur,hasClass:Zl,addClass:be,removeClass:_t,setClass:$l,getClass:hi,setOpacity:Xe,testProp:$,setTransform:M,setPosition:ye,getPosition:Ot,get disableTextSelection(){return In},get enableTextSelection(){return Bo},disableImageDrag:Re,enableImageDrag:Rt,preventOutline:Vo,restoreOutline:ns,getSizedParentNode:Sa,getScale:Yl};function Fe(a,f,m,E){if(f&&typeof f=="object")for(var T in f)sn(a,T,f[T],m);else{f=W(f);for(var N=0,U=f.length;N<U;N++)sn(a,f[N],m,E)}return this}var pn="_leaflet_events";function xe(a,f,m,E){if(arguments.length===1)nh(a),delete a[pn];else if(f&&typeof f=="object")for(var T in f)ql(a,T,f[T],m);else if(f=W(f),arguments.length===2)nh(a,function(X){return G(f,X)!==-1});else for(var N=0,U=f.length;N<U;N++)ql(a,f[N],m,E);return this}function nh(a,f){for(var m in a[pn]){var E=m.split(/\d/)[0];(!f||f(E))&&ql(a,E,null,null,m)}}var He={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sn(a,f,m,E){var T=f+x(m)+(E?"_"+x(E):"");if(a[pn]&&a[pn][T])return this;var N=function(X){return m.call(E||a,X||window.event)},U=N;!Se.touchNative&&Se.pointer&&f.indexOf("touch")===0?N=$r(a,f,N):Se.touch&&f==="dblclick"?N=s0(a,N):"addEventListener"in a?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?a.addEventListener(He[f]||f,N,Se.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(N=function(X){X=X||window.event,rs(a,X)&&U(X)},a.addEventListener(He[f],N,!1)):a.addEventListener(f,U,!1):a.attachEvent("on"+f,N),a[pn]=a[pn]||{},a[pn][T]=N}function ql(a,f,m,E,T){T=T||f+x(m)+(E?"_"+x(E):"");var N=a[pn]&&a[pn][T];if(!N)return this;!Se.touchNative&&Se.pointer&&f.indexOf("touch")===0?r0(a,f,N):Se.touch&&f==="dblclick"?Wt(a,N):"removeEventListener"in a?a.removeEventListener(He[f]||f,N,!1):a.detachEvent("on"+f,N),a[pn][T]=null}function di(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function ba(a){return sn(a,"wheel",di),this}function Or(a){return Fe(a,"mousedown touchstart dblclick contextmenu",di),a._leaflet_disable_click=!0,this}function gn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Mr(a){return gn(a),di(a),this}function Ds(a){if(a.composedPath)return a.composedPath();for(var f=[],m=a.target;m;)f.push(m),m=m.parentNode;return f}function Ls(a,f){if(!f)return new ne(a.clientX,a.clientY);var m=Yl(f),E=m.boundingClientRect;return new ne((a.clientX-E.left)/m.x-f.clientLeft,(a.clientY-E.top)/m.y-f.clientTop)}var rh=Se.linux&&Se.chrome?window.devicePixelRatio:Se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Bs(a){return Se.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/rh:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function rs(a,f){var m=f.relatedTarget;if(!m)return!0;try{for(;m&&m!==a;)m=m.parentNode}catch{return!1}return m!==a}var Zn={__proto__:null,on:Fe,off:xe,stopPropagation:di,disableScrollPropagation:ba,disableClickPropagation:Or,preventDefault:gn,stop:Mr,getPropagationPath:Ds,getMousePosition:Ls,getWheelDelta:Bs,isExternalTarget:rs,addListener:Fe,removeListener:xe},Kl=ke.extend({run:function(a,f,m,E){this.stop(),this._el=a,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=Ot(a),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ze(this._animate,this),this._step()},_step:function(a){var f=+new Date-this._startTime,m=this._duration*1e3;f<m?this._runFrame(this._easeOut(f/m),a):(this._runFrame(1),this._complete())},_runFrame:function(a,f){var m=this._startPos.add(this._offset.multiplyBy(a));f&&m._round(),ye(this._el,m),this.fire("step")},_complete:function(){Ce(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Qe=ke.extend({options:{crs:it,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,f){f=j(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(ue(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Lo&&Se.any3d&&!Se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Fe(this._proxy,dt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,f,m){if(f=f===void 0?this._zoom:this._limitZoom(f),a=this._limitCenter(ue(a),f,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=s({animate:m.animate},m.zoom),m.pan=s({animate:m.animate,duration:m.duration},m.pan));var E=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,f,m.zoom):this._tryAnimatedPan(a,m.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(a,f,m.pan&&m.pan.noMoveStart),this},setZoom:function(a,f){return this._loaded?this.setView(this.getCenter(),a,{zoom:f}):(this._zoom=a,this)},zoomIn:function(a,f){return a=a||(Se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,f)},zoomOut:function(a,f){return a=a||(Se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,f)},setZoomAround:function(a,f,m){var E=this.getZoomScale(f),T=this.getSize().divideBy(2),N=a instanceof ne?a:this.latLngToContainerPoint(a),U=N.subtract(T).multiplyBy(1-1/E),X=this.containerPointToLatLng(T.add(U));return this.setView(X,f,{zoom:m})},_getBoundsCenterZoom:function(a,f){f=f||{},a=a.getBounds?a.getBounds():je(a);var m=pe(f.paddingTopLeft||f.padding||[0,0]),E=pe(f.paddingBottomRight||f.padding||[0,0]),T=this.getBoundsZoom(a,!1,m.add(E));if(T=typeof f.maxZoom=="number"?Math.min(f.maxZoom,T):T,T===1/0)return{center:a.getCenter(),zoom:T};var N=E.subtract(m).divideBy(2),U=this.project(a.getSouthWest(),T),X=this.project(a.getNorthEast(),T),Q=this.unproject(U.add(X).divideBy(2).add(N),T);return{center:Q,zoom:T}},fitBounds:function(a,f){if(a=je(a),!a.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(a,f);return this.setView(m.center,m.zoom,f)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,f){return this.setView(a,this._zoom,{pan:f})},panBy:function(a,f){if(a=pe(a).round(),f=f||{},!a.x&&!a.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Kl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,m,f.duration||.25,f.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,f,m){if(m=m||{},m.animate===!1||!Se.any3d)return this.setView(a,f,m);this._stop();var E=this.project(this.getCenter()),T=this.project(a),N=this.getSize(),U=this._zoom;a=ue(a),f=f===void 0?U:f;var X=Math.max(N.x,N.y),Q=X*this.getZoomScale(U,f),se=T.distanceTo(E)||1,Ee=1.42,Le=Ee*Ee;function Ke(cn){var hh=cn?-1:1,jT=cn?Q:X,HT=Q*Q-X*X+hh*Le*Le*se*se,WT=2*jT*Le*se,d0=HT/WT,t_=Math.sqrt(d0*d0+1)-d0,GT=t_<1e-9?-18:Math.log(t_);return GT}function fr(cn){return(Math.exp(cn)-Math.exp(-cn))/2}function bn(cn){return(Math.exp(cn)+Math.exp(-cn))/2}function ei(cn){return fr(cn)/bn(cn)}var Er=Ke(0);function Ma(cn){return X*(bn(Er)/bn(Er+Ee*cn))}function FT(cn){return X*(bn(Er)*ei(Er+Ee*cn)-fr(Er))/Le}function UT(cn){return 1-Math.pow(1-cn,1.5)}var VT=Date.now(),Jm=(Ke(1)-Er)/Ee,zT=m.duration?1e3*m.duration:1e3*Jm*.8;function e_(){var cn=(Date.now()-VT)/zT,hh=UT(cn)*Jm;cn<=1?(this._flyToFrame=Ze(e_,this),this._move(this.unproject(E.add(T.subtract(E).multiplyBy(FT(hh)/se)),U),this.getScaleZoom(X/Ma(hh),U),{flyTo:!0})):this._move(a,f)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),e_.call(this),this},flyToBounds:function(a,f){var m=this._getBoundsCenterZoom(a,f);return this.flyTo(m.center,m.zoom,f)},setMaxBounds:function(a){return a=je(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var f=this.options.minZoom;return this.options.minZoom=a,this._loaded&&f!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var f=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&f!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,f){this._enforcingBounds=!0;var m=this.getCenter(),E=this._limitCenter(m,this._zoom,je(a));return m.equals(E)||this.panTo(E,f),this._enforcingBounds=!1,this},panInside:function(a,f){f=f||{};var m=pe(f.paddingTopLeft||f.padding||[0,0]),E=pe(f.paddingBottomRight||f.padding||[0,0]),T=this.project(this.getCenter()),N=this.project(a),U=this.getPixelBounds(),X=De([U.min.add(m),U.max.subtract(E)]),Q=X.getSize();if(!X.contains(N)){this._enforcingBounds=!0;var se=N.subtract(X.getCenter()),Ee=X.extend(N).getSize().subtract(Q);T.x+=se.x<0?-Ee.x:Ee.x,T.y+=se.y<0?-Ee.y:Ee.y,this.panTo(this.unproject(T),f),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=s({animate:!1,pan:!0},a===!0?{animate:!0}:a);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),E=f.divideBy(2).round(),T=m.divideBy(2).round(),N=E.subtract(T);return!N.x&&!N.y?this:(a.animate&&a.pan?this.panBy(N):(a.pan&&this._rawPanBy(N),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=s({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=d(this._handleGeolocationResponse,this),m=d(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,m,a):navigator.geolocation.getCurrentPosition(f,m,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var f=a.code,m=a.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var f=a.coords.latitude,m=a.coords.longitude,E=new tt(f,m),T=E.toBounds(a.coords.accuracy*2),N=this._locateOptions;if(N.setView){var U=this.getBoundsZoom(T);this.setView(E,N.maxZoom?Math.min(U,N.maxZoom):U)}var X={latlng:E,bounds:T,timestamp:a.timestamp};for(var Q in a.coords)typeof a.coords[Q]=="number"&&(X[Q]=a.coords[Q]);this.fire("locationfound",X)}},addHandler:function(a,f){if(!f)return this;var m=this[a]=new f(this);return this._handlers.push(m),this.options[a]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),bt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ce(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)bt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,f){var m="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),E=nt("div",m,f||this._mapPane);return a&&(this._panes[a]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),f=this.unproject(a.getBottomLeft()),m=this.unproject(a.getTopRight());return new It(f,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,f,m){a=je(a),m=pe(m||[0,0]);var E=this.getZoom()||0,T=this.getMinZoom(),N=this.getMaxZoom(),U=a.getNorthWest(),X=a.getSouthEast(),Q=this.getSize().subtract(m),se=De(this.project(X,E),this.project(U,E)).getSize(),Ee=Se.any3d?this.options.zoomSnap:1,Le=Q.x/se.x,Ke=Q.y/se.y,fr=f?Math.max(Le,Ke):Math.min(Le,Ke);return E=this.getScaleZoom(fr,E),Ee&&(E=Math.round(E/(Ee/100))*(Ee/100),E=f?Math.ceil(E/Ee)*Ee:Math.floor(E/Ee)*Ee),Math.max(T,Math.min(N,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,f){var m=this._getTopLeftPoint(a,f);return new Be(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,f){var m=this.options.crs;return f=f===void 0?this._zoom:f,m.scale(a)/m.scale(f)},getScaleZoom:function(a,f){var m=this.options.crs;f=f===void 0?this._zoom:f;var E=m.zoom(a*m.scale(f));return isNaN(E)?1/0:E},project:function(a,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(ue(a),f)},unproject:function(a,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(pe(a),f)},layerPointToLatLng:function(a){var f=pe(a).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(a){var f=this.project(ue(a))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ue(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(je(a))},distance:function(a,f){return this.options.crs.distance(ue(a),ue(f))},containerPointToLayerPoint:function(a){return pe(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return pe(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var f=this.containerPointToLayerPoint(pe(a));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(a)))},mouseEventToContainerPoint:function(a){return Ls(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var f=this._container=ct(a);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Fe(f,"scroll",this._onScroll,this),this._containerId=x(f)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Se.any3d,be(a,"leaflet-container"+(Se.touch?" leaflet-touch":"")+(Se.retina?" leaflet-retina":"")+(Se.ielt9?" leaflet-oldie":"")+(Se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=$e(a,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ye(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(a.markerPane,"leaflet-zoom-hide"),be(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,f,m){ye(this._mapPane,new ne(0,0));var E=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var T=this._zoom!==f;this._moveStart(T,m)._move(a,f)._moveEnd(T),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(a,f){return a&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(a,f,m,E){f===void 0&&(f=this._zoom);var T=this._zoom!==f;return this._zoom=f,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),E?m&&m.pinch&&this.fire("zoom",m):((T||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ce(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){ye(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[x(this._container)]=this;var f=a?xe:Fe;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),Se.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ce(this._resizeRequest),this._resizeRequest=Ze(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,f){for(var m=[],E,T=f==="mouseout"||f==="mouseover",N=a.target||a.srcElement,U=!1;N;){if(E=this._targets[x(N)],E&&(f==="click"||f==="preclick")&&this._draggableMoved(E)){U=!0;break}if(E&&E.listens(f,!0)&&(T&&!rs(N,a)||(m.push(E),T))||N===this._container)break;N=N.parentNode}return!m.length&&!U&&!T&&this.listens(f,!0)&&(m=[this]),m},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var f=a.target||a.srcElement;if(!(!this._loaded||f._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(f))){var m=a.type;m==="mousedown"&&Vo(f),this._fireDOMEvent(a,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,f,m){if(a.type==="click"){var E=s({},a);E.type="preclick",this._fireDOMEvent(E,E.type,m)}var T=this._findEventTargets(a,f);if(m){for(var N=[],U=0;U<m.length;U++)m[U].listens(f,!0)&&N.push(m[U]);T=N.concat(T)}if(T.length){f==="contextmenu"&&gn(a);var X=T[0],Q={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var se=X.getLatLng&&(!X._radius||X._radius<=10);Q.containerPoint=se?this.latLngToContainerPoint(X.getLatLng()):this.mouseEventToContainerPoint(a),Q.layerPoint=this.containerPointToLayerPoint(Q.containerPoint),Q.latlng=se?X.getLatLng():this.layerPointToLatLng(Q.layerPoint)}for(U=0;U<T.length;U++)if(T[U].fire(f,Q,!0),Q.originalEvent._stopped||T[U].options.bubblingMouseEvents===!1&&G(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,f=this._handlers.length;a<f;a++)this._handlers[a].disable()},whenReady:function(a,f){return this._loaded?a.call(f||this,{target:this}):this.on("load",a,f),this},_getMapPanePos:function(){return Ot(this._mapPane)||new ne(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,f){var m=a&&f!==void 0?this._getNewPixelOrigin(a,f):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,f){var m=this.getSize()._divideBy(2);return this.project(a,f)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,f,m){var E=this._getNewPixelOrigin(m,f);return this.project(a,f)._subtract(E)},_latLngBoundsToNewLayerBounds:function(a,f,m){var E=this._getNewPixelOrigin(m,f);return De([this.project(a.getSouthWest(),f)._subtract(E),this.project(a.getNorthWest(),f)._subtract(E),this.project(a.getSouthEast(),f)._subtract(E),this.project(a.getNorthEast(),f)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,f,m){if(!m)return a;var E=this.project(a,f),T=this.getSize().divideBy(2),N=new Be(E.subtract(T),E.add(T)),U=this._getBoundsOffset(N,m,f);return Math.abs(U.x)<=1&&Math.abs(U.y)<=1?a:this.unproject(E.add(U),f)},_limitOffset:function(a,f){if(!f)return a;var m=this.getPixelBounds(),E=new Be(m.min.add(a),m.max.add(a));return a.add(this._getBoundsOffset(E,f))},_getBoundsOffset:function(a,f,m){var E=De(this.project(f.getNorthEast(),m),this.project(f.getSouthWest(),m)),T=E.min.subtract(a.min),N=E.max.subtract(a.max),U=this._rebound(T.x,-N.x),X=this._rebound(T.y,-N.y);return new ne(U,X)},_rebound:function(a,f){return a+f>0?Math.round(a-f)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(f))},_limitZoom:function(a){var f=this.getMinZoom(),m=this.getMaxZoom(),E=Se.any3d?this.options.zoomSnap:1;return E&&(a=Math.round(a/E)*E),Math.max(f,Math.min(m,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_t(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,f){var m=this._getCenterOffset(a)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,f),!0)},_createAnimProxy:function(){var a=this._proxy=nt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(f){var m=Pi,E=this._proxy.style[m];M(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),E===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){bt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),f=this.getZoom();M(this._proxy,this.project(a,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,f,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(f),T=this._getCenterOffset(a)._divideBy(1-1/E);return m.animate!==!0&&!this.getSize().contains(T)?!1:(Ze(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(a,f,!0)},this),!0)},_animateZoom:function(a,f,m,E){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=f,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:f,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_t(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ih(a,f){return new Qe(a,f)}var kr=gt.extend({options:{position:"topright"},initialize:function(a){j(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var f=this._map;return f&&f.removeControl(this),this.options.position=a,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var f=this._container=this.onAdd(a),m=this.getPosition(),E=a._controlCorners[m];return be(f,"leaflet-control"),m.indexOf("bottom")!==-1?E.insertBefore(f,E.firstChild):E.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(bt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),zo=function(a){return new kr(a)};Qe.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},f="leaflet-",m=this._controlContainer=nt("div",f+"control-container",this._container);function E(T,N){var U=f+T+" "+f+N;a[T+N]=nt("div",U,m)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)bt(this._controlCorners[a]);bt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sh=kr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,f,m,E){return m<E?-1:E<m?1:0}},initialize:function(a,f,m){j(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in a)this._addLayer(a[E],E);for(E in f)this._addLayer(f[E],E,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return kr.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,f){return this._addLayer(a,f),this._map?this._update():this},addOverlay:function(a,f){return this._addLayer(a,f,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var f=this._getLayer(x(a));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):_t(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _t(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",f=this._container=nt("div",a),m=this.options.collapsed;f.setAttribute("aria-haspopup",!0),Or(f),ba(f);var E=this._section=nt("section",a+"-list");m&&(this._map.on("click",this.collapse,this),Fe(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=nt("a",a+"-toggle",f);T.href="#",T.title="Layers",T.setAttribute("role","button"),Fe(T,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){gn(N),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=nt("div",a+"-base",E),this._separator=nt("div",a+"-separator",E),this._overlaysList=nt("div",a+"-overlays",E),f.appendChild(E)},_getLayer:function(a){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&x(this._layers[f].layer)===a)return this._layers[f]},_addLayer:function(a,f,m){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:f,overlay:m}),this.options.sortLayers&&this._layers.sort(d(function(E,T){return this.options.sortFunction(E.layer,T.layer,E.name,T.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ks(this._baseLayersList),ks(this._overlaysList),this._layerControlInputs=[];var a,f,m,E,T=0;for(m=0;m<this._layers.length;m++)E=this._layers[m],this._addItem(E),f=f||E.overlay,a=a||!E.overlay,T+=E.overlay?0:1;return this.options.hideSingleBase&&(a=a&&T>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=f&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var f=this._getLayer(x(a.target)),m=f.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;m&&this._map.fire(m,f)},_createRadioElement:function(a,f){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(f?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=m,E.firstChild},_addItem:function(a){var f=document.createElement("label"),m=this._map.hasLayer(a.layer),E;a.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=m):E=this._createRadioElement("leaflet-base-layers_"+x(this),m),this._layerControlInputs.push(E),E.layerId=x(a.layer),Fe(E,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+a.name;var N=document.createElement("span");f.appendChild(N),N.appendChild(E),N.appendChild(T);var U=a.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,f,m,E=[],T=[];this._handlingClick=!0;for(var N=a.length-1;N>=0;N--)f=a[N],m=this._getLayer(f.layerId).layer,f.checked?E.push(m):f.checked||T.push(m);for(N=0;N<T.length;N++)this._map.hasLayer(T[N])&&this._map.removeLayer(T[N]);for(N=0;N<E.length;N++)this._map.hasLayer(E[N])||this._map.addLayer(E[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,f,m,E=this._map.getZoom(),T=a.length-1;T>=0;T--)f=a[T],m=this._getLayer(f.layerId).layer,f.disabled=m.options.minZoom!==void 0&&E<m.options.minZoom||m.options.maxZoom!==void 0&&E>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Fe(a,"click",gn),this.expand();var f=this;setTimeout(function(){xe(a,"click",gn),f._preventClick=!1})}}),yt=function(a,f,m){return new sh(a,f,m)},Ra=kr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var f="leaflet-control-zoom",m=nt("div",f+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,f+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,f+"-out",m,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,f,m,E,T){var N=nt("a",m,E);return N.innerHTML=a,N.href="#",N.title=f,N.setAttribute("role","button"),N.setAttribute("aria-label",f),Or(N),Fe(N,"click",Mr),Fe(N,"click",T,this),Fe(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var a=this._map,f="leaflet-disabled";_t(this._zoomInButton,f),_t(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(be(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(be(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qe.mergeOptions({zoomControl:!0}),Qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ra,this.addControl(this.zoomControl))});var Na=function(a){return new Ra(a)},fi=kr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var f="leaflet-control-scale",m=nt("div",f),E=this.options;return this._addScales(E,f+"-line",m),a.on(E.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),m},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,f,m){a.metric&&(this._mScale=nt("div",f,m)),a.imperial&&(this._iScale=nt("div",f,m))},_update:function(){var a=this._map,f=a.getSize().y/2,m=a.distance(a.containerPointToLatLng([0,f]),a.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(m)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var f=this._getRoundNum(a),m=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,m,f/a)},_updateImperial:function(a){var f=a*3.2808399,m,E,T;f>5280?(m=f/5280,E=this._getRoundNum(m),this._updateScale(this._iScale,E+" mi",E/m)):(T=this._getRoundNum(f),this._updateScale(this._iScale,T+" ft",T/f))},_updateScale:function(a,f,m){a.style.width=Math.round(this.options.maxWidth*m)+"px",a.innerHTML=f},_getRoundNum:function(a){var f=Math.pow(10,(Math.floor(a)+"").length-1),m=a/f;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,f*m}}),o0=function(a){return new fi(a)},K='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ge=kr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Se.inlineSvg?K+" ":"")+"Leaflet</a>"},initialize:function(a){j(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=nt("div","leaflet-control-attribution"),Or(this._container);for(var f in a._layers)a._layers[f].getAttribution&&this.addAttribution(a._layers[f].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var f in this._attributions)this._attributions[f]&&a.push(f);var m=[];this.options.prefix&&m.push(this.options.prefix),a.length&&m.push(a.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Qe.mergeOptions({attributionControl:!0}),Qe.addInitHook(function(){this.options.attributionControl&&new Ge().addTo(this)});var mn=function(a){return new Ge(a)};kr.Layers=sh,kr.Zoom=Ra,kr.Scale=fi,kr.Attribution=Ge,zo.layers=yt,zo.zoom=Na,zo.scale=o0,zo.attribution=mn;var cr=gt.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cr.addTo=function(a,f){return a.addHandler(f,this),this};var oh={Events:et},ah=Se.touch?"touchstart mousedown":"mousedown",Oi=ke.extend({options:{clickTolerance:3},initialize:function(a,f,m,E){j(this,E),this._element=a,this._dragStartTarget=f||a,this._preventOutline=m},enable:function(){this._enabled||(Fe(this._dragStartTarget,ah,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Oi._dragging===this&&this.finishDrag(!0),xe(this._dragStartTarget,ah,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Zl(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Oi._dragging===this&&this.finishDrag();return}if(!(Oi._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Oi._dragging=this,this._preventOutline&&Vo(this._element),Re(),In(),!this._moving)){this.fire("down");var f=a.touches?a.touches[0]:a,m=Sa(this._element);this._startPoint=new ne(f.clientX,f.clientY),this._startPos=Ot(this._element),this._parentScale=Yl(m);var E=a.type==="mousedown";Fe(document,E?"mousemove":"touchmove",this._onMove,this),Fe(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var f=a.touches&&a.touches.length===1?a.touches[0]:a,m=new ne(f.clientX,f.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,gn(a),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),ye(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){_t(document.body,"leaflet-dragging"),this._lastTarget&&(_t(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),xe(document,"mousemove touchmove",this._onMove,this),xe(document,"mouseup touchend touchcancel",this._onUp,this),Rt(),Bo();var f=this._moved&&this._moving;this._moving=!1,Oi._dragging=!1,f&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function lh(a,f,m){var E,T=[1,4,2,8],N,U,X,Q,se,Ee,Le,Ke;for(N=0,Ee=a.length;N<Ee;N++)a[N]._code=ss(a[N],f);for(X=0;X<4;X++){for(Le=T[X],E=[],N=0,Ee=a.length,U=Ee-1;N<Ee;U=N++)Q=a[N],se=a[U],Q._code&Le?se._code&Le||(Ke=pi(se,Q,Le,f,m),Ke._code=ss(Ke,f),E.push(Ke)):(se._code&Le&&(Ke=pi(se,Q,Le,f,m),Ke._code=ss(Ke,f),E.push(Ke)),E.push(Q));a=E}return a}function Pa(a,f){var m,E,T,N,U,X,Q,se,Ee;if(!a||a.length===0)throw new Error("latlngs not passed");hr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Le=ue([0,0]),Ke=je(a),fr=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());fr<1700&&(Le=$t(a));var bn=a.length,ei=[];for(m=0;m<bn;m++){var Er=ue(a[m]);ei.push(f.project(ue([Er.lat-Le.lat,Er.lng-Le.lng])))}for(X=Q=se=0,m=0,E=bn-1;m<bn;E=m++)T=ei[m],N=ei[E],U=T.y*N.x-N.y*T.x,Q+=(T.x+N.x)*U,se+=(T.y+N.y)*U,X+=U*3;X===0?Ee=ei[0]:Ee=[Q/X,se/X];var Ma=f.unproject(pe(Ee));return ue([Ma.lat+Le.lat,Ma.lng+Le.lng])}function $t(a){for(var f=0,m=0,E=0,T=0;T<a.length;T++){var N=ue(a[T]);f+=N.lat,m+=N.lng,E++}return ue([f/E,m/E])}var Ql={__proto__:null,clipPolygon:lh,polygonCenter:Pa,centroid:$t};function Lt(a,f){if(!f||!a.length)return a.slice();var m=f*f;return a=a0(a,m),a=wt(a,m),a}function jo(a,f,m){return Math.sqrt(os(a,f,m,!0))}function is(a,f,m){return os(a,f,m)}function wt(a,f){var m=a.length,E=typeof Uint8Array!=void 0+""?Uint8Array:Array,T=new E(m);T[0]=T[m-1]=1,Ne(a,T,f,0,m-1);var N,U=[];for(N=0;N<m;N++)T[N]&&U.push(a[N]);return U}function Ne(a,f,m,E,T){var N=0,U,X,Q;for(X=E+1;X<=T-1;X++)Q=os(a[X],a[E],a[T],!0),Q>N&&(U=X,N=Q);N>m&&(f[U]=1,Ne(a,f,m,E,U),Ne(a,f,m,U,T))}function a0(a,f){for(var m=[a[0]],E=1,T=0,N=a.length;E<N;E++)Yr(a[E],a[T])>f&&(m.push(a[E]),T=E);return T<N-1&&m.push(a[N-1]),m}var Ct;function Mi(a,f,m,E,T){var N=E?Ct:ss(a,m),U=ss(f,m),X,Q,se;for(Ct=U;;){if(!(N|U))return[a,f];if(N&U)return!1;X=N||U,Q=pi(a,f,X,m,T),se=ss(Q,m),X===N?(a=Q,N=se):(f=Q,U=se)}}function pi(a,f,m,E,T){var N=f.x-a.x,U=f.y-a.y,X=E.min,Q=E.max,se,Ee;return m&8?(se=a.x+N*(Q.y-a.y)/U,Ee=Q.y):m&4?(se=a.x+N*(X.y-a.y)/U,Ee=X.y):m&2?(se=Q.x,Ee=a.y+U*(Q.x-a.x)/N):m&1&&(se=X.x,Ee=a.y+U*(X.x-a.x)/N),new ne(se,Ee,T)}function ss(a,f){var m=0;return a.x<f.min.x?m|=1:a.x>f.max.x&&(m|=2),a.y<f.min.y?m|=4:a.y>f.max.y&&(m|=8),m}function Yr(a,f){var m=f.x-a.x,E=f.y-a.y;return m*m+E*E}function os(a,f,m,E){var T=f.x,N=f.y,U=m.x-T,X=m.y-N,Q=U*U+X*X,se;return Q>0&&(se=((a.x-T)*U+(a.y-N)*X)/Q,se>1?(T=m.x,N=m.y):se>0&&(T+=U*se,N+=X*se)),U=a.x-T,X=a.y-N,E?U*U+X*X:new ne(T,N)}function hr(a){return!B(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Oa(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),hr(a)}function Jl(a,f){var m,E,T,N,U,X,Q,se;if(!a||a.length===0)throw new Error("latlngs not passed");hr(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ee=ue([0,0]),Le=je(a),Ke=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());Ke<1700&&(Ee=$t(a));var fr=a.length,bn=[];for(m=0;m<fr;m++){var ei=ue(a[m]);bn.push(f.project(ue([ei.lat-Ee.lat,ei.lng-Ee.lng])))}for(m=0,E=0;m<fr-1;m++)E+=bn[m].distanceTo(bn[m+1])/2;if(E===0)se=bn[0];else for(m=0,N=0;m<fr-1;m++)if(U=bn[m],X=bn[m+1],T=U.distanceTo(X),N+=T,N>E){Q=(N-E)/T,se=[X.x-Q*(X.x-U.x),X.y-Q*(X.y-U.y)];break}var Er=f.unproject(pe(se));return ue([Er.lat+Ee.lat,Er.lng+Ee.lng])}var uh={__proto__:null,simplify:Lt,pointToSegmentDistance:jo,closestPointOnSegment:is,clipSegment:Mi,_getEdgeIntersection:pi,_getBitCode:ss,_sqClosestPointOnSegment:os,isFlat:hr,_flat:Oa,polylineCenter:Jl},eu={project:function(a){return new ne(a.lng,a.lat)},unproject:function(a){return new tt(a.y,a.x)},bounds:new Be([-180,-90],[180,90])},ki={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Be([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var f=Math.PI/180,m=this.R,E=a.lat*f,T=this.R_MINOR/m,N=Math.sqrt(1-T*T),U=N*Math.sin(E),X=Math.tan(Math.PI/4-E/2)/Math.pow((1-U)/(1+U),N/2);return E=-m*Math.log(Math.max(X,1e-10)),new ne(a.lng*f*m,E)},unproject:function(a){for(var f=180/Math.PI,m=this.R,E=this.R_MINOR/m,T=Math.sqrt(1-E*E),N=Math.exp(-a.y/m),U=Math.PI/2-2*Math.atan(N),X=0,Q=.1,se;X<15&&Math.abs(Q)>1e-7;X++)se=T*Math.sin(U),se=Math.pow((1-se)/(1+se),T/2),Q=Math.PI/2-2*Math.atan(N*se)-U,U+=Q;return new tt(U*f,a.x*f/m)}},tu={__proto__:null,LonLat:eu,Mercator:ki,SphericalMercator:Qi},l0=s({},St,{code:"EPSG:3395",projection:ki,transformation:function(){var a=.5/(Math.PI*ki.R);return bi(a,.5,-a,.5)}()}),Fs=s({},St,{code:"EPSG:4326",projection:eu,transformation:bi(1/180,1,-1/180,.5)}),u0=s({},wn,{projection:eu,transformation:bi(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,f){var m=f.lng-a.lng,E=f.lat-a.lat;return Math.sqrt(m*m+E*E)},infinite:!0});wn.Earth=St,wn.EPSG3395=l0,wn.EPSG3857=it,wn.EPSG900913=Ns,wn.EPSG4326=Fs,wn.Simple=u0;var un=ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[x(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[x(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var f=a.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var m=this.getEvents();f.on(m,this),this.once("remove",function(){f.off(m,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});Qe.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var f=x(a);return this._layers[f]?this:(this._layers[f]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var f=x(a);return this._layers[f]?(this._loaded&&a.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return x(a)in this._layers},eachLayer:function(a,f){for(var m in this._layers)a.call(f,this._layers[m]);return this},_addLayers:function(a){a=a?B(a)?a:[a]:[];for(var f=0,m=a.length;f<m;f++)this.addLayer(a[f])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[x(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var f=x(a);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,f=-1/0,m=this._getZoomSpan();for(var E in this._zoomBoundLayers){var T=this._zoomBoundLayers[E].options;a=T.minZoom===void 0?a:Math.min(a,T.minZoom),f=T.maxZoom===void 0?f:Math.max(f,T.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=a===1/0?void 0:a,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gi=un.extend({initialize:function(a,f){j(this,f),this._layers={};var m,E;if(a)for(m=0,E=a.length;m<E;m++)this.addLayer(a[m])},addLayer:function(a){var f=this.getLayerId(a);return this._layers[f]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var f=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(a){var f=typeof a=="number"?a:this.getLayerId(a);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var f=Array.prototype.slice.call(arguments,1),m,E;for(m in this._layers)E=this._layers[m],E[a]&&E[a].apply(E,f);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,f){for(var m in this._layers)a.call(f,this._layers[m]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return x(a)}}),vr=function(a,f){return new gi(a,f)},qr=gi.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),gi.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),gi.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new It;for(var f in this._layers){var m=this._layers[f];a.extend(m.getBounds?m.getBounds():m.getLatLng())}return a}}),Kr=function(a,f){return new qr(a,f)},Us=gt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){j(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,f){var m=this._getIconUrl(a);if(!m){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(m,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(E,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(a,f){var m=this.options,E=m[f+"Size"];typeof E=="number"&&(E=[E,E]);var T=pe(E),N=pe(f==="shadow"&&m.shadowAnchor||m.iconAnchor||T&&T.divideBy(2,!0));a.className="leaflet-marker-"+f+" "+(m.className||""),N&&(a.style.marginLeft=-N.x+"px",a.style.marginTop=-N.y+"px"),T&&(a.style.width=T.x+"px",a.style.height=T.y+"px")},_createImg:function(a,f){return f=f||document.createElement("img"),f.src=a,f},_getIconUrl:function(a){return Se.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function nu(a){return new Us(a)}var Ho=Us.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Ho.imagePath!="string"&&(Ho.imagePath=this._detectIconPath()),(this.options.imagePath||Ho.imagePath)+Us.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var f=function(m,E,T){var N=E.exec(m);return N&&N[T]};return a=f(a,/^url\((['"])?(.+)\1\)$/,2),a&&f(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=nt("div","leaflet-default-icon-path",document.body),f=$e(a,"background-image")||$e(a,"backgroundImage");if(document.body.removeChild(a),f=this._stripUrl(f),f)return f;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),ru=cr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Oi(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_t(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var f=this._marker,m=f._map,E=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,N=Ot(f._icon),U=m.getPixelBounds(),X=m.getPixelOrigin(),Q=De(U.min._subtract(X).add(T),U.max._subtract(X).subtract(T));if(!Q.contains(N)){var se=pe((Math.max(Q.max.x,N.x)-Q.max.x)/(U.max.x-Q.max.x)-(Math.min(Q.min.x,N.x)-Q.min.x)/(U.min.x-Q.min.x),(Math.max(Q.max.y,N.y)-Q.max.y)/(U.max.y-Q.max.y)-(Math.min(Q.min.y,N.y)-Q.min.y)/(U.min.y-Q.min.y)).multiplyBy(E);m.panBy(se,{animate:!1}),this._draggable._newPos._add(se),this._draggable._startPos._add(se),ye(f._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Ze(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Ce(this._panRequest),this._panRequest=Ze(this._adjustPan.bind(this,a)))},_onDrag:function(a){var f=this._marker,m=f._shadow,E=Ot(f._icon),T=f._map.layerPointToLatLng(E);m&&ye(m,E),f._latlng=T,a.latlng=T,a.oldLatLng=this._oldLatLng,f.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Ce(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),dr=un.extend({options:{icon:new Ho,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,f){j(this,f),this._latlng=ue(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var f=this._latlng;return this._latlng=ue(a),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=a.icon.createIcon(this._icon),E=!1;m!==this._icon&&(this._icon&&this._removeIcon(),E=!0,a.title&&(m.title=a.title),m.tagName==="IMG"&&(m.alt=a.alt||"")),be(m,f),a.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(m,"focus",this._panOnFocus,this);var T=a.icon.createShadow(this._shadow),N=!1;T!==this._shadow&&(this._removeShadow(),N=!0),T&&(be(T,f),T.alt=""),this._shadow=T,a.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&N&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xe(this._icon,"focus",this._panOnFocus,this),bt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&bt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&ye(this._icon,a),this._shadow&&ye(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var f=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ru)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ru(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Xe(this._icon,a),this._shadow&&Xe(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var f=this.options.icon.options,m=f.iconSize?pe(f.iconSize):pe(0,0),E=f.iconAnchor?pe(f.iconAnchor):pe(0,0);a.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:m.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function c0(a,f){return new dr(a,f)}var Qr=un.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return j(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Di=Qr.extend({options:{fill:!0,radius:10},initialize:function(a,f){j(this,f),this._latlng=ue(a),this._radius=this.options.radius},setLatLng:function(a){var f=this._latlng;return this._latlng=ue(a),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var f=a&&a.radius||this._radius;return Qr.prototype.setStyle.call(this,a),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,f=this._radiusY||a,m=this._clickTolerance(),E=[a+m,f+m];this._pxBounds=new Be(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ot(a,f){return new Di(a,f)}var Vs=Di.extend({initialize:function(a,f,m){if(typeof f=="number"&&(f=s({},m,{radius:f})),j(this,f),this._latlng=ue(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new It(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Qr.prototype.setStyle,_project:function(){var a=this._latlng.lng,f=this._latlng.lat,m=this._map,E=m.options.crs;if(E.distance===St.distance){var T=Math.PI/180,N=this._mRadius/St.R/T,U=m.project([f+N,a]),X=m.project([f-N,a]),Q=U.add(X).divideBy(2),se=m.unproject(Q).lat,Ee=Math.acos((Math.cos(N*T)-Math.sin(f*T)*Math.sin(se*T))/(Math.cos(f*T)*Math.cos(se*T)))/T;(isNaN(Ee)||Ee===0)&&(Ee=N/Math.cos(Math.PI/180*f)),this._point=Q.subtract(m.getPixelOrigin()),this._radius=isNaN(Ee)?0:Q.x-m.project([se,a-Ee]).x,this._radiusY=Q.y-U.y}else{var Le=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(Le).x}this._updateBounds()}});function S(a,f,m){return new Vs(a,f,m)}var i=Qr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,f){j(this,f),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var f=1/0,m=null,E=os,T,N,U=0,X=this._parts.length;U<X;U++)for(var Q=this._parts[U],se=1,Ee=Q.length;se<Ee;se++){T=Q[se-1],N=Q[se];var Le=E(a,T,N,!0);Le<f&&(f=Le,m=E(a,T,N))}return m&&(m.distance=Math.sqrt(f)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,f){return f=f||this._defaultShape(),a=ue(a),f.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new It,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return hr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var f=[],m=hr(a),E=0,T=a.length;E<T;E++)m?(f[E]=ue(a[E]),this._bounds.extend(f[E])):f[E]=this._convertLatLngs(a[E]);return f},_project:function(){var a=new Be;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),f=new ne(a,a);this._rawPxBounds&&(this._pxBounds=new Be([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(a,f,m){var E=a[0]instanceof tt,T=a.length,N,U;if(E){for(U=[],N=0;N<T;N++)U[N]=this._map.latLngToLayerPoint(a[N]),m.extend(U[N]);f.push(U)}else for(N=0;N<T;N++)this._projectLatlngs(a[N],f,m)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,m,E,T,N,U,X,Q;for(m=0,T=0,N=this._rings.length;m<N;m++)for(Q=this._rings[m],E=0,U=Q.length;E<U-1;E++)X=Mi(Q[E],Q[E+1],a,E,!0),X&&(f[T]=f[T]||[],f[T].push(X[0]),(X[1]!==Q[E+1]||E===U-2)&&(f[T].push(X[1]),T++))}},_simplifyPoints:function(){for(var a=this._parts,f=this.options.smoothFactor,m=0,E=a.length;m<E;m++)a[m]=Lt(a[m],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,f){var m,E,T,N,U,X,Q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(m=0,N=this._parts.length;m<N;m++)for(X=this._parts[m],E=0,U=X.length,T=U-1;E<U;T=E++)if(!(!f&&E===0)&&jo(a,X[T],X[E])<=Q)return!0;return!1}});function o(a,f){return new i(a,f)}i._flat=Oa;var u=i.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var f=i.prototype._convertLatLngs.call(this,a),m=f.length;return m>=2&&f[0]instanceof tt&&f[0].equals(f[m-1])&&f.pop(),f},_setLatLngs:function(a){i.prototype._setLatLngs.call(this,a),hr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return hr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,f=this.options.weight,m=new ne(f,f);if(a=new Be(a.min.subtract(m),a.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,T=this._rings.length,N;E<T;E++)N=lh(this._rings[E],a,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var f=!1,m,E,T,N,U,X,Q,se;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(N=0,Q=this._parts.length;N<Q;N++)for(m=this._parts[N],U=0,se=m.length,X=se-1;U<se;X=U++)E=m[U],T=m[X],E.y>a.y!=T.y>a.y&&a.x<(T.x-E.x)*(a.y-E.y)/(T.y-E.y)+E.x&&(f=!f);return f||i.prototype._containsPoint.call(this,a,!0)}});function c(a,f){return new u(a,f)}var h=qr.extend({initialize:function(a,f){j(this,f),this._layers={},a&&this.addData(a)},addData:function(a){var f=B(a)?a:a.features,m,E,T;if(f){for(m=0,E=f.length;m<E;m++)T=f[m],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var N=this.options;if(N.filter&&!N.filter(a))return this;var U=p(a,N);return U?(U.feature=k(a),U.defaultOptions=U.options,this.resetStyle(U),N.onEachFeature&&N.onEachFeature(a,U),this.addLayer(U)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=s({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(f){this._setLayerStyle(f,a)},this)},_setLayerStyle:function(a,f){a.setStyle&&(typeof f=="function"&&(f=f(a.feature)),a.setStyle(f))}});function p(a,f){var m=a.type==="Feature"?a.geometry:a,E=m?m.coordinates:null,T=[],N=f&&f.pointToLayer,U=f&&f.coordsToLatLng||_,X,Q,se,Ee;if(!E&&!m)return null;switch(m.type){case"Point":return X=U(E),g(N,a,X,f);case"MultiPoint":for(se=0,Ee=E.length;se<Ee;se++)X=U(E[se]),T.push(g(N,a,X,f));return new qr(T);case"LineString":case"MultiLineString":return Q=v(E,m.type==="LineString"?0:1,U),new i(Q,f);case"Polygon":case"MultiPolygon":return Q=v(E,m.type==="Polygon"?1:2,U),new u(Q,f);case"GeometryCollection":for(se=0,Ee=m.geometries.length;se<Ee;se++){var Le=p({geometry:m.geometries[se],type:"Feature",properties:a.properties},f);Le&&T.push(Le)}return new qr(T);case"FeatureCollection":for(se=0,Ee=m.features.length;se<Ee;se++){var Ke=p(m.features[se],f);Ke&&T.push(Ke)}return new qr(T);default:throw new Error("Invalid GeoJSON object.")}}function g(a,f,m,E){return a?a(f,m):new dr(m,E&&E.markersInheritOptions&&E)}function _(a){return new tt(a[1],a[0],a[2])}function v(a,f,m){for(var E=[],T=0,N=a.length,U;T<N;T++)U=f?v(a[T],f-1,m):(m||_)(a[T]),E.push(U);return E}function A(a,f){return a=ue(a),a.alt!==void 0?[O(a.lng,f),O(a.lat,f),O(a.alt,f)]:[O(a.lng,f),O(a.lat,f)]}function b(a,f,m,E){for(var T=[],N=0,U=a.length;N<U;N++)T.push(f?b(a[N],hr(a[N])?0:f-1,m,E):A(a[N],E));return!f&&m&&T.length>0&&T.push(T[0].slice()),T}function R(a,f){return a.feature?s({},a.feature,{geometry:f}):k(f)}function k(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var z={toGeoJSON:function(a){return R(this,{type:"Point",coordinates:A(this.getLatLng(),a)})}};dr.include(z),Vs.include(z),Di.include(z),i.include({toGeoJSON:function(a){var f=!hr(this._latlngs),m=b(this._latlngs,f?1:0,!1,a);return R(this,{type:(f?"Multi":"")+"LineString",coordinates:m})}}),u.include({toGeoJSON:function(a){var f=!hr(this._latlngs),m=f&&!hr(this._latlngs[0]),E=b(this._latlngs,m?2:f?1:0,!0,a);return f||(E=[E]),R(this,{type:(m?"Multi":"")+"Polygon",coordinates:E})}}),gi.include({toMultiPoint:function(a){var f=[];return this.eachLayer(function(m){f.push(m.toGeoJSON(a).geometry.coordinates)}),R(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(a){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(a);var m=f==="GeometryCollection",E=[];return this.eachLayer(function(T){if(T.toGeoJSON){var N=T.toGeoJSON(a);if(m)E.push(N.geometry);else{var U=k(N);U.type==="FeatureCollection"?E.push.apply(E,U.features):E.push(U)}}}),m?R(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function H(a,f){return new h(a,f)}var Z=H,q=un.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,f,m){this._url=a,this._bounds=je(f),j(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){bt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Pt(this._image),this},bringToBack:function(){return this._map&&ur(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=je(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",f=this._image=a?this._url:nt("img");if(be(f,"leaflet-image-layer"),this._zoomAnimated&&be(f,"leaflet-zoom-animated"),this.options.className&&be(f,this.options.className),f.onselectstart=I,f.onmousemove=I,f.onload=d(this.fire,this,"load"),f.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(a){var f=this._map.getZoomScale(a.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;M(this._image,m,f)},_reset:function(){var a=this._image,f=new Be(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=f.getSize();ye(a,f.min),a.style.width=m.x+"px",a.style.height=m.y+"px"},_updateOpacity:function(){Xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),ce=function(a,f,m){return new q(a,f,m)},de=q.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",f=this._image=a?this._url:nt("video");if(be(f,"leaflet-image-layer"),this._zoomAnimated&&be(f,"leaflet-zoom-animated"),this.options.className&&be(f,this.options.className),f.onselectstart=I,f.onmousemove=I,f.onloadeddata=d(this.fire,this,"load"),a){for(var m=f.getElementsByTagName("source"),E=[],T=0;T<m.length;T++)E.push(m[T].src);this._url=m.length>0?E:[f.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var U=nt("source");U.src=this._url[N],f.appendChild(U)}}});function oe(a,f,m){return new de(a,f,m)}var Ye=q.extend({_initImage:function(){var a=this._image=this._url;be(a,"leaflet-image-layer"),this._zoomAnimated&&be(a,"leaflet-zoom-animated"),this.options.className&&be(a,this.options.className),a.onselectstart=I,a.onmousemove=I}});function We(a,f,m){return new Ye(a,f,m)}var Bt=un.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,f){a&&(a instanceof tt||B(a))?(this._latlng=ue(a),j(this,f)):(j(this,a),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Xe(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Xe(this._container,0),this._removeTimeout=setTimeout(d(bt,void 0,this._container),200)):bt(this._container),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ue(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pt(this._container),this},bringToBack:function(){return this._map&&ur(this._container),this},_prepareOpen:function(a){var f=this._source;if(!f._map)return!1;if(f instanceof qr){f=null;var m=this._source._layers;for(var E in m)if(m[E]._map){f=m[E];break}if(!f)return!1;this._source=f}if(!a)if(f.getCenter)a=f.getCenter();else if(f.getLatLng)a=f.getLatLng();else if(f.getBounds)a=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")a.innerHTML=f;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),f=pe(this.options.offset),m=this._getAnchor();this._zoomAnimated?ye(this._container,a.add(m)):f=f.add(a).add(m);var E=this._containerBottom=-f.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=E+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Qe.include({_initOverlay:function(a,f,m,E){var T=f;return T instanceof a||(T=new a(E).setContent(f)),m&&T.setLatLng(m),T}}),un.include({_initOverlay:function(a,f,m,E){var T=m;return T instanceof a?(j(T,E),T._source=this):(T=f&&!E?f:new a(E,this),T.setContent(m)),T}});var $n=Bt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Bt.prototype.openOn.call(this,a)},onAdd:function(a){Bt.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qr||this._source.on("preclick",di))},onRemove:function(a){Bt.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qr||this._source.off("preclick",di))},getEvents:function(){var a=Bt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",f=this._container=nt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=nt("div",a+"-content-wrapper",f);if(this._contentNode=nt("div",a+"-content",m),Or(f),ba(this._contentNode),Fe(f,"contextmenu",di),this._tipContainer=nt("div",a+"-tip-container",f),this._tip=nt("div",a+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=nt("a",a+"-close-button",f);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',Fe(E,"click",function(T){gn(T),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,f=a.style;f.width="",f.whiteSpace="nowrap";var m=a.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),f.width=m+1+"px",f.whiteSpace="",f.height="";var E=a.offsetHeight,T=this.options.maxHeight,N="leaflet-popup-scrolled";T&&E>T?(f.height=T+"px",be(a,N)):_t(a,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var f=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),m=this._getAnchor();ye(this._container,f.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,f=parseInt($e(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+f,E=this._containerWidth,T=new ne(this._containerLeft,-m-this._containerBottom);T._add(Ot(this._container));var N=a.layerPointToContainerPoint(T),U=pe(this.options.autoPanPadding),X=pe(this.options.autoPanPaddingTopLeft||U),Q=pe(this.options.autoPanPaddingBottomRight||U),se=a.getSize(),Ee=0,Le=0;N.x+E+Q.x>se.x&&(Ee=N.x+E-se.x+Q.x),N.x-Ee-X.x<0&&(Ee=N.x-X.x),N.y+m+Q.y>se.y&&(Le=N.y+m-se.y+Q.y),N.y-Le-X.y<0&&(Le=N.y-X.y),(Ee||Le)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Ee,Le]))}},_getAnchor:function(){return pe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Xn=function(a,f){return new $n(a,f)};Qe.mergeOptions({closePopupOnClick:!0}),Qe.include({openPopup:function(a,f,m){return this._initOverlay($n,a,f,m).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),un.include({bindPopup:function(a,f){return this._popup=this._initOverlay($n,this._popup,a,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof qr||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Mr(a);var f=a.layer||a.target;if(this._popup._source===f&&!(f instanceof Qr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=f,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var pt=Bt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Bt.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Bt.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Bt.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",f=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=nt("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+x(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var f,m,E=this._map,T=this._container,N=E.latLngToContainerPoint(E.getCenter()),U=E.layerPointToContainerPoint(a),X=this.options.direction,Q=T.offsetWidth,se=T.offsetHeight,Ee=pe(this.options.offset),Le=this._getAnchor();X==="top"?(f=Q/2,m=se):X==="bottom"?(f=Q/2,m=0):X==="center"?(f=Q/2,m=se/2):X==="right"?(f=0,m=se/2):X==="left"?(f=Q,m=se/2):U.x<N.x?(X="right",f=0,m=se/2):(X="left",f=Q+(Ee.x+Le.x)*2,m=se/2),a=a.subtract(pe(f,m,!0)).add(Ee).add(Le),_t(T,"leaflet-tooltip-right"),_t(T,"leaflet-tooltip-left"),_t(T,"leaflet-tooltip-top"),_t(T,"leaflet-tooltip-bottom"),be(T,"leaflet-tooltip-"+X),ye(T,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Xe(this._container,a)},_animateZoom:function(a){var f=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(f)},_getAnchor:function(){return pe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_n=function(a,f){return new pt(a,f)};Qe.include({openTooltip:function(a,f,m){return this._initOverlay(pt,a,f,m).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),un.include({bindTooltip:function(a,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(pt,this._tooltip,a,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var f=a?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[f](m),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof qr||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var f=typeof a.getElement=="function"&&a.getElement();f&&(Fe(f,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Fe(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var f=typeof a.getElement=="function"&&a.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var f=a.latlng,m,E;this._tooltip.options.sticky&&a.originalEvent&&(m=this._map.mouseEventToContainerPoint(a.originalEvent),E=this._map.containerPointToLayerPoint(m),f=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(f)}});var Yn=Us.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var f=a&&a.tagName==="DIV"?a:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ks(f),f.appendChild(m.html)):f.innerHTML=m.html!==!1?m.html:"",m.bgPos){var E=pe(m.bgPos);f.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function zs(a){return new Yn(a)}Us.Default=Ho;var Jr=un.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){j(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),bt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ur(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof ne?a:new ne(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var f=this.getPane().children,m=-a(-1/0,1/0),E=0,T=f.length,N;E<T;E++)N=f[E].style.zIndex,f[E]!==this._container&&N&&(m=a(m,+N));isFinite(m)&&(this.options.zIndex=m+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Se.ielt9){Xe(this._container,this.options.opacity);var a=+new Date,f=!1,m=!1;for(var E in this._tiles){var T=this._tiles[E];if(!(!T.current||!T.loaded)){var N=Math.min(1,(a-T.loaded)/200);Xe(T.el,N),N<1?f=!0:(T.active?m=!0:this._onOpaqueTile(T),T.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),f&&(Ce(this._fadeFrame),this._fadeFrame=Ze(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=nt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,f=this.options.maxZoom;if(a!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===a?(this._levels[m].el.style.zIndex=f-Math.abs(a-m),this._onUpdateLevel(m)):(bt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var E=this._levels[a],T=this._map;return E||(E=this._levels[a]={},E.el=nt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=f,E.origin=T.project(T.unproject(T.getPixelOrigin()),a).round(),E.zoom=a,this._setZoomTransform(E,T.getCenter(),T.getZoom()),I(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var a,f,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)f=this._tiles[a],f.retain=f.current;for(a in this._tiles)if(f=this._tiles[a],f.current&&!f.active){var E=f.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var f in this._tiles)this._tiles[f].coords.z===a&&this._removeTile(f)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)bt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,f,m,E){var T=Math.floor(a/2),N=Math.floor(f/2),U=m-1,X=new ne(+T,+N);X.z=+U;var Q=this._tileCoordsToKey(X),se=this._tiles[Q];return se&&se.active?(se.retain=!0,!0):(se&&se.loaded&&(se.retain=!0),U>E?this._retainParent(T,N,U,E):!1)},_retainChildren:function(a,f,m,E){for(var T=2*a;T<2*a+2;T++)for(var N=2*f;N<2*f+2;N++){var U=new ne(T,N);U.z=m+1;var X=this._tileCoordsToKey(U),Q=this._tiles[X];if(Q&&Q.active){Q.retain=!0;continue}else Q&&Q.loaded&&(Q.retain=!0);m+1<E&&this._retainChildren(T,N,m+1,E)}},_resetView:function(a){var f=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var f=this.options;return f.minNativeZoom!==void 0&&a<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<a?f.maxNativeZoom:a},_setView:function(a,f,m,E){var T=Math.round(f);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var N=this.options.updateWhenZooming&&T!==this._tileZoom;(!E||N)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(a),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(a,f)},_setZoomTransforms:function(a,f){for(var m in this._levels)this._setZoomTransform(this._levels[m],a,f)},_setZoomTransform:function(a,f,m){var E=this._map.getZoomScale(m,a.zoom),T=a.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(f,m)).round();Se.any3d?M(a.el,T,E):ye(a.el,T)},_resetGrid:function(){var a=this._map,f=a.options.crs,m=this._tileSize=this.getTileSize(),E=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,f.wrapLng[0]],E).x/m.x),Math.ceil(a.project([0,f.wrapLng[1]],E).x/m.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([f.wrapLat[0],0],E).y/m.x),Math.ceil(a.project([f.wrapLat[1],0],E).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var f=this._map,m=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),E=f.getZoomScale(m,this._tileZoom),T=f.project(a,this._tileZoom).floor(),N=f.getSize().divideBy(E*2);return new Be(T.subtract(N),T.add(N))},_update:function(a){var f=this._map;if(f){var m=this._clampZoom(f.getZoom());if(a===void 0&&(a=f.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(a),T=this._pxBoundsToTileRange(E),N=T.getCenter(),U=[],X=this.options.keepBuffer,Q=new Be(T.getBottomLeft().subtract([X,-X]),T.getTopRight().add([X,-X]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var se in this._tiles){var Ee=this._tiles[se].coords;(Ee.z!==this._tileZoom||!Q.contains(new ne(Ee.x,Ee.y)))&&(this._tiles[se].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(a,m);return}for(var Le=T.min.y;Le<=T.max.y;Le++)for(var Ke=T.min.x;Ke<=T.max.x;Ke++){var fr=new ne(Ke,Le);if(fr.z=this._tileZoom,!!this._isValidTile(fr)){var bn=this._tiles[this._tileCoordsToKey(fr)];bn?bn.current=!0:U.push(fr)}}if(U.sort(function(Er,Ma){return Er.distanceTo(N)-Ma.distanceTo(N)}),U.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ei=document.createDocumentFragment();for(Ke=0;Ke<U.length;Ke++)this._addTile(U[Ke],ei);this._level.el.appendChild(ei)}}}},_isValidTile:function(a){var f=this._map.options.crs;if(!f.infinite){var m=this._globalTileRange;if(!f.wrapLng&&(a.x<m.min.x||a.x>m.max.x)||!f.wrapLat&&(a.y<m.min.y||a.y>m.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(a);return je(this.options.bounds).overlaps(E)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var f=this._map,m=this.getTileSize(),E=a.scaleBy(m),T=E.add(m),N=f.unproject(E,a.z),U=f.unproject(T,a.z);return[N,U]},_tileCoordsToBounds:function(a){var f=this._tileCoordsToNwSe(a),m=new It(f[0],f[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var f=a.split(":"),m=new ne(+f[0],+f[1]);return m.z=+f[2],m},_removeTile:function(a){var f=this._tiles[a];f&&(bt(f.el),delete this._tiles[a],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){be(a,"leaflet-tile");var f=this.getTileSize();a.style.width=f.x+"px",a.style.height=f.y+"px",a.onselectstart=I,a.onmousemove=I,Se.ielt9&&this.options.opacity<1&&Xe(a,this.options.opacity)},_addTile:function(a,f){var m=this._getTilePos(a),E=this._tileCoordsToKey(a),T=this.createTile(this._wrapCoords(a),d(this._tileReady,this,a));this._initTile(T),this.createTile.length<2&&Ze(d(this._tileReady,this,a,null,T)),ye(T,m),this._tiles[E]={el:T,coords:a,current:!0},f.appendChild(T),this.fire("tileloadstart",{tile:T,coords:a})},_tileReady:function(a,f,m){f&&this.fire("tileerror",{error:f,tile:m,coords:a});var E=this._tileCoordsToKey(a);m=this._tiles[E],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Xe(m.el,0),Ce(this._fadeFrame),this._fadeFrame=Ze(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),f||(be(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Se.ielt9||!this._map._fadeAnimated?Ze(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var f=new ne(this._wrapX?C(a.x,this._wrapX):a.x,this._wrapY?C(a.y,this._wrapY):a.y);return f.z=a.z,f},_pxBoundsToTileRange:function(a){var f=this.getTileSize();return new Be(a.min.unscaleBy(f).floor(),a.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function h0(a){return new Jr(a)}var js=Jr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,f){this._url=a,f=j(this,f),f.detectRetina&&Se.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,f){return this._url===a&&f===void 0&&(f=!0),this._url=a,f||this.redraw(),this},createTile:function(a,f){var m=document.createElement("img");return Fe(m,"load",d(this._tileOnLoad,this,f,m)),Fe(m,"error",d(this._tileOnError,this,f,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(a),m},getTileUrl:function(a){var f={r:Se.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-a.y;this.options.tms&&(f.y=m),f["-y"]=m}return D(this._url,s(f,this.options))},_tileOnLoad:function(a,f){Se.ielt9?setTimeout(d(a,this,null,f),0):a(null,f)},_tileOnError:function(a,f,m){var E=this.options.errorTileUrl;E&&f.getAttribute("src")!==E&&(f.src=E),a(m,f)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,f=this.options.maxZoom,m=this.options.zoomReverse,E=this.options.zoomOffset;return m&&(a=f-a),a+E},_getSubdomain:function(a){var f=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var a,f;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(f=this._tiles[a].el,f.onload=I,f.onerror=I,!f.complete)){f.src=ae;var m=this._tiles[a].coords;bt(f),delete this._tiles[a],this.fire("tileabort",{tile:f,coords:m})}},_removeTile:function(a){var f=this._tiles[a];if(f)return f.el.setAttribute("src",ae),Jr.prototype._removeTile.call(this,a)},_tileReady:function(a,f,m){if(!(!this._map||m&&m.getAttribute("src")===ae))return Jr.prototype._tileReady.call(this,a,f,m)}});function Vm(a,f){return new js(a,f)}var zm=js.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,f){this._url=a;var m=s({},this.defaultWmsParams);for(var E in f)E in this.options||(m[E]=f[E]);f=j(this,f);var T=f.detectRetina&&Se.retina?2:1,N=this.getTileSize();m.width=N.x*T,m.height=N.y*T,this.wmsParams=m},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,js.prototype.onAdd.call(this,a)},getTileUrl:function(a){var f=this._tileCoordsToNwSe(a),m=this._crs,E=De(m.project(f[0]),m.project(f[1])),T=E.min,N=E.max,U=(this._wmsVersion>=1.3&&this._crs===Fs?[T.y,T.x,N.y,N.x]:[T.x,T.y,N.x,N.y]).join(","),X=js.prototype.getTileUrl.call(this,a);return X+J(this.wmsParams,X,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(a,f){return s(this.wmsParams,a),f||this.redraw(),this}});function MT(a,f){return new zm(a,f)}js.WMS=zm,Vm.wms=MT;var as=un.extend({options:{padding:.1},initialize:function(a){j(this,a),x(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,f){var m=this._map.getZoomScale(f,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,f),N=E.multiplyBy(-m).add(T).subtract(this._map._getNewPixelOrigin(a,f));Se.any3d?M(this._container,N,m):ye(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,f=this._map.getSize(),m=this._map.containerPointToLayerPoint(f.multiplyBy(-a)).round();this._bounds=new Be(m,m.add(f.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),jm=as.extend({options:{tolerance:0},getEvents:function(){var a=as.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){as.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Fe(a,"mousemove",this._onMouseMove,this),Fe(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Fe(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Ce(this._redrawRequest),delete this._ctx,bt(this._container),xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var f in this._layers)a=this._layers[f],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){as.prototype._update.call(this);var a=this._bounds,f=this._container,m=a.getSize(),E=Se.retina?2:1;ye(f,a.min),f.width=E*m.x,f.height=E*m.y,f.style.width=m.x+"px",f.style.height=m.y+"px",Se.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){as.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[x(a)]=a;var f=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var f=a._order,m=f.next,E=f.prev;m?m.prev=E:this._drawLast=E,E?E.next=m:this._drawFirst=m,delete a._order,delete this._layers[x(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var f=a.options.dashArray.split(/[, ]+/),m=[],E,T;for(T=0;T<f.length;T++){if(E=Number(f[T]),isNaN(E))return;m.push(E)}a.options._dashArray=m}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Ze(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var f=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Be,this._redrawBounds.extend(a._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(a._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var f=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,f=this._redrawBounds;if(this._ctx.save(),f){var m=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)a=E.layer,(!f||a._pxBounds&&a._pxBounds.intersects(f))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,f){if(this._drawing){var m,E,T,N,U=a._parts,X=U.length,Q=this._ctx;if(X){for(Q.beginPath(),m=0;m<X;m++){for(E=0,T=U[m].length;E<T;E++)N=U[m][E],Q[E?"lineTo":"moveTo"](N.x,N.y);f&&Q.closePath()}this._fillStroke(Q,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var f=a._point,m=this._ctx,E=Math.max(Math.round(a._radius),1),T=(Math.max(Math.round(a._radiusY),1)||E)/E;T!==1&&(m.save(),m.scale(1,T)),m.beginPath(),m.arc(f.x,f.y/T,E,0,Math.PI*2,!1),T!==1&&m.restore(),this._fillStroke(m,a)}},_fillStroke:function(a,f){var m=f.options;m.fill&&(a.globalAlpha=m.fillOpacity,a.fillStyle=m.fillColor||m.color,a.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(a.setLineDash&&a.setLineDash(f.options&&f.options._dashArray||[]),a.globalAlpha=m.opacity,a.lineWidth=m.weight,a.strokeStyle=m.color,a.lineCap=m.lineCap,a.lineJoin=m.lineJoin,a.stroke())},_onClick:function(a){for(var f=this._map.mouseEventToLayerPoint(a),m,E,T=this._drawFirst;T;T=T.next)m=T.layer,m.options.interactive&&m._containsPoint(f)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(m))&&(E=m);this._fireEvent(E?[E]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,f)}},_handleMouseOut:function(a){var f=this._hoveredLayer;f&&(_t(this._container,"leaflet-interactive"),this._fireEvent([f],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,f){if(!this._mouseHoverThrottled){for(var m,E,T=this._drawFirst;T;T=T.next)m=T.layer,m.options.interactive&&m._containsPoint(f)&&(E=m);E!==this._hoveredLayer&&(this._handleMouseOut(a),E&&(be(this._container,"leaflet-interactive"),this._fireEvent([E],a,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,f,m){this._map._fireDOMEvent(f,m||f.type,a)},_bringToFront:function(a){var f=a._order;if(f){var m=f.next,E=f.prev;if(m)m.prev=E;else return;E?E.next=m:m&&(this._drawFirst=m),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(a)}},_bringToBack:function(a){var f=a._order;if(f){var m=f.next,E=f.prev;if(E)E.next=m;else return;m?m.prev=E:E&&(this._drawLast=E),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(a)}}});function Hm(a){return Se.canvas?new jm(a):null}var iu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),kT={_initContainer:function(){this._container=nt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(as.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var f=a._container=iu("shape");be(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",a._path=iu("path"),f.appendChild(a._path),this._updateStyle(a),this._layers[x(a)]=a},_addPath:function(a){var f=a._container;this._container.appendChild(f),a.options.interactive&&a.addInteractiveTarget(f)},_removePath:function(a){var f=a._container;bt(f),a.removeInteractiveTarget(f),delete this._layers[x(a)]},_updateStyle:function(a){var f=a._stroke,m=a._fill,E=a.options,T=a._container;T.stroked=!!E.stroke,T.filled=!!E.fill,E.stroke?(f||(f=a._stroke=iu("stroke")),T.appendChild(f),f.weight=E.weight+"px",f.color=E.color,f.opacity=E.opacity,E.dashArray?f.dashStyle=B(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=E.lineCap.replace("butt","flat"),f.joinstyle=E.lineJoin):f&&(T.removeChild(f),a._stroke=null),E.fill?(m||(m=a._fill=iu("fill")),T.appendChild(m),m.color=E.fillColor||E.color,m.opacity=E.fillOpacity):m&&(T.removeChild(m),a._fill=null)},_updateCircle:function(a){var f=a._point.round(),m=Math.round(a._radius),E=Math.round(a._radiusY||m);this._setPath(a,a._empty()?"M0 0":"AL "+f.x+","+f.y+" "+m+","+E+" 0,"+65535*360)},_setPath:function(a,f){a._path.v=f},_bringToFront:function(a){Pt(a._container)},_bringToBack:function(a){ur(a._container)}},ch=Se.vml?iu:Nr,su=as.extend({_initContainer:function(){this._container=ch("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ch("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){bt(this._container),xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){as.prototype._update.call(this);var a=this._bounds,f=a.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,m.setAttribute("width",f.x),m.setAttribute("height",f.y)),ye(m,a.min),m.setAttribute("viewBox",[a.min.x,a.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(a){var f=a._path=ch("path");a.options.className&&be(f,a.options.className),a.options.interactive&&be(f,"leaflet-interactive"),this._updateStyle(a),this._layers[x(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){bt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[x(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var f=a._path,m=a.options;f&&(m.stroke?(f.setAttribute("stroke",m.color),f.setAttribute("stroke-opacity",m.opacity),f.setAttribute("stroke-width",m.weight),f.setAttribute("stroke-linecap",m.lineCap),f.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?f.setAttribute("stroke-dasharray",m.dashArray):f.removeAttribute("stroke-dasharray"),m.dashOffset?f.setAttribute("stroke-dashoffset",m.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),m.fill?(f.setAttribute("fill",m.fillColor||m.color),f.setAttribute("fill-opacity",m.fillOpacity),f.setAttribute("fill-rule",m.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(a,f){this._setPath(a,Ps(a._parts,f))},_updateCircle:function(a){var f=a._point,m=Math.max(Math.round(a._radius),1),E=Math.max(Math.round(a._radiusY),1)||m,T="a"+m+","+E+" 0 1,0 ",N=a._empty()?"M0 0":"M"+(f.x-m)+","+f.y+T+m*2+",0 "+T+-m*2+",0 ";this._setPath(a,N)},_setPath:function(a,f){a._path.setAttribute("d",f)},_bringToFront:function(a){Pt(a._path)},_bringToBack:function(a){ur(a._path)}});Se.vml&&su.include(kT);function Wm(a){return Se.svg||Se.vml?new su(a):null}Qe.include({getRenderer:function(a){var f=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var f=this._paneRenderers[a];return f===void 0&&(f=this._createRenderer({pane:a}),this._paneRenderers[a]=f),f},_createRenderer:function(a){return this.options.preferCanvas&&Hm(a)||Wm(a)}});var Gm=u.extend({initialize:function(a,f){u.prototype.initialize.call(this,this._boundsToLatLngs(a),f)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=je(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function DT(a,f){return new Gm(a,f)}su.create=ch,su.pointsToPath=Ps,h.geometryToLayer=p,h.coordsToLatLng=_,h.coordsToLatLngs=v,h.latLngToCoords=A,h.latLngsToCoords=b,h.getFeature=R,h.asFeature=k,Qe.mergeOptions({boxZoom:!0});var Zm=cr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){bt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),In(),Re(),this._startPoint=this._map.mouseEventToContainerPoint(a),Fe(document,{contextmenu:Mr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=nt("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var f=new Be(this._point,this._startPoint),m=f.getSize();ye(this._box,f.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(bt(this._box),_t(this._container,"leaflet-crosshair")),Bo(),Rt(),xe(document,{contextmenu:Mr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var f=new It(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qe.addInitHook("addHandler","boxZoom",Zm),Qe.mergeOptions({doubleClickZoom:!0});var $m=cr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var f=this._map,m=f.getZoom(),E=f.options.zoomDelta,T=a.originalEvent.shiftKey?m-E:m+E;f.options.doubleClickZoom==="center"?f.setZoom(T):f.setZoomAround(a.containerPoint,T)}});Qe.addInitHook("addHandler","doubleClickZoom",$m),Qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Xm=cr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Oi(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_t(this._map._container,"leaflet-grab"),_t(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=je(this._map.options.maxBounds);this._offsetLimit=De(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var f=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(f),this._prunePositions(f)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,f){return a-(a-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;a.x<f.min.x&&(a.x=this._viscousLimit(a.x,f.min.x)),a.y<f.min.y&&(a.y=this._viscousLimit(a.y,f.min.y)),a.x>f.max.x&&(a.x=this._viscousLimit(a.x,f.max.x)),a.y>f.max.y&&(a.y=this._viscousLimit(a.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,f=Math.round(a/2),m=this._initialWorldOffset,E=this._draggable._newPos.x,T=(E-f+m)%a+f-m,N=(E+f+m)%a-f-m,U=Math.abs(T+m)<Math.abs(N+m)?T:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(a){var f=this._map,m=f.options,E=!m.inertia||a.noInertia||this._times.length<2;if(f.fire("dragend",a),E)f.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,U=m.easeLinearity,X=T.multiplyBy(U/N),Q=X.distanceTo([0,0]),se=Math.min(m.inertiaMaxSpeed,Q),Ee=X.multiplyBy(se/Q),Le=se/(m.inertiaDeceleration*U),Ke=Ee.multiplyBy(-Le/2).round();!Ke.x&&!Ke.y?f.fire("moveend"):(Ke=f._limitOffset(Ke,f.options.maxBounds),Ze(function(){f.panBy(Ke,{duration:Le,easeLinearity:U,noMoveStart:!0,animate:!0})}))}}});Qe.addInitHook("addHandler","dragging",Xm),Qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ym=cr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Fe(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,f=document.documentElement,m=a.scrollTop||f.scrollTop,E=a.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(E,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var f=this._panKeys={},m=this.keyCodes,E,T;for(E=0,T=m.left.length;E<T;E++)f[m.left[E]]=[-1*a,0];for(E=0,T=m.right.length;E<T;E++)f[m.right[E]]=[a,0];for(E=0,T=m.down.length;E<T;E++)f[m.down[E]]=[0,a];for(E=0,T=m.up.length;E<T;E++)f[m.up[E]]=[0,-1*a]},_setZoomDelta:function(a){var f=this._zoomKeys={},m=this.keyCodes,E,T;for(E=0,T=m.zoomIn.length;E<T;E++)f[m.zoomIn[E]]=a;for(E=0,T=m.zoomOut.length;E<T;E++)f[m.zoomOut[E]]=-a},_addHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var f=a.keyCode,m=this._map,E;if(f in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(E=this._panKeys[f],a.shiftKey&&(E=pe(E).multiplyBy(3)),m.options.maxBounds&&(E=m._limitOffset(pe(E),m.options.maxBounds)),m.options.worldCopyJump){var T=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(E)));m.panTo(T)}else m.panBy(E)}else if(f in this._zoomKeys)m.setZoom(m.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Mr(a)}}});Qe.addInitHook("addHandler","keyboard",Ym),Qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qm=cr.extend({addHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var f=Bs(a),m=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var E=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),E),Mr(a)},_performZoom:function(){var a=this._map,f=a.getZoom(),m=this._map.options.zoomSnap||0;a._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,N=m?Math.ceil(T/m)*m:T,U=a._limitZoom(f+(this._delta>0?N:-N))-f;this._delta=0,this._startTime=null,U&&(a.options.scrollWheelZoom==="center"?a.setZoom(f+U):a.setZoomAround(this._lastMousePos,f+U))}});Qe.addInitHook("addHandler","scrollWheelZoom",qm);var LT=600;Qe.mergeOptions({tapHold:Se.touchNative&&Se.safari&&Se.mobile,tapTolerance:15});var Km=cr.extend({addHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var f=a.touches[0];this._startPos=this._newPos=new ne(f.clientX,f.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Fe(document,"touchend",gn),Fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),LT),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){xe(document,"touchend",gn),xe(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),xe(document,"touchend touchcancel contextmenu",this._cancel,this),xe(document,"touchmove",this._onMove,this)},_onMove:function(a){var f=a.touches[0];this._newPos=new ne(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,f){var m=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});m._simulated=!0,f.target.dispatchEvent(m)}});Qe.addInitHook("addHandler","tapHold",Km),Qe.mergeOptions({touchZoom:Se.touch,bounceAtZoomLimits:!0});var Qm=cr.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var f=this._map;if(!(!a.touches||a.touches.length!==2||f._animatingZoom||this._zooming)){var m=f.mouseEventToContainerPoint(a.touches[0]),E=f.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(m.add(E)._divideBy(2))),this._startDist=m.distanceTo(E),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),gn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var f=this._map,m=f.mouseEventToContainerPoint(a.touches[0]),E=f.mouseEventToContainerPoint(a.touches[1]),T=m.distanceTo(E)/this._startDist;if(this._zoom=f.getScaleZoom(T,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&T<1||this._zoom>f.getMaxZoom()&&T>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var N=m._add(E)._divideBy(2)._subtract(this._centerPoint);if(T===1&&N.x===0&&N.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),Ce(this._animRequest);var U=d(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ze(U,this,!0),gn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ce(this._animRequest),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qe.addInitHook("addHandler","touchZoom",Qm),Qe.BoxZoom=Zm,Qe.DoubleClickZoom=$m,Qe.Drag=Xm,Qe.Keyboard=Ym,Qe.ScrollWheelZoom=qm,Qe.TapHold=Km,Qe.TouchZoom=Qm,n.Bounds=Be,n.Browser=Se,n.CRS=wn,n.Canvas=jm,n.Circle=Vs,n.CircleMarker=Di,n.Class=gt,n.Control=kr,n.DivIcon=Yn,n.DivOverlay=Bt,n.DomEvent=Zn,n.DomUtil=ln,n.Draggable=Oi,n.Evented=ke,n.FeatureGroup=qr,n.GeoJSON=h,n.GridLayer=Jr,n.Handler=cr,n.Icon=Us,n.ImageOverlay=q,n.LatLng=tt,n.LatLngBounds=It,n.Layer=un,n.LayerGroup=gi,n.LineUtil=uh,n.Map=Qe,n.Marker=dr,n.Mixin=oh,n.Path=Qr,n.Point=ne,n.PolyUtil=Ql,n.Polygon=u,n.Polyline=i,n.Popup=$n,n.PosAnimation=Kl,n.Projection=tu,n.Rectangle=Gm,n.Renderer=as,n.SVG=su,n.SVGOverlay=Ye,n.TileLayer=js,n.Tooltip=pt,n.Transformation=vn,n.Util=Je,n.VideoOverlay=de,n.bind=d,n.bounds=De,n.canvas=Hm,n.circle=S,n.circleMarker=ot,n.control=zo,n.divIcon=zs,n.extend=s,n.featureGroup=Kr,n.geoJSON=H,n.geoJson=Z,n.gridLayer=h0,n.icon=nu,n.imageOverlay=ce,n.latLng=ue,n.latLngBounds=je,n.layerGroup=vr,n.map=ih,n.marker=c0,n.point=pe,n.polygon=c,n.polyline=o,n.popup=Xn,n.rectangle=DT,n.setOptions=j,n.stamp=x,n.svg=Wm,n.svgOverlay=We,n.tileLayer=Vm,n.tooltip=_n,n.transformation=bi,n.version=r,n.videoOverlay=oe;var BT=window.L;n.noConflict=function(){return window.L=BT,this},window.L=n})})(kp,kp.exports);var u6=kp.exports;const u1=Bp(u6);function c6(){const[t,e]=me.useState(""),[n,r]=me.useState(null),s=y=>{const x=y.coords.latitude,w=y.coords.longitude;e("");const C=u1.map("map").setView([x,w],18);u1.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(C),u1.marker([x,w]).addTo(C).bindPopup(`Latitude: ${x} , Longitude: ${w} `).openPopup(),r(C)},l=()=>{e("Unable to retrieve your location")},d=()=>{navigator.geolocation?(e("Locating"),navigator.geolocation.getCurrentPosition(s,l)):e("Geolocation is not supported by your browser")};return me.useEffect(()=>(document.querySelector("#find-me").addEventListener("click",d),()=>{document.querySelector("#find-me").removeEventListener("click",d)}),[]),P.jsxs("div",{children:[P.jsx("p",{id:"status",children:t}),P.jsx("div",{id:"map",style:{width:"300px",height:"300px"}}),P.jsx("button",{id:"find-me",className:"text-green-800",children:"Find Me"})]})}var Ae;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ae||(Ae={}));var kx=new Map([[Ae.QR_CODE,"QR_CODE"],[Ae.AZTEC,"AZTEC"],[Ae.CODABAR,"CODABAR"],[Ae.CODE_39,"CODE_39"],[Ae.CODE_93,"CODE_93"],[Ae.CODE_128,"CODE_128"],[Ae.DATA_MATRIX,"DATA_MATRIX"],[Ae.MAXICODE,"MAXICODE"],[Ae.ITF,"ITF"],[Ae.EAN_13,"EAN_13"],[Ae.EAN_8,"EAN_8"],[Ae.PDF_417,"PDF_417"],[Ae.RSS_14,"RSS_14"],[Ae.RSS_EXPANDED,"RSS_EXPANDED"],[Ae.UPC_A,"UPC_A"],[Ae.UPC_E,"UPC_E"],[Ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Dx;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Dx||(Dx={}));function h6(t){return Object.values(Ae).includes(t)}var Eo;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Eo||(Eo={}));var xi=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Eo.SCAN_TYPE_CAMERA,Eo.SCAN_TYPE_FILE],t}(),IT=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!kx.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,kx.get(e))},t}(),Lx=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Dp;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Dp||(Dp={}));var ST=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Dp.UNKWOWN_ERROR}},t}(),bT=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Fi(t){return typeof t>"u"||t===null}function d6(t,e,n){return t>n?n:t<e?e:t}var el=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),vt=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Bx=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),RT=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(s),d=Object.keys(e),y=0,x=d;y<x.length;y++){var w=x[y];if(l.has(w))return n.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},t}(),Lp={exports:{}};(function(t,e){(function(n,r){r(e)})(Ba,function(n){function r(S){return S==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,i){S.__proto__=i}||function(S,i){for(var o in i)i.hasOwnProperty(o)&&(S[o]=i[o])};function l(S,i){s(S,i);function o(){this.constructor=S}S.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function d(S,i){var o=Object.setPrototypeOf;o?o(S,i):S.__proto__=i}function y(S,i){i===void 0&&(i=S.constructor);var o=Error.captureStackTrace;o&&o(S,i)}var x=function(S){l(i,S);function i(o){var u=this.constructor,c=S.call(this,o)||this;return Object.defineProperty(c,"name",{value:u.name,enumerable:!1}),d(c,u.prototype),y(c),c}return i}(Error);class w extends x{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}w.kind="Exception";class C extends w{}C.kind="ArgumentException";class I extends w{}I.kind="IllegalArgumentException";class O{constructor(i){if(this.binarizer=i,i===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,u,c){const h=this.binarizer.getLuminanceSource().crop(i,o,u,c);return new O(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class V extends w{static getChecksumInstance(){return new V}}V.kind="ChecksumException";class W{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(i,o,u,c,h){for(;h--;)u[c++]=i[o++]}static currentTimeMillis(){return Date.now()}}class J extends w{}J.kind="IndexOutOfBoundsException";class F extends J{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}F.kind="ArrayIndexOutOfBoundsException";class D{static fill(i,o){for(let u=0,c=i.length;u<c;u++)i[u]=o}static fillWithin(i,o,u,c){D.rangeCheck(i.length,o,u);for(let h=o;h<u;h++)i[h]=c}static rangeCheck(i,o,u){if(o>u)throw new I("fromIndex("+o+") > toIndex("+u+")");if(o<0)throw new F(o);if(u>i)throw new F(u)}static asList(...i){return i}static create(i,o,u){return Array.from({length:i}).map(h=>Array.from({length:o}).fill(u))}static createInt32Array(i,o,u){return Array.from({length:i}).map(h=>Int32Array.from({length:o}).fill(u))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let u=0,c=i.length;u<c;u++)if(i[u]!==o[u])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const u of i)o=31*o+u;return o}static fillUint8Array(i,o){for(let u=0;u!==i.length;u++)i[u]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const u=new Uint8Array(o);return u.set(i),u}return i.slice(0,o)}static copyOfRange(i,o,u){const c=u-o,h=new Int32Array(c);return j.arraycopy(i,o,h,0,c),h}static binarySearch(i,o,u){u===void 0&&(u=D.numberComparator);let c=0,h=i.length-1;for(;c<=h;){const p=h+c>>1,g=u(o,i[p]);if(g>0)c=p+1;else if(g<0)h=p-1;else return p}return-c-1}static numberComparator(i,o){return i-o}}class B{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let u=31;return o=i<<16,o!==0&&(u-=16,i=o),o=i<<8,o!==0&&(u-=8,i=o),o=i<<4,o!==0&&(u-=4,i=o),o=i<<2,o!==0&&(u-=2,i=o),u-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class G{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=G.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=G.makeArray(i);j.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const u=this.bits;let c=Math.floor(i/32),h=u[c];h&=~((1<<(i&31))-1);const p=u.length;for(;h===0;){if(++c===p)return o;h=u[c]}const g=c*32+B.numberOfTrailingZeros(h);return g>o?o:g}getNextUnset(i){const o=this.size;if(i>=o)return o;const u=this.bits;let c=Math.floor(i/32),h=~u[c];h&=~((1<<(i&31))-1);const p=u.length;for(;h===0;){if(++c===p)return o;h=~u[c]}const g=c*32+B.numberOfTrailingZeros(h);return g>o?o:g}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new I;if(o===i)return;o--;const u=Math.floor(i/32),c=Math.floor(o/32),h=this.bits;for(let p=u;p<=c;p++){const g=p>u?0:i&31,v=(2<<(p<c?31:o&31))-(1<<g);h[p]|=v}}clear(){const i=this.bits.length,o=this.bits;for(let u=0;u<i;u++)o[u]=0}isRange(i,o,u){if(o<i||i<0||o>this.size)throw new I;if(o===i)return!0;o--;const c=Math.floor(i/32),h=Math.floor(o/32),p=this.bits;for(let g=c;g<=h;g++){const _=g>c?0:i&31,A=(2<<(g<h?31:o&31))-(1<<_)&4294967295;if((p[g]&A)!==(u?A:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let u=o;u>0;u--)this.appendBit((i>>u-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let u=0;u<o;u++)this.appendBit(i.get(u))}xor(i){if(this.size!==i.size)throw new I("Sizes don't match");const o=this.bits;for(let u=0,c=o.length;u<c;u++)o[u]^=i.bits[u]}toBytes(i,o,u,c){for(let h=0;h<c;h++){let p=0;for(let g=0;g<8;g++)this.get(i)&&(p|=1<<7-g),i++;o[u+h]=p}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),u=o+1,c=this.bits;for(let h=0;h<u;h++){let p=c[h];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,i[o-h]=p}if(this.size!==u*32){const h=u*32-this.size;let p=i[0]>>>h;for(let g=1;g<u;g++){const _=i[g];p|=_<<32-h,i[g-1]=p,p=_>>>h}i[u-1]=p}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof G))return!1;const o=i;return this.size===o.size&&D.equals(this.bits,o.bits)}hashCode(){return 31*this.size+D.hashCode(this.bits)}toString(){let i="";for(let o=0,u=this.size;o<u;o++)o&7||(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new G(this.size,this.bits.slice())}}var ae;(function(S){S[S.OTHER=0]="OTHER",S[S.PURE_BARCODE=1]="PURE_BARCODE",S[S.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",S[S.TRY_HARDER=3]="TRY_HARDER",S[S.CHARACTER_SET=4]="CHARACTER_SET",S[S.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",S[S.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",S[S.ASSUME_GS1=7]="ASSUME_GS1",S[S.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",S[S.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",S[S.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ae||(ae={}));var ie=ae;class Y extends w{static getFormatInstance(){return new Y}}Y.kind="FormatException";var le;(function(S){S[S.Cp437=0]="Cp437",S[S.ISO8859_1=1]="ISO8859_1",S[S.ISO8859_2=2]="ISO8859_2",S[S.ISO8859_3=3]="ISO8859_3",S[S.ISO8859_4=4]="ISO8859_4",S[S.ISO8859_5=5]="ISO8859_5",S[S.ISO8859_6=6]="ISO8859_6",S[S.ISO8859_7=7]="ISO8859_7",S[S.ISO8859_8=8]="ISO8859_8",S[S.ISO8859_9=9]="ISO8859_9",S[S.ISO8859_10=10]="ISO8859_10",S[S.ISO8859_11=11]="ISO8859_11",S[S.ISO8859_13=12]="ISO8859_13",S[S.ISO8859_14=13]="ISO8859_14",S[S.ISO8859_15=14]="ISO8859_15",S[S.ISO8859_16=15]="ISO8859_16",S[S.SJIS=16]="SJIS",S[S.Cp1250=17]="Cp1250",S[S.Cp1251=18]="Cp1251",S[S.Cp1252=19]="Cp1252",S[S.Cp1256=20]="Cp1256",S[S.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",S[S.UTF8=22]="UTF8",S[S.ASCII=23]="ASCII",S[S.Big5=24]="Big5",S[S.GB18030=25]="GB18030",S[S.EUC_KR=26]="EUC_KR"})(le||(le={}));class te{constructor(i,o,u,...c){this.valueIdentifier=i,this.name=u,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=c,te.VALUE_IDENTIFIER_TO_ECI.set(i,this),te.NAME_TO_ECI.set(u,this);const h=this.values;for(let p=0,g=h.length;p!==g;p++){const _=h[p];te.VALUES_TO_ECI.set(_,this)}for(const p of c)te.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new Y("incorect value");const o=te.VALUES_TO_ECI.get(i);if(o===void 0)throw new Y("incorect value");return o}static getCharacterSetECIByName(i){const o=te.NAME_TO_ECI.get(i);if(o===void 0)throw new Y("incorect value");return o}equals(i){if(!(i instanceof te))return!1;const o=i;return this.getName()===o.getName()}}te.VALUE_IDENTIFIER_TO_ECI=new Map,te.VALUES_TO_ECI=new Map,te.NAME_TO_ECI=new Map,te.Cp437=new te(le.Cp437,Int32Array.from([0,2]),"Cp437"),te.ISO8859_1=new te(le.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),te.ISO8859_2=new te(le.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),te.ISO8859_3=new te(le.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),te.ISO8859_4=new te(le.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),te.ISO8859_5=new te(le.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),te.ISO8859_6=new te(le.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),te.ISO8859_7=new te(le.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),te.ISO8859_8=new te(le.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),te.ISO8859_9=new te(le.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),te.ISO8859_10=new te(le.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),te.ISO8859_11=new te(le.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),te.ISO8859_13=new te(le.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),te.ISO8859_14=new te(le.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),te.ISO8859_15=new te(le.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),te.ISO8859_16=new te(le.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),te.SJIS=new te(le.SJIS,20,"SJIS","Shift_JIS"),te.Cp1250=new te(le.Cp1250,21,"Cp1250","windows-1250"),te.Cp1251=new te(le.Cp1251,22,"Cp1251","windows-1251"),te.Cp1252=new te(le.Cp1252,23,"Cp1252","windows-1252"),te.Cp1256=new te(le.Cp1256,24,"Cp1256","windows-1256"),te.UnicodeBigUnmarked=new te(le.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),te.UTF8=new te(le.UTF8,26,"UTF8","UTF-8"),te.ASCII=new te(le.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),te.Big5=new te(le.Big5,28,"Big5"),te.GB18030=new te(le.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),te.EUC_KR=new te(le.EUC_KR,30,"EUC_KR","EUC-KR");class Me extends w{}Me.kind="UnsupportedOperationException";class Ze{static decode(i,o){const u=this.encodingName(o);return this.customDecoder?this.customDecoder(i,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(i,u):new TextDecoder(u).decode(i)}static shouldDecodeOnFallback(i){return!Ze.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const u=this.encodingName(o);return this.customEncoder?this.customEncoder(i,u):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof te?i:te.getCharacterSetECIByName(i)}static decodeFallback(i,o){const u=this.encodingCharacterSet(o);if(Ze.isDecodeFallbackSupported(u)){let c="";for(let h=0,p=i.length;h<p;h++){let g=i[h].toString(16);g.length<2&&(g="0"+g),c+="%"+g}return decodeURIComponent(c)}if(u.equals(te.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Me(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(te.UTF8)||i.equals(te.ISO8859_1)||i.equals(te.ASCII)}static encodeFallback(i){const u=btoa(unescape(encodeURIComponent(i))).split(""),c=[];for(let h=0;h<u.length;h++)c.push(u[h].charCodeAt(0));return new Uint8Array(c)}}class Ce{static castAsNonUtf8Char(i,o=null){const u=o?o.getName():this.ISO88591;return Ze.decode(new Uint8Array([i]),u)}static guessEncoding(i,o){if(o!=null&&o.get(ie.CHARACTER_SET)!==void 0)return o.get(ie.CHARACTER_SET).toString();const u=i.length;let c=!0,h=!0,p=!0,g=0,_=0,v=0,A=0,b=0,R=0,k=0,z=0,H=0,Z=0,q=0;const ce=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let de=0;de<u&&(c||h||p);de++){const oe=i[de]&255;p&&(g>0?oe&128?g--:p=!1:oe&128&&(oe&64?(g++,oe&32?(g++,oe&16?(g++,oe&8?p=!1:A++):v++):_++):p=!1)),c&&(oe>127&&oe<160?c=!1:oe>159&&(oe<192||oe===215||oe===247)&&q++),h&&(b>0?oe<64||oe===127||oe>252?h=!1:b--:oe===128||oe===160||oe>239?h=!1:oe>160&&oe<224?(R++,z=0,k++,k>H&&(H=k)):oe>127?(b++,k=0,z++,z>Z&&(Z=z)):(k=0,z=0))}return p&&g>0&&(p=!1),h&&b>0&&(h=!1),p&&(ce||_+v+A>0)?Ce.UTF8:h&&(Ce.ASSUME_SHIFT_JIS||H>=3||Z>=3)?Ce.SHIFT_JIS:c&&h?H===2&&R===2||q*10>=u?Ce.SHIFT_JIS:Ce.ISO88591:c?Ce.ISO88591:h?Ce.SHIFT_JIS:p?Ce.UTF8:Ce.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let u=-1;function c(p,g,_,v,A,b){if(p==="%%")return"%";if(o[++u]===void 0)return;p=v?parseInt(v.substr(1)):void 0;let R=A?parseInt(A.substr(1)):void 0,k;switch(b){case"s":k=o[u];break;case"c":k=o[u][0];break;case"f":k=parseFloat(o[u]).toFixed(p);break;case"p":k=parseFloat(o[u]).toPrecision(p);break;case"e":k=parseFloat(o[u]).toExponential(p);break;case"x":k=parseInt(o[u]).toString(R||16);break;case"d":k=parseFloat(parseInt(o[u],R||10).toPrecision(p)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(R);let z=parseInt(_),H=_&&_[0]+""=="0"?"0":" ";for(;k.length<z;)k=g!==void 0?k+H:H+k;return k}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(h,c)}static getBytes(i,o){return Ze.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}Ce.SHIFT_JIS=te.SJIS.getName(),Ce.GB2312="GB2312",Ce.ISO88591=te.ISO8859_1.getName(),Ce.EUC_JP="EUC_JP",Ce.UTF8=te.UTF8.getName(),Ce.PLATFORM_DEFAULT_ENCODING=Ce.UTF8,Ce.ASSUME_SHIFT_JIS=!1;class Je{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=Ce.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,u){for(let c=o;o<o+u;c++)this.append(i[c]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class gt{constructor(i,o,u,c){if(this.width=i,this.height=o,this.rowSize=u,this.bits=c,o==null&&(o=i),this.height=o,i<1||o<1)throw new I("Both dimensions must be greater than 0");u==null&&(u=Math.floor((i+31)/32)),this.rowSize=u,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,u=i[0].length,c=new gt(u,o);for(let h=0;h<o;h++){const p=i[h];for(let g=0;g<u;g++)p[g]&&c.set(g,h)}return c}static parseFromString(i,o,u){if(i===null)throw new I("stringRepresentation cannot be null");const c=new Array(i.length);let h=0,p=0,g=-1,_=0,v=0;for(;v<i.length;)if(i.charAt(v)===`
`||i.charAt(v)==="\r"){if(h>p){if(g===-1)g=h-p;else if(h-p!==g)throw new I("row lengths do not match");p=h,_++}v++}else if(i.substring(v,v+o.length)===o)v+=o.length,c[h]=!0,h++;else if(i.substring(v,v+u.length)===u)v+=u.length,c[h]=!1,h++;else throw new I("illegal character encountered: "+i.substring(v));if(h>p){if(g===-1)g=h-p;else if(h-p!==g)throw new I("row lengths do not match");_++}const A=new gt(g,_);for(let b=0;b<h;b++)c[b]&&A.set(Math.floor(b%g),Math.floor(b/g));return A}get(i,o){const u=o*this.rowSize+Math.floor(i/32);return(this.bits[u]>>>(i&31)&1)!==0}set(i,o){const u=o*this.rowSize+Math.floor(i/32);this.bits[u]|=1<<(i&31)&4294967295}unset(i,o){const u=o*this.rowSize+Math.floor(i/32);this.bits[u]&=~(1<<(i&31)&4294967295)}flip(i,o){const u=o*this.rowSize+Math.floor(i/32);this.bits[u]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new I("input matrix dimensions do not match");const o=new G(Math.floor(this.width/32)+1),u=this.rowSize,c=this.bits;for(let h=0,p=this.height;h<p;h++){const g=h*u,_=i.getRow(h,o).getBitArray();for(let v=0;v<u;v++)c[g+v]^=_[v]}}clear(){const i=this.bits,o=i.length;for(let u=0;u<o;u++)i[u]=0}setRegion(i,o,u,c){if(o<0||i<0)throw new I("Left and top must be nonnegative");if(c<1||u<1)throw new I("Height and width must be at least 1");const h=i+u,p=o+c;if(p>this.height||h>this.width)throw new I("The region must fit inside the matrix");const g=this.rowSize,_=this.bits;for(let v=o;v<p;v++){const A=v*g;for(let b=i;b<h;b++)_[A+Math.floor(b/32)]|=1<<(b&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new G(this.width):o.clear();const u=this.rowSize,c=this.bits,h=i*u;for(let p=0;p<u;p++)o.setBulk(p*32,c[h+p]);return o}setRow(i,o){j.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let u=new G(i),c=new G(i);for(let h=0,p=Math.floor((o+1)/2);h<p;h++)u=this.getRow(h,u),c=this.getRow(o-1-h,c),u.reverse(),c.reverse(),this.setRow(h,c),this.setRow(o-1-h,u)}getEnclosingRectangle(){const i=this.width,o=this.height,u=this.rowSize,c=this.bits;let h=i,p=o,g=-1,_=-1;for(let v=0;v<o;v++)for(let A=0;A<u;A++){const b=c[v*u+A];if(b!==0){if(v<p&&(p=v),v>_&&(_=v),A*32<h){let R=0;for(;!(b<<31-R&4294967295);)R++;A*32+R<h&&(h=A*32+R)}if(A*32+31>g){let R=31;for(;!(b>>>R);)R--;A*32+R>g&&(g=A*32+R)}}}return g<h||_<p?null:Int32Array.from([h,p,g-h+1,_-p+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let u=0;for(;u<o.length&&o[u]===0;)u++;if(u===o.length)return null;const c=u/i;let h=u%i*32;const p=o[u];let g=0;for(;!(p<<31-g&4294967295);)g++;return h+=g,Int32Array.from([h,c])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let u=o.length-1;for(;u>=0&&o[u]===0;)u--;if(u<0)return null;const c=Math.floor(u/i);let h=Math.floor(u%i)*32;const p=o[u];let g=31;for(;!(p>>>g);)g--;return h+=g,Int32Array.from([h,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof gt))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&D.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+D.hashCode(this.bits),i}toString(i="X ",o="  ",u=`
`){return this.buildToString(i,o,u)}buildToString(i,o,u){let c=new Je;for(let h=0,p=this.height;h<p;h++){for(let g=0,_=this.width;g<_;g++)c.append(this.get(g,h)?i:o);c.append(u)}return c.toString()}clone(){return new gt(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends w{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class et extends W{constructor(i){super(i),this.luminances=et.EMPTY,this.buckets=new Int32Array(et.LUMINANCE_BUCKETS)}getBlackRow(i,o){const u=this.getLuminanceSource(),c=u.getWidth();o==null||o.getSize()<c?o=new G(c):o.clear(),this.initArrays(c);const h=u.getRow(i,this.luminances),p=this.buckets;for(let _=0;_<c;_++)p[(h[_]&255)>>et.LUMINANCE_SHIFT]++;const g=et.estimateBlackPoint(p);if(c<3)for(let _=0;_<c;_++)(h[_]&255)<g&&o.set(_);else{let _=h[0]&255,v=h[1]&255;for(let A=1;A<c-1;A++){const b=h[A+1]&255;(v*4-_-b)/2<g&&o.set(A),_=v,v=b}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),u=i.getHeight(),c=new gt(o,u);this.initArrays(o);const h=this.buckets;for(let _=1;_<5;_++){const v=Math.floor(u*_/5),A=i.getRow(v,this.luminances),b=Math.floor(o*4/5);for(let R=Math.floor(o/5);R<b;R++){const k=A[R]&255;h[k>>et.LUMINANCE_SHIFT]++}}const p=et.estimateBlackPoint(h),g=i.getMatrix();for(let _=0;_<u;_++){const v=_*o;for(let A=0;A<o;A++)(g[v+A]&255)<p&&c.set(A,_)}return c}createBinarizer(i){return new et(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let u=0;u<et.LUMINANCE_BUCKETS;u++)o[u]=0}static estimateBlackPoint(i){const o=i.length;let u=0,c=0,h=0;for(let A=0;A<o;A++)i[A]>h&&(c=A,h=i[A]),i[A]>u&&(u=i[A]);let p=0,g=0;for(let A=0;A<o;A++){const b=A-c,R=i[A]*b*b;R>g&&(p=A,g=R)}if(c>p){const A=c;c=p,p=A}if(p-c<=o/16)throw new ee;let _=p-1,v=-1;for(let A=p-1;A>c;A--){const b=A-c,R=b*b*(p-A)*(u-i[A]);R>v&&(_=A,v=R)}return _<<et.LUMINANCE_SHIFT}}et.LUMINANCE_BITS=5,et.LUMINANCE_SHIFT=8-et.LUMINANCE_BITS,et.LUMINANCE_BUCKETS=1<<et.LUMINANCE_BITS,et.EMPTY=Uint8ClampedArray.from([0]);class ke extends et{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),u=i.getHeight();if(o>=ke.MINIMUM_DIMENSION&&u>=ke.MINIMUM_DIMENSION){const c=i.getMatrix();let h=o>>ke.BLOCK_SIZE_POWER;o&ke.BLOCK_SIZE_MASK&&h++;let p=u>>ke.BLOCK_SIZE_POWER;u&ke.BLOCK_SIZE_MASK&&p++;const g=ke.calculateBlackPoints(c,h,p,o,u),_=new gt(o,u);ke.calculateThresholdForBlock(c,h,p,o,u,g,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ke(i)}static calculateThresholdForBlock(i,o,u,c,h,p,g){const _=h-ke.BLOCK_SIZE,v=c-ke.BLOCK_SIZE;for(let A=0;A<u;A++){let b=A<<ke.BLOCK_SIZE_POWER;b>_&&(b=_);const R=ke.cap(A,2,u-3);for(let k=0;k<o;k++){let z=k<<ke.BLOCK_SIZE_POWER;z>v&&(z=v);const H=ke.cap(k,2,o-3);let Z=0;for(let ce=-2;ce<=2;ce++){const de=p[R+ce];Z+=de[H-2]+de[H-1]+de[H]+de[H+1]+de[H+2]}const q=Z/25;ke.thresholdBlock(i,z,b,q,c,g)}}}static cap(i,o,u){return i<o?o:i>u?u:i}static thresholdBlock(i,o,u,c,h,p){for(let g=0,_=u*h+o;g<ke.BLOCK_SIZE;g++,_+=h)for(let v=0;v<ke.BLOCK_SIZE;v++)(i[_+v]&255)<=c&&p.set(o+v,u+g)}static calculateBlackPoints(i,o,u,c,h){const p=h-ke.BLOCK_SIZE,g=c-ke.BLOCK_SIZE,_=new Array(u);for(let v=0;v<u;v++){_[v]=new Int32Array(o);let A=v<<ke.BLOCK_SIZE_POWER;A>p&&(A=p);for(let b=0;b<o;b++){let R=b<<ke.BLOCK_SIZE_POWER;R>g&&(R=g);let k=0,z=255,H=0;for(let q=0,ce=A*c+R;q<ke.BLOCK_SIZE;q++,ce+=c){for(let de=0;de<ke.BLOCK_SIZE;de++){const oe=i[ce+de]&255;k+=oe,oe<z&&(z=oe),oe>H&&(H=oe)}if(H-z>ke.MIN_DYNAMIC_RANGE)for(q++,ce+=c;q<ke.BLOCK_SIZE;q++,ce+=c)for(let de=0;de<ke.BLOCK_SIZE;de++)k+=i[ce+de]&255}let Z=k>>ke.BLOCK_SIZE_POWER*2;if(H-z<=ke.MIN_DYNAMIC_RANGE&&(Z=z/2,v>0&&b>0)){const q=(_[v-1][b]+2*_[v][b-1]+_[v-1][b-1])/4;z<q&&(Z=q)}_[v][b]=Z}}return _}}ke.BLOCK_SIZE_POWER=3,ke.BLOCK_SIZE=1<<ke.BLOCK_SIZE_POWER,ke.BLOCK_SIZE_MASK=ke.BLOCK_SIZE-1,ke.MINIMUM_DIMENSION=ke.BLOCK_SIZE*5,ke.MIN_DYNAMIC_RANGE=24;class ne{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,u,c){throw new Me("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Me("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Me("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new Je;for(let u=0;u<this.height;u++){const c=this.getRow(u,i);for(let h=0;h<this.width;h++){const p=c[h]&255;let g;p<64?g="#":p<128?g="+":p<192?g=".":g=" ",o.append(g)}o.append(`
`)}return o.toString()}}class Oe extends ne{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const u=this.delegate.getRow(i,o),c=this.getWidth();for(let h=0;h<c;h++)u[h]=255-(u[h]&255);return u}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(o);for(let c=0;c<o;c++)u[c]=255-(i[c]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,u,c){return new Oe(this.delegate.crop(i,o,u,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Oe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Oe(this.delegate.rotateCounterClockwise45())}}class pe extends ne{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=pe.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return pe.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,u){const c=new Uint8ClampedArray(o*u);for(let h=0,p=0,g=i.length;h<g;h+=4,p++){let _;if(i[h+3]===0)_=255;else{const A=i[h],b=i[h+1],R=i[h+2];_=306*A+601*b+117*R+512>>10}c[p]=_}return c}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const u=this.getWidth(),c=i*u;return o===null?o=this.buffer.slice(c,c+u):(o.length<u&&(o=new Uint8ClampedArray(u)),o.set(this.buffer.slice(c,c+u))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,u,c){return super.crop(i,o,u,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),u=o.getContext("2d"),c=i*pe.DEGREE_TO_RADIANS,h=this.canvas.width,p=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(c))*h+Math.abs(Math.sin(c))*p),_=Math.ceil(Math.abs(Math.sin(c))*h+Math.abs(Math.cos(c))*p);return o.width=g,o.height=_,u.translate(g/2,_/2),u.rotate(c),u.drawImage(this.canvas,h/-2,p/-2),this.buffer=pe.makeBufferFromCanvasImageData(o),this}invert(){return new Oe(this)}}pe.DEGREE_TO_RADIANS=Math.PI/180;class Be{constructor(i,o,u){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var De=(globalThis||Ba||self||window||void 0)&&(globalThis||Ba||self||window||void 0).__awaiter||function(S,i,o,u){function c(h){return h instanceof o?h:new o(function(p){p(h)})}return new(o||(o=Promise))(function(h,p){function g(A){try{v(u.next(A))}catch(b){p(b)}}function _(A){try{v(u.throw(A))}catch(b){p(b)}}function v(A){A.done?h(A.value):c(A.value).then(g,_)}v((u=u.apply(S,i||[])).next())})};class It{constructor(i,o=500,u){this.reader=i,this.timeBetweenScansMillis=o,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return De(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const u of i){const c=u.kind==="video"?"videoinput":u.kind;if(c!=="videoinput")continue;const h=u.deviceId||u.id,p=u.label||`Video device ${o.length+1}`,g=u.groupId,_={deviceId:h,label:p,kind:c,groupId:g};o.push(_)}return o})}getVideoInputDevices(){return De(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Be(o.deviceId,o.label))})}findDeviceById(i){return De(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(u=>u.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return De(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return De(this,void 0,void 0,function*(){this.reset();let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeOnceFromConstraints(c,o)})}decodeOnceFromConstraints(i,o){return De(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(u,o)})}decodeOnceFromStream(i,o){return De(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(i,o,u){return De(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,u)})}decodeFromVideoDevice(i,o,u){return De(this,void 0,void 0,function*(){let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeFromConstraints(h,o,u)})}decodeFromConstraints(i,o,u){return De(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(c,o,u)})}decodeFromStream(i,o,u){return De(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(c,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return De(this,void 0,void 0,function*(){const u=this.prepareVideoElement(o);return this.addVideoSource(u,i),this.videoElement=u,this.stream=i,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(i){return new Promise((o,u)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return De(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const u=document.getElementById(i);if(!u)throw new C(`element with id '${i}' not found`);if(u.nodeName.toLowerCase()!==o.toLowerCase())throw new C(`element with id '${i}' must be an ${o} element`);return u}decodeFromImage(i,o){if(!i&&!o)throw new C("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,u){if(i===void 0&&o===void 0)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,u):this.decodeFromVideoElementContinuously(i,u)}decodeFromImageElement(i){if(!i)throw new C("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let u;return this.isImageLoaded(o)?u=this.decodeOnce(o,!1,!0):u=this._decodeOnLoadImage(o),u}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const u=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(u,o)}_decodeFromVideoElementSetup(i){if(!i)throw new C("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const u=this._decodeOnLoadImage(o);return o.src=i,u}decodeFromVideoUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),u=this.decodeFromVideoElement(o);return o.src=i,u}decodeFromVideoUrlContinuously(i,o){if(!i)throw new C("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(u,o);return u.src=i,c}_decodeOnLoadImage(i){return new Promise((o,u)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,u),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return De(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return De(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,u=!0){this._stopAsyncDecode=!1;const c=(h,p)=>{if(this._stopAsyncDecode){p(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(i);h(g)}catch(g){const _=o&&g instanceof ee,A=(g instanceof V||g instanceof Y)&&u;if(_||A)return setTimeout(c,this._timeBetweenDecodingAttempts,h,p);p(g)}};return new Promise((h,p)=>c(h,p))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(i);o(c,null),setTimeout(u,this.timeBetweenScansMillis)}catch(c){o(null,c);const h=c instanceof V||c instanceof Y,p=c instanceof ee;(h||p)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,u){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,u=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),u=new pe(o),c=new ke(u);return new O(c)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let u,c;return typeof i<"u"&&(i instanceof HTMLVideoElement?(u=i.videoWidth,c=i.videoHeight):i instanceof HTMLImageElement&&(u=i.naturalWidth||i.width,c=i.naturalHeight||i.height)),o.style.width=u+"px",o.style.height=c+"px",o.width=u,o.height=c,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class je{constructor(i,o,u=o==null?0:8*o.length,c,h,p=j.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=u,this.resultPoints=c,this.format=h,this.timestamp=p,this.text=i,this.rawBytes=o,u==null?this.numBits=o==null?0:8*o.length:this.numBits=u,this.resultPoints=c,this.format=h,this.resultMetadata=null,p==null?this.timestamp=j.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const u=new Array(o.length+i.length);j.arraycopy(o,0,u,0,o.length),j.arraycopy(i,0,u,o.length,i.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var tt;(function(S){S[S.AZTEC=0]="AZTEC",S[S.CODABAR=1]="CODABAR",S[S.CODE_39=2]="CODE_39",S[S.CODE_93=3]="CODE_93",S[S.CODE_128=4]="CODE_128",S[S.DATA_MATRIX=5]="DATA_MATRIX",S[S.EAN_8=6]="EAN_8",S[S.EAN_13=7]="EAN_13",S[S.ITF=8]="ITF",S[S.MAXICODE=9]="MAXICODE",S[S.PDF_417=10]="PDF_417",S[S.QR_CODE=11]="QR_CODE",S[S.RSS_14=12]="RSS_14",S[S.RSS_EXPANDED=13]="RSS_EXPANDED",S[S.UPC_A=14]="UPC_A",S[S.UPC_E=15]="UPC_E",S[S.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tt||(tt={}));var ue=tt,wn;(function(S){S[S.OTHER=0]="OTHER",S[S.ORIENTATION=1]="ORIENTATION",S[S.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",S[S.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",S[S.ISSUE_NUMBER=4]="ISSUE_NUMBER",S[S.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",S[S.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",S[S.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",S[S.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",S[S.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",S[S.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(wn||(wn={}));var St=wn;class Rs{constructor(i,o,u,c,h=-1,p=-1){this.rawBytes=i,this.text=o,this.byteSegments=u,this.ecLevel=c,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=p,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Qi{exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class vn{constructor(i,o){if(o.length===0)throw new I;this.field=i;const u=o.length;if(u>1&&o[0]===0){let c=1;for(;c<u&&o[c]===0;)c++;c===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-c),j.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let u;if(i===1){u=0;for(let p=0,g=o.length;p!==g;p++){const _=o[p];u=Qi.addOrSubtract(u,_)}return u}u=o[0];const c=o.length,h=this.field;for(let p=1;p<c;p++)u=Qi.addOrSubtract(h.multiply(i,u),o[p]);return u}addOrSubtract(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,u=i.coefficients;if(o.length>u.length){const p=o;o=u,u=p}let c=new Int32Array(u.length);const h=u.length-o.length;j.arraycopy(u,0,c,0,h);for(let p=h;p<u.length;p++)c[p]=Qi.addOrSubtract(o[p-h],u[p]);return new vn(this.field,c)}multiply(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,u=o.length,c=i.coefficients,h=c.length,p=new Int32Array(u+h-1),g=this.field;for(let _=0;_<u;_++){const v=o[_];for(let A=0;A<h;A++)p[_+A]=Qi.addOrSubtract(p[_+A],g.multiply(v,c[A]))}return new vn(g,p)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,u=this.field,c=new Int32Array(o),h=this.coefficients;for(let p=0;p<o;p++)c[p]=u.multiply(h[p],i);return new vn(u,c)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return this.field.getZero();const u=this.coefficients,c=u.length,h=new Int32Array(c+i),p=this.field;for(let g=0;g<c;g++)h[g]=p.multiply(u[g],o);return new vn(p,h)}divide(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new I("Divide by 0");const o=this.field;let u=o.getZero(),c=this;const h=i.getCoefficient(i.getDegree()),p=o.inverse(h);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){const g=c.getDegree()-i.getDegree(),_=o.multiply(c.getCoefficient(c.getDegree()),p),v=i.multiplyByMonomial(g,_),A=o.buildMonomial(g,_);u=u.addOrSubtract(A),c=c.addOrSubtract(v)}return[u,c]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let u=this.getCoefficient(o);if(u!==0){if(u<0?(i+=" - ",u=-u):i.length>0&&(i+=" + "),o===0||u!==1){const c=this.field.log(u);c===0?i+="1":c===1?i+="a":(i+="a^",i+=c)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class bi extends w{}bi.kind="ArithmeticException";class it extends Qi{constructor(i,o,u){super(),this.primitive=i,this.size=o,this.generatorBase=u;const c=new Int32Array(o);let h=1;for(let g=0;g<o;g++)c[g]=h,h*=2,h>=o&&(h^=i,h&=o-1);this.expTable=c;const p=new Int32Array(o);for(let g=0;g<o-1;g++)p[c[g]]=g;this.logTable=p,this.zero=new vn(this,Int32Array.from([0])),this.one=new vn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;const u=new Int32Array(i+1);return u[0]=o,new vn(this,u)}inverse(i){if(i===0)throw new bi;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}it.AZTEC_DATA_12=new it(4201,4096,1),it.AZTEC_DATA_10=new it(1033,1024,1),it.AZTEC_DATA_6=new it(67,64,1),it.AZTEC_PARAM=new it(19,16,1),it.QR_CODE_FIELD_256=new it(285,256,0),it.DATA_MATRIX_FIELD_256=new it(301,256,1),it.AZTEC_DATA_8=it.DATA_MATRIX_FIELD_256,it.MAXICODE_FIELD_64=it.AZTEC_DATA_6;class Ns extends w{}Ns.kind="ReedSolomonException";class Nr extends w{}Nr.kind="IllegalStateException";class Ps{constructor(i){this.field=i}decode(i,o){const u=this.field,c=new vn(u,i),h=new Int32Array(o);let p=!0;for(let k=0;k<o;k++){const z=c.evaluateAt(u.exp(k+u.getGeneratorBase()));h[h.length-1-k]=z,z!==0&&(p=!1)}if(p)return;const g=new vn(u,h),_=this.runEuclideanAlgorithm(u.buildMonomial(o,1),g,o),v=_[0],A=_[1],b=this.findErrorLocations(v),R=this.findErrorMagnitudes(A,b);for(let k=0;k<b.length;k++){const z=i.length-1-u.log(b[k]);if(z<0)throw new Ns("Bad error location");i[z]=it.addOrSubtract(i[z],R[k])}}runEuclideanAlgorithm(i,o,u){if(i.getDegree()<o.getDegree()){const k=i;i=o,o=k}const c=this.field;let h=i,p=o,g=c.getZero(),_=c.getOne();for(;p.getDegree()>=(u/2|0);){let k=h,z=g;if(h=p,g=_,h.isZero())throw new Ns("r_{i-1} was zero");p=k;let H=c.getZero();const Z=h.getCoefficient(h.getDegree()),q=c.inverse(Z);for(;p.getDegree()>=h.getDegree()&&!p.isZero();){const ce=p.getDegree()-h.getDegree(),de=c.multiply(p.getCoefficient(p.getDegree()),q);H=H.addOrSubtract(c.buildMonomial(ce,de)),p=p.addOrSubtract(h.multiplyByMonomial(ce,de))}if(_=H.multiply(g).addOrSubtract(z),p.getDegree()>=h.getDegree())throw new Nr("Division algorithm failed to reduce polynomial?")}const v=_.getCoefficient(0);if(v===0)throw new Ns("sigmaTilde(0) was zero");const A=c.inverse(v),b=_.multiplyScalar(A),R=p.multiplyScalar(A);return[b,R]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const u=new Int32Array(o);let c=0;const h=this.field;for(let p=1;p<h.getSize()&&c<o;p++)i.evaluateAt(p)===0&&(u[c]=h.inverse(p),c++);if(c!==o)throw new Ns("Error locator degree does not match number of roots");return u}findErrorMagnitudes(i,o){const u=o.length,c=new Int32Array(u),h=this.field;for(let p=0;p<u;p++){const g=h.inverse(o[p]);let _=1;for(let v=0;v<u;v++)if(p!==v){const A=h.multiply(o[v],g),b=A&1?A&-2:A|1;_=h.multiply(_,b)}c[p]=h.multiply(i.evaluateAt(g),h.inverse(_)),h.getGeneratorBase()!==0&&(c[p]=h.multiply(c[p],g))}return c}}var rn;(function(S){S[S.UPPER=0]="UPPER",S[S.LOWER=1]="LOWER",S[S.MIXED=2]="MIXED",S[S.DIGIT=3]="DIGIT",S[S.PUNCT=4]="PUNCT",S[S.BINARY=5]="BINARY"})(rn||(rn={}));class mt{decode(i){this.ddata=i;let o=i.getBits(),u=this.extractBits(o),c=this.correctBits(u),h=mt.convertBoolArrayToByteArray(c),p=mt.getEncodedData(c),g=new Rs(h,p,null,null);return g.setNumBits(c.length),g}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,u=rn.UPPER,c=rn.UPPER,h="",p=0;for(;p<o;)if(c===rn.BINARY){if(o-p<5)break;let g=mt.readCode(i,p,5);if(p+=5,g===0){if(o-p<11)break;g=mt.readCode(i,p,11)+31,p+=11}for(let _=0;_<g;_++){if(o-p<8){p=o;break}const v=mt.readCode(i,p,8);h+=Ce.castAsNonUtf8Char(v),p+=8}c=u}else{let g=c===rn.DIGIT?4:5;if(o-p<g)break;let _=mt.readCode(i,p,g);p+=g;let v=mt.getCharacter(c,_);v.startsWith("CTRL_")?(u=c,c=mt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(u=c)):(h+=v,c=u)}return h}static getTable(i){switch(i){case"L":return rn.LOWER;case"P":return rn.PUNCT;case"M":return rn.MIXED;case"D":return rn.DIGIT;case"B":return rn.BINARY;case"U":default:return rn.UPPER}}static getCharacter(i,o){switch(i){case rn.UPPER:return mt.UPPER_TABLE[o];case rn.LOWER:return mt.LOWER_TABLE[o];case rn.MIXED:return mt.MIXED_TABLE[o];case rn.PUNCT:return mt.PUNCT_TABLE[o];case rn.DIGIT:return mt.DIGIT_TABLE[o];default:throw new Nr("Bad table")}}correctBits(i){let o,u;this.ddata.getNbLayers()<=2?(u=6,o=it.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,o=it.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,o=it.AZTEC_DATA_10):(u=12,o=it.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),h=i.length/u;if(h<c)throw new Y;let p=i.length%u,g=new Int32Array(h);for(let R=0;R<h;R++,p+=u)g[R]=mt.readCode(i,p,u);try{new Ps(o).decode(g,h-c)}catch(R){throw new Y(R)}let _=(1<<u)-1,v=0;for(let R=0;R<c;R++){let k=g[R];if(k===0||k===_)throw new Y;(k===1||k===_-1)&&v++}let A=new Array(c*u-v),b=0;for(let R=0;R<c;R++){let k=g[R];if(k===1||k===_-1)A.fill(k>1,b,b+u-1),b+=u-1;else for(let z=u-1;z>=0;--z)A[b++]=(k&1<<z)!==0}return A}extractBits(i){let o=this.ddata.isCompact(),u=this.ddata.getNbLayers(),c=(o?11:14)+u*4,h=new Int32Array(c),p=new Array(this.totalBitsInLayer(u,o));if(o)for(let g=0;g<h.length;g++)h[g]=g;else{let g=c+1+2*B.truncDivision(B.truncDivision(c,2)-1,15),_=c/2,v=B.truncDivision(g,2);for(let A=0;A<_;A++){let b=A+B.truncDivision(A,15);h[_-A-1]=v-b-1,h[_+A]=v+b+1}}for(let g=0,_=0;g<u;g++){let v=(u-g)*4+(o?9:12),A=g*2,b=c-1-A;for(let R=0;R<v;R++){let k=R*2;for(let z=0;z<2;z++)p[_+k+z]=i.get(h[A+z],h[A+R]),p[_+2*v+k+z]=i.get(h[A+R],h[b-z]),p[_+4*v+k+z]=i.get(h[b-z],h[b-R]),p[_+6*v+k+z]=i.get(h[b-R],h[A+z])}_+=v*8}return p}static readCode(i,o,u){let c=0;for(let h=o;h<o+u;h++)c<<=1,i[h]&&(c|=1);return c}static readByte(i,o){let u=i.length-o;return u>=8?mt.readCode(i,o,8):mt.readCode(i,o,u)<<8-u}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let u=0;u<o.length;u++)o[u]=mt.readByte(i,8*u);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}mt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],mt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],mt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],mt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],mt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class st{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,u,c){const h=i-u,p=o-c;return Math.sqrt(h*h+p*p)}static sum(i){let o=0;for(let u=0,c=i.length;u!==c;u++){const h=i[u];o+=h}return o}}class No{static floatToIntBits(i){return i}}No.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ie{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ie){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*No.floatToIntBits(this.x)+No.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),u=this.distance(i[1],i[2]),c=this.distance(i[0],i[2]);let h,p,g;if(u>=o&&u>=c?(p=i[0],h=i[1],g=i[2]):c>=u&&c>=o?(p=i[1],h=i[0],g=i[2]):(p=i[2],h=i[0],g=i[1]),this.crossProductZ(h,p,g)<0){const _=h;h=g,g=_}i[0]=h,i[1]=p,i[2]=g}static distance(i,o){return st.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,u){const c=o.x,h=o.y;return(u.x-c)*(i.y-h)-(u.y-h)*(i.x-c)}}class Po{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Bl extends Po{constructor(i,o,u,c,h){super(i,o),this.compact=u,this.nbDatablocks=c,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class li{constructor(i,o,u,c){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=li.INIT_SIZE),u==null&&(u=i.getWidth()/2|0),c==null&&(c=i.getHeight()/2|0);const h=o/2|0;if(this.leftInit=u-h,this.rightInit=u+h,this.upInit=c-h,this.downInit=c+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let i=this.leftInit,o=this.rightInit,u=this.upInit,c=this.downInit,h=!1,p=!0,g=!1,_=!1,v=!1,A=!1,b=!1;const R=this.width,k=this.height;for(;p;){p=!1;let z=!0;for(;(z||!_)&&o<R;)z=this.containsBlackPoint(u,c,o,!1),z?(o++,p=!0,_=!0):_||o++;if(o>=R){h=!0;break}let H=!0;for(;(H||!v)&&c<k;)H=this.containsBlackPoint(i,o,c,!0),H?(c++,p=!0,v=!0):v||c++;if(c>=k){h=!0;break}let Z=!0;for(;(Z||!A)&&i>=0;)Z=this.containsBlackPoint(u,c,i,!1),Z?(i--,p=!0,A=!0):A||i--;if(i<0){h=!0;break}let q=!0;for(;(q||!b)&&u>=0;)q=this.containsBlackPoint(i,o,u,!0),q?(u--,p=!0,b=!0):b||u--;if(u<0){h=!0;break}p&&(g=!0)}if(!h&&g){const z=o-i;let H=null;for(let de=1;H===null&&de<z;de++)H=this.getBlackPointOnSegment(i,c-de,i+de,c);if(H==null)throw new ee;let Z=null;for(let de=1;Z===null&&de<z;de++)Z=this.getBlackPointOnSegment(i,u+de,i+de,u);if(Z==null)throw new ee;let q=null;for(let de=1;q===null&&de<z;de++)q=this.getBlackPointOnSegment(o,u+de,o-de,u);if(q==null)throw new ee;let ce=null;for(let de=1;ce===null&&de<z;de++)ce=this.getBlackPointOnSegment(o,c-de,o-de,c);if(ce==null)throw new ee;return this.centerEdges(ce,H,q,Z)}else throw new ee}getBlackPointOnSegment(i,o,u,c){const h=st.round(st.distance(i,o,u,c)),p=(u-i)/h,g=(c-o)/h,_=this.image;for(let v=0;v<h;v++){const A=st.round(i+v*p),b=st.round(o+v*g);if(_.get(A,b))return new Ie(A,b)}return null}centerEdges(i,o,u,c){const h=i.getX(),p=i.getY(),g=o.getX(),_=o.getY(),v=u.getX(),A=u.getY(),b=c.getX(),R=c.getY(),k=li.CORR;return h<this.width/2?[new Ie(b-k,R+k),new Ie(g+k,_+k),new Ie(v-k,A-k),new Ie(h+k,p-k)]:[new Ie(b+k,R+k),new Ie(g+k,_-k),new Ie(v-k,A+k),new Ie(h-k,p-k)]}containsBlackPoint(i,o,u,c){const h=this.image;if(c){for(let p=i;p<=o;p++)if(h.get(p,u))return!0}else for(let p=i;p<=o;p++)if(h.get(u,p))return!0;return!1}}li.INIT_SIZE=10,li.CORR=1;class Fl{static checkAndNudgePoints(i,o){const u=i.getWidth(),c=i.getHeight();let h=!0;for(let p=0;p<o.length&&h;p+=2){const g=Math.floor(o[p]),_=Math.floor(o[p+1]);if(g<-1||g>u||_<-1||_>c)throw new ee;h=!1,g===-1?(o[p]=0,h=!0):g===u&&(o[p]=u-1,h=!0),_===-1?(o[p+1]=0,h=!0):_===c&&(o[p+1]=c-1,h=!0)}h=!0;for(let p=o.length-2;p>=0&&h;p-=2){const g=Math.floor(o[p]),_=Math.floor(o[p+1]);if(g<-1||g>u||_<-1||_>c)throw new ee;h=!1,g===-1?(o[p]=0,h=!0):g===u&&(o[p]=u-1,h=!0),_===-1?(o[p+1]=0,h=!0):_===c&&(o[p+1]=c-1,h=!0)}}}class ar{constructor(i,o,u,c,h,p,g,_,v){this.a11=i,this.a21=o,this.a31=u,this.a12=c,this.a22=h,this.a32=p,this.a13=g,this.a23=_,this.a33=v}static quadrilateralToQuadrilateral(i,o,u,c,h,p,g,_,v,A,b,R,k,z,H,Z){const q=ar.quadrilateralToSquare(i,o,u,c,h,p,g,_);return ar.squareToQuadrilateral(v,A,b,R,k,z,H,Z).times(q)}transformPoints(i){const o=i.length,u=this.a11,c=this.a12,h=this.a13,p=this.a21,g=this.a22,_=this.a23,v=this.a31,A=this.a32,b=this.a33;for(let R=0;R<o;R+=2){const k=i[R],z=i[R+1],H=h*k+_*z+b;i[R]=(u*k+p*z+v)/H,i[R+1]=(c*k+g*z+A)/H}}transformPointsWithValues(i,o){const u=this.a11,c=this.a12,h=this.a13,p=this.a21,g=this.a22,_=this.a23,v=this.a31,A=this.a32,b=this.a33,R=i.length;for(let k=0;k<R;k++){const z=i[k],H=o[k],Z=h*z+_*H+b;i[k]=(u*z+p*H+v)/Z,o[k]=(c*z+g*H+A)/Z}}static squareToQuadrilateral(i,o,u,c,h,p,g,_){const v=i-u+h-g,A=o-c+p-_;if(v===0&&A===0)return new ar(u-i,h-u,i,c-o,p-c,o,0,0,1);{const b=u-h,R=g-h,k=c-p,z=_-p,H=b*z-R*k,Z=(v*z-R*A)/H,q=(b*A-v*k)/H;return new ar(u-i+Z*u,g-i+q*g,i,c-o+Z*c,_-o+q*_,o,Z,q,1)}}static quadrilateralToSquare(i,o,u,c,h,p,g,_){return ar.squareToQuadrilateral(i,o,u,c,h,p,g,_).buildAdjoint()}buildAdjoint(){return new ar(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new ar(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Ul extends Fl{sampleGrid(i,o,u,c,h,p,g,_,v,A,b,R,k,z,H,Z,q,ce,de){const oe=ar.quadrilateralToQuadrilateral(c,h,p,g,_,v,A,b,R,k,z,H,Z,q,ce,de);return this.sampleGridWithTransform(i,o,u,oe)}sampleGridWithTransform(i,o,u,c){if(o<=0||u<=0)throw new ee;const h=new gt(o,u),p=new Float32Array(2*o);for(let g=0;g<u;g++){const _=p.length,v=g+.5;for(let A=0;A<_;A+=2)p[A]=A/2+.5,p[A+1]=v;c.transformPoints(p),Fl.checkAndNudgePoints(i,p);try{for(let A=0;A<_;A+=2)i.get(Math.floor(p[A]),Math.floor(p[A+1]))&&h.set(A/2,g)}catch{throw new ee}}return h}}class ui{static setGridSampler(i){ui.gridSampler=i}static getInstance(){return ui.gridSampler}}ui.gridSampler=new Ul;class Fn{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new Ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Vl{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),u=this.getBullsEyeCorners(o);if(i){let p=u[0];u[0]=u[2],u[2]=p}this.extractParameters(u);let c=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),h=this.getMatrixCornerPoints(u);return new Bl(c,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new ee;let o=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(u,o);let c=0;for(let p=0;p<4;p++){let g=u[(this.shift+p)%4];this.compact?(c<<=7,c+=g>>1&127):(c<<=10,c+=(g>>2&992)+(g>>1&31))}let h=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(i,o){let u=0;i.forEach((c,h,p)=>{let g=(c>>o-2<<1)+(c&1);u=(u<<3)+g}),u=((u&1)<<11)+(u>>1);for(let c=0;c<4;c++)if(B.bitCount(u^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new ee}getCorrectedParameterData(i,o){let u,c;o?(u=7,c=2):(u=10,c=4);let h=u-c,p=new Int32Array(u);for(let _=u-1;_>=0;--_)p[_]=i&15,i>>=4;try{new Ps(it.AZTEC_PARAM).decode(p,h)}catch{throw new ee}let g=0;for(let _=0;_<c;_++)g=(g<<4)+p[_];return g}getBullsEyeCorners(i){let o=i,u=i,c=i,h=i,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let b=this.getFirstDifferent(o,p,1,-1),R=this.getFirstDifferent(u,p,1,1),k=this.getFirstDifferent(c,p,-1,1),z=this.getFirstDifferent(h,p,-1,-1);if(this.nbCenterLayers>2){let H=this.distancePoint(z,b)*this.nbCenterLayers/(this.distancePoint(h,o)*(this.nbCenterLayers+2));if(H<.75||H>1.25||!this.isWhiteOrBlackRectangle(b,R,k,z))break}o=b,u=R,c=k,h=z,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let g=new Ie(o.getX()+.5,o.getY()-.5),_=new Ie(u.getX()+.5,u.getY()+.5),v=new Ie(c.getX()-.5,c.getY()+.5),A=new Ie(h.getX()-.5,h.getY()-.5);return this.expandSquare([g,_,v,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,u,c;try{let g=new li(this.image).detect();i=g[0],o=g[1],u=g[2],c=g[3]}catch{let _=this.image.getWidth()/2,v=this.image.getHeight()/2;i=this.getFirstDifferent(new Fn(_+7,v-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Fn(_+7,v+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Fn(_-7,v+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Fn(_-7,v-7),!1,-1,-1).toResultPoint()}let h=st.round((i.getX()+c.getX()+o.getX()+u.getX())/4),p=st.round((i.getY()+c.getY()+o.getY()+u.getY())/4);try{let g=new li(this.image,15,h,p).detect();i=g[0],o=g[1],u=g[2],c=g[3]}catch{i=this.getFirstDifferent(new Fn(h+7,p-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Fn(h+7,p+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Fn(h-7,p+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Fn(h-7,p-7),!1,-1,-1).toResultPoint()}return h=st.round((i.getX()+c.getX()+o.getX()+u.getX())/4),p=st.round((i.getY()+c.getY()+o.getY()+u.getY())/4),new Fn(h,p)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,u,c,h){let p=ui.getInstance(),g=this.getDimension(),_=g/2-this.nbCenterLayers,v=g/2+this.nbCenterLayers;return p.sampleGrid(i,g,g,_,_,v,_,v,v,_,v,o.getX(),o.getY(),u.getX(),u.getY(),c.getX(),c.getY(),h.getX(),h.getY())}sampleLine(i,o,u){let c=0,h=this.distanceResultPoint(i,o),p=h/u,g=i.getX(),_=i.getY(),v=p*(o.getX()-i.getX())/h,A=p*(o.getY()-i.getY())/h;for(let b=0;b<u;b++)this.image.get(st.round(g+b*v),st.round(_+b*A))&&(c|=1<<u-b-1);return c}isWhiteOrBlackRectangle(i,o,u,c){let h=3;i=new Fn(i.getX()-h,i.getY()+h),o=new Fn(o.getX()-h,o.getY()-h),u=new Fn(u.getX()+h,u.getY()-h),c=new Fn(c.getX()+h,c.getY()+h);let p=this.getColor(c,i);if(p===0)return!1;let g=this.getColor(i,o);return g!==p||(g=this.getColor(o,u),g!==p)?!1:(g=this.getColor(u,c),g===p)}getColor(i,o){let u=this.distancePoint(i,o),c=(o.getX()-i.getX())/u,h=(o.getY()-i.getY())/u,p=0,g=i.getX(),_=i.getY(),v=this.image.get(i.getX(),i.getY()),A=Math.ceil(u);for(let R=0;R<A;R++)g+=c,_+=h,this.image.get(st.round(g),st.round(_))!==v&&p++;let b=p/u;return b>.1&&b<.9?0:b<=.1===v?1:-1}getFirstDifferent(i,o,u,c){let h=i.getX()+u,p=i.getY()+c;for(;this.isValid(h,p)&&this.image.get(h,p)===o;)h+=u,p+=c;for(h-=u,p-=c;this.isValid(h,p)&&this.image.get(h,p)===o;)h+=u;for(h-=u;this.isValid(h,p)&&this.image.get(h,p)===o;)p+=c;return p-=c,new Fn(h,p)}expandSquare(i,o,u){let c=u/(2*o),h=i[0].getX()-i[2].getX(),p=i[0].getY()-i[2].getY(),g=(i[0].getX()+i[2].getX())/2,_=(i[0].getY()+i[2].getY())/2,v=new Ie(g+c*h,_+c*p),A=new Ie(g-c*h,_-c*p);h=i[1].getX()-i[3].getX(),p=i[1].getY()-i[3].getY(),g=(i[1].getX()+i[3].getX())/2,_=(i[1].getY()+i[3].getY())/2;let b=new Ie(g+c*h,_+c*p),R=new Ie(g-c*h,_-c*p);return[v,b,A,R]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=st.round(i.getX()),u=st.round(i.getY());return this.isValid(o,u)}distancePoint(i,o){return st.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return st.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class Oo{decode(i,o=null){let u=null,c=new Vl(i.getBlackMatrix()),h=null,p=null;try{let A=c.detectMirror(!1);h=A.getPoints(),this.reportFoundResultPoints(o,h),p=new mt().decode(A)}catch(A){u=A}if(p==null)try{let A=c.detectMirror(!0);h=A.getPoints(),this.reportFoundResultPoints(o,h),p=new mt().decode(A)}catch(A){throw u??A}let g=new je(p.getText(),p.getRawBytes(),p.getNumBits(),h,ue.AZTEC,j.currentTimeMillis()),_=p.getByteSegments();_!=null&&g.putMetadata(St.BYTE_SEGMENTS,_);let v=p.getECLevel();return v!=null&&g.putMetadata(St.ERROR_CORRECTION_LEVEL,v),g}reportFoundResultPoints(i,o){if(i!=null){let u=i.get(ie.NEED_RESULT_POINT_CALLBACK);u!=null&&o.forEach((c,h,p)=>{u.foundPossibleResultPoint(c)})}}reset(){}}class t0 extends It{constructor(i=500){super(new Oo,i)}}class Zt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(ie.TRY_HARDER)===!0&&i.isRotateSupported()){const h=i.rotateCounterClockwise(),p=this.doDecode(h,o),g=p.getResultMetadata();let _=270;g!==null&&g.get(St.ORIENTATION)===!0&&(_=_+g.get(St.ORIENTATION)%360),p.putMetadata(St.ORIENTATION,_);const v=p.getResultPoints();if(v!==null){const A=h.getHeight();for(let b=0;b<v.length;b++)v[b]=new Ie(A-v[b].getY()-1,v[b].getX())}return p}else throw new ee}}reset(){}doDecode(i,o){const u=i.getWidth(),c=i.getHeight();let h=new G(u);const p=o&&o.get(ie.TRY_HARDER)===!0,g=Math.max(1,c>>(p?8:5));let _;p?_=c:_=15;const v=Math.trunc(c/2);for(let A=0;A<_;A++){const b=Math.trunc((A+1)/2),R=(A&1)===0,k=v+g*(R?b:-b);if(k<0||k>=c)break;try{h=i.getBlackRow(k,h)}catch{continue}for(let z=0;z<2;z++){if(z===1&&(h.reverse(),o&&o.get(ie.NEED_RESULT_POINT_CALLBACK)===!0)){const H=new Map;o.forEach((Z,q)=>H.set(q,Z)),H.delete(ie.NEED_RESULT_POINT_CALLBACK),o=H}try{const H=this.decodeRow(k,h,o);if(z===1){H.putMetadata(St.ORIENTATION,180);const Z=H.getResultPoints();Z!==null&&(Z[0]=new Ie(u-Z[0].getX()-1,Z[0].getY()),Z[1]=new Ie(u-Z[1].getX()-1,Z[1].getY()))}return H}catch{}}}throw new ee}static recordPattern(i,o,u){const c=u.length;for(let v=0;v<c;v++)u[v]=0;const h=i.getSize();if(o>=h)throw new ee;let p=!i.get(o),g=0,_=o;for(;_<h;){if(i.get(_)!==p)u[g]++;else{if(++g===c)break;u[g]=1,p=!p}_++}if(!(g===c||g===c-1&&_===h))throw new ee}static recordPatternInReverse(i,o,u){let c=u.length,h=i.get(o);for(;o>0&&c>=0;)i.get(--o)!==h&&(c--,h=!h);if(c>=0)throw new ee;Zt.recordPattern(i,o+1,u)}static patternMatchVariance(i,o,u){const c=i.length;let h=0,p=0;for(let v=0;v<c;v++)h+=i[v],p+=o[v];if(h<p)return Number.POSITIVE_INFINITY;const g=h/p;u*=g;let _=0;for(let v=0;v<c;v++){const A=i[v],b=o[v]*g,R=A>b?A-b:b-A;if(R>u)return Number.POSITIVE_INFINITY;_+=R}return _/h}}class _e extends Zt{static findStartPattern(i){const o=i.getSize(),u=i.getNextSet(0);let c=0,h=Int32Array.from([0,0,0,0,0,0]),p=u,g=!1;const _=6;for(let v=u;v<o;v++)if(i.get(v)!==g)h[c]++;else{if(c===_-1){let A=_e.MAX_AVG_VARIANCE,b=-1;for(let R=_e.CODE_START_A;R<=_e.CODE_START_C;R++){const k=Zt.patternMatchVariance(h,_e.CODE_PATTERNS[R],_e.MAX_INDIVIDUAL_VARIANCE);k<A&&(A=k,b=R)}if(b>=0&&i.isRange(Math.max(0,p-(v-p)/2),p,!1))return Int32Array.from([p,v,b]);p+=h[0]+h[1],h=h.slice(2,h.length-1),h[c-1]=0,h[c]=0,c--}else c++;h[c]=1,g=!g}throw new ee}static decodeCode(i,o,u){Zt.recordPattern(i,u,o);let c=_e.MAX_AVG_VARIANCE,h=-1;for(let p=0;p<_e.CODE_PATTERNS.length;p++){const g=_e.CODE_PATTERNS[p],_=this.patternMatchVariance(o,g,_e.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,h=p)}if(h>=0)return h;throw new ee}decodeRow(i,o,u){const c=u&&u.get(ie.ASSUME_GS1)===!0,h=_e.findStartPattern(o),p=h[2];let g=0;const _=new Uint8Array(20);_[g++]=p;let v;switch(p){case _e.CODE_START_A:v=_e.CODE_CODE_A;break;case _e.CODE_START_B:v=_e.CODE_CODE_B;break;case _e.CODE_START_C:v=_e.CODE_CODE_C;break;default:throw new Y}let A=!1,b=!1,R="",k=h[0],z=h[1];const H=Int32Array.from([0,0,0,0,0,0]);let Z=0,q=0,ce=p,de=0,oe=!0,Ye=!1,We=!1;for(;!A;){const Jr=b;switch(b=!1,Z=q,q=_e.decodeCode(o,H,z),_[g++]=q,q!==_e.CODE_STOP&&(oe=!0),q!==_e.CODE_STOP&&(de++,ce+=de*q),k=z,z+=H.reduce((h0,js)=>h0+js,0),q){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new Y}switch(v){case _e.CODE_CODE_A:if(q<64)We===Ye?R+=String.fromCharCode(" ".charCodeAt(0)+q):R+=String.fromCharCode(" ".charCodeAt(0)+q+128),We=!1;else if(q<96)We===Ye?R+=String.fromCharCode(q-64):R+=String.fromCharCode(q+64),We=!1;else switch(q!==_e.CODE_STOP&&(oe=!1),q){case _e.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+=String.fromCharCode(29));break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!Ye&&We?(Ye=!0,We=!1):Ye&&We?(Ye=!1,We=!1):We=!0;break;case _e.CODE_SHIFT:b=!0,v=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:v=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:v=_e.CODE_CODE_C;break;case _e.CODE_STOP:A=!0;break}break;case _e.CODE_CODE_B:if(q<96)We===Ye?R+=String.fromCharCode(" ".charCodeAt(0)+q):R+=String.fromCharCode(" ".charCodeAt(0)+q+128),We=!1;else switch(q!==_e.CODE_STOP&&(oe=!1),q){case _e.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+=String.fromCharCode(29));break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!Ye&&We?(Ye=!0,We=!1):Ye&&We?(Ye=!1,We=!1):We=!0;break;case _e.CODE_SHIFT:b=!0,v=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:v=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:v=_e.CODE_CODE_C;break;case _e.CODE_STOP:A=!0;break}break;case _e.CODE_CODE_C:if(q<100)q<10&&(R+="0"),R+=q;else switch(q!==_e.CODE_STOP&&(oe=!1),q){case _e.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+=String.fromCharCode(29));break;case _e.CODE_CODE_A:v=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:v=_e.CODE_CODE_B;break;case _e.CODE_STOP:A=!0;break}break}Jr&&(v=v===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const Bt=z-k;if(z=o.getNextUnset(z),!o.isRange(z,Math.min(o.getSize(),z+(z-k)/2),!1))throw new ee;if(ce-=de*Z,ce%103!==Z)throw new V;const $n=R.length;if($n===0)throw new ee;$n>0&&oe&&(v===_e.CODE_CODE_C?R=R.substring(0,$n-2):R=R.substring(0,$n-1));const Xn=(h[1]+h[0])/2,pt=k+Bt/2,_n=_.length,Yn=new Uint8Array(_n);for(let Jr=0;Jr<_n;Jr++)Yn[Jr]=_[Jr];const zs=[new Ie(Xn,i),new Ie(pt,i)];return new je(R,Yn,0,zs,ue.CODE_128,new Date().getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class Jt extends Zt{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,u){let c=this.counters;c.fill(0),this.decodeRowResult="";let h=Jt.findAsteriskPattern(o,c),p=o.getNextSet(h[1]),g=o.getSize(),_,v;do{Jt.recordPattern(o,p,c);let H=Jt.toNarrowWidePattern(c);if(H<0)throw new ee;_=Jt.patternToChar(H),this.decodeRowResult+=_,v=p;for(let Z of c)p+=Z;p=o.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let A=0;for(let H of c)A+=H;let b=p-v-A;if(p!==g&&b*2<A)throw new ee;if(this.usingCheckDigit){let H=this.decodeRowResult.length-1,Z=0;for(let q=0;q<H;q++)Z+=Jt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(H)!==Jt.ALPHABET_STRING.charAt(Z%43))throw new V;this.decodeRowResult=this.decodeRowResult.substring(0,H)}if(this.decodeRowResult.length===0)throw new ee;let R;this.extendedMode?R=Jt.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let k=(h[1]+h[0])/2,z=v+A/2;return new je(R,null,0,[new Ie(k,i),new Ie(z,i)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let u=i.getSize(),c=i.getNextSet(0),h=0,p=c,g=!1,_=o.length;for(let v=c;v<u;v++)if(i.get(v)!==g)o[h]++;else{if(h===_-1){if(this.toNarrowWidePattern(o)===Jt.ASTERISK_ENCODING&&i.isRange(Math.max(0,p-Math.floor((v-p)/2)),p,!1))return[p,v];p+=o[0]+o[1],o.copyWithin(0,2,2+h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,g=!g}throw new ee}static toNarrowWidePattern(i){let o=i.length,u=0,c;do{let h=2147483647;for(let _ of i)_<h&&_>u&&(h=_);u=h,c=0;let p=0,g=0;for(let _=0;_<o;_++){let v=i[_];v>u&&(g|=1<<o-1-_,c++,p+=v)}if(c===3){for(let _=0;_<o&&c>0;_++){let v=i[_];if(v>u&&(c--,v*2>=p))return-1}return g}}while(c>3);return-1}static patternToChar(i){for(let o=0;o<Jt.CHARACTER_ENCODINGS.length;o++)if(Jt.CHARACTER_ENCODINGS[o]===i)return Jt.ALPHABET_STRING.charAt(o);if(i===Jt.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(i){let o=i.length,u="";for(let c=0;c<o;c++){let h=i.charAt(c);if(h==="+"||h==="$"||h==="%"||h==="/"){let p=i.charAt(c+1),g="\0";switch(h){case"+":if(p>="A"&&p<="Z")g=String.fromCharCode(p.charCodeAt(0)+32);else throw new Y;break;case"$":if(p>="A"&&p<="Z")g=String.fromCharCode(p.charCodeAt(0)-64);else throw new Y;break;case"%":if(p>="A"&&p<="E")g=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")g=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")g=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")g=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")g="\0";else if(p==="V")g="@";else if(p==="W")g="`";else if(p==="X"||p==="Y"||p==="Z")g="";else throw new Y;break;case"/":if(p>="A"&&p<="O")g=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")g=":";else throw new Y;break}u+=g,c++}else u+=h}return u}}Jt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Jt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Jt.ASTERISK_ENCODING=148;class xt extends Zt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,u){let c=this.decodeStart(o),h=this.decodeEnd(o),p=new Je;xt.decodeMiddle(o,c[1],h[0],p);let g=p.toString(),_=null;u!=null&&(_=u.get(ie.ALLOWED_LENGTHS)),_==null&&(_=xt.DEFAULT_ALLOWED_LENGTHS);let v=g.length,A=!1,b=0;for(let z of _){if(v===z){A=!0;break}z>b&&(b=z)}if(!A&&v>b&&(A=!0),!A)throw new Y;const R=[new Ie(c[1],i),new Ie(h[0],i)];return new je(g,null,0,R,ue.ITF,new Date().getTime())}static decodeMiddle(i,o,u,c){let h=new Int32Array(10),p=new Int32Array(5),g=new Int32Array(5);for(h.fill(0),p.fill(0),g.fill(0);o<u;){Zt.recordPattern(i,o,h);for(let v=0;v<5;v++){let A=2*v;p[v]=h[A],g[v]=h[A+1]}let _=xt.decodeDigit(p);c.append(_.toString()),_=this.decodeDigit(g),c.append(_.toString()),h.forEach(function(v){o+=v})}}decodeStart(i){let o=xt.skipWhiteSpace(i),u=xt.findGuardPattern(i,o,xt.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(i,u[0]),u}validateQuietZone(i,o){let u=this.narrowLineWidth*10;u=u<o?u:o;for(let c=o-1;u>0&&c>=0&&!i.get(c);c--)u--;if(u!==0)throw new ee}static skipWhiteSpace(i){const o=i.getSize(),u=i.getNextSet(0);if(u===o)throw new ee;return u}decodeEnd(i){i.reverse();try{let o=xt.skipWhiteSpace(i),u;try{u=xt.findGuardPattern(i,o,xt.END_PATTERN_REVERSED[0])}catch(h){h instanceof ee&&(u=xt.findGuardPattern(i,o,xt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,u[0]);let c=u[0];return u[0]=i.getSize()-u[1],u[1]=i.getSize()-c,u}finally{i.reverse()}}static findGuardPattern(i,o,u){let c=u.length,h=new Int32Array(c),p=i.getSize(),g=!1,_=0,v=o;h.fill(0);for(let A=o;A<p;A++)if(i.get(A)!==g)h[_]++;else{if(_===c-1){if(Zt.patternMatchVariance(h,u,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return[v,A];v+=h[0]+h[1],j.arraycopy(h,2,h,0,_-1),h[_-1]=0,h[_]=0,_--}else _++;h[_]=1,g=!g}throw new ee}static decodeDigit(i){let o=xt.MAX_AVG_VARIANCE,u=-1,c=xt.PATTERNS.length;for(let h=0;h<c;h++){let p=xt.PATTERNS[h],g=Zt.patternMatchVariance(i,p,xt.MAX_INDIVIDUAL_VARIANCE);g<o?(o=g,u=h):g===o&&(u=-1)}if(u>=0)return u%10;throw new ee}}xt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xt.MAX_AVG_VARIANCE=.38,xt.MAX_INDIVIDUAL_VARIANCE=.5,xt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xt.START_PATTERN=Int32Array.from([1,1,1,1]),xt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Tt extends Zt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,u,c=0,h=Int32Array.from([0,0,0]);for(;!o;){h=Int32Array.from([0,0,0]),u=Tt.findGuardPattern(i,c,!1,this.START_END_PATTERN,h);let p=u[0];c=u[1];let g=p-(c-p);g>=0&&(o=i.isRange(g,p,!1))}return u}static checkChecksum(i){return Tt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let u=parseInt(i.charAt(o-1),10);return Tt.getStandardUPCEANChecksum(i.substring(0,o-1))===u}static getStandardUPCEANChecksum(i){let o=i.length,u=0;for(let c=o-1;c>=0;c-=2){let h=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(h<0||h>9)throw new Y;u+=h}u*=3;for(let c=o-2;c>=0;c-=2){let h=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(h<0||h>9)throw new Y;u+=h}return(1e3-u)%10}static decodeEnd(i,o){return Tt.findGuardPattern(i,o,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,u,c){return this.findGuardPattern(i,o,u,c,new Int32Array(c.length))}static findGuardPattern(i,o,u,c,h){let p=i.getSize();o=u?i.getNextUnset(o):i.getNextSet(o);let g=0,_=o,v=c.length,A=u;for(let b=o;b<p;b++)if(i.get(b)!==A)h[g]++;else{if(g===v-1){if(Zt.patternMatchVariance(h,c,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return Int32Array.from([_,b]);_+=h[0]+h[1];let R=h.slice(2,h.length-1);for(let k=0;k<g-1;k++)h[k]=R[k];h[g-1]=0,h[g]=0,g--}else g++;h[g]=1,A=!A}throw new ee}static decodeDigit(i,o,u,c){this.recordPattern(i,u,o);let h=this.MAX_AVG_VARIANCE,p=-1,g=c.length;for(let _=0;_<g;_++){let v=c[_],A=Zt.patternMatchVariance(o,v,Tt.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,p=_)}if(p>=0)return p;throw new ee}}Tt.MAX_AVG_VARIANCE=.48,Tt.MAX_INDIVIDUAL_VARIANCE=.7,Tt.START_END_PATTERN=Int32Array.from([1,1,1]),Tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Mo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,u){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(o,u,c),p=c.toString(),g=Mo.parseExtensionString(p),_=[new Ie((u[0]+u[1])/2,i),new Ie(h,i)],v=new je(p,null,0,_,ue.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&v.putAllMetadata(g),v}decodeMiddle(i,o,u){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),p=o[1],g=0;for(let v=0;v<5&&p<h;v++){let A=Tt.decodeDigit(i,c,p,Tt.L_AND_G_PATTERNS);u+=String.fromCharCode("0".charCodeAt(0)+A%10);for(let b of c)p+=b;A>=10&&(g|=1<<4-v),v!==4&&(p=i.getNextSet(p),p=i.getNextUnset(p))}if(u.length!==5)throw new ee;let _=this.determineCheckDigit(g);if(Mo.extensionChecksum(u.toString())!==_)throw new ee;return p}static extensionChecksum(i){let o=i.length,u=0;for(let c=o-2;c>=0;c-=2)u+=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);u*=3;for(let c=o-1;c>=0;c-=2)u+=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);return u*=3,u%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ee}static parseExtensionString(i){if(i.length!==5)return null;let o=Mo.parseExtension5String(i);return o==null?null:new Map([[St.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let u=parseInt(i.substring(1)),c=(u/100).toString(),h=u%100,p=h<10?"0"+h:h.toString();return o+c+"."+p}}class zl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,u){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(o,u,c),p=c.toString(),g=zl.parseExtensionString(p),_=[new Ie((u[0]+u[1])/2,i),new Ie(h,i)],v=new je(p,null,0,_,ue.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&v.putAllMetadata(g),v}decodeMiddle(i,o,u){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),p=o[1],g=0;for(let _=0;_<2&&p<h;_++){let v=Tt.decodeDigit(i,c,p,Tt.L_AND_G_PATTERNS);u+=String.fromCharCode("0".charCodeAt(0)+v%10);for(let A of c)p+=A;v>=10&&(g|=1<<1-_),_!==1&&(p=i.getNextSet(p),p=i.getNextUnset(p))}if(u.length!==2)throw new ee;if(parseInt(u.toString())%4!==g)throw new ee;return p}static parseExtensionString(i){return i.length!==2?null:new Map([[St.ISSUE_NUMBER,parseInt(i)]])}}class jl{static decodeRow(i,o,u){let c=Tt.findGuardPattern(o,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Mo().decodeRow(i,o,c)}catch{return new zl().decodeRow(i,o,c)}}}jl.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ut extends Tt{constructor(){super(),this.decodeRowStringBuffer="",ut.L_AND_G_PATTERNS=ut.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=ut.L_PATTERNS[i-10],u=new Int32Array(o.length);for(let c=0;c<o.length;c++)u[c]=o[o.length-c-1];ut.L_AND_G_PATTERNS[i]=u}}decodeRow(i,o,u){let c=ut.findStartGuardPattern(o),h=u==null?null:u.get(ie.NEED_RESULT_POINT_CALLBACK);if(h!=null){const oe=new Ie((c[0]+c[1])/2,i);h.foundPossibleResultPoint(oe)}let p=this.decodeMiddle(o,c,this.decodeRowStringBuffer),g=p.rowOffset,_=p.resultString;if(h!=null){const oe=new Ie(g,i);h.foundPossibleResultPoint(oe)}let v=this.decodeEnd(o,g);if(h!=null){const oe=new Ie((v[0]+v[1])/2,i);h.foundPossibleResultPoint(oe)}let A=v[1],b=A+(A-v[0]);if(b>=o.getSize()||!o.isRange(A,b,!1))throw new ee;let R=_.toString();if(R.length<8)throw new Y;if(!ut.checkChecksum(R))throw new V;let k=(c[1]+c[0])/2,z=(v[1]+v[0])/2,H=this.getBarcodeFormat(),Z=[new Ie(k,i),new Ie(z,i)],q=new je(R,null,0,Z,H,new Date().getTime()),ce=0;try{let oe=jl.decodeRow(i,o,v[1]);q.putMetadata(St.UPC_EAN_EXTENSION,oe.getText()),q.putAllMetadata(oe.getResultMetadata()),q.addResultPoints(oe.getResultPoints()),ce=oe.getText().length}catch{}let de=u==null?null:u.get(ie.ALLOWED_EAN_EXTENSIONS);if(de!=null){let oe=!1;for(let Ye in de)if(ce.toString()===Ye){oe=!0;break}if(!oe)throw new ee}return q}decodeEnd(i,o){return ut.findGuardPattern(i,o,!1,ut.START_END_PATTERN,new Int32Array(ut.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return ut.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let u=parseInt(i.charAt(o-1),10);return ut.getStandardUPCEANChecksum(i.substring(0,o-1))===u}static getStandardUPCEANChecksum(i){let o=i.length,u=0;for(let c=o-1;c>=0;c-=2){let h=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(h<0||h>9)throw new Y;u+=h}u*=3;for(let c=o-2;c>=0;c-=2){let h=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(h<0||h>9)throw new Y;u+=h}return(1e3-u)%10}}class Ri extends ut{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,u){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),p=o[1],g=0;for(let v=0;v<6&&p<h;v++){let A=ut.decodeDigit(i,c,p,ut.L_AND_G_PATTERNS);u+=String.fromCharCode("0".charCodeAt(0)+A%10);for(let b of c)p+=b;A>=10&&(g|=1<<5-v)}u=Ri.determineFirstDigit(u,g),p=ut.findGuardPattern(i,p,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&p<h;v++){let A=ut.decodeDigit(i,c,p,ut.L_PATTERNS);u+=String.fromCharCode("0".charCodeAt(0)+A);for(let b of c)p+=b}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(i,o){for(let u=0;u<10;u++)if(o===this.FIRST_DIGIT_ENCODINGS[u])return i=String.fromCharCode("0".charCodeAt(0)+u)+i,i;throw new ee}}Ri.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class eh extends ut{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,u){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),p=o[1];for(let _=0;_<4&&p<h;_++){let v=ut.decodeDigit(i,c,p,ut.L_PATTERNS);u+=String.fromCharCode("0".charCodeAt(0)+v);for(let A of c)p+=A}p=ut.findGuardPattern(i,p,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&p<h;_++){let v=ut.decodeDigit(i,c,p,ut.L_PATTERNS);u+=String.fromCharCode("0".charCodeAt(0)+v);for(let A of c)p+=A}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return ue.EAN_8}}class th extends ut{constructor(){super(...arguments),this.ean13Reader=new Ri}getBarcodeFormat(){return ue.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,u))}decodeMiddle(i,o,u){return this.ean13Reader.decodeMiddle(i,o,u)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let u=new je(o.substring(1),null,null,i.getResultPoints(),ue.UPC_A);return i.getResultMetadata()!=null&&u.putAllMetadata(i.getResultMetadata()),u}else throw new ee}reset(){this.ean13Reader.reset()}}class Pr extends ut{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,u){const c=this.decodeMiddleCounters.map(v=>v);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const h=i.getSize();let p=o[1],g=0;for(let v=0;v<6&&p<h;v++){const A=Pr.decodeDigit(i,c,p,Pr.L_AND_G_PATTERNS);u+=String.fromCharCode("0".charCodeAt(0)+A%10);for(let b of c)p+=b;A>=10&&(g|=1<<5-v)}let _=Pr.determineNumSysAndCheckDigit(u,g);return{rowOffset:p,resultString:_}}decodeEnd(i,o){return Pr.findGuardPatternWithoutCounters(i,o,!0,Pr.MIDDLE_END_PATTERN)}checkChecksum(i){return ut.checkChecksum(Pr.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let u=0;u<=1;u++)for(let c=0;c<10;c++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][c]){let h=String.fromCharCode("0".charCodeAt(0)+u),p=String.fromCharCode("0".charCodeAt(0)+c);return h+i+p}throw ee.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(h=>h.charCodeAt(0)),u=new Je;u.append(i.charAt(0));let c=o[5];switch(c){case 0:case 1:case 2:u.appendChars(o,0,2),u.append(c),u.append("0000"),u.appendChars(o,2,3);break;case 3:u.appendChars(o,0,3),u.append("00000"),u.appendChars(o,3,2);break;case 4:u.appendChars(o,0,4),u.append("00000"),u.append(o[4]);break;default:u.appendChars(o,0,5),u.append("0000"),u.append(c);break}return i.length>=8&&u.append(i.charAt(7)),u.toString()}}Pr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Hl extends Zt{constructor(i){super();let o=i==null?null:i.get(ie.POSSIBLE_FORMATS),u=[];r(o)?(u.push(new Ri),u.push(new th),u.push(new eh),u.push(new Pr)):(o.indexOf(ue.EAN_13)>-1&&u.push(new Ri),o.indexOf(ue.UPC_A)>-1&&u.push(new th),o.indexOf(ue.EAN_8)>-1&&u.push(new eh),o.indexOf(ue.UPC_E)>-1&&u.push(new Pr)),this.readers=u}decodeRow(i,o,u){for(let c of this.readers)try{const h=c.decodeRow(i,o,u),p=h.getBarcodeFormat()===ue.EAN_13&&h.getText().charAt(0)==="0",g=u==null?null:u.get(ie.POSSIBLE_FORMATS),_=g==null||g.includes(ue.UPC_A);if(p&&_){const v=h.getRawBytes(),A=new je(h.getText().substring(1),v,v?v.length:null,h.getResultPoints(),ue.UPC_A);return A.putAllMetadata(h.getResultMetadata()),A}return h}catch{}throw new ee}reset(){for(let i of this.readers)i.reset()}}class En extends Zt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let u=0;u<o.length;u++)if(Zt.patternMatchVariance(i,o[u],En.MAX_INDIVIDUAL_VARIANCE)<En.MAX_AVG_VARIANCE)return u;throw new ee}static count(i){return st.sum(new Int32Array(i))}static increment(i,o){let u=0,c=o[0];for(let h=1;h<i.length;h++)o[h]>c&&(c=o[h],u=h);i[u]++}static decrement(i,o){let u=0,c=o[0];for(let h=1;h<i.length;h++)o[h]<c&&(c=o[h],u=h);i[u]--}static isFinderPattern(i){let o=i[0]+i[1],u=o+i[2]+i[3],c=o/u;if(c>=En.MIN_FINDER_PATTERN_RATIO&&c<=En.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let g of i)g>p&&(p=g),g<h&&(h=g);return p<10*h}return!1}}En.MAX_AVG_VARIANCE=.2,En.MAX_INDIVIDUAL_VARIANCE=.45,En.MIN_FINDER_PATTERN_RATIO=9.5/12,En.MAX_FINDER_PATTERN_RATIO=12.5/14;class Os{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Os))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ms{constructor(i,o,u,c,h){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Ie(u,h)),this.resultPoints.push(new Ie(c,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Ms))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Zr{constructor(){}static getRSSvalue(i,o,u){let c=0;for(let _ of i)c+=_;let h=0,p=0,g=i.length;for(let _=0;_<g-1;_++){let v;for(v=1,p|=1<<_;v<i[_];v++,p&=~(1<<_)){let A=Zr.combins(c-v-1,g-_-2);if(u&&p===0&&c-v-(g-_-1)>=g-_-1&&(A-=Zr.combins(c-v-(g-_),g-_-2)),g-_-1>1){let b=0;for(let R=c-v-(g-_-2);R>o;R--)b+=Zr.combins(c-v-R-1,g-_-3);A-=b*(g-1-_)}else c-v>o&&A--;h+=A}c-=v}return h}static combins(i,o){let u,c;i-o>o?(c=o,u=i-o):(c=i-o,u=o);let h=1,p=1;for(let g=i;g>u;g--)h*=g,p<=c&&(h/=p,p++);for(;p<=c;)h/=p,p++;return h}}class n0{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let u=12*o,c=new G(u),h=0,g=i[0].getRightChar().getValue();for(let _=11;_>=0;--_)g&1<<_&&c.set(h),h++;for(let _=1;_<i.length;++_){let v=i[_],A=v.getLeftChar().getValue();for(let b=11;b>=0;--b)A&1<<b&&c.set(h),h++;if(v.getRightChar()!=null){let b=v.getRightChar().getValue();for(let R=11;R>=0;--R)b&1<<R&&c.set(h),h++}}return c}}class Ji{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Wl{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Dt extends Wl{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Dt.FNC1}}Dt.FNC1="$";class Se extends Wl{constructor(i,o,u){super(i),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class lr extends Wl{constructor(i,o,u){if(super(i),o<0||o>10||u<0||u>10)throw new Y;this.firstDigit=o,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===lr.FNC1}isSecondDigitFNC1(){return this.secondDigit===lr.FNC1}isAnyFNC1(){return this.firstDigit===lr.FNC1||this.secondDigit===lr.FNC1}}lr.FNC1=10;class ve{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new ee;let o=i.substring(0,2);for(let h of ve.TWO_DIGIT_DATA_LENGTH)if(h[0]===o)return h[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(2,h[2],i):ve.processFixedAI(2,h[1],i);if(i.length<3)throw new ee;let u=i.substring(0,3);for(let h of ve.THREE_DIGIT_DATA_LENGTH)if(h[0]===u)return h[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(3,h[2],i):ve.processFixedAI(3,h[1],i);for(let h of ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===u)return h[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(4,h[2],i):ve.processFixedAI(4,h[1],i);if(i.length<4)throw new ee;let c=i.substring(0,4);for(let h of ve.FOUR_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(4,h[2],i):ve.processFixedAI(4,h[1],i);throw new ee}static processFixedAI(i,o,u){if(u.length<i)throw new ee;let c=u.substring(0,i);if(u.length<i+o)throw new ee;let h=u.substring(i,i+o),p=u.substring(i+o),g="("+c+")"+h,_=ve.parseFieldsInGeneralPurpose(p);return _==null?g:g+_}static processVariableAI(i,o,u){let c=u.substring(0,i),h;u.length<i+o?h=u.length:h=i+o;let p=u.substring(i,h),g=u.substring(h),_="("+c+")"+p,v=ve.parseFieldsInGeneralPurpose(g);return v==null?_:_+v}}ve.VARIABLE_LENGTH=[],ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ve.VARIABLE_LENGTH,20],["22",ve.VARIABLE_LENGTH,29],["30",ve.VARIABLE_LENGTH,8],["37",ve.VARIABLE_LENGTH,8],["90",ve.VARIABLE_LENGTH,30],["91",ve.VARIABLE_LENGTH,30],["92",ve.VARIABLE_LENGTH,30],["93",ve.VARIABLE_LENGTH,30],["94",ve.VARIABLE_LENGTH,30],["95",ve.VARIABLE_LENGTH,30],["96",ve.VARIABLE_LENGTH,30],["97",ve.VARIABLE_LENGTH,3],["98",ve.VARIABLE_LENGTH,30],["99",ve.VARIABLE_LENGTH,30]],ve.THREE_DIGIT_DATA_LENGTH=[["240",ve.VARIABLE_LENGTH,30],["241",ve.VARIABLE_LENGTH,30],["242",ve.VARIABLE_LENGTH,6],["250",ve.VARIABLE_LENGTH,30],["251",ve.VARIABLE_LENGTH,30],["253",ve.VARIABLE_LENGTH,17],["254",ve.VARIABLE_LENGTH,20],["400",ve.VARIABLE_LENGTH,30],["401",ve.VARIABLE_LENGTH,30],["402",17],["403",ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ve.VARIABLE_LENGTH,20],["421",ve.VARIABLE_LENGTH,15],["422",3],["423",ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ve.VARIABLE_LENGTH,15],["391",ve.VARIABLE_LENGTH,18],["392",ve.VARIABLE_LENGTH,15],["393",ve.VARIABLE_LENGTH,18],["703",ve.VARIABLE_LENGTH,30]],ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ve.VARIABLE_LENGTH,20],["8003",ve.VARIABLE_LENGTH,30],["8004",ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ve.VARIABLE_LENGTH,30],["8008",ve.VARIABLE_LENGTH,12],["8018",18],["8020",ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ve.VARIABLE_LENGTH,70],["8200",ve.VARIABLE_LENGTH,70]];class es{constructor(i){this.buffer=new Je,this.information=i}decodeAllCodes(i,o){let u=o,c=null;do{let h=this.decodeGeneralPurposeField(u,c),p=ve.parseFieldsInGeneralPurpose(h.getNewString());if(p!=null&&i.append(p),h.isRemaining()?c=""+h.getRemainingValue():c=null,u===h.getNewPosition())break;u=h.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(i,4);return h===0?new lr(this.information.getSize(),lr.FNC1,lr.FNC1):new lr(this.information.getSize(),h-1,lr.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),u=(o-8)/11,c=(o-8)%11;return new lr(i+7,u,c)}extractNumericValueFromBitArray(i,o){return es.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,u){let c=0;for(let h=0;h<u;++h)i.get(o+h)&&(c|=1<<u-h-1);return c}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new Se(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new Se(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let u=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(u!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new Se(this.current.getPosition(),this.buffer.toString()):o=new Se(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Ji(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new Se(this.current.getPosition(),this.buffer.toString());return new Ji(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ji(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Se(this.current.getPosition(),this.buffer.toString());return new Ji(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ji(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Se(this.current.getPosition(),this.buffer.toString());return new Ji(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ji(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,7);if(u>=64&&u<116)return!0;if(i+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,8);return c>=232&&c<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Dt(i+5,Dt.FNC1);if(o>=5&&o<15)return new Dt(i+5,"0"+(o-5));let u=this.extractNumericValueFromBitArray(i,7);if(u>=64&&u<90)return new Dt(i+7,""+(u+1));if(u>=90&&u<116)return new Dt(i+7,""+(u+7));let c=this.extractNumericValueFromBitArray(i,8),h;switch(c){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new Y}return new Dt(i+8,h)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,6);return u>=16&&u<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Dt(i+5,Dt.FNC1);if(o>=5&&o<15)return new Dt(i+5,"0"+(o-5));let u=this.extractNumericValueFromBitArray(i,6);if(u>=32&&u<58)return new Dt(i+6,""+(u+33));let c;switch(u){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Nr("Decoding invalid alphanumeric value: "+u)}return new Dt(i+6,c)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class Ia{constructor(i){this.information=i,this.generalDecoder=new es(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class An extends Ia{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let u=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,u)}encodeCompressedGtinWithoutAI(i,o,u){for(let c=0;c<4;++c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*c,10);h/100===0&&i.append("0"),h/10===0&&i.append("0"),i.append(h)}An.appendCheckDigit(i,u)}static appendCheckDigit(i,o){let u=0;for(let c=0;c<13;c++){let h=i.charAt(c+o).charCodeAt(0)-"0".charCodeAt(0);u+=c&1?h:3*h}u=10-u%10,u===10&&(u=0),i.append(u)}}An.GTIN_SIZE=40;class ts extends An{constructor(i){super(i)}parseInformation(){let i=new Je;i.append("(01)");let o=i.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(ts.HEADER_SIZE,4);return i.append(u),this.encodeCompressedGtinWithoutAI(i,ts.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,ts.HEADER_SIZE+44)}}ts.HEADER_SIZE=1+1+2;class ci extends Ia{constructor(i){super(i)}parseInformation(){let i=new Je;return this.getGeneralDecoder().decodeAllCodes(i,ci.HEADER_SIZE)}}ci.HEADER_SIZE=2+1+2;class ko extends An{constructor(i){super(i)}encodeCompressedWeight(i,o,u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,u);this.addWeightCode(i,c);let h=this.checkWeight(c),p=1e5;for(let g=0;g<5;++g)h/p===0&&i.append("0"),p/=10;i.append(h)}}class $r extends ko{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=$r.HEADER_SIZE+ko.GTIN_SIZE+$r.WEIGHT_SIZE)throw new ee;let i=new Je;return this.encodeCompressedGtin(i,$r.HEADER_SIZE),this.encodeCompressedWeight(i,$r.HEADER_SIZE+ko.GTIN_SIZE,$r.WEIGHT_SIZE),i.toString()}}$r.HEADER_SIZE=4+1,$r.WEIGHT_SIZE=15;class r0 extends $r{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class i0 extends $r{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Xr extends An{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Xr.HEADER_SIZE+An.GTIN_SIZE)throw new ee;let i=new Je;this.encodeCompressedGtin(i,Xr.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Xr.HEADER_SIZE+An.GTIN_SIZE,Xr.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(Xr.HEADER_SIZE+An.GTIN_SIZE+Xr.LAST_DIGIT_SIZE,null);return i.append(u.getNewString()),i.toString()}}Xr.HEADER_SIZE=5+1+2,Xr.LAST_DIGIT_SIZE=2;class Tn extends An{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Tn.HEADER_SIZE+An.GTIN_SIZE)throw new ee;let i=new Je;this.encodeCompressedGtin(i,Tn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Tn.HEADER_SIZE+An.GTIN_SIZE,Tn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Tn.HEADER_SIZE+An.GTIN_SIZE+Tn.LAST_DIGIT_SIZE,Tn.FIRST_THREE_DIGITS_SIZE);u/100==0&&i.append("0"),u/10==0&&i.append("0"),i.append(u);let c=this.getGeneralDecoder().decodeGeneralPurposeField(Tn.HEADER_SIZE+An.GTIN_SIZE+Tn.LAST_DIGIT_SIZE+Tn.FIRST_THREE_DIGITS_SIZE,null);return i.append(c.getNewString()),i.toString()}}Tn.HEADER_SIZE=5+1+2,Tn.LAST_DIGIT_SIZE=2,Tn.FIRST_THREE_DIGITS_SIZE=10;class Nt extends ko{constructor(i,o,u){super(i),this.dateCode=u,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE+Nt.DATE_SIZE)throw new ee;let i=new Je;return this.encodeCompressedGtin(i,Nt.HEADER_SIZE),this.encodeCompressedWeight(i,Nt.HEADER_SIZE+Nt.GTIN_SIZE,Nt.WEIGHT_SIZE),this.encodeCompressedDate(i,Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Nt.DATE_SIZE);if(u==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let c=u%32;u/=32;let h=u%12+1;u/=12;let p=u;p/10==0&&i.append("0"),i.append(p),h/10==0&&i.append("0"),i.append(h),c/10==0&&i.append("0"),i.append(c)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}Nt.HEADER_SIZE=7+1,Nt.WEIGHT_SIZE=20,Nt.DATE_SIZE=16;function Do(S){try{if(S.get(1))return new ts(S);if(!S.get(2))return new ci(S);switch(es.extractNumericValueFromBitArray(S,1,4)){case 4:return new r0(S);case 5:return new i0(S)}switch(es.extractNumericValueFromBitArray(S,1,5)){case 12:return new Xr(S);case 13:return new Tn(S)}switch(es.extractNumericValueFromBitArray(S,1,7)){case 56:return new Nt(S,"310","11");case 57:return new Nt(S,"320","11");case 58:return new Nt(S,"310","13");case 59:return new Nt(S,"320","13");case 60:return new Nt(S,"310","15");case 61:return new Nt(S,"320","15");case 62:return new Nt(S,"310","17");case 63:return new Nt(S,"320","17")}}catch(i){throw console.log(i),new Nr("unknown decoder: "+S)}}class Ni{constructor(i,o,u,c){this.leftchar=i,this.rightchar=o,this.finderpattern=u,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof Ni?Ni.equalsOrNull(i.leftchar,o.leftchar)&&Ni.equalsOrNull(i.rightchar,o.rightchar)&&Ni.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:Ni.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Gl{constructor(i,o,u){this.pairs=i,this.rowNumber=o,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof Gl?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let u;return i.forEach((c,h)=>{o.forEach(p=>{c.getLeftChar().getValue()===p.getLeftChar().getValue()&&c.getRightChar().getValue()===p.getRightChar().getValue()&&c.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(u=!0)})}),u}}class re extends En{constructor(i){super(...arguments),this.pairs=new Array(re.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,u){this.pairs.length=0,this.startFromEven=!1;try{return re.constructResult(this.decodeRow2pairs(i,o))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,re.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(h){if(h instanceof ee){if(!this.pairs.length)throw new ee;u=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(i,!1),c){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new ee}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let u=o;u<this.rows.length;u++){let c=this.rows[u];this.pairs.length=0;for(let p of i)this.pairs.push(p.getPairs());if(this.pairs.push(c.getPairs()),!re.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(i);h.push(c);try{return this.checkRows(h,u+1)}catch(p){this.verbose&&console.log(p)}}throw new ee}static isValidSequence(i){for(let o of re.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let u=!0;for(let c=0;c<i.length;c++)if(i[c].getFinderPattern().getValue()!=o[c]){u=!1;break}if(u)return!0}return!1}storeRow(i,o){let u=0,c=!1,h=!1;for(;u<this.rows.length;){let p=this.rows[u];if(p.getRowNumber()>i){h=p.isEquivalent(this.pairs);break}c=p.isEquivalent(this.pairs),u++}h||c||re.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Gl(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let u of o)if(u.getPairs().length!==i.length){for(let c of u.getPairs())for(let h of i)if(Ni.equals(c,h))break}}static isPartialRow(i,o){for(let u of o){let c=!0;for(let h of i){let p=!1;for(let g of u.getPairs())if(h.equals(g)){p=!0;break}if(!p){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=n0.buildBitArray(i),c=Do(o).parseInformation(),h=i[0].getFinderPattern().getResultPoints(),p=i[i.length-1].getFinderPattern().getResultPoints(),g=[h[0],h[1],p[0],p[1]];return new je(c,null,null,g,ue.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),u=i.getRightChar();if(u==null)return!1;let c=u.getChecksumPortion(),h=2;for(let g=1;g<this.pairs.size();++g){let _=this.pairs.get(g);c+=_.getLeftChar().getChecksumPortion(),h++;let v=_.getRightChar();v!=null&&(c+=v.getChecksumPortion(),h++)}return c%=211,211*(h-4)+c==o.getValue()}static getNextSecondBar(i,o){let u;return i.get(o)?(u=i.getNextUnset(o),u=i.getNextSet(u)):(u=i.getNextSet(o),u=i.getNextUnset(u)),u}retrieveNextPair(i,o,u){let c=o.length%2==0;this.startFromEven&&(c=!c);let h,p=!0,g=-1;do this.findNextPair(i,o,g),h=this.parseFoundFinderPattern(i,u,c),h==null?g=re.getNextSecondBar(i,this.startEnd[0]):p=!1;while(p);let _=this.decodeDataCharacter(i,h,c,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ee;let v;try{v=this.decodeDataCharacter(i,h,c,!1)}catch(A){v=null,this.verbose&&console.log(A)}return new Ni(_,v,h,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,u){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),p;u>=0?p=u:this.isEmptyPair(o)?p=0:p=o[o.length-1].getFinderPattern().getStartEnd()[1];let g=o.length%2!=0;this.startFromEven&&(g=!g);let _=!1;for(;p<h&&(_=!i.get(p),!!_);)p++;let v=0,A=p;for(let b=p;b<h;b++)if(i.get(b)!=_)c[v]++;else{if(v==3){if(g&&re.reverseCounters(c),re.isFinderPattern(c)){this.startEnd[0]=A,this.startEnd[1]=b;return}g&&re.reverseCounters(c),A+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,v--}else v++;c[v]=1,_=!_}throw new ee}static reverseCounters(i){let o=i.length;for(let u=0;u<o/2;++u){let c=i[u];i[u]=i[o-u-1],i[o-u-1]=c}}parseFoundFinderPattern(i,o,u){let c,h,p;if(u){let v=this.startEnd[0]-1;for(;v>=0&&!i.get(v);)v--;v++,c=this.startEnd[0]-v,h=v,p=this.startEnd[1]}else h=this.startEnd[0],p=i.getNextUnset(this.startEnd[1]+1),c=p-this.startEnd[1];let g=this.getDecodeFinderCounters();j.arraycopy(g,0,g,1,g.length-1),g[0]=c;let _;try{_=this.parseFinderValue(g,re.FINDER_PATTERNS)}catch{return null}return new Ms(_,[h,p],h,p,o)}decodeDataCharacter(i,o,u,c){let h=this.getDataCharacterCounters();for(let pt=0;pt<h.length;pt++)h[pt]=0;if(c)re.recordPatternInReverse(i,o.getStartEnd()[0],h);else{re.recordPattern(i,o.getStartEnd()[1],h);for(let pt=0,_n=h.length-1;pt<_n;pt++,_n--){let Yn=h[pt];h[pt]=h[_n],h[_n]=Yn}}let p=17,g=st.sum(new Int32Array(h))/p,_=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(g-_)/_>.3)throw new ee;let v=this.getOddCounts(),A=this.getEvenCounts(),b=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let pt=0;pt<h.length;pt++){let _n=1*h[pt]/g,Yn=_n+.5;if(Yn<1){if(_n<.3)throw new ee;Yn=1}else if(Yn>8){if(_n>8.7)throw new ee;Yn=8}let zs=pt/2;pt&1?(A[zs]=Yn,R[zs]=_n-Yn):(v[zs]=Yn,b[zs]=_n-Yn)}this.adjustOddEvenCounts(p);let k=4*o.getValue()+(u?0:2)+(c?0:1)-1,z=0,H=0;for(let pt=v.length-1;pt>=0;pt--){if(re.isNotA1left(o,u,c)){let _n=re.WEIGHTS[k][2*pt];H+=v[pt]*_n}z+=v[pt]}let Z=0;for(let pt=A.length-1;pt>=0;pt--)if(re.isNotA1left(o,u,c)){let _n=re.WEIGHTS[k][2*pt+1];Z+=A[pt]*_n}let q=H+Z;if(z&1||z>13||z<4)throw new ee;let ce=(13-z)/2,de=re.SYMBOL_WIDEST[ce],oe=9-de,Ye=Zr.getRSSvalue(v,de,!0),We=Zr.getRSSvalue(A,oe,!1),Bt=re.EVEN_TOTAL_SUBSET[ce],$n=re.GSUM[ce],Xn=Ye*Bt+We+$n;return new Os(Xn,q)}static isNotA1left(i,o,u){return!(i.getValue()==0&&o&&u)}adjustOddEvenCounts(i){let o=st.sum(new Int32Array(this.getOddCounts())),u=st.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1;o>13?h=!0:o<4&&(c=!0);let p=!1,g=!1;u>13?g=!0:u<4&&(p=!0);let _=o+u-i,v=(o&1)==1,A=(u&1)==0;if(_==1)if(v){if(A)throw new ee;h=!0}else{if(!A)throw new ee;g=!0}else if(_==-1)if(v){if(A)throw new ee;c=!0}else{if(!A)throw new ee;p=!0}else if(_==0){if(v){if(!A)throw new ee;o<u?(c=!0,g=!0):(h=!0,p=!0)}else if(A)throw new ee}else throw new ee;if(c){if(h)throw new ee;re.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&re.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(g)throw new ee;re.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&re.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}re.SYMBOL_WIDEST=[7,5,4,3,1],re.EVEN_TOTAL_SUBSET=[4,20,52,104,204],re.GSUM=[0,348,1388,2948,3988],re.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],re.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],re.FINDER_PAT_A=0,re.FINDER_PAT_B=1,re.FINDER_PAT_C=2,re.FINDER_PAT_D=3,re.FINDER_PAT_E=4,re.FINDER_PAT_F=5,re.FINDER_PATTERN_SEQUENCES=[[re.FINDER_PAT_A,re.FINDER_PAT_A],[re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B],[re.FINDER_PAT_A,re.FINDER_PAT_C,re.FINDER_PAT_B,re.FINDER_PAT_D],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_C],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_D,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_D],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_E],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F]],re.MAX_PAIRS=11;class s0 extends Os{constructor(i,o,u){super(i,o),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Wt extends En{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,u){const c=this.decodePair(o,!1,i,u);Wt.addOrTally(this.possibleLeftPairs,c),o.reverse();let h=this.decodePair(o,!0,i,u);Wt.addOrTally(this.possibleRightPairs,h),o.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&Wt.checkChecksum(p,g))return Wt.constructResult(p,g)}throw new ee}static addOrTally(i,o){if(o==null)return;let u=!1;for(let c of i)if(c.getValue()===o.getValue()){c.incrementCount(),u=!0;break}u||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let u=4537077*i.getValue()+o.getValue(),c=new String(u).toString(),h=new Je;for(let v=13-c.length;v>0;v--)h.append("0");h.append(c);let p=0;for(let v=0;v<13;v++){let A=h.charAt(v).charCodeAt(0)-"0".charCodeAt(0);p+=v&1?A:3*A}p=10-p%10,p===10&&(p=0),h.append(p.toString());let g=i.getFinderPattern().getResultPoints(),_=o.getFinderPattern().getResultPoints();return new je(h.toString(),null,0,[g[0],g[1],_[0],_[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(i,o){let u=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,c=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,u===c}decodePair(i,o,u,c){try{let h=this.findFinderPattern(i,o),p=this.parseFoundFinderPattern(i,u,o,h),g=c==null?null:c.get(ie.NEED_RESULT_POINT_CALLBACK);if(g!=null){let A=(h[0]+h[1])/2;o&&(A=i.getSize()-1-A),g.foundPossibleResultPoint(new Ie(A,u))}let _=this.decodeDataCharacter(i,p,!0),v=this.decodeDataCharacter(i,p,!1);return new s0(1597*_.getValue()+v.getValue(),_.getChecksumPortion()+4*v.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(i,o,u){let c=this.getDataCharacterCounters();for(let Z=0;Z<c.length;Z++)c[Z]=0;if(u)Zt.recordPatternInReverse(i,o.getStartEnd()[0],c);else{Zt.recordPattern(i,o.getStartEnd()[1]+1,c);for(let Z=0,q=c.length-1;Z<q;Z++,q--){let ce=c[Z];c[Z]=c[q],c[q]=ce}}let h=u?16:15,p=st.sum(new Int32Array(c))/h,g=this.getOddCounts(),_=this.getEvenCounts(),v=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let Z=0;Z<c.length;Z++){let q=c[Z]/p,ce=Math.floor(q+.5);ce<1?ce=1:ce>8&&(ce=8);let de=Math.floor(Z/2);Z&1?(_[de]=ce,A[de]=q-ce):(g[de]=ce,v[de]=q-ce)}this.adjustOddEvenCounts(u,h);let b=0,R=0;for(let Z=g.length-1;Z>=0;Z--)R*=9,R+=g[Z],b+=g[Z];let k=0,z=0;for(let Z=_.length-1;Z>=0;Z--)k*=9,k+=_[Z],z+=_[Z];let H=R+3*k;if(u){if(b&1||b>12||b<4)throw new ee;let Z=(12-b)/2,q=Wt.OUTSIDE_ODD_WIDEST[Z],ce=9-q,de=Zr.getRSSvalue(g,q,!1),oe=Zr.getRSSvalue(_,ce,!0),Ye=Wt.OUTSIDE_EVEN_TOTAL_SUBSET[Z],We=Wt.OUTSIDE_GSUM[Z];return new Os(de*Ye+oe+We,H)}else{if(z&1||z>10||z<4)throw new ee;let Z=(10-z)/2,q=Wt.INSIDE_ODD_WIDEST[Z],ce=9-q,de=Zr.getRSSvalue(g,q,!0),oe=Zr.getRSSvalue(_,ce,!1),Ye=Wt.INSIDE_ODD_TOTAL_SUBSET[Z],We=Wt.INSIDE_GSUM[Z];return new Os(oe*Ye+de+We,H)}}findFinderPattern(i,o){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=i.getSize(),h=!1,p=0;for(;p<c&&(h=!i.get(p),o!==h);)p++;let g=0,_=p;for(let v=p;v<c;v++)if(i.get(v)!==h)u[g]++;else{if(g===3){if(En.isFinderPattern(u))return[_,v];_+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,g--}else g++;u[g]=1,h=!h}throw new ee}parseFoundFinderPattern(i,o,u,c){let h=i.get(c[0]),p=c[0]-1;for(;p>=0&&h!==i.get(p);)p--;p++;const g=c[0]-p,_=this.getDecodeFinderCounters(),v=new Int32Array(_.length);j.arraycopy(_,0,v,1,_.length-1),v[0]=g;const A=this.parseFinderValue(v,Wt.FINDER_PATTERNS);let b=p,R=c[1];return u&&(b=i.getSize()-1-b,R=i.getSize()-1-R),new Ms(A,[p,c[1]],b,R,o)}adjustOddEvenCounts(i,o){let u=st.sum(new Int32Array(this.getOddCounts())),c=st.sum(new Int32Array(this.getEvenCounts())),h=!1,p=!1,g=!1,_=!1;i?(u>12?p=!0:u<4&&(h=!0),c>12?_=!0:c<4&&(g=!0)):(u>11?p=!0:u<5&&(h=!0),c>10?_=!0:c<4&&(g=!0));let v=u+c-o,A=(u&1)===(i?1:0),b=(c&1)===1;if(v===1)if(A){if(b)throw new ee;p=!0}else{if(!b)throw new ee;_=!0}else if(v===-1)if(A){if(b)throw new ee;h=!0}else{if(!b)throw new ee;g=!0}else if(v===0){if(A){if(!b)throw new ee;u<c?(h=!0,_=!0):(p=!0,g=!0)}else if(b)throw new ee}else throw new ee;if(h){if(p)throw new ee;En.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&En.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(_)throw new ee;En.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&En.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Wt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Wt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Wt.OUTSIDE_GSUM=[0,161,961,2015,2715],Wt.INSIDE_GSUM=[0,336,1036,1516],Wt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Wt.INSIDE_ODD_WIDEST=[2,4,6,8],Wt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Pi extends Zt{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const u=i?i.get(ie.POSSIBLE_FORMATS):null,c=i&&i.get(ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(ue.EAN_13)||u.includes(ue.UPC_A)||u.includes(ue.EAN_8)||u.includes(ue.UPC_E))&&this.readers.push(new Hl(i)),u.includes(ue.CODE_39)&&this.readers.push(new Jt(c)),u.includes(ue.CODE_128)&&this.readers.push(new _e),u.includes(ue.ITF)&&this.readers.push(new xt),u.includes(ue.RSS_14)&&this.readers.push(new Wt),u.includes(ue.RSS_EXPANDED)&&this.readers.push(new re(this.verbose))):(this.readers.push(new Hl(i)),this.readers.push(new Jt),this.readers.push(new Hl(i)),this.readers.push(new _e),this.readers.push(new xt),this.readers.push(new Wt),this.readers.push(new re(this.verbose)))}decodeRow(i,o,u){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(i,o,u)}catch{}throw new ee}reset(){this.readers.forEach(i=>i.reset())}}class Lo extends It{constructor(i=500,o){super(new Pi(o),i,o)}}class dt{constructor(i,o,u){this.ecCodewords=i,this.ecBlocks=[o],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ct{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(i,o,u,c,h,p){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=u,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=h,this.ecBlocks=p;let g=0;const _=p.getECCodewords(),v=p.getECBlocks();for(let A of v)g+=A.getCount()*(A.getDataCodewords()+_);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if(i&1||o&1)throw new Y;for(let u of $e.VERSIONS)if(u.symbolSizeRows===i&&u.symbolSizeColumns===o)return u;throw new Y}toString(){return""+this.versionNumber}static buildVersions(){return[new $e(1,10,10,8,8,new dt(5,new ct(1,3))),new $e(2,12,12,10,10,new dt(7,new ct(1,5))),new $e(3,14,14,12,12,new dt(10,new ct(1,8))),new $e(4,16,16,14,14,new dt(12,new ct(1,12))),new $e(5,18,18,16,16,new dt(14,new ct(1,18))),new $e(6,20,20,18,18,new dt(18,new ct(1,22))),new $e(7,22,22,20,20,new dt(20,new ct(1,30))),new $e(8,24,24,22,22,new dt(24,new ct(1,36))),new $e(9,26,26,24,24,new dt(28,new ct(1,44))),new $e(10,32,32,14,14,new dt(36,new ct(1,62))),new $e(11,36,36,16,16,new dt(42,new ct(1,86))),new $e(12,40,40,18,18,new dt(48,new ct(1,114))),new $e(13,44,44,20,20,new dt(56,new ct(1,144))),new $e(14,48,48,22,22,new dt(68,new ct(1,174))),new $e(15,52,52,24,24,new dt(42,new ct(2,102))),new $e(16,64,64,14,14,new dt(56,new ct(2,140))),new $e(17,72,72,16,16,new dt(36,new ct(4,92))),new $e(18,80,80,18,18,new dt(48,new ct(4,114))),new $e(19,88,88,20,20,new dt(56,new ct(4,144))),new $e(20,96,96,22,22,new dt(68,new ct(4,174))),new $e(21,104,104,24,24,new dt(56,new ct(6,136))),new $e(22,120,120,18,18,new dt(68,new ct(6,175))),new $e(23,132,132,20,20,new dt(62,new ct(8,163))),new $e(24,144,144,22,22,new dt(62,new ct(8,156),new ct(2,155))),new $e(25,8,18,6,16,new dt(7,new ct(1,5))),new $e(26,8,32,6,14,new dt(11,new ct(1,10))),new $e(27,12,26,10,24,new dt(14,new ct(1,16))),new $e(28,12,36,10,16,new dt(18,new ct(1,22))),new $e(29,16,36,14,16,new dt(24,new ct(1,32))),new $e(30,16,48,14,22,new dt(28,new ct(1,49)))]}}$e.VERSIONS=$e.buildVersions();class nt{constructor(i){const o=i.getHeight();if(o<8||o>144||o&1)throw new Y;this.version=nt.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new gt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),u=i.getWidth();return $e.getVersionForDimensions(o,u)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,u=4,c=0;const h=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let g=!1,_=!1,v=!1,A=!1;do if(u===h&&c===0&&!g)i[o++]=this.readCorner1(h,p)&255,u-=2,c+=2,g=!0;else if(u===h-2&&c===0&&p&3&&!_)i[o++]=this.readCorner2(h,p)&255,u-=2,c+=2,_=!0;else if(u===h+4&&c===2&&!(p&7)&&!v)i[o++]=this.readCorner3(h,p)&255,u-=2,c+=2,v=!0;else if(u===h-2&&c===0&&(p&7)===4&&!A)i[o++]=this.readCorner4(h,p)&255,u-=2,c+=2,A=!0;else{do u<h&&c>=0&&!this.readMappingMatrix.get(c,u)&&(i[o++]=this.readUtah(u,c,h,p)&255),u-=2,c+=2;while(u>=0&&c<p);u+=1,c+=3;do u>=0&&c<p&&!this.readMappingMatrix.get(c,u)&&(i[o++]=this.readUtah(u,c,h,p)&255),u+=2,c-=2;while(u<h&&c>=0);u+=3,c+=1}while(u<h||c<p);if(o!==this.version.getTotalCodewords())throw new Y;return i}readModule(i,o,u,c){return i<0&&(i+=u,o+=4-(u+4&7)),o<0&&(o+=c,i+=4-(c+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,u,c){let h=0;return this.readModule(i-2,o-2,u,c)&&(h|=1),h<<=1,this.readModule(i-2,o-1,u,c)&&(h|=1),h<<=1,this.readModule(i-1,o-2,u,c)&&(h|=1),h<<=1,this.readModule(i-1,o-1,u,c)&&(h|=1),h<<=1,this.readModule(i-1,o,u,c)&&(h|=1),h<<=1,this.readModule(i,o-2,u,c)&&(h|=1),h<<=1,this.readModule(i,o-1,u,c)&&(h|=1),h<<=1,this.readModule(i,o,u,c)&&(h|=1),h}readCorner1(i,o){let u=0;return this.readModule(i-1,0,i,o)&&(u|=1),u<<=1,this.readModule(i-1,1,i,o)&&(u|=1),u<<=1,this.readModule(i-1,2,i,o)&&(u|=1),u<<=1,this.readModule(0,o-2,i,o)&&(u|=1),u<<=1,this.readModule(0,o-1,i,o)&&(u|=1),u<<=1,this.readModule(1,o-1,i,o)&&(u|=1),u<<=1,this.readModule(2,o-1,i,o)&&(u|=1),u<<=1,this.readModule(3,o-1,i,o)&&(u|=1),u}readCorner2(i,o){let u=0;return this.readModule(i-3,0,i,o)&&(u|=1),u<<=1,this.readModule(i-2,0,i,o)&&(u|=1),u<<=1,this.readModule(i-1,0,i,o)&&(u|=1),u<<=1,this.readModule(0,o-4,i,o)&&(u|=1),u<<=1,this.readModule(0,o-3,i,o)&&(u|=1),u<<=1,this.readModule(0,o-2,i,o)&&(u|=1),u<<=1,this.readModule(0,o-1,i,o)&&(u|=1),u<<=1,this.readModule(1,o-1,i,o)&&(u|=1),u}readCorner3(i,o){let u=0;return this.readModule(i-1,0,i,o)&&(u|=1),u<<=1,this.readModule(i-1,o-1,i,o)&&(u|=1),u<<=1,this.readModule(0,o-3,i,o)&&(u|=1),u<<=1,this.readModule(0,o-2,i,o)&&(u|=1),u<<=1,this.readModule(0,o-1,i,o)&&(u|=1),u<<=1,this.readModule(1,o-3,i,o)&&(u|=1),u<<=1,this.readModule(1,o-2,i,o)&&(u|=1),u<<=1,this.readModule(1,o-1,i,o)&&(u|=1),u}readCorner4(i,o){let u=0;return this.readModule(i-3,0,i,o)&&(u|=1),u<<=1,this.readModule(i-2,0,i,o)&&(u|=1),u<<=1,this.readModule(i-1,0,i,o)&&(u|=1),u<<=1,this.readModule(0,o-2,i,o)&&(u|=1),u<<=1,this.readModule(0,o-1,i,o)&&(u|=1),u<<=1,this.readModule(1,o-1,i,o)&&(u|=1),u<<=1,this.readModule(2,o-1,i,o)&&(u|=1),u<<=1,this.readModule(3,o-1,i,o)&&(u|=1),u}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new I("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),p=o/c|0,g=u/h|0,_=p*c,v=g*h,A=new gt(v,_);for(let b=0;b<p;++b){const R=b*c;for(let k=0;k<g;++k){const z=k*h;for(let H=0;H<c;++H){const Z=b*(c+2)+1+H,q=R+H;for(let ce=0;ce<h;++ce){const de=k*(h+2)+1+ce;if(i.get(de,Z)){const oe=z+ce;A.set(oe,q)}}}}}return A}}class bt{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const u=o.getECBlocks();let c=0;const h=u.getECBlocks();for(let H of h)c+=H.getCount();const p=new Array(c);let g=0;for(let H of h)for(let Z=0;Z<H.getCount();Z++){const q=H.getDataCodewords(),ce=u.getECCodewords()+q;p[g++]=new bt(q,new Uint8Array(ce))}const v=p[0].codewords.length-u.getECCodewords(),A=v-1;let b=0;for(let H=0;H<A;H++)for(let Z=0;Z<g;Z++)p[Z].codewords[H]=i[b++];const R=o.getVersionNumber()===24,k=R?8:g;for(let H=0;H<k;H++)p[H].codewords[v-1]=i[b++];const z=p[0].codewords.length;for(let H=v;H<z;H++)for(let Z=0;Z<g;Z++){const q=R?(Z+8)%g:Z,ce=R&&q>7?H-1:H;p[q].codewords[ce]=i[b++]}if(b!==i.length)throw new I;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ks{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new I(""+i);let o=0,u=this.bitOffset,c=this.byteOffset;const h=this.bytes;if(u>0){const p=8-u,g=i<p?i:p,_=p-g,v=255>>8-g<<_;o=(h[c]&v)>>_,i-=g,u+=g,u===8&&(u=0,c++)}if(i>0){for(;i>=8;)o=o<<8|h[c]&255,c++,i-=8;if(i>0){const p=8-i,g=255>>p<<p;o=o<<i|(h[c]&g)>>p,u+=i}}return this.bitOffset=u,this.byteOffset=c,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Pt;(function(S){S[S.PAD_ENCODE=0]="PAD_ENCODE",S[S.ASCII_ENCODE=1]="ASCII_ENCODE",S[S.C40_ENCODE=2]="C40_ENCODE",S[S.TEXT_ENCODE=3]="TEXT_ENCODE",S[S.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",S[S.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",S[S.BASE256_ENCODE=6]="BASE256_ENCODE"})(Pt||(Pt={}));class ur{static decode(i){const o=new ks(i),u=new Je,c=new Je,h=new Array;let p=Pt.ASCII_ENCODE;do if(p===Pt.ASCII_ENCODE)p=this.decodeAsciiSegment(o,u,c);else{switch(p){case Pt.C40_ENCODE:this.decodeC40Segment(o,u);break;case Pt.TEXT_ENCODE:this.decodeTextSegment(o,u);break;case Pt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,u);break;case Pt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,u);break;case Pt.BASE256_ENCODE:this.decodeBase256Segment(o,u,h);break;default:throw new Y}p=Pt.ASCII_ENCODE}while(p!==Pt.PAD_ENCODE&&o.available()>0);return c.length()>0&&u.append(c.toString()),new Rs(i,u.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(i,o,u){let c=!1;do{let h=i.readBits(8);if(h===0)throw new Y;if(h<=128)return c&&(h+=128),o.append(String.fromCharCode(h-1)),Pt.ASCII_ENCODE;if(h===129)return Pt.PAD_ENCODE;if(h<=229){const p=h-130;p<10&&o.append("0"),o.append(""+p)}else switch(h){case 230:return Pt.C40_ENCODE;case 231:return Pt.BASE256_ENCODE;case 232:o.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:c=!0;break;case 236:o.append("[)>05"),u.insert(0,"");break;case 237:o.append("[)>06"),u.insert(0,"");break;case 238:return Pt.ANSIX12_ENCODE;case 239:return Pt.TEXT_ENCODE;case 240:return Pt.EDIFACT_ENCODE;case 241:break;default:if(h!==254||i.available()!==0)throw new Y;break}}while(i.available()>0);return Pt.ASCII_ENCODE}static decodeC40Segment(i,o){let u=!1;const c=[];let h=0;do{if(i.available()===8)return;const p=i.readBits(8);if(p===254)return;this.parseTwoBytes(p,i.readBits(8),c);for(let g=0;g<3;g++){const _=c[g];switch(h){case 0:if(_<3)h=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[_];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v)}else throw new Y;break;case 1:u?(o.append(String.fromCharCode(_+128)),u=!1):o.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[_];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v)}else switch(_){case 27:o.append(String.fromCharCode(29));break;case 30:u=!0;break;default:throw new Y}h=0;break;case 3:u?(o.append(String.fromCharCode(_+224)),u=!1):o.append(String.fromCharCode(_+96)),h=0;break;default:throw new Y}}}while(i.available()>0)}static decodeTextSegment(i,o){let u=!1,c=[],h=0;do{if(i.available()===8)return;const p=i.readBits(8);if(p===254)return;this.parseTwoBytes(p,i.readBits(8),c);for(let g=0;g<3;g++){const _=c[g];switch(h){case 0:if(_<3)h=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[_];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v)}else throw new Y;break;case 1:u?(o.append(String.fromCharCode(_+128)),u=!1):o.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[_];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v)}else switch(_){case 27:o.append(String.fromCharCode(29));break;case 30:u=!0;break;default:throw new Y}h=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[_];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v),h=0}else throw new Y;break;default:throw new Y}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const u=[];do{if(i.available()===8)return;const c=i.readBits(8);if(c===254)return;this.parseTwoBytes(c,i.readBits(8),u);for(let h=0;h<3;h++){const p=u[h];switch(p){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(p<14)o.append(String.fromCharCode(p+44));else if(p<40)o.append(String.fromCharCode(p+51));else throw new Y;break}}}while(i.available()>0)}static parseTwoBytes(i,o,u){let c=(i<<8)+o-1,h=Math.floor(c/1600);u[0]=h,c-=h*1600,h=Math.floor(c/40),u[1]=h,u[2]=c-h*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let u=0;u<4;u++){let c=i.readBits(6);if(c===31){const h=8-i.getBitOffset();h!==8&&i.readBits(h);return}c&32||(c|=64),o.append(String.fromCharCode(c))}}while(i.available()>0)}static decodeBase256Segment(i,o,u){let c=1+i.getByteOffset();const h=this.unrandomize255State(i.readBits(8),c++);let p;if(h===0?p=i.available()/8|0:h<250?p=h:p=250*(h-249)+this.unrandomize255State(i.readBits(8),c++),p<0)throw new Y;const g=new Uint8Array(p);for(let _=0;_<p;_++){if(i.available()<8)throw new Y;g[_]=this.unrandomize255State(i.readBits(8),c++)}u.push(g);try{o.append(Ze.decode(g,Ce.ISO88591))}catch(_){throw new Nr("Platform does not support required encoding: "+_.message)}}static unrandomize255State(i,o){const u=149*o%255+1,c=i-u;return c>=0?c:c+256}}ur.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ur.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ur.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ur.TEXT_SHIFT2_SET_CHARS=ur.C40_SHIFT2_SET_CHARS,ur.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Zl{constructor(){this.rsDecoder=new Ps(it.DATA_MATRIX_FIELD_256)}decode(i){const o=new nt(i),u=o.getVersion(),c=o.readCodewords(),h=bt.getDataBlocks(c,u);let p=0;for(let v of h)p+=v.getNumDataCodewords();const g=new Uint8Array(p),_=h.length;for(let v=0;v<_;v++){const A=h[v],b=A.getCodewords(),R=A.getNumDataCodewords();this.correctErrors(b,R);for(let k=0;k<R;k++)g[k*_+v]=b[k]}return ur.decode(g)}correctErrors(i,o){const u=new Int32Array(i);try{this.rsDecoder.decode(u,i.length-o)}catch{throw new V}for(let c=0;c<o;c++)i[c]=u[c]}}class be{constructor(i){this.image=i,this.rectangleDetector=new li(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ee;o=this.shiftToModuleCenter(o);const u=o[0],c=o[1],h=o[2],p=o[3];let g=this.transitionsBetween(u,p)+1,_=this.transitionsBetween(h,p)+1;(g&1)===1&&(g+=1),(_&1)===1&&(_+=1),4*g<7*_&&4*_<7*g&&(g=_=Math.max(g,_));let v=be.sampleGrid(this.image,u,c,h,p,g,_);return new Po(v,[u,c,h,p])}static shiftPoint(i,o,u){let c=(o.getX()-i.getX())/(u+1),h=(o.getY()-i.getY())/(u+1);return new Ie(i.getX()+c,i.getY()+h)}static moveAway(i,o,u){let c=i.getX(),h=i.getY();return c<o?c-=1:c+=1,h<u?h-=1:h+=1,new Ie(c,h)}detectSolid1(i){let o=i[0],u=i[1],c=i[3],h=i[2],p=this.transitionsBetween(o,u),g=this.transitionsBetween(u,c),_=this.transitionsBetween(c,h),v=this.transitionsBetween(h,o),A=p,b=[h,o,u,c];return A>g&&(A=g,b[0]=o,b[1]=u,b[2]=c,b[3]=h),A>_&&(A=_,b[0]=u,b[1]=c,b[2]=h,b[3]=o),A>v&&(b[0]=c,b[1]=h,b[2]=o,b[3]=u),b}detectSolid2(i){let o=i[0],u=i[1],c=i[2],h=i[3],p=this.transitionsBetween(o,h),g=be.shiftPoint(u,c,(p+1)*4),_=be.shiftPoint(c,u,(p+1)*4),v=this.transitionsBetween(g,o),A=this.transitionsBetween(_,h);return v<A?(i[0]=o,i[1]=u,i[2]=c,i[3]=h):(i[0]=u,i[1]=c,i[2]=h,i[3]=o),i}correctTopRight(i){let o=i[0],u=i[1],c=i[2],h=i[3],p=this.transitionsBetween(o,h),g=this.transitionsBetween(u,h),_=be.shiftPoint(o,u,(g+1)*4),v=be.shiftPoint(c,u,(p+1)*4);p=this.transitionsBetween(_,h),g=this.transitionsBetween(v,h);let A=new Ie(h.getX()+(c.getX()-u.getX())/(p+1),h.getY()+(c.getY()-u.getY())/(p+1)),b=new Ie(h.getX()+(o.getX()-u.getX())/(g+1),h.getY()+(o.getY()-u.getY())/(g+1));if(!this.isValid(A))return this.isValid(b)?b:null;if(!this.isValid(b))return A;let R=this.transitionsBetween(_,A)+this.transitionsBetween(v,A),k=this.transitionsBetween(_,b)+this.transitionsBetween(v,b);return R>k?A:b}shiftToModuleCenter(i){let o=i[0],u=i[1],c=i[2],h=i[3],p=this.transitionsBetween(o,h)+1,g=this.transitionsBetween(c,h)+1,_=be.shiftPoint(o,u,g*4),v=be.shiftPoint(c,u,p*4);p=this.transitionsBetween(_,h)+1,g=this.transitionsBetween(v,h)+1,(p&1)===1&&(p+=1),(g&1)===1&&(g+=1);let A=(o.getX()+u.getX()+c.getX()+h.getX())/4,b=(o.getY()+u.getY()+c.getY()+h.getY())/4;o=be.moveAway(o,A,b),u=be.moveAway(u,A,b),c=be.moveAway(c,A,b),h=be.moveAway(h,A,b);let R,k;return _=be.shiftPoint(o,u,g*4),_=be.shiftPoint(_,h,p*4),R=be.shiftPoint(u,o,g*4),R=be.shiftPoint(R,c,p*4),v=be.shiftPoint(c,h,g*4),v=be.shiftPoint(v,u,p*4),k=be.shiftPoint(h,c,g*4),k=be.shiftPoint(k,o,p*4),[_,R,v,k]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,u,c,h,p,g){return ui.getInstance().sampleGrid(i,p,g,.5,.5,p-.5,.5,p-.5,g-.5,.5,g-.5,o.getX(),o.getY(),h.getX(),h.getY(),c.getX(),c.getY(),u.getX(),u.getY())}transitionsBetween(i,o){let u=Math.trunc(i.getX()),c=Math.trunc(i.getY()),h=Math.trunc(o.getX()),p=Math.trunc(o.getY()),g=Math.abs(p-c)>Math.abs(h-u);if(g){let H=u;u=c,c=H,H=h,h=p,p=H}let _=Math.abs(h-u),v=Math.abs(p-c),A=-_/2,b=c<p?1:-1,R=u<h?1:-1,k=0,z=this.image.get(g?c:u,g?u:c);for(let H=u,Z=c;H!==h;H+=R){let q=this.image.get(g?Z:H,g?H:Z);if(q!==z&&(k++,z=q),A+=v,A>0){if(Z===p)break;Z+=b,A-=_}}return k}}class _t{constructor(){this.decoder=new Zl}decode(i,o=null){let u,c;if(o!=null&&o.has(ie.PURE_BARCODE)){const v=_t.extractPureBits(i.getBlackMatrix());u=this.decoder.decode(v),c=_t.NO_POINTS}else{const v=new be(i.getBlackMatrix()).detect();u=this.decoder.decode(v.getBits()),c=v.getPoints()}const h=u.getRawBytes(),p=new je(u.getText(),h,8*h.length,c,ue.DATA_MATRIX,j.currentTimeMillis()),g=u.getByteSegments();g!=null&&p.putMetadata(St.BYTE_SEGMENTS,g);const _=u.getECLevel();return _!=null&&p.putMetadata(St.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),u=i.getBottomRightOnBit();if(o==null||u==null)throw new ee;const c=this.moduleSize(o,i);let h=o[1];const p=u[1];let g=o[0];const v=(u[0]-g+1)/c,A=(p-h+1)/c;if(v<=0||A<=0)throw new ee;const b=c/2;h+=b,g+=b;const R=new gt(v,A);for(let k=0;k<A;k++){const z=h+k*c;for(let H=0;H<v;H++)i.get(g+H*c,z)&&R.set(H,k)}return R}static moduleSize(i,o){const u=o.getWidth();let c=i[0];const h=i[1];for(;c<u&&o.get(c,h);)c++;if(c===u)throw new ee;const p=c-i[0];if(p===0)throw new ee;return p}}_t.NO_POINTS=[];class $l extends It{constructor(i=500){super(new _t,i)}}var hi;(function(S){S[S.L=0]="L",S[S.M=1]="M",S[S.Q=2]="Q",S[S.H=3]="H"})(hi||(hi={}));class Xe{constructor(i,o,u){this.value=i,this.stringValue=o,this.bits=u,Xe.FOR_BITS.set(u,this),Xe.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Xe.L;case"M":return Xe.M;case"Q":return Xe.Q;case"H":return Xe.H;default:throw new C(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Xe))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=Xe.FOR_BITS.size)throw new I;return Xe.FOR_BITS.get(i)}}Xe.FOR_BITS=new Map,Xe.FOR_VALUE=new Map,Xe.L=new Xe(hi.L,"L",1),Xe.M=new Xe(hi.M,"M",0),Xe.Q=new Xe(hi.Q,"Q",3),Xe.H=new Xe(hi.H,"H",2);class Cn{constructor(i){this.errorCorrectionLevel=Xe.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return B.bitCount(i^o)}static decodeFormatInformation(i,o){const u=Cn.doDecodeFormatInformation(i,o);return u!==null?u:Cn.doDecodeFormatInformation(i^Cn.FORMAT_INFO_MASK_QR,o^Cn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let u=Number.MAX_SAFE_INTEGER,c=0;for(const h of Cn.FORMAT_INFO_DECODE_LOOKUP){const p=h[0];if(p===i||p===o)return new Cn(h[1]);let g=Cn.numBitsDiffering(i,p);g<u&&(c=h[1],u=g),i!==o&&(g=Cn.numBitsDiffering(o,p),g<u&&(c=h[1],u=g))}return u<=3?new Cn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Cn))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Cn.FORMAT_INFO_MASK_QR=21522,Cn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ${constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const u of o)i+=u.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ye{constructor(i,o,...u){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=u;let c=0;const h=u[0].getECCodewordsPerBlock(),p=u[0].getECBlocks();for(const g of p)c+=g.getCount()*(g.getDataCodewords()+h);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new Y;try{return this.getVersionForNumber((i-17)/4)}catch{throw new Y}}static getVersionForNumber(i){if(i<1||i>40)throw new I;return ye.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,u=0;for(let c=0;c<ye.VERSION_DECODE_INFO.length;c++){const h=ye.VERSION_DECODE_INFO[c];if(h===i)return ye.getVersionForNumber(c+7);const p=Cn.numBitsDiffering(i,h);p<o&&(u=c+7,o=p)}return o<=3?ye.getVersionForNumber(u):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new gt(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const u=this.alignmentPatternCenters.length;for(let c=0;c<u;c++){const h=this.alignmentPatternCenters[c]-2;for(let p=0;p<u;p++)c===0&&(p===0||p===u-1)||c===u-1&&p===0||o.setRegion(this.alignmentPatternCenters[p]-2,h,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ye.VERSIONS=[new ye(1,new Int32Array(0),new $(7,new M(1,19)),new $(10,new M(1,16)),new $(13,new M(1,13)),new $(17,new M(1,9))),new ye(2,Int32Array.from([6,18]),new $(10,new M(1,34)),new $(16,new M(1,28)),new $(22,new M(1,22)),new $(28,new M(1,16))),new ye(3,Int32Array.from([6,22]),new $(15,new M(1,55)),new $(26,new M(1,44)),new $(18,new M(2,17)),new $(22,new M(2,13))),new ye(4,Int32Array.from([6,26]),new $(20,new M(1,80)),new $(18,new M(2,32)),new $(26,new M(2,24)),new $(16,new M(4,9))),new ye(5,Int32Array.from([6,30]),new $(26,new M(1,108)),new $(24,new M(2,43)),new $(18,new M(2,15),new M(2,16)),new $(22,new M(2,11),new M(2,12))),new ye(6,Int32Array.from([6,34]),new $(18,new M(2,68)),new $(16,new M(4,27)),new $(24,new M(4,19)),new $(28,new M(4,15))),new ye(7,Int32Array.from([6,22,38]),new $(20,new M(2,78)),new $(18,new M(4,31)),new $(18,new M(2,14),new M(4,15)),new $(26,new M(4,13),new M(1,14))),new ye(8,Int32Array.from([6,24,42]),new $(24,new M(2,97)),new $(22,new M(2,38),new M(2,39)),new $(22,new M(4,18),new M(2,19)),new $(26,new M(4,14),new M(2,15))),new ye(9,Int32Array.from([6,26,46]),new $(30,new M(2,116)),new $(22,new M(3,36),new M(2,37)),new $(20,new M(4,16),new M(4,17)),new $(24,new M(4,12),new M(4,13))),new ye(10,Int32Array.from([6,28,50]),new $(18,new M(2,68),new M(2,69)),new $(26,new M(4,43),new M(1,44)),new $(24,new M(6,19),new M(2,20)),new $(28,new M(6,15),new M(2,16))),new ye(11,Int32Array.from([6,30,54]),new $(20,new M(4,81)),new $(30,new M(1,50),new M(4,51)),new $(28,new M(4,22),new M(4,23)),new $(24,new M(3,12),new M(8,13))),new ye(12,Int32Array.from([6,32,58]),new $(24,new M(2,92),new M(2,93)),new $(22,new M(6,36),new M(2,37)),new $(26,new M(4,20),new M(6,21)),new $(28,new M(7,14),new M(4,15))),new ye(13,Int32Array.from([6,34,62]),new $(26,new M(4,107)),new $(22,new M(8,37),new M(1,38)),new $(24,new M(8,20),new M(4,21)),new $(22,new M(12,11),new M(4,12))),new ye(14,Int32Array.from([6,26,46,66]),new $(30,new M(3,115),new M(1,116)),new $(24,new M(4,40),new M(5,41)),new $(20,new M(11,16),new M(5,17)),new $(24,new M(11,12),new M(5,13))),new ye(15,Int32Array.from([6,26,48,70]),new $(22,new M(5,87),new M(1,88)),new $(24,new M(5,41),new M(5,42)),new $(30,new M(5,24),new M(7,25)),new $(24,new M(11,12),new M(7,13))),new ye(16,Int32Array.from([6,26,50,74]),new $(24,new M(5,98),new M(1,99)),new $(28,new M(7,45),new M(3,46)),new $(24,new M(15,19),new M(2,20)),new $(30,new M(3,15),new M(13,16))),new ye(17,Int32Array.from([6,30,54,78]),new $(28,new M(1,107),new M(5,108)),new $(28,new M(10,46),new M(1,47)),new $(28,new M(1,22),new M(15,23)),new $(28,new M(2,14),new M(17,15))),new ye(18,Int32Array.from([6,30,56,82]),new $(30,new M(5,120),new M(1,121)),new $(26,new M(9,43),new M(4,44)),new $(28,new M(17,22),new M(1,23)),new $(28,new M(2,14),new M(19,15))),new ye(19,Int32Array.from([6,30,58,86]),new $(28,new M(3,113),new M(4,114)),new $(26,new M(3,44),new M(11,45)),new $(26,new M(17,21),new M(4,22)),new $(26,new M(9,13),new M(16,14))),new ye(20,Int32Array.from([6,34,62,90]),new $(28,new M(3,107),new M(5,108)),new $(26,new M(3,41),new M(13,42)),new $(30,new M(15,24),new M(5,25)),new $(28,new M(15,15),new M(10,16))),new ye(21,Int32Array.from([6,28,50,72,94]),new $(28,new M(4,116),new M(4,117)),new $(26,new M(17,42)),new $(28,new M(17,22),new M(6,23)),new $(30,new M(19,16),new M(6,17))),new ye(22,Int32Array.from([6,26,50,74,98]),new $(28,new M(2,111),new M(7,112)),new $(28,new M(17,46)),new $(30,new M(7,24),new M(16,25)),new $(24,new M(34,13))),new ye(23,Int32Array.from([6,30,54,78,102]),new $(30,new M(4,121),new M(5,122)),new $(28,new M(4,47),new M(14,48)),new $(30,new M(11,24),new M(14,25)),new $(30,new M(16,15),new M(14,16))),new ye(24,Int32Array.from([6,28,54,80,106]),new $(30,new M(6,117),new M(4,118)),new $(28,new M(6,45),new M(14,46)),new $(30,new M(11,24),new M(16,25)),new $(30,new M(30,16),new M(2,17))),new ye(25,Int32Array.from([6,32,58,84,110]),new $(26,new M(8,106),new M(4,107)),new $(28,new M(8,47),new M(13,48)),new $(30,new M(7,24),new M(22,25)),new $(30,new M(22,15),new M(13,16))),new ye(26,Int32Array.from([6,30,58,86,114]),new $(28,new M(10,114),new M(2,115)),new $(28,new M(19,46),new M(4,47)),new $(28,new M(28,22),new M(6,23)),new $(30,new M(33,16),new M(4,17))),new ye(27,Int32Array.from([6,34,62,90,118]),new $(30,new M(8,122),new M(4,123)),new $(28,new M(22,45),new M(3,46)),new $(30,new M(8,23),new M(26,24)),new $(30,new M(12,15),new M(28,16))),new ye(28,Int32Array.from([6,26,50,74,98,122]),new $(30,new M(3,117),new M(10,118)),new $(28,new M(3,45),new M(23,46)),new $(30,new M(4,24),new M(31,25)),new $(30,new M(11,15),new M(31,16))),new ye(29,Int32Array.from([6,30,54,78,102,126]),new $(30,new M(7,116),new M(7,117)),new $(28,new M(21,45),new M(7,46)),new $(30,new M(1,23),new M(37,24)),new $(30,new M(19,15),new M(26,16))),new ye(30,Int32Array.from([6,26,52,78,104,130]),new $(30,new M(5,115),new M(10,116)),new $(28,new M(19,47),new M(10,48)),new $(30,new M(15,24),new M(25,25)),new $(30,new M(23,15),new M(25,16))),new ye(31,Int32Array.from([6,30,56,82,108,134]),new $(30,new M(13,115),new M(3,116)),new $(28,new M(2,46),new M(29,47)),new $(30,new M(42,24),new M(1,25)),new $(30,new M(23,15),new M(28,16))),new ye(32,Int32Array.from([6,34,60,86,112,138]),new $(30,new M(17,115)),new $(28,new M(10,46),new M(23,47)),new $(30,new M(10,24),new M(35,25)),new $(30,new M(19,15),new M(35,16))),new ye(33,Int32Array.from([6,30,58,86,114,142]),new $(30,new M(17,115),new M(1,116)),new $(28,new M(14,46),new M(21,47)),new $(30,new M(29,24),new M(19,25)),new $(30,new M(11,15),new M(46,16))),new ye(34,Int32Array.from([6,34,62,90,118,146]),new $(30,new M(13,115),new M(6,116)),new $(28,new M(14,46),new M(23,47)),new $(30,new M(44,24),new M(7,25)),new $(30,new M(59,16),new M(1,17))),new ye(35,Int32Array.from([6,30,54,78,102,126,150]),new $(30,new M(12,121),new M(7,122)),new $(28,new M(12,47),new M(26,48)),new $(30,new M(39,24),new M(14,25)),new $(30,new M(22,15),new M(41,16))),new ye(36,Int32Array.from([6,24,50,76,102,128,154]),new $(30,new M(6,121),new M(14,122)),new $(28,new M(6,47),new M(34,48)),new $(30,new M(46,24),new M(10,25)),new $(30,new M(2,15),new M(64,16))),new ye(37,Int32Array.from([6,28,54,80,106,132,158]),new $(30,new M(17,122),new M(4,123)),new $(28,new M(29,46),new M(14,47)),new $(30,new M(49,24),new M(10,25)),new $(30,new M(24,15),new M(46,16))),new ye(38,Int32Array.from([6,32,58,84,110,136,162]),new $(30,new M(4,122),new M(18,123)),new $(28,new M(13,46),new M(32,47)),new $(30,new M(48,24),new M(14,25)),new $(30,new M(42,15),new M(32,16))),new ye(39,Int32Array.from([6,26,54,82,110,138,166]),new $(30,new M(20,117),new M(4,118)),new $(28,new M(40,47),new M(7,48)),new $(30,new M(43,24),new M(22,25)),new $(30,new M(10,15),new M(67,16))),new ye(40,Int32Array.from([6,30,58,86,114,142,170]),new $(30,new M(19,118),new M(6,119)),new $(28,new M(18,47),new M(31,48)),new $(30,new M(34,24),new M(34,25)),new $(30,new M(20,15),new M(61,16)))];var Ot;(function(S){S[S.DATA_MASK_000=0]="DATA_MASK_000",S[S.DATA_MASK_001=1]="DATA_MASK_001",S[S.DATA_MASK_010=2]="DATA_MASK_010",S[S.DATA_MASK_011=3]="DATA_MASK_011",S[S.DATA_MASK_100=4]="DATA_MASK_100",S[S.DATA_MASK_101=5]="DATA_MASK_101",S[S.DATA_MASK_110=6]="DATA_MASK_110",S[S.DATA_MASK_111=7]="DATA_MASK_111"})(Ot||(Ot={}));class In{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let u=0;u<o;u++)for(let c=0;c<o;c++)this.isMasked(u,c)&&i.flip(c,u)}}In.values=new Map([[Ot.DATA_MASK_000,new In(Ot.DATA_MASK_000,(S,i)=>(S+i&1)===0)],[Ot.DATA_MASK_001,new In(Ot.DATA_MASK_001,(S,i)=>(S&1)===0)],[Ot.DATA_MASK_010,new In(Ot.DATA_MASK_010,(S,i)=>i%3===0)],[Ot.DATA_MASK_011,new In(Ot.DATA_MASK_011,(S,i)=>(S+i)%3===0)],[Ot.DATA_MASK_100,new In(Ot.DATA_MASK_100,(S,i)=>(Math.floor(S/2)+Math.floor(i/3)&1)===0)],[Ot.DATA_MASK_101,new In(Ot.DATA_MASK_101,(S,i)=>S*i%6===0)],[Ot.DATA_MASK_110,new In(Ot.DATA_MASK_110,(S,i)=>S*i%6<3)],[Ot.DATA_MASK_111,new In(Ot.DATA_MASK_111,(S,i)=>(S+i+S*i%3&1)===0)]]);class Bo{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new Y;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let h=0;h<6;h++)i=this.copyBit(h,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let h=5;h>=0;h--)i=this.copyBit(8,h,i);const o=this.bitMatrix.getHeight();let u=0;const c=o-7;for(let h=o-1;h>=c;h--)u=this.copyBit(8,h,u);for(let h=o-8;h<o;h++)u=this.copyBit(h,8,u);if(this.parsedFormatInfo=Cn.decodeFormatInformation(i,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Y}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return ye.getVersionForNumber(o);let u=0;const c=i-11;for(let p=5;p>=0;p--)for(let g=i-9;g>=c;g--)u=this.copyBit(g,p,u);let h=ye.decodeVersionInformation(u);if(h!==null&&h.getDimensionForVersion()===i)return this.parsedVersion=h,h;u=0;for(let p=5;p>=0;p--)for(let g=i-9;g>=c;g--)u=this.copyBit(p,g,u);if(h=ye.decodeVersionInformation(u),h!==null&&h.getDimensionForVersion()===i)return this.parsedVersion=h,h;throw new Y}copyBit(i,o,u){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?u<<1|1:u<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),u=In.values.get(i.getDataMask()),c=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,c);const h=o.buildFunctionPattern();let p=!0;const g=new Uint8Array(o.getTotalCodewords());let _=0,v=0,A=0;for(let b=c-1;b>0;b-=2){b===6&&b--;for(let R=0;R<c;R++){const k=p?c-1-R:R;for(let z=0;z<2;z++)h.get(b-z,k)||(A++,v<<=1,this.bitMatrix.get(b-z,k)&&(v|=1),A===8&&(g[_++]=v,A=0,v=0))}p=!p}if(_!==o.getTotalCodewords())throw new Y;return g}remask(){if(this.parsedFormatInfo===null)return;const i=In.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,u=i.getWidth();o<u;o++)for(let c=o+1,h=i.getHeight();c<h;c++)i.get(o,c)!==i.get(c,o)&&(i.flip(c,o),i.flip(o,c))}}class Fo{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,u){if(i.length!==o.getTotalCodewords())throw new I;const c=o.getECBlocksForLevel(u);let h=0;const p=c.getECBlocks();for(const z of p)h+=z.getCount();const g=new Array(h);let _=0;for(const z of p)for(let H=0;H<z.getCount();H++){const Z=z.getDataCodewords(),q=c.getECCodewordsPerBlock()+Z;g[_++]=new Fo(Z,new Uint8Array(q))}const v=g[0].codewords.length;let A=g.length-1;for(;A>=0&&g[A].codewords.length!==v;)A--;A++;const b=v-c.getECCodewordsPerBlock();let R=0;for(let z=0;z<b;z++)for(let H=0;H<_;H++)g[H].codewords[z]=i[R++];for(let z=A;z<_;z++)g[z].codewords[b]=i[R++];const k=g[0].codewords.length;for(let z=b;z<k;z++)for(let H=0;H<_;H++){const Z=H<A?z:z+1;g[H].codewords[Z]=i[R++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Sn;(function(S){S[S.TERMINATOR=0]="TERMINATOR",S[S.NUMERIC=1]="NUMERIC",S[S.ALPHANUMERIC=2]="ALPHANUMERIC",S[S.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",S[S.BYTE=4]="BYTE",S[S.ECI=5]="ECI",S[S.KANJI=6]="KANJI",S[S.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",S[S.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",S[S.HANZI=9]="HANZI"})(Sn||(Sn={}));class Re{constructor(i,o,u,c){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=u,this.bits=c,Re.FOR_BITS.set(c,this),Re.FOR_VALUE.set(i,this)}static forBits(i){const o=Re.FOR_BITS.get(i);if(o===void 0)throw new I;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let u;return o<=9?u=0:o<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Re))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}Re.FOR_BITS=new Map,Re.FOR_VALUE=new Map,Re.TERMINATOR=new Re(Sn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Re.NUMERIC=new Re(Sn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Re.ALPHANUMERIC=new Re(Sn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Re.STRUCTURED_APPEND=new Re(Sn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Re.BYTE=new Re(Sn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Re.ECI=new Re(Sn.ECI,"ECI",Int32Array.from([0,0,0]),7),Re.KANJI=new Re(Sn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Re.FNC1_FIRST_POSITION=new Re(Sn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Re.FNC1_SECOND_POSITION=new Re(Sn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Re.HANZI=new Re(Sn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Rt{static decode(i,o,u,c){const h=new ks(i);let p=new Je;const g=new Array;let _=-1,v=-1;try{let A=null,b=!1,R;do{if(h.available()<4)R=Re.TERMINATOR;else{const k=h.readBits(4);R=Re.forBits(k)}switch(R){case Re.TERMINATOR:break;case Re.FNC1_FIRST_POSITION:case Re.FNC1_SECOND_POSITION:b=!0;break;case Re.STRUCTURED_APPEND:if(h.available()<16)throw new Y;_=h.readBits(8),v=h.readBits(8);break;case Re.ECI:const k=Rt.parseECIValue(h);if(A=te.getCharacterSetECIByValue(k),A===null)throw new Y;break;case Re.HANZI:const z=h.readBits(4),H=h.readBits(R.getCharacterCountBits(o));z===Rt.GB2312_SUBSET&&Rt.decodeHanziSegment(h,p,H);break;default:const Z=h.readBits(R.getCharacterCountBits(o));switch(R){case Re.NUMERIC:Rt.decodeNumericSegment(h,p,Z);break;case Re.ALPHANUMERIC:Rt.decodeAlphanumericSegment(h,p,Z,b);break;case Re.BYTE:Rt.decodeByteSegment(h,p,Z,A,g,c);break;case Re.KANJI:Rt.decodeKanjiSegment(h,p,Z);break;default:throw new Y}break}}while(R!==Re.TERMINATOR)}catch{throw new Y}return new Rs(i,p.toString(),g.length===0?null:g,u===null?null:u.toString(),_,v)}static decodeHanziSegment(i,o,u){if(u*13>i.available())throw new Y;const c=new Uint8Array(2*u);let h=0;for(;u>0;){const p=i.readBits(13);let g=p/96<<8&4294967295|p%96;g<959?g+=41377:g+=42657,c[h]=g>>8&255,c[h+1]=g&255,h+=2,u--}try{o.append(Ze.decode(c,Ce.GB2312))}catch(p){throw new Y(p)}}static decodeKanjiSegment(i,o,u){if(u*13>i.available())throw new Y;const c=new Uint8Array(2*u);let h=0;for(;u>0;){const p=i.readBits(13);let g=p/192<<8&4294967295|p%192;g<7936?g+=33088:g+=49472,c[h]=g>>8,c[h+1]=g,h+=2,u--}try{o.append(Ze.decode(c,Ce.SHIFT_JIS))}catch(p){throw new Y(p)}}static decodeByteSegment(i,o,u,c,h,p){if(8*u>i.available())throw new Y;const g=new Uint8Array(u);for(let v=0;v<u;v++)g[v]=i.readBits(8);let _;c===null?_=Ce.guessEncoding(g,p):_=c.getName();try{o.append(Ze.decode(g,_))}catch(v){throw new Y(v)}h.push(g)}static toAlphaNumericChar(i){if(i>=Rt.ALPHANUMERIC_CHARS.length)throw new Y;return Rt.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,u,c){const h=o.length();for(;u>1;){if(i.available()<11)throw new Y;const p=i.readBits(11);o.append(Rt.toAlphaNumericChar(Math.floor(p/45))),o.append(Rt.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(i.available()<6)throw new Y;o.append(Rt.toAlphaNumericChar(i.readBits(6)))}if(c)for(let p=h;p<o.length();p++)o.charAt(p)==="%"&&(p<o.length()-1&&o.charAt(p+1)==="%"?o.deleteCharAt(p+1):o.setCharAt(p,String.fromCharCode(29)))}static decodeNumericSegment(i,o,u){for(;u>=3;){if(i.available()<10)throw new Y;const c=i.readBits(10);if(c>=1e3)throw new Y;o.append(Rt.toAlphaNumericChar(Math.floor(c/100))),o.append(Rt.toAlphaNumericChar(Math.floor(c/10)%10)),o.append(Rt.toAlphaNumericChar(c%10)),u-=3}if(u===2){if(i.available()<7)throw new Y;const c=i.readBits(7);if(c>=100)throw new Y;o.append(Rt.toAlphaNumericChar(Math.floor(c/10))),o.append(Rt.toAlphaNumericChar(c%10))}else if(u===1){if(i.available()<4)throw new Y;const c=i.readBits(4);if(c>=10)throw new Y;o.append(Rt.toAlphaNumericChar(c))}}static parseECIValue(i){const o=i.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const u=i.readBits(8);return(o&63)<<8&4294967295|u}if((o&224)===192){const u=i.readBits(16);return(o&31)<<16&4294967295|u}throw new Y}}Rt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Rt.GB2312_SUBSET=1;class Uo{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class Xl{constructor(){this.rsDecoder=new Ps(it.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(gt.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const u=new Bo(i);let c=null;try{return this.decodeBitMatrixParser(u,o)}catch(h){c=h}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const h=this.decodeBitMatrixParser(u,o);return h.setOther(new Uo(!0)),h}catch(h){throw c!==null?c:h}}decodeBitMatrixParser(i,o){const u=i.readVersion(),c=i.readFormatInformation().getErrorCorrectionLevel(),h=i.readCodewords(),p=Fo.getDataBlocks(h,u,c);let g=0;for(const A of p)g+=A.getNumDataCodewords();const _=new Uint8Array(g);let v=0;for(const A of p){const b=A.getCodewords(),R=A.getNumDataCodewords();this.correctErrors(b,R);for(let k=0;k<R;k++)_[v++]=b[k]}return Rt.decode(_,u,c,o)}correctErrors(i,o){const u=new Int32Array(i);try{this.rsDecoder.decode(u,i.length-o)}catch{throw new V}for(let c=0;c<o;c++)i[c]=u[c]}}class Vo extends Ie{constructor(i,o,u){super(i,o),this.estimatedModuleSize=u}aboutEquals(i,o,u){if(Math.abs(o-this.getY())<=i&&Math.abs(u-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,u){const c=(this.getX()+o)/2,h=(this.getY()+i)/2,p=(this.estimatedModuleSize+u)/2;return new Vo(c,h,p)}}class ns{constructor(i,o,u,c,h,p,g){this.image=i,this.startX=o,this.startY=u,this.width=c,this.height=h,this.moduleSize=p,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,u=this.width,c=i+u,h=this.startY+o/2,p=new Int32Array(3),g=this.image;for(let _=0;_<o;_++){const v=h+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));p[0]=0,p[1]=0,p[2]=0;let A=i;for(;A<c&&!g.get(A,v);)A++;let b=0;for(;A<c;){if(g.get(A,v))if(b===1)p[1]++;else if(b===2){if(this.foundPatternCross(p)){const R=this.handlePossibleCenter(p,v,A);if(R!==null)return R}p[0]=p[2],p[1]=1,p[2]=0,b=1}else p[++b]++;else b===1&&b++,p[b]++;A++}if(this.foundPatternCross(p)){const R=this.handlePossibleCenter(p,v,c);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,u=o/2;for(let c=0;c<3;c++)if(Math.abs(o-i[c])>=u)return!1;return!0}crossCheckVertical(i,o,u,c){const h=this.image,p=h.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let _=i;for(;_>=0&&h.get(o,_)&&g[1]<=u;)g[1]++,_--;if(_<0||g[1]>u)return NaN;for(;_>=0&&!h.get(o,_)&&g[0]<=u;)g[0]++,_--;if(g[0]>u)return NaN;for(_=i+1;_<p&&h.get(o,_)&&g[1]<=u;)g[1]++,_++;if(_===p||g[1]>u)return NaN;for(;_<p&&!h.get(o,_)&&g[2]<=u;)g[2]++,_++;if(g[2]>u)return NaN;const v=g[0]+g[1]+g[2];return 5*Math.abs(v-c)>=2*c?NaN:this.foundPatternCross(g)?ns.centerFromEnd(g,_):NaN}handlePossibleCenter(i,o,u){const c=i[0]+i[1]+i[2],h=ns.centerFromEnd(i,u),p=this.crossCheckVertical(o,h,2*i[1],c);if(!isNaN(p)){const g=(i[0]+i[1]+i[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(g,p,h))return v.combineEstimate(p,h,g);const _=new Vo(h,p,g);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Sa extends Ie{constructor(i,o,u,c){super(i,o),this.estimatedModuleSize=u,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,u){if(Math.abs(o-this.getY())<=i&&Math.abs(u-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,u){const c=this.count+1,h=(this.count*this.getX()+o)/c,p=(this.count*this.getY()+i)/c,g=(this.count*this.estimatedModuleSize+u)/c;return new Sa(h,p,g,c)}}class Yl{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ln{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(ie.TRY_HARDER)!==void 0,u=i!=null&&i.get(ie.PURE_BARCODE)!==void 0,c=this.image,h=c.getHeight(),p=c.getWidth();let g=Math.floor(3*h/(4*ln.MAX_MODULES));(g<ln.MIN_SKIP||o)&&(g=ln.MIN_SKIP);let _=!1;const v=new Int32Array(5);for(let b=g-1;b<h&&!_;b+=g){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let R=0;for(let k=0;k<p;k++)if(c.get(k,b))(R&1)===1&&R++,v[R]++;else if(R&1)v[R]++;else if(R===4)if(ln.foundPatternCross(v)){if(this.handlePossibleCenter(v,b,k,u)===!0)if(g=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const H=this.findRowSkip();H>v[2]&&(b+=H-v[2]-g,k=p-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,R=3;continue}R=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,R=3;else v[++R]++;ln.foundPatternCross(v)&&this.handlePossibleCenter(v,b,p,u)===!0&&(g=v[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const A=this.selectBestPatterns();return Ie.orderBestPatterns(A),new Yl(A)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let h=0;h<5;h++){const p=i[h];if(p===0)return!1;o+=p}if(o<7)return!1;const u=o/7,c=u/2;return Math.abs(u-i[0])<c&&Math.abs(u-i[1])<c&&Math.abs(3*u-i[2])<3*c&&Math.abs(u-i[3])<c&&Math.abs(u-i[4])<c}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,u,c){const h=this.getCrossCheckStateCount();let p=0;const g=this.image;for(;i>=p&&o>=p&&g.get(o-p,i-p);)h[2]++,p++;if(i<p||o<p)return!1;for(;i>=p&&o>=p&&!g.get(o-p,i-p)&&h[1]<=u;)h[1]++,p++;if(i<p||o<p||h[1]>u)return!1;for(;i>=p&&o>=p&&g.get(o-p,i-p)&&h[0]<=u;)h[0]++,p++;if(h[0]>u)return!1;const _=g.getHeight(),v=g.getWidth();for(p=1;i+p<_&&o+p<v&&g.get(o+p,i+p);)h[2]++,p++;if(i+p>=_||o+p>=v)return!1;for(;i+p<_&&o+p<v&&!g.get(o+p,i+p)&&h[3]<u;)h[3]++,p++;if(i+p>=_||o+p>=v||h[3]>=u)return!1;for(;i+p<_&&o+p<v&&g.get(o+p,i+p)&&h[4]<u;)h[4]++,p++;if(h[4]>=u)return!1;const A=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(A-c)<2*c&&ln.foundPatternCross(h)}crossCheckVertical(i,o,u,c){const h=this.image,p=h.getHeight(),g=this.getCrossCheckStateCount();let _=i;for(;_>=0&&h.get(o,_);)g[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(o,_)&&g[1]<=u;)g[1]++,_--;if(_<0||g[1]>u)return NaN;for(;_>=0&&h.get(o,_)&&g[0]<=u;)g[0]++,_--;if(g[0]>u)return NaN;for(_=i+1;_<p&&h.get(o,_);)g[2]++,_++;if(_===p)return NaN;for(;_<p&&!h.get(o,_)&&g[3]<u;)g[3]++,_++;if(_===p||g[3]>=u)return NaN;for(;_<p&&h.get(o,_)&&g[4]<u;)g[4]++,_++;if(g[4]>=u)return NaN;const v=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(v-c)>=2*c?NaN:ln.foundPatternCross(g)?ln.centerFromEnd(g,_):NaN}crossCheckHorizontal(i,o,u,c){const h=this.image,p=h.getWidth(),g=this.getCrossCheckStateCount();let _=i;for(;_>=0&&h.get(_,o);)g[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(_,o)&&g[1]<=u;)g[1]++,_--;if(_<0||g[1]>u)return NaN;for(;_>=0&&h.get(_,o)&&g[0]<=u;)g[0]++,_--;if(g[0]>u)return NaN;for(_=i+1;_<p&&h.get(_,o);)g[2]++,_++;if(_===p)return NaN;for(;_<p&&!h.get(_,o)&&g[3]<u;)g[3]++,_++;if(_===p||g[3]>=u)return NaN;for(;_<p&&h.get(_,o)&&g[4]<u;)g[4]++,_++;if(g[4]>=u)return NaN;const v=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(v-c)>=c?NaN:ln.foundPatternCross(g)?ln.centerFromEnd(g,_):NaN}handlePossibleCenter(i,o,u,c){const h=i[0]+i[1]+i[2]+i[3]+i[4];let p=ln.centerFromEnd(i,u),g=this.crossCheckVertical(o,Math.floor(p),i[2],h);if(!isNaN(g)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(g),i[2],h),!isNaN(p)&&(!c||this.crossCheckDiagonal(Math.floor(g),Math.floor(p),i[2],h)))){const _=h/7;let v=!1;const A=this.possibleCenters;for(let b=0,R=A.length;b<R;b++){const k=A[b];if(k.aboutEquals(_,g,p)){A[b]=k.combineEstimate(g,p,_),v=!0;break}}if(!v){const b=new Sa(p,g,_);A.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const u of this.possibleCenters)if(u.getCount()>=ln.CENTER_QUORUM)if(o==null)o=u;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-u.getX())-Math.abs(o.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const u=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=ln.CENTER_QUORUM&&(i++,o+=p.getEstimatedModuleSize());if(i<3)return!1;const c=o/u;let h=0;for(const p of this.possibleCenters)h+=Math.abs(p.getEstimatedModuleSize()-c);return h<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new ee;const o=this.possibleCenters;let u;if(i>3){let c=0,h=0;for(const _ of this.possibleCenters){const v=_.getEstimatedModuleSize();c+=v,h+=v*v}u=c/i;let p=Math.sqrt(h/i-u*u);o.sort((_,v)=>{const A=Math.abs(v.getEstimatedModuleSize()-u),b=Math.abs(_.getEstimatedModuleSize()-u);return A<b?-1:A>b?1:0});const g=Math.max(.2*u,p);for(let _=0;_<o.length&&o.length>3;_++){const v=o[_];Math.abs(v.getEstimatedModuleSize()-u)>g&&(o.splice(_,1),_--)}}if(o.length>3){let c=0;for(const h of o)c+=h.getEstimatedModuleSize();u=c/o.length,o.sort((h,p)=>{if(p.getCount()===h.getCount()){const g=Math.abs(p.getEstimatedModuleSize()-u),_=Math.abs(h.getEstimatedModuleSize()-u);return g<_?1:g>_?-1:0}else return p.getCount()-h.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}ln.CENTER_QUORUM=2,ln.MIN_SKIP=3,ln.MAX_MODULES=57;class Fe{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(ie.NEED_RESULT_POINT_CALLBACK);const u=new ln(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(u)}processFinderPatternInfo(i){const o=i.getTopLeft(),u=i.getTopRight(),c=i.getBottomLeft(),h=this.calculateModuleSize(o,u,c);if(h<1)throw new ee("No pattern found in proccess finder.");const p=Fe.computeDimension(o,u,c,h),g=ye.getProvisionalVersionForDimension(p),_=g.getDimensionForVersion()-7;let v=null;if(g.getAlignmentPatternCenters().length>0){const k=u.getX()-o.getX()+c.getX(),z=u.getY()-o.getY()+c.getY(),H=1-3/_,Z=Math.floor(o.getX()+H*(k-o.getX())),q=Math.floor(o.getY()+H*(z-o.getY()));for(let ce=4;ce<=16;ce<<=1)try{v=this.findAlignmentInRegion(h,Z,q,ce);break}catch(de){if(!(de instanceof ee))throw de}}const A=Fe.createTransform(o,u,c,v,p),b=Fe.sampleGrid(this.image,A,p);let R;return v===null?R=[c,o,u]:R=[c,o,u,v],new Po(b,R)}static createTransform(i,o,u,c,h){const p=h-3.5;let g,_,v,A;return c!==null?(g=c.getX(),_=c.getY(),v=p-3,A=v):(g=o.getX()-i.getX()+u.getX(),_=o.getY()-i.getY()+u.getY(),v=p,A=p),ar.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,v,A,3.5,p,i.getX(),i.getY(),o.getX(),o.getY(),g,_,u.getX(),u.getY())}static sampleGrid(i,o,u){return ui.getInstance().sampleGridWithTransform(i,u,u,o)}static computeDimension(i,o,u,c){const h=st.round(Ie.distance(i,o)/c),p=st.round(Ie.distance(i,u)/c);let g=Math.floor((h+p)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new ee("Dimensions could be not found.")}return g}calculateModuleSize(i,o,u){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,u))/2}calculateModuleSizeOneWay(i,o){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(u)?c/7:isNaN(c)?u/7:(u+c)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,u,c){let h=this.sizeOfBlackWhiteBlackRun(i,o,u,c),p=1,g=i-(u-i);g<0?(p=i/(i-g),g=0):g>=this.image.getWidth()&&(p=(this.image.getWidth()-1-i)/(g-i),g=this.image.getWidth()-1);let _=Math.floor(o-(c-o)*p);return p=1,_<0?(p=o/(o-_),_=0):_>=this.image.getHeight()&&(p=(this.image.getHeight()-1-o)/(_-o),_=this.image.getHeight()-1),g=Math.floor(i+(g-i)*p),h+=this.sizeOfBlackWhiteBlackRun(i,o,g,_),h-1}sizeOfBlackWhiteBlackRun(i,o,u,c){const h=Math.abs(c-o)>Math.abs(u-i);if(h){let k=i;i=o,o=k,k=u,u=c,c=k}const p=Math.abs(u-i),g=Math.abs(c-o);let _=-p/2;const v=i<u?1:-1,A=o<c?1:-1;let b=0;const R=u+v;for(let k=i,z=o;k!==R;k+=v){const H=h?z:k,Z=h?k:z;if(b===1===this.image.get(H,Z)){if(b===2)return st.distance(k,z,i,o);b++}if(_+=g,_>0){if(z===c)break;z+=A,_-=p}}return b===2?st.distance(u+v,c,i,o):NaN}findAlignmentInRegion(i,o,u,c){const h=Math.floor(c*i),p=Math.max(0,o-h),g=Math.min(this.image.getWidth()-1,o+h);if(g-p<i*3)throw new ee("Alignment top exceeds estimated module size.");const _=Math.max(0,u-h),v=Math.min(this.image.getHeight()-1,u+h);if(v-_<i*3)throw new ee("Alignment bottom exceeds estimated module size.");return new ns(this.image,p,_,g-p,v-_,i,this.resultPointCallback).find()}}class pn{constructor(){this.decoder=new Xl}getDecoder(){return this.decoder}decode(i,o){let u,c;if(o!=null&&o.get(ie.PURE_BARCODE)!==void 0){const _=pn.extractPureBits(i.getBlackMatrix());u=this.decoder.decodeBitMatrix(_,o),c=pn.NO_POINTS}else{const _=new Fe(i.getBlackMatrix()).detect(o);u=this.decoder.decodeBitMatrix(_.getBits(),o),c=_.getPoints()}u.getOther()instanceof Uo&&u.getOther().applyMirroredCorrection(c);const h=new je(u.getText(),u.getRawBytes(),void 0,c,ue.QR_CODE,void 0),p=u.getByteSegments();p!==null&&h.putMetadata(St.BYTE_SEGMENTS,p);const g=u.getECLevel();return g!==null&&h.putMetadata(St.ERROR_CORRECTION_LEVEL,g),u.hasStructuredAppend()&&(h.putMetadata(St.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),h.putMetadata(St.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),h}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),u=i.getBottomRightOnBit();if(o===null||u===null)throw new ee;const c=this.moduleSize(o,i);let h=o[1],p=u[1],g=o[0],_=u[0];if(g>=_||h>=p)throw new ee;if(p-h!==_-g&&(_=g+(p-h),_>=i.getWidth()))throw new ee;const v=Math.round((_-g+1)/c),A=Math.round((p-h+1)/c);if(v<=0||A<=0)throw new ee;if(A!==v)throw new ee;const b=Math.floor(c/2);h+=b,g+=b;const R=g+Math.floor((v-1)*c)-_;if(R>0){if(R>b)throw new ee;g-=R}const k=h+Math.floor((A-1)*c)-p;if(k>0){if(k>b)throw new ee;h-=k}const z=new gt(v,A);for(let H=0;H<A;H++){const Z=h+Math.floor(H*c);for(let q=0;q<v;q++)i.get(g+Math.floor(q*c),Z)&&z.set(q,H)}return z}static moduleSize(i,o){const u=o.getHeight(),c=o.getWidth();let h=i[0],p=i[1],g=!0,_=0;for(;h<c&&p<u;){if(g!==o.get(h,p)){if(++_===5)break;g=!g}h++,p++}if(h===c||p===u)throw new ee;return(h-i[0])/7}}pn.NO_POINTS=new Array;class xe{PDF417Common(){}static getBitCountSum(i){return st.sum(i)}static toIntArray(i){if(i==null||!i.length)return xe.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let u=0;for(const c of i)o[u++]=c;return o}static getCodeword(i){const o=D.binarySearch(xe.SYMBOL_TABLE,i&262143);return o<0?-1:(xe.CODEWORD_TABLE[o]-1)%xe.NUMBER_OF_CODEWORDS}}xe.NUMBER_OF_CODEWORDS=929,xe.MAX_CODEWORDS_IN_BARCODE=xe.NUMBER_OF_CODEWORDS-1,xe.MIN_ROWS_IN_BARCODE=3,xe.MAX_ROWS_IN_BARCODE=90,xe.MODULES_IN_CODEWORD=17,xe.MODULES_IN_STOP_PATTERN=18,xe.BARS_IN_MODULE=8,xe.EMPTY_INT_ARRAY=new Int32Array([]),xe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class nh{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class He{static detectMultiple(i,o,u){let c=i.getBlackMatrix(),h=He.detect(u,c);return h.length||(c=c.clone(),c.rotate180(),h=He.detect(u,c)),new nh(c,h)}static detect(i,o){const u=new Array;let c=0,h=0,p=!1;for(;c<o.getHeight();){const g=He.findVertices(o,c,h);if(g[0]==null&&g[3]==null){if(!p)break;p=!1,h=0;for(const _ of u)_[1]!=null&&(c=Math.trunc(Math.max(c,_[1].getY()))),_[3]!=null&&(c=Math.max(c,Math.trunc(_[3].getY())));c+=He.ROW_STEP;continue}if(p=!0,u.push(g),!i)break;g[2]!=null?(h=Math.trunc(g[2].getX()),c=Math.trunc(g[2].getY())):(h=Math.trunc(g[4].getX()),c=Math.trunc(g[4].getY()))}return u}static findVertices(i,o,u){const c=i.getHeight(),h=i.getWidth(),p=new Array(8);return He.copyToResult(p,He.findRowsWithPattern(i,c,h,o,u,He.START_PATTERN),He.INDEXES_START_PATTERN),p[4]!=null&&(u=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY())),He.copyToResult(p,He.findRowsWithPattern(i,c,h,o,u,He.STOP_PATTERN),He.INDEXES_STOP_PATTERN),p}static copyToResult(i,o,u){for(let c=0;c<u.length;c++)i[u[c]]=o[c]}static findRowsWithPattern(i,o,u,c,h,p){const g=new Array(4);let _=!1;const v=new Int32Array(p.length);for(;c<o;c+=He.ROW_STEP){let b=He.findGuardPattern(i,h,c,u,!1,p,v);if(b!=null){for(;c>0;){const R=He.findGuardPattern(i,h,--c,u,!1,p,v);if(R!=null)b=R;else{c++;break}}g[0]=new Ie(b[0],c),g[1]=new Ie(b[1],c),_=!0;break}}let A=c+1;if(_){let b=0,R=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;A<o;A++){const k=He.findGuardPattern(i,R[0],A,u,!1,p,v);if(k!=null&&Math.abs(R[0]-k[0])<He.MAX_PATTERN_DRIFT&&Math.abs(R[1]-k[1])<He.MAX_PATTERN_DRIFT)R=k,b=0;else{if(b>He.SKIPPED_ROW_COUNT_MAX)break;b++}}A-=b+1,g[2]=new Ie(R[0],A),g[3]=new Ie(R[1],A)}return A-c<He.BARCODE_MIN_HEIGHT&&D.fill(g,null),g}static findGuardPattern(i,o,u,c,h,p,g){D.fillWithin(g,0,g.length,0);let _=o,v=0;for(;i.get(_,u)&&_>0&&v++<He.MAX_PIXEL_DRIFT;)_--;let A=_,b=0,R=p.length;for(let k=h;A<c;A++)if(i.get(A,u)!==k)g[b]++;else{if(b===R-1){if(He.patternMatchVariance(g,p,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE)return new Int32Array([_,A]);_+=g[0]+g[1],j.arraycopy(g,2,g,0,b-1),g[b-1]=0,g[b]=0,b--}else b++;g[b]=1,k=!k}return b===R-1&&He.patternMatchVariance(g,p,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE?new Int32Array([_,A-1]):null}static patternMatchVariance(i,o,u){let c=i.length,h=0,p=0;for(let v=0;v<c;v++)h+=i[v],p+=o[v];if(h<p)return 1/0;let g=h/p;u*=g;let _=0;for(let v=0;v<c;v++){let A=i[v],b=o[v]*g,R=A>b?A-b:b-A;if(R>u)return 1/0;_+=R}return _/h}}He.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),He.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),He.MAX_AVG_VARIANCE=.42,He.MAX_INDIVIDUAL_VARIANCE=.8,He.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),He.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),He.MAX_PIXEL_DRIFT=3,He.MAX_PATTERN_DRIFT=5,He.SKIPPED_ROW_COUNT_MAX=25,He.ROW_STEP=5,He.BARCODE_MIN_HEIGHT=10;class sn{constructor(i,o){if(o.length===0)throw new I;this.field=i;let u=o.length;if(u>1&&o[0]===0){let c=1;for(;c<u&&o[c]===0;)c++;c===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-c),j.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let c=0;for(let h of this.coefficients)c=this.field.add(c,h);return c}let o=this.coefficients[0],u=this.coefficients.length;for(let c=1;c<u;c++)o=this.field.add(this.field.multiply(i,o),this.coefficients[c]);return o}add(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,u=i.coefficients;if(o.length>u.length){let p=o;o=u,u=p}let c=new Int32Array(u.length),h=u.length-o.length;j.arraycopy(u,0,c,0,h);for(let p=h;p<u.length;p++)c[p]=this.field.add(o[p-h],u[p]);return new sn(this.field,c)}subtract(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof sn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new sn(this.field,new Int32Array([0]));let o=this.coefficients,u=o.length,c=i.coefficients,h=c.length,p=new Int32Array(u+h-1);for(let g=0;g<u;g++){let _=o[g];for(let v=0;v<h;v++)p[g+v]=this.field.add(p[g+v],this.field.multiply(_,c[v]))}return new sn(this.field,p)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let u=0;u<i;u++)o[u]=this.field.subtract(0,this.coefficients[u]);return new sn(this.field,o)}multiplyScalar(i){if(i===0)return new sn(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,u=new Int32Array(o);for(let c=0;c<o;c++)u[c]=this.field.multiply(this.coefficients[c],i);return new sn(this.field,u)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return new sn(this.field,new Int32Array([0]));let u=this.coefficients.length,c=new Int32Array(u+i);for(let h=0;h<u;h++)c[h]=this.field.multiply(this.coefficients[h],o);return new sn(this.field,c)}toString(){let i=new Je;for(let o=this.getDegree();o>=0;o--){let u=this.getCoefficient(o);u!==0&&(u<0?(i.append(" - "),u=-u):i.length()>0&&i.append(" + "),(o===0||u!==1)&&i.append(u),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class ql{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}inverse(i){if(i===0)throw new bi;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class di extends ql{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let u=1;for(let c=0;c<i;c++)this.expTable[c]=u,u=u*o%i;for(let c=0;c<i-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new sn(this,new Int32Array([0])),this.one=new sn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;let u=new Int32Array(i+1);return u[0]=o,new sn(this,u)}}di.PDF417_GF=new di(xe.NUMBER_OF_CODEWORDS,3);class ba{constructor(){this.field=di.PDF417_GF}decode(i,o,u){let c=new sn(this.field,i),h=new Int32Array(o),p=!1;for(let z=o;z>0;z--){let H=c.evaluateAt(this.field.exp(z));h[o-z]=H,H!==0&&(p=!0)}if(!p)return 0;let g=this.field.getOne();if(u!=null)for(const z of u){let H=this.field.exp(i.length-1-z),Z=new sn(this.field,new Int32Array([this.field.subtract(0,H),1]));g=g.multiply(Z)}let _=new sn(this.field,h),v=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),_,o),A=v[0],b=v[1],R=this.findErrorLocations(A),k=this.findErrorMagnitudes(b,A,R);for(let z=0;z<R.length;z++){let H=i.length-1-this.field.log(R[z]);if(H<0)throw V.getChecksumInstance();i[H]=this.field.subtract(i[H],k[z])}return R.length}runEuclideanAlgorithm(i,o,u){if(i.getDegree()<o.getDegree()){let R=i;i=o,o=R}let c=i,h=o,p=this.field.getZero(),g=this.field.getOne();for(;h.getDegree()>=Math.round(u/2);){let R=c,k=p;if(c=h,p=g,c.isZero())throw V.getChecksumInstance();h=R;let z=this.field.getZero(),H=c.getCoefficient(c.getDegree()),Z=this.field.inverse(H);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){let q=h.getDegree()-c.getDegree(),ce=this.field.multiply(h.getCoefficient(h.getDegree()),Z);z=z.add(this.field.buildMonomial(q,ce)),h=h.subtract(c.multiplyByMonomial(q,ce))}g=z.multiply(p).subtract(k).negative()}let _=g.getCoefficient(0);if(_===0)throw V.getChecksumInstance();let v=this.field.inverse(_),A=g.multiply(v),b=h.multiply(v);return[A,b]}findErrorLocations(i){let o=i.getDegree(),u=new Int32Array(o),c=0;for(let h=1;h<this.field.getSize()&&c<o;h++)i.evaluateAt(h)===0&&(u[c]=this.field.inverse(h),c++);if(c!==o)throw V.getChecksumInstance();return u}findErrorMagnitudes(i,o,u){let c=o.getDegree(),h=new Int32Array(c);for(let v=1;v<=c;v++)h[c-v]=this.field.multiply(v,o.getCoefficient(v));let p=new sn(this.field,h),g=u.length,_=new Int32Array(g);for(let v=0;v<g;v++){let A=this.field.inverse(u[v]),b=this.field.subtract(0,i.evaluateAt(A)),R=this.field.inverse(p.evaluateAt(A));_[v]=this.field.multiply(b,R)}return _}}class Or{constructor(i,o,u,c,h){i instanceof Or?this.constructor_2(i):this.constructor_1(i,o,u,c,h)}constructor_1(i,o,u,c,h){const p=o==null||u==null,g=c==null||h==null;if(p&&g)throw new ee;p?(o=new Ie(0,c.getY()),u=new Ie(0,h.getY())):g&&(c=new Ie(i.getWidth()-1,o.getY()),h=new Ie(i.getWidth()-1,u.getY())),this.image=i,this.topLeft=o,this.bottomLeft=u,this.topRight=c,this.bottomRight=h,this.minX=Math.trunc(Math.min(o.getX(),u.getX())),this.maxX=Math.trunc(Math.max(c.getX(),h.getX())),this.minY=Math.trunc(Math.min(o.getY(),c.getY())),this.maxY=Math.trunc(Math.max(u.getY(),h.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new Or(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,u){let c=this.topLeft,h=this.bottomLeft,p=this.topRight,g=this.bottomRight;if(i>0){let _=u?this.topLeft:this.topRight,v=Math.trunc(_.getY()-i);v<0&&(v=0);let A=new Ie(_.getX(),v);u?c=A:p=A}if(o>0){let _=u?this.bottomLeft:this.bottomRight,v=Math.trunc(_.getY()+o);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let A=new Ie(_.getX(),v);u?h=A:g=A}return new Or(this.image,c,h,p,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class gn{constructor(i,o,u,c){this.columnCount=i,this.errorCorrectionLevel=c,this.rowCountUpperPart=o,this.rowCountLowerPart=u,this.rowCount=o+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Mr{constructor(){this.buffer=""}static form(i,o){let u=-1;function c(p,g,_,v,A,b){if(p==="%%")return"%";if(o[++u]===void 0)return;p=v?parseInt(v.substr(1)):void 0;let R=A?parseInt(A.substr(1)):void 0,k;switch(b){case"s":k=o[u];break;case"c":k=o[u][0];break;case"f":k=parseFloat(o[u]).toFixed(p);break;case"p":k=parseFloat(o[u]).toPrecision(p);break;case"e":k=parseFloat(o[u]).toExponential(p);break;case"x":k=parseInt(o[u]).toString(R||16);break;case"d":k=parseFloat(parseInt(o[u],R||10).toPrecision(p)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(R);let z=parseInt(_),H=_&&_[0]+""=="0"?"0":" ";for(;k.length<z;)k=g!==void 0?k+H:H+k;return k}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(h,c)}format(i,...o){this.buffer+=Mr.form(i,o)}toString(){return this.buffer}}class Ds{constructor(i){this.boundingBox=new Or(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let u=1;u<Ds.MAX_NEARBY_DISTANCE;u++){let c=this.imageRowToCodewordIndex(i)-u;if(c>=0&&(o=this.codewords[c],o!=null)||(c=this.imageRowToCodewordIndex(i)+u,c<this.codewords.length&&(o=this.codewords[c],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Mr;let o=0;for(const u of this.codewords){if(u==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,u.getRowNumber(),u.getValue())}return i.toString()}}Ds.MAX_NEARBY_DISTANCE=5;class Ls{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[u,c]of this.values.entries()){const h={getKey:()=>u,getValue:()=>c};h.getValue()>i?(i=h.getValue(),o=[],o.push(h.getKey())):h.getValue()===i&&o.push(h.getKey())}return xe.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class rh extends Ds{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let u=this.getBoundingBox(),c=this._isLeft?u.getTopLeft():u.getTopRight(),h=this._isLeft?u.getBottomLeft():u.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),_=-1,v=1,A=0;for(let b=p;b<g;b++){if(o[b]==null)continue;let R=o[b],k=R.getRowNumber()-_;if(k===0)A++;else if(k===1)v=Math.max(v,A),A=1,_=R.getRowNumber();else if(k<0||R.getRowNumber()>=i.getRowCount()||k>b)o[b]=null;else{let z;v>2?z=(v-2)*k:z=k;let H=z>=b;for(let Z=1;Z<=z&&!H;Z++)H=o[b-Z]!=null;H?o[b]=null:(_=R.getRowNumber(),A=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let u of this.getCodewords())if(u!=null){let c=u.getRowNumber();if(c>=o.length)continue;o[c]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),u=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.getCodewords(),_=-1;for(let v=h;v<p;v++){if(g[v]==null)continue;let A=g[v];A.setRowNumberAsRowIndicatorColumn();let b=A.getRowNumber()-_;b===0||(b===1?_=A.getRowNumber():A.getRowNumber()>=i.getRowCount()?g[v]=null:_=A.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new Ls,u=new Ls,c=new Ls,h=new Ls;for(let g of i){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let _=g.getValue()%30,v=g.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:u.setValue(_*3+1);break;case 1:h.setValue(_/3),c.setValue(_%3);break;case 2:o.setValue(_+1);break}}if(o.getValue().length===0||u.getValue().length===0||c.getValue().length===0||h.getValue().length===0||o.getValue()[0]<1||u.getValue()[0]+c.getValue()[0]<xe.MIN_ROWS_IN_BARCODE||u.getValue()[0]+c.getValue()[0]>xe.MAX_ROWS_IN_BARCODE)return null;let p=new gn(o.getValue()[0],u.getValue()[0],c.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(i,p),p}removeIncorrectCodewords(i,o){for(let u=0;u<i.length;u++){let c=i[u];if(i[u]==null)continue;let h=c.getValue()%30,p=c.getRowNumber();if(p>o.getRowCount()){i[u]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:h*3+1!==o.getRowCountUpperPart()&&(i[u]=null);break;case 1:(Math.trunc(h/3)!==o.getErrorCorrectionLevel()||h%3!==o.getRowCountLowerPart())&&(i[u]=null);break;case 2:h+1!==o.getColumnCount()&&(i[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Bs{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=xe.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let u=this.detectionResultColumns[o].getCodewords();for(let c=0;c<u.length;c++)u[c]!=null&&(u[c].hasValidRowNumber()||this.adjustRowNumbers(o,c,u))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<i.length;u++)if(i[u]!=null&&o[u]!=null&&i[u].getRowNumber()===o[u].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let h=this.detectionResultColumns[c].getCodewords()[u];h!=null&&(h.setRowNumber(i[u].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<o.length;u++){if(o[u]==null)continue;let c=o[u].getRowNumber(),h=0;for(let p=this.barcodeColumnCount+1;p>0&&h<this.ADJUST_ROW_NUMBER_SKIP;p--){let g=this.detectionResultColumns[p].getCodewords()[u];g!=null&&(h=Bs.adjustRowNumberIfValid(c,h,g),g.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let u=0;u<o.length;u++){if(o[u]==null)continue;let c=o[u].getRowNumber(),h=0;for(let p=1;p<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;p++){let g=this.detectionResultColumns[p].getCodewords()[u];g!=null&&(h=Bs.adjustRowNumberIfValid(c,h,g),g.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(i)?(u.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,u){if(!this.detectionResultColumns[i-1])return;let c=u[o],h=this.detectionResultColumns[i-1].getCodewords(),p=h;this.detectionResultColumns[i+1]!=null&&(p=this.detectionResultColumns[i+1].getCodewords());let g=new Array(14);g[2]=h[o],g[3]=p[o],o>0&&(g[0]=u[o-1],g[4]=h[o-1],g[5]=p[o-1]),o>1&&(g[8]=u[o-2],g[10]=h[o-2],g[11]=p[o-2]),o<u.length-1&&(g[1]=u[o+1],g[6]=h[o+1],g[7]=p[o+1]),o<u.length-2&&(g[9]=u[o+2],g[12]=h[o+2],g[13]=p[o+2]);for(let _ of g)if(Bs.adjustRowNumber(c,_))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Mr;for(let u=0;u<i.getCodewords().length;u++){o.format("CW %3d:",u);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){o.format("    |   ");continue}let h=this.detectionResultColumns[c].getCodewords()[u];if(h==null){o.format("    |   ");continue}o.format(" %3d|%3d",h.getRowNumber(),h.getValue())}o.format("%n")}return o.toString()}}class rs{constructor(i,o,u,c){this.rowNumber=rs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(u),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==rs.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}rs.BARCODE_ROW_UNKNOWN=-1;class Zn{static initialize(){for(let i=0;i<xe.SYMBOL_TABLE.length;i++){let o=xe.SYMBOL_TABLE[i],u=o&1;for(let c=0;c<xe.BARS_IN_MODULE;c++){let h=0;for(;(o&1)===u;)h+=1,o>>=1;u=o&1,Zn.RATIOS_TABLE[i]||(Zn.RATIOS_TABLE[i]=new Array(xe.BARS_IN_MODULE)),Zn.RATIOS_TABLE[i][xe.BARS_IN_MODULE-c-1]=Math.fround(h/xe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=Zn.getDecodedCodewordValue(Zn.sampleBitCounts(i));return o!==-1?o:Zn.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=st.sum(i),u=new Int32Array(xe.BARS_IN_MODULE),c=0,h=0;for(let p=0;p<xe.MODULES_IN_CODEWORD;p++){let g=o/(2*xe.MODULES_IN_CODEWORD)+p*o/xe.MODULES_IN_CODEWORD;h+i[c]<=g&&(h+=i[c],c++),u[c]++}return u}static getDecodedCodewordValue(i){let o=Zn.getBitValue(i);return xe.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let u=0;u<i.length;u++)for(let c=0;c<i[u];c++)o=o<<1|(u%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=st.sum(i),u=new Array(xe.BARS_IN_MODULE);if(o>1)for(let p=0;p<u.length;p++)u[p]=Math.fround(i[p]/o);let c=No.MAX_VALUE,h=-1;this.bSymbolTableReady||Zn.initialize();for(let p=0;p<Zn.RATIOS_TABLE.length;p++){let g=0,_=Zn.RATIOS_TABLE[p];for(let v=0;v<xe.BARS_IN_MODULE;v++){let A=Math.fround(_[v]-u[v]);if(g+=Math.fround(A*A),g>=c)break}g<c&&(c=g,h=xe.SYMBOL_TABLE[p])}return h}}Zn.bSymbolTableReady=!1,Zn.RATIOS_TABLE=new Array(xe.SYMBOL_TABLE.length).map(S=>new Array(xe.BARS_IN_MODULE));class Kl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Qe{static parseLong(i,o=void 0){return parseInt(i,o)}}class ih extends w{}ih.kind="NullPointerException";class kr{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,u){if(i==null)throw new ih;if(o<0||o>i.length||u<0||o+u>i.length||o+u<0)throw new J;if(u===0)return;for(let c=0;c<u;c++)this.write(i[o+c])}flush(){}close(){}}class zo extends w{}class sh extends kr{constructor(i=32){if(super(),this.count=0,i<0)throw new I("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let u=this.buf.length<<1;if(u-i<0&&(u=i),u<0){if(i<0)throw new zo;u=B.MAX_VALUE}this.buf=D.copyOfUint8Array(this.buf,u)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,u){if(o<0||o>i.length||u<0||o+u-i.length>0)throw new J;this.ensureCapacity(this.count+u),j.arraycopy(i,o,this.buf,this.count,u),this.count+=u}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return D.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var yt;(function(S){S[S.ALPHA=0]="ALPHA",S[S.LOWER=1]="LOWER",S[S.MIXED=2]="MIXED",S[S.PUNCT=3]="PUNCT",S[S.ALPHA_SHIFT=4]="ALPHA_SHIFT",S[S.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(yt||(yt={}));function Ra(){if(typeof window<"u")return window.BigInt||null;if(typeof Ba<"u")return Ba.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Na;function fi(S){if(typeof Na>"u"&&(Na=Ra()),Na===null)throw new Error("BigInt is not supported!");return Na(S)}function o0(){let S=[];S[0]=fi(1);let i=fi(900);S[1]=i;for(let o=2;o<16;o++)S[o]=S[o-1]*i;return S}class K{static decode(i,o){let u=new Je(""),c=te.ISO8859_1;u.enableDecoding(c);let h=1,p=i[h++],g=new Kl;for(;h<i[0];){switch(p){case K.TEXT_COMPACTION_MODE_LATCH:h=K.textCompaction(i,h,u);break;case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:h=K.byteCompaction(p,i,c,h,u);break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[h++]);break;case K.NUMERIC_COMPACTION_MODE_LATCH:h=K.numericCompaction(i,h,u);break;case K.ECI_CHARSET:te.getCharacterSetECIByValue(i[h++]);break;case K.ECI_GENERAL_PURPOSE:h+=2;break;case K.ECI_USER_DEFINED:h++;break;case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=K.decodeMacroBlock(i,h,g);break;case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:throw new Y;default:h--,h=K.textCompaction(i,h,u);break}if(h<i.length)p=i[h++];else throw Y.getFormatInstance()}if(u.length()===0)throw Y.getFormatInstance();let _=new Rs(null,u.toString(),null,o);return _.setOther(g),_}static decodeMacroBlock(i,o,u){if(o+K.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw Y.getFormatInstance();let c=new Int32Array(K.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<K.NUMBER_OF_SEQUENCE_CODEWORDS;g++,o++)c[g]=i[o];u.setSegmentIndex(B.parseInt(K.decodeBase900toBase10(c,K.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new Je;o=K.textCompaction(i,o,h),u.setFileId(h.toString());let p=-1;for(i[o]===K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=o+1);o<i[0];)switch(i[o]){case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case K.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new Je;o=K.textCompaction(i,o+1,g),u.setFileName(g.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new Je;o=K.textCompaction(i,o+1,_),u.setSender(_.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new Je;o=K.textCompaction(i,o+1,v),u.setAddressee(v.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let A=new Je;o=K.numericCompaction(i,o+1,A),u.setSegmentCount(B.parseInt(A.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let b=new Je;o=K.numericCompaction(i,o+1,b),u.setTimestamp(Qe.parseLong(b.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new Je;o=K.numericCompaction(i,o+1,R),u.setChecksum(B.parseInt(R.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let k=new Je;o=K.numericCompaction(i,o+1,k),u.setFileSize(Qe.parseLong(k.toString()));break;default:throw Y.getFormatInstance()}break;case K.MACRO_PDF417_TERMINATOR:o++,u.setLastSegment(!0);break;default:throw Y.getFormatInstance()}if(p!==-1){let g=o-p;u.isLastSegment()&&g--,u.setOptionalData(D.copyOfRange(i,p,p+g))}return o}static textCompaction(i,o,u){let c=new Int32Array((i[0]-o)*2),h=new Int32Array((i[0]-o)*2),p=0,g=!1;for(;o<i[0]&&!g;){let _=i[o++];if(_<K.TEXT_COMPACTION_MODE_LATCH)c[p]=_/30,c[p+1]=_%30,p+=2;else switch(_){case K.TEXT_COMPACTION_MODE_LATCH:c[p++]=K.TEXT_COMPACTION_MODE_LATCH;break;case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:o--,g=!0;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[p]=K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=i[o++],h[p]=_,p++;break}}return K.decodeTextCompaction(c,h,p,u),o}static decodeTextCompaction(i,o,u,c){let h=yt.ALPHA,p=yt.ALPHA,g=0;for(;g<u;){let _=i[g],v="";switch(h){case yt.ALPHA:if(_<26)v=String.fromCharCode(65+_);else switch(_){case 26:v=" ";break;case K.LL:h=yt.LOWER;break;case K.ML:h=yt.MIXED;break;case K.PS:p=h,h=yt.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case K.TEXT_COMPACTION_MODE_LATCH:h=yt.ALPHA;break}break;case yt.LOWER:if(_<26)v=String.fromCharCode(97+_);else switch(_){case 26:v=" ";break;case K.AS:p=h,h=yt.ALPHA_SHIFT;break;case K.ML:h=yt.MIXED;break;case K.PS:p=h,h=yt.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case K.TEXT_COMPACTION_MODE_LATCH:h=yt.ALPHA;break}break;case yt.MIXED:if(_<K.PL)v=K.MIXED_CHARS[_];else switch(_){case K.PL:h=yt.PUNCT;break;case 26:v=" ";break;case K.LL:h=yt.LOWER;break;case K.AL:h=yt.ALPHA;break;case K.PS:p=h,h=yt.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case K.TEXT_COMPACTION_MODE_LATCH:h=yt.ALPHA;break}break;case yt.PUNCT:if(_<K.PAL)v=K.PUNCT_CHARS[_];else switch(_){case K.PAL:h=yt.ALPHA;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case K.TEXT_COMPACTION_MODE_LATCH:h=yt.ALPHA;break}break;case yt.ALPHA_SHIFT:if(h=p,_<26)v=String.fromCharCode(65+_);else switch(_){case 26:v=" ";break;case K.TEXT_COMPACTION_MODE_LATCH:h=yt.ALPHA;break}break;case yt.PUNCT_SHIFT:if(h=p,_<K.PAL)v=K.PUNCT_CHARS[_];else switch(_){case K.PAL:h=yt.ALPHA;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case K.TEXT_COMPACTION_MODE_LATCH:h=yt.ALPHA;break}break}v!==""&&c.append(v),g++}}static byteCompaction(i,o,u,c,h){let p=new sh,g=0,_=0,v=!1;switch(i){case K.BYTE_COMPACTION_MODE_LATCH:let A=new Int32Array(6),b=o[c++];for(;c<o[0]&&!v;)switch(A[g++]=b,_=900*_+b,b=o[c++],b){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:c--,v=!0;break;default:if(g%5===0&&g>0){for(let R=0;R<6;++R)p.write(Number(fi(_)>>fi(8*(5-R))));_=0,g=0}break}c===o[0]&&b<K.TEXT_COMPACTION_MODE_LATCH&&(A[g++]=b);for(let R=0;R<g;R++)p.write(A[R]);break;case K.BYTE_COMPACTION_MODE_LATCH_6:for(;c<o[0]&&!v;){let R=o[c++];if(R<K.TEXT_COMPACTION_MODE_LATCH)g++,_=900*_+R;else switch(R){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:c--,v=!0;break}if(g%5===0&&g>0){for(let k=0;k<6;++k)p.write(Number(fi(_)>>fi(8*(5-k))));_=0,g=0}}break}return h.append(Ze.decode(p.toByteArray(),u)),c}static numericCompaction(i,o,u){let c=0,h=!1,p=new Int32Array(K.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!h;){let g=i[o++];if(o===i[0]&&(h=!0),g<K.TEXT_COMPACTION_MODE_LATCH)p[c]=g,c++;else switch(g){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:o--,h=!0;break}(c%K.MAX_NUMERIC_CODEWORDS===0||g===K.NUMERIC_COMPACTION_MODE_LATCH||h)&&c>0&&(u.append(K.decodeBase900toBase10(p,c)),c=0)}return o}static decodeBase900toBase10(i,o){let u=fi(0);for(let h=0;h<o;h++)u+=K.EXP900[o-h-1]*fi(i[h]);let c=u.toString();if(c.charAt(0)!=="1")throw new Y;return c.substring(1)}}K.TEXT_COMPACTION_MODE_LATCH=900,K.BYTE_COMPACTION_MODE_LATCH=901,K.NUMERIC_COMPACTION_MODE_LATCH=902,K.BYTE_COMPACTION_MODE_LATCH_6=924,K.ECI_USER_DEFINED=925,K.ECI_GENERAL_PURPOSE=926,K.ECI_CHARSET=927,K.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,K.MACRO_PDF417_TERMINATOR=922,K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,K.MAX_NUMERIC_CODEWORDS=15,K.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,K.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,K.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,K.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,K.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,K.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,K.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,K.PL=25,K.LL=27,K.AS=27,K.ML=28,K.AL=28,K.PS=29,K.PAL=29,K.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,K.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",K.EXP900=Ra()?o0():[],K.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ge{constructor(){}static decode(i,o,u,c,h,p,g){let _=new Or(i,o,u,c,h),v=null,A=null,b;for(let z=!0;;z=!1){if(o!=null&&(v=Ge.getRowIndicatorColumn(i,_,o,!0,p,g)),c!=null&&(A=Ge.getRowIndicatorColumn(i,_,c,!1,p,g)),b=Ge.merge(v,A),b==null)throw ee.getNotFoundInstance();let H=b.getBoundingBox();if(z&&H!=null&&(H.getMinY()<_.getMinY()||H.getMaxY()>_.getMaxY()))_=H;else break}b.setBoundingBox(_);let R=b.getBarcodeColumnCount()+1;b.setDetectionResultColumn(0,v),b.setDetectionResultColumn(R,A);let k=v!=null;for(let z=1;z<=R;z++){let H=k?z:R-z;if(b.getDetectionResultColumn(H)!==void 0)continue;let Z;H===0||H===R?Z=new rh(_,H===0):Z=new Ds(_),b.setDetectionResultColumn(H,Z);let q=-1,ce=q;for(let de=_.getMinY();de<=_.getMaxY();de++){if(q=Ge.getStartColumn(b,H,de,k),q<0||q>_.getMaxX()){if(ce===-1)continue;q=ce}let oe=Ge.detectCodeword(i,_.getMinX(),_.getMaxX(),k,q,de,p,g);oe!=null&&(Z.setCodeword(de,oe),ce=q,p=Math.min(p,oe.getWidth()),g=Math.max(g,oe.getWidth()))}}return Ge.createDecoderResult(b)}static merge(i,o){if(i==null&&o==null)return null;let u=Ge.getBarcodeMetadata(i,o);if(u==null)return null;let c=Or.merge(Ge.adjustBoundingBox(i),Ge.adjustBoundingBox(o));return new Bs(u,c)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let u=Ge.getMax(o),c=0;for(let g of o)if(c+=u-g,g>0)break;let h=i.getCodewords();for(let g=0;c>0&&h[g]==null;g++)c--;let p=0;for(let g=o.length-1;g>=0&&(p+=u-o[g],!(o[g]>0));g--);for(let g=h.length-1;p>0&&h[g]==null;g--)p--;return i.getBoundingBox().addMissingRows(c,p,i.isLeft())}static getMax(i){let o=-1;for(let u of i)o=Math.max(o,u);return o}static getBarcodeMetadata(i,o){let u;if(i==null||(u=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let c;return o==null||(c=o.getBarcodeMetadata())==null?u:u.getColumnCount()!==c.getColumnCount()&&u.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&u.getRowCount()!==c.getRowCount()?null:u}static getRowIndicatorColumn(i,o,u,c,h,p){let g=new rh(o,c);for(let _=0;_<2;_++){let v=_===0?1:-1,A=Math.trunc(Math.trunc(u.getX()));for(let b=Math.trunc(Math.trunc(u.getY()));b<=o.getMaxY()&&b>=o.getMinY();b+=v){let R=Ge.detectCodeword(i,0,i.getWidth(),c,A,b,h,p);R!=null&&(g.setCodeword(b,R),c?A=R.getStartX():A=R.getEndX())}}return g}static adjustCodewordCount(i,o){let u=o[0][1],c=u.getValue(),h=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Ge.getNumberOfECCodeWords(i.getBarcodeECLevel());if(c.length===0){if(h<1||h>xe.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();u.setValue(h)}else c[0]!==h&&u.setValue(h)}static createDecoderResult(i){let o=Ge.createBarcodeMatrix(i);Ge.adjustCodewordCount(i,o);let u=new Array,c=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),h=[],p=new Array;for(let _=0;_<i.getBarcodeRowCount();_++)for(let v=0;v<i.getBarcodeColumnCount();v++){let A=o[_][v+1].getValue(),b=_*i.getBarcodeColumnCount()+v;A.length===0?u.push(b):A.length===1?c[b]=A[0]:(p.push(b),h.push(A))}let g=new Array(h.length);for(let _=0;_<g.length;_++)g[_]=h[_];return Ge.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),c,xe.toIntArray(u),xe.toIntArray(p),g)}static createDecoderResultFromAmbiguousValues(i,o,u,c,h){let p=new Int32Array(c.length),g=100;for(;g-- >0;){for(let _=0;_<p.length;_++)o[c[_]]=h[_][p[_]];try{return Ge.decodeCodewords(o,i,u)}catch(_){if(!(_ instanceof V))throw _}if(p.length===0)throw V.getChecksumInstance();for(let _=0;_<p.length;_++)if(p[_]<h[_].length-1){p[_]++;break}else if(p[_]=0,_===p.length-1)throw V.getChecksumInstance()}throw V.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let c=0;c<o.length;c++)for(let h=0;h<o[c].length;h++)o[c][h]=new Ls;let u=0;for(let c of i.getDetectionResultColumns()){if(c!=null){for(let h of c.getCodewords())if(h!=null){let p=h.getRowNumber();if(p>=0){if(p>=o.length)continue;o[p][u].setValue(h.getValue())}}}u++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,u,c){let h=c?1:-1,p=null;if(Ge.isValidBarcodeColumn(i,o-h)&&(p=i.getDetectionResultColumn(o-h).getCodeword(u)),p!=null)return c?p.getEndX():p.getStartX();if(p=i.getDetectionResultColumn(o).getCodewordNearby(u),p!=null)return c?p.getStartX():p.getEndX();if(Ge.isValidBarcodeColumn(i,o-h)&&(p=i.getDetectionResultColumn(o-h).getCodewordNearby(u)),p!=null)return c?p.getEndX():p.getStartX();let g=0;for(;Ge.isValidBarcodeColumn(i,o-h);){o-=h;for(let _ of i.getDetectionResultColumn(o).getCodewords())if(_!=null)return(c?_.getEndX():_.getStartX())+h*g*(_.getEndX()-_.getStartX());g++}return c?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,u,c,h,p,g,_){h=Ge.adjustCodewordStartColumn(i,o,u,c,h,p);let v=Ge.getModuleBitCount(i,o,u,c,h,p);if(v==null)return null;let A,b=st.sum(v);if(c)A=h+b;else{for(let z=0;z<v.length/2;z++){let H=v[z];v[z]=v[v.length-1-z],v[v.length-1-z]=H}A=h,h=A-b}if(!Ge.checkCodewordSkew(b,g,_))return null;let R=Zn.getDecodedValue(v),k=xe.getCodeword(R);return k===-1?null:new rs(h,A,Ge.getCodewordBucketNumber(R),k)}static getModuleBitCount(i,o,u,c,h,p){let g=h,_=new Int32Array(8),v=0,A=c?1:-1,b=c;for(;(c?g<u:g>=o)&&v<_.length;)i.get(g,p)===b?(_[v]++,g+=A):(v++,b=!b);return v===_.length||g===(c?u:o)&&v===_.length-1?_:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,u,c,h,p){let g=h,_=c?-1:1;for(let v=0;v<2;v++){for(;(c?g>=o:g<u)&&c===i.get(g,p);){if(Math.abs(h-g)>Ge.CODEWORD_SKEW_SIZE)return h;g+=_}_=-_,c=!c}return g}static checkCodewordSkew(i,o,u){return o-Ge.CODEWORD_SKEW_SIZE<=i&&i<=u+Ge.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,u){if(i.length===0)throw Y.getFormatInstance();let c=1<<o+1,h=Ge.correctErrors(i,u,c);Ge.verifyCodewordCount(i,c);let p=K.decode(i,""+o);return p.setErrorsCorrected(h),p.setErasures(u.length),p}static correctErrors(i,o,u){if(o!=null&&o.length>u/2+Ge.MAX_ERRORS||u<0||u>Ge.MAX_EC_CODEWORDS)throw V.getChecksumInstance();return Ge.errorCorrection.decode(i,u,o)}static verifyCodewordCount(i,o){if(i.length<4)throw Y.getFormatInstance();let u=i[0];if(u>i.length)throw Y.getFormatInstance();if(u===0)if(o<i.length)i[0]=i.length-o;else throw Y.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),u=0,c=o.length-1;for(;!((i&1)!==u&&(u=i&1,c--,c<0));)o[c]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Ge.getCodewordBucketNumber(Ge.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new Mr;for(let u=0;u<i.length;u++){o.format("Row %2d: ",u);for(let c=0;c<i[u].length;c++){let h=i[u][c];h.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}o.format("%n")}return o.toString()}}Ge.CODEWORD_SKEW_SIZE=2,Ge.MAX_ERRORS=3,Ge.MAX_EC_CODEWORDS=512,Ge.errorCorrection=new ba;class mn{decode(i,o=null){let u=mn.decode(i,o,!1);if(u==null||u.length===0||u[0]==null)throw ee.getNotFoundInstance();return u[0]}decodeMultiple(i,o=null){try{return mn.decode(i,o,!0)}catch(u){throw u instanceof Y||u instanceof V?ee.getNotFoundInstance():u}}static decode(i,o,u){const c=new Array,h=He.detectMultiple(i,o,u);for(const p of h.getPoints()){const g=Ge.decode(h.getBits(),p[4],p[5],p[6],p[7],mn.getMinCodewordWidth(p),mn.getMaxCodewordWidth(p)),_=new je(g.getText(),g.getRawBytes(),void 0,p,ue.PDF_417);_.putMetadata(St.ERROR_CORRECTION_LEVEL,g.getECLevel());const v=g.getOther();v!=null&&_.putMetadata(St.PDF417_EXTRA_METADATA,v),c.push(_)}return c.map(p=>p)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?B.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(mn.getMaxWidth(i[0],i[4]),mn.getMaxWidth(i[6],i[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.max(mn.getMaxWidth(i[1],i[5]),mn.getMaxWidth(i[7],i[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(mn.getMinWidth(i[0],i[4]),mn.getMinWidth(i[6],i[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.min(mn.getMinWidth(i[1],i[5]),mn.getMinWidth(i[7],i[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}reset(){}}class cr extends w{}cr.kind="ReaderException";class oh{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!r(i)&&i.get(ie.TRY_HARDER)===!0,u=r(i)?null:i.get(ie.POSSIBLE_FORMATS),c=new Array;if(!r(u)){const h=u.some(p=>p===ue.UPC_A||p===ue.UPC_E||p===ue.EAN_13||p===ue.EAN_8||p===ue.CODABAR||p===ue.CODE_39||p===ue.CODE_93||p===ue.CODE_128||p===ue.ITF||p===ue.RSS_14||p===ue.RSS_EXPANDED);h&&!o&&c.push(new Pi(i,this.verbose)),u.includes(ue.QR_CODE)&&c.push(new pn),u.includes(ue.DATA_MATRIX)&&c.push(new _t),u.includes(ue.AZTEC)&&c.push(new Oo),u.includes(ue.PDF_417)&&c.push(new mn),h&&o&&c.push(new Pi(i,this.verbose))}c.length===0&&(o||c.push(new Pi(i,this.verbose)),c.push(new pn),c.push(new _t),c.push(new Oo),c.push(new mn),o&&c.push(new Pi(i,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new cr("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(u){if(u instanceof cr)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class ah extends It{constructor(i=null,o=500){const u=new oh;u.setHints(i),super(u,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Oi extends It{constructor(i=500){super(new mn,i)}}class lh extends It{constructor(i=500){super(new pn,i)}}var Pa;(function(S){S[S.ERROR_CORRECTION=0]="ERROR_CORRECTION",S[S.CHARACTER_SET=1]="CHARACTER_SET",S[S.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",S[S.MIN_SIZE=3]="MIN_SIZE",S[S.MAX_SIZE=4]="MAX_SIZE",S[S.MARGIN=5]="MARGIN",S[S.PDF417_COMPACT=6]="PDF417_COMPACT",S[S.PDF417_COMPACTION=7]="PDF417_COMPACTION",S[S.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",S[S.AZTEC_LAYERS=9]="AZTEC_LAYERS",S[S.QR_VERSION=10]="QR_VERSION"})(Pa||(Pa={}));var $t=Pa;class Ql{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new vn(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let u=o[o.length-1];const c=this.field;for(let h=o.length;h<=i;h++){const p=u.multiply(new vn(c,Int32Array.from([1,c.exp(h-1+c.getGeneratorBase())])));o.push(p),u=p}}return o[i]}encode(i,o){if(o===0)throw new I("No error correction bytes");const u=i.length-o;if(u<=0)throw new I("No data bytes provided");const c=this.buildGenerator(o),h=new Int32Array(u);j.arraycopy(i,0,h,0,u);let p=new vn(this.field,h);p=p.multiplyByMonomial(o,1);const _=p.divide(c)[1].getCoefficients(),v=o-_.length;for(let A=0;A<v;A++)i[u+A]=0;j.arraycopy(_,0,i,u+v,_.length)}}class Lt{constructor(){}static applyMaskPenaltyRule1(i){return Lt.applyMaskPenaltyRule1Internal(i,!0)+Lt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const u=i.getArray(),c=i.getWidth(),h=i.getHeight();for(let p=0;p<h-1;p++){const g=u[p];for(let _=0;_<c-1;_++){const v=g[_];v===g[_+1]&&v===u[p+1][_]&&v===u[p+1][_+1]&&o++}}return Lt.N2*o}static applyMaskPenaltyRule3(i){let o=0;const u=i.getArray(),c=i.getWidth(),h=i.getHeight();for(let p=0;p<h;p++)for(let g=0;g<c;g++){const _=u[p];g+6<c&&_[g]===1&&_[g+1]===0&&_[g+2]===1&&_[g+3]===1&&_[g+4]===1&&_[g+5]===0&&_[g+6]===1&&(Lt.isWhiteHorizontal(_,g-4,g)||Lt.isWhiteHorizontal(_,g+7,g+11))&&o++,p+6<h&&u[p][g]===1&&u[p+1][g]===0&&u[p+2][g]===1&&u[p+3][g]===1&&u[p+4][g]===1&&u[p+5][g]===0&&u[p+6][g]===1&&(Lt.isWhiteVertical(u,g,p-4,p)||Lt.isWhiteVertical(u,g,p+7,p+11))&&o++}return o*Lt.N3}static isWhiteHorizontal(i,o,u){o=Math.max(o,0),u=Math.min(u,i.length);for(let c=o;c<u;c++)if(i[c]===1)return!1;return!0}static isWhiteVertical(i,o,u,c){u=Math.max(u,0),c=Math.min(c,i.length);for(let h=u;h<c;h++)if(i[h][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const u=i.getArray(),c=i.getWidth(),h=i.getHeight();for(let _=0;_<h;_++){const v=u[_];for(let A=0;A<c;A++)v[A]===1&&o++}const p=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-p)*10/p)*Lt.N4}static getDataMaskBit(i,o,u){let c,h;switch(i){case 0:c=u+o&1;break;case 1:c=u&1;break;case 2:c=o%3;break;case 3:c=(u+o)%3;break;case 4:c=Math.floor(u/2)+Math.floor(o/3)&1;break;case 5:h=u*o,c=(h&1)+h%3;break;case 6:h=u*o,c=(h&1)+h%3&1;break;case 7:h=u*o,c=h%3+(u+o&1)&1;break;default:throw new I("Invalid mask pattern: "+i)}return c===0}static applyMaskPenaltyRule1Internal(i,o){let u=0;const c=o?i.getHeight():i.getWidth(),h=o?i.getWidth():i.getHeight(),p=i.getArray();for(let g=0;g<c;g++){let _=0,v=-1;for(let A=0;A<h;A++){const b=o?p[g][A]:p[A][g];b===v?_++:(_>=5&&(u+=Lt.N1+(_-5)),_=1,v=b)}_>=5&&(u+=Lt.N1+(_-5))}return u}}Lt.N1=3,Lt.N2=3,Lt.N3=40,Lt.N4=10;class jo{constructor(i,o){this.width=i,this.height=o;const u=new Array(o);for(let c=0;c!==o;c++)u[c]=new Uint8Array(i);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,u){this.bytes[o][i]=u}setBoolean(i,o,u){this.bytes[o][i]=u?1:0}clear(i){for(const o of this.bytes)D.fill(o,i)}equals(i){if(!(i instanceof jo))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let u=0,c=this.height;u<c;++u){const h=this.bytes[u],p=o.bytes[u];for(let g=0,_=this.width;g<_;++g)if(h[g]!==p[g])return!1}return!0}toString(){const i=new Je;for(let o=0,u=this.height;o<u;++o){const c=this.bytes[o];for(let h=0,p=this.width;h<p;++h)switch(c[h]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class is{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new Je;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<is.NUM_MASK_PATTERNS}}is.NUM_MASK_PATTERNS=8;class wt extends w{}wt.kind="WriterException";class Ne{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,u,c,h){Ne.clearMatrix(h),Ne.embedBasicPatterns(u,h),Ne.embedTypeInfo(o,c,h),Ne.maybeEmbedVersionInfo(u,h),Ne.embedDataBits(i,c,h)}static embedBasicPatterns(i,o){Ne.embedPositionDetectionPatternsAndSeparators(o),Ne.embedDarkDotAtLeftBottomCorner(o),Ne.maybeEmbedPositionAdjustmentPatterns(i,o),Ne.embedTimingPatterns(o)}static embedTypeInfo(i,o,u){const c=new G;Ne.makeTypeInfoBits(i,o,c);for(let h=0,p=c.getSize();h<p;++h){const g=c.get(c.getSize()-1-h),_=Ne.TYPE_INFO_COORDINATES[h],v=_[0],A=_[1];if(u.setBoolean(v,A,g),h<8){const b=u.getWidth()-h-1,R=8;u.setBoolean(b,R,g)}else{const R=u.getHeight()-7+(h-8);u.setBoolean(8,R,g)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const u=new G;Ne.makeVersionInfoBits(i,u);let c=6*3-1;for(let h=0;h<6;++h)for(let p=0;p<3;++p){const g=u.get(c);c--,o.setBoolean(h,o.getHeight()-11+p,g),o.setBoolean(o.getHeight()-11+p,h,g)}}static embedDataBits(i,o,u){let c=0,h=-1,p=u.getWidth()-1,g=u.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);g>=0&&g<u.getHeight();){for(let _=0;_<2;++_){const v=p-_;if(!Ne.isEmpty(u.get(v,g)))continue;let A;c<i.getSize()?(A=i.get(c),++c):A=!1,o!==255&&Lt.getDataMaskBit(o,v,g)&&(A=!A),u.setBoolean(v,g,A)}g+=h}h=-h,g+=h,p-=2}if(c!==i.getSize())throw new wt("Not all bits consumed: "+c+"/"+i.getSize())}static findMSBSet(i){return 32-B.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new I("0 polynomial");const u=Ne.findMSBSet(o);for(i<<=u-1;Ne.findMSBSet(i)>=u;)i^=o<<Ne.findMSBSet(i)-u;return i}static makeTypeInfoBits(i,o,u){if(!is.isValidMaskPattern(o))throw new wt("Invalid mask pattern");const c=i.getBits()<<3|o;u.appendBits(c,5);const h=Ne.calculateBCHCode(c,Ne.TYPE_INFO_POLY);u.appendBits(h,10);const p=new G;if(p.appendBits(Ne.TYPE_INFO_MASK_PATTERN,15),u.xor(p),u.getSize()!==15)throw new wt("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const u=Ne.calculateBCHCode(i.getVersionNumber(),Ne.VERSION_INFO_POLY);if(o.appendBits(u,12),o.getSize()!==18)throw new wt("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const u=(o+1)%2;Ne.isEmpty(i.get(o,6))&&i.setNumber(o,6,u),Ne.isEmpty(i.get(6,o))&&i.setNumber(6,o,u)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new wt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,u){for(let c=0;c<8;++c){if(!Ne.isEmpty(u.get(i+c,o)))throw new wt;u.setNumber(i+c,o,0)}}static embedVerticalSeparationPattern(i,o,u){for(let c=0;c<7;++c){if(!Ne.isEmpty(u.get(i,o+c)))throw new wt;u.setNumber(i,o+c,0)}}static embedPositionAdjustmentPattern(i,o,u){for(let c=0;c<5;++c){const h=Ne.POSITION_ADJUSTMENT_PATTERN[c];for(let p=0;p<5;++p)u.setNumber(i+p,o+c,h[p])}}static embedPositionDetectionPattern(i,o,u){for(let c=0;c<7;++c){const h=Ne.POSITION_DETECTION_PATTERN[c];for(let p=0;p<7;++p)u.setNumber(i+p,o+c,h[p])}}static embedPositionDetectionPatternsAndSeparators(i){const o=Ne.POSITION_DETECTION_PATTERN[0].length;Ne.embedPositionDetectionPattern(0,0,i),Ne.embedPositionDetectionPattern(i.getWidth()-o,0,i),Ne.embedPositionDetectionPattern(0,i.getWidth()-o,i);const u=8;Ne.embedHorizontalSeparationPattern(0,u-1,i),Ne.embedHorizontalSeparationPattern(i.getWidth()-u,u-1,i),Ne.embedHorizontalSeparationPattern(0,i.getWidth()-u,i);const c=7;Ne.embedVerticalSeparationPattern(c,0,i),Ne.embedVerticalSeparationPattern(i.getHeight()-c-1,0,i),Ne.embedVerticalSeparationPattern(c,i.getHeight()-c,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const u=i.getVersionNumber()-1,c=Ne.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let h=0,p=c.length;h!==p;h++){const g=c[h];if(g>=0)for(let _=0;_!==p;_++){const v=c[_];v>=0&&Ne.isEmpty(o.get(v,g))&&Ne.embedPositionAdjustmentPattern(v-2,g-2,o)}}}}Ne.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ne.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ne.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ne.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ne.VERSION_INFO_POLY=7973,Ne.TYPE_INFO_POLY=1335,Ne.TYPE_INFO_MASK_PATTERN=21522;class a0{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ct{constructor(){}static calculateMaskPenalty(i){return Lt.applyMaskPenaltyRule1(i)+Lt.applyMaskPenaltyRule2(i)+Lt.applyMaskPenaltyRule3(i)+Lt.applyMaskPenaltyRule4(i)}static encode(i,o,u=null){let c=Ct.DEFAULT_BYTE_MODE_ENCODING;const h=u!==null&&u.get($t.CHARACTER_SET)!==void 0;h&&(c=u.get($t.CHARACTER_SET).toString());const p=this.chooseMode(i,c),g=new G;if(p===Re.BYTE&&(h||Ct.DEFAULT_BYTE_MODE_ENCODING!==c)){const de=te.getCharacterSetECIByName(c);de!==void 0&&this.appendECI(de,g)}this.appendModeInfo(p,g);const _=new G;this.appendBytes(i,p,_,c);let v;if(u!==null&&u.get($t.QR_VERSION)!==void 0){const de=Number.parseInt(u.get($t.QR_VERSION).toString(),10);v=ye.getVersionForNumber(de);const oe=this.calculateBitsNeeded(p,g,_,v);if(!this.willFit(oe,v,o))throw new wt("Data too big for requested version")}else v=this.recommendVersion(o,p,g,_);const A=new G;A.appendBitArray(g);const b=p===Re.BYTE?_.getSizeInBytes():i.length;this.appendLengthInfo(b,v,p,A),A.appendBitArray(_);const R=v.getECBlocksForLevel(o),k=v.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(k,A);const z=this.interleaveWithECBytes(A,v.getTotalCodewords(),k,R.getNumBlocks()),H=new is;H.setECLevel(o),H.setMode(p),H.setVersion(v);const Z=v.getDimensionForVersion(),q=new jo(Z,Z),ce=this.chooseMaskPattern(z,o,v,q);return H.setMaskPattern(ce),Ne.buildMatrix(z,o,v,ce,q),H.setMatrix(q),H}static recommendVersion(i,o,u,c){const h=this.calculateBitsNeeded(o,u,c,ye.getVersionForNumber(1)),p=this.chooseVersion(h,i),g=this.calculateBitsNeeded(o,u,c,p);return this.chooseVersion(g,i)}static calculateBitsNeeded(i,o,u,c){return o.getSize()+i.getCharacterCountBits(c)+u.getSize()}static getAlphanumericCode(i){return i<Ct.ALPHANUMERIC_TABLE.length?Ct.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(te.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return Re.KANJI;let u=!1,c=!1;for(let h=0,p=i.length;h<p;++h){const g=i.charAt(h);if(Ct.isDigit(g))u=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)c=!0;else return Re.BYTE}return c?Re.ALPHANUMERIC:u?Re.NUMERIC:Re.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=Ze.encode(i,te.SJIS)}catch{return!1}const u=o.length;if(u%2!==0)return!1;for(let c=0;c<u;c+=2){const h=o[c]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(i,o,u,c){let h=Number.MAX_SAFE_INTEGER,p=-1;for(let g=0;g<is.NUM_MASK_PATTERNS;g++){Ne.buildMatrix(i,o,u,g,c);let _=this.calculateMaskPenalty(c);_<h&&(h=_,p=g)}return p}static chooseVersion(i,o){for(let u=1;u<=40;u++){const c=ye.getVersionForNumber(u);if(Ct.willFit(i,c,o))return c}throw new wt("Data too big")}static willFit(i,o,u){const c=o.getTotalCodewords(),p=o.getECBlocksForLevel(u).getTotalECCodewords(),g=c-p,_=(i+7)/8;return g>=_}static terminateBits(i,o){const u=i*8;if(o.getSize()>u)throw new wt("data bits cannot fit in the QR Code"+o.getSize()+" > "+u);for(let p=0;p<4&&o.getSize()<u;++p)o.appendBit(!1);const c=o.getSize()&7;if(c>0)for(let p=c;p<8;p++)o.appendBit(!1);const h=i-o.getSizeInBytes();for(let p=0;p<h;++p)o.appendBits(p&1?17:236,8);if(o.getSize()!==u)throw new wt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,u,c,h,p){if(c>=u)throw new wt("Block ID too large");const g=i%u,_=u-g,v=Math.floor(i/u),A=v+1,b=Math.floor(o/u),R=b+1,k=v-b,z=A-R;if(k!==z)throw new wt("EC bytes mismatch");if(u!==_+g)throw new wt("RS blocks mismatch");if(i!==(b+k)*_+(R+z)*g)throw new wt("Total bytes mismatch");c<_?(h[0]=b,p[0]=k):(h[0]=R,p[0]=z)}static interleaveWithECBytes(i,o,u,c){if(i.getSizeInBytes()!==u)throw new wt("Number of bits and data bytes does not match");let h=0,p=0,g=0;const _=new Array;for(let A=0;A<c;++A){const b=new Int32Array(1),R=new Int32Array(1);Ct.getNumDataBytesAndNumECBytesForBlockID(o,u,c,A,b,R);const k=b[0],z=new Uint8Array(k);i.toBytes(8*h,z,0,k);const H=Ct.generateECBytes(z,R[0]);_.push(new a0(z,H)),p=Math.max(p,k),g=Math.max(g,H.length),h+=b[0]}if(u!==h)throw new wt("Data bytes does not match offset");const v=new G;for(let A=0;A<p;++A)for(const b of _){const R=b.getDataBytes();A<R.length&&v.appendBits(R[A],8)}for(let A=0;A<g;++A)for(const b of _){const R=b.getErrorCorrectionBytes();A<R.length&&v.appendBits(R[A],8)}if(o!==v.getSizeInBytes())throw new wt("Interleaving error: "+o+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(i,o){const u=i.length,c=new Int32Array(u+o);for(let p=0;p<u;p++)c[p]=i[p]&255;new Ql(it.QR_CODE_FIELD_256).encode(c,o);const h=new Uint8Array(o);for(let p=0;p<o;p++)h[p]=c[u+p];return h}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,u,c){const h=u.getCharacterCountBits(o);if(i>=1<<h)throw new wt(i+" is bigger than "+((1<<h)-1));c.appendBits(i,h)}static appendBytes(i,o,u,c){switch(o){case Re.NUMERIC:Ct.appendNumericBytes(i,u);break;case Re.ALPHANUMERIC:Ct.appendAlphanumericBytes(i,u);break;case Re.BYTE:Ct.append8BitBytes(i,u,c);break;case Re.KANJI:Ct.appendKanjiBytes(i,u);break;default:throw new wt("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=Ct.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const u=i.length;let c=0;for(;c<u;){const h=Ct.getDigit(i.charAt(c));if(c+2<u){const p=Ct.getDigit(i.charAt(c+1)),g=Ct.getDigit(i.charAt(c+2));o.appendBits(h*100+p*10+g,10),c+=3}else if(c+1<u){const p=Ct.getDigit(i.charAt(c+1));o.appendBits(h*10+p,7),c+=2}else o.appendBits(h,4),c++}}static appendAlphanumericBytes(i,o){const u=i.length;let c=0;for(;c<u;){const h=Ct.getAlphanumericCode(i.charCodeAt(c));if(h===-1)throw new wt;if(c+1<u){const p=Ct.getAlphanumericCode(i.charCodeAt(c+1));if(p===-1)throw new wt;o.appendBits(h*45+p,11),c+=2}else o.appendBits(h,6),c++}}static append8BitBytes(i,o,u){let c;try{c=Ze.encode(i,u)}catch(h){throw new wt(h)}for(let h=0,p=c.length;h!==p;h++){const g=c[h];o.appendBits(g,8)}}static appendKanjiBytes(i,o){let u;try{u=Ze.encode(i,te.SJIS)}catch(h){throw new wt(h)}const c=u.length;for(let h=0;h<c;h+=2){const p=u[h]&255,g=u[h+1]&255,_=p<<8&4294967295|g;let v=-1;if(_>=33088&&_<=40956?v=_-33088:_>=57408&&_<=60351&&(v=_-49472),v===-1)throw new wt("Invalid byte sequence");const A=(v>>8)*192+(v&255);o.appendBits(A,13)}}static appendECI(i,o){o.appendBits(Re.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}Ct.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ct.DEFAULT_BYTE_MODE_ENCODING=te.UTF8.getName();class Mi{write(i,o,u,c=null){if(i.length===0)throw new I("Found empty contents");if(o<0||u<0)throw new I("Requested dimensions are too small: "+o+"x"+u);let h=Xe.L,p=Mi.QUIET_ZONE_SIZE;c!==null&&(c.get($t.ERROR_CORRECTION)!==void 0&&(h=Xe.fromString(c.get($t.ERROR_CORRECTION).toString())),c.get($t.MARGIN)!==void 0&&(p=Number.parseInt(c.get($t.MARGIN).toString(),10)));const g=Ct.encode(i,h,c);return this.renderResult(g,o,u,p)}writeToDom(i,o,u,c,h=null){typeof i=="string"&&(i=document.querySelector(i));const p=this.write(o,u,c,h);i&&i.appendChild(p)}renderResult(i,o,u,c){const h=i.getMatrix();if(h===null)throw new Nr;const p=h.getWidth(),g=h.getHeight(),_=p+c*2,v=g+c*2,A=Math.max(o,_),b=Math.max(u,v),R=Math.min(Math.floor(A/_),Math.floor(b/v)),k=Math.floor((A-p*R)/2),z=Math.floor((b-g*R)/2),H=this.createSVGElement(A,b);for(let Z=0,q=z;Z<g;Z++,q+=R)for(let ce=0,de=k;ce<p;ce++,de+=R)if(h.get(ce,Z)===1){const oe=this.createSvgRectElement(de,q,R,R);H.appendChild(oe)}return H}createSVGElement(i,o){const u=document.createElementNS(Mi.SVG_NS,"svg");return u.setAttributeNS(null,"height",i.toString()),u.setAttributeNS(null,"width",o.toString()),u}createSvgRectElement(i,o,u,c){const h=document.createElementNS(Mi.SVG_NS,"rect");return h.setAttributeNS(null,"x",i.toString()),h.setAttributeNS(null,"y",o.toString()),h.setAttributeNS(null,"height",u.toString()),h.setAttributeNS(null,"width",c.toString()),h.setAttributeNS(null,"fill","#000000"),h}}Mi.QUIET_ZONE_SIZE=4,Mi.SVG_NS="http://www.w3.org/2000/svg";class pi{encode(i,o,u,c,h){if(i.length===0)throw new I("Found empty contents");if(o!==ue.QR_CODE)throw new I("Can only encode QR_CODE, but got "+o);if(u<0||c<0)throw new I(`Requested dimensions are too small: ${u}x${c}`);let p=Xe.L,g=pi.QUIET_ZONE_SIZE;h!==null&&(h.get($t.ERROR_CORRECTION)!==void 0&&(p=Xe.fromString(h.get($t.ERROR_CORRECTION).toString())),h.get($t.MARGIN)!==void 0&&(g=Number.parseInt(h.get($t.MARGIN).toString(),10)));const _=Ct.encode(i,p,h);return pi.renderResult(_,u,c,g)}static renderResult(i,o,u,c){const h=i.getMatrix();if(h===null)throw new Nr;const p=h.getWidth(),g=h.getHeight(),_=p+c*2,v=g+c*2,A=Math.max(o,_),b=Math.max(u,v),R=Math.min(Math.floor(A/_),Math.floor(b/v)),k=Math.floor((A-p*R)/2),z=Math.floor((b-g*R)/2),H=new gt(A,b);for(let Z=0,q=z;Z<g;Z++,q+=R)for(let ce=0,de=k;ce<p;ce++,de+=R)h.get(ce,Z)===1&&H.setRegion(de,q,R,R);return H}}pi.QUIET_ZONE_SIZE=4;class ss{encode(i,o,u,c,h){let p;switch(o){case ue.QR_CODE:p=new pi;break;default:throw new I("No encoder available for format "+o)}return p.encode(i,o,u,c,h)}}class Yr extends ne{constructor(i,o,u,c,h,p,g,_){if(super(p,g),this.yuvData=i,this.dataWidth=o,this.dataHeight=u,this.left=c,this.top=h,c+p>o||h+g>u)throw new I("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,g)}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const u=this.getWidth();(o==null||o.length<u)&&(o=new Uint8ClampedArray(u));const c=(i+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,c,o,0,u),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const u=i*o,c=new Uint8ClampedArray(u);let h=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return j.arraycopy(this.yuvData,h,c,0,u),c;for(let p=0;p<o;p++){const g=p*i;j.arraycopy(this.yuvData,h,c,g,i),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,o,u,c){return new Yr(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,u,c,!1)}renderThumbnail(){const i=this.getWidth()/Yr.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Yr.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(i*o),c=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let p=0;p<o;p++){const g=p*i;for(let _=0;_<i;_++){const v=c[h+_*Yr.THUMBNAIL_SCALE_FACTOR]&255;u[g+_]=4278190080|v*65793}h+=this.dataWidth*Yr.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Yr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Yr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const u=this.yuvData;for(let c=0,h=this.top*this.dataWidth+this.left;c<o;c++,h+=this.dataWidth){const p=h+i/2;for(let g=h,_=h+i-1;g<p;g++,_--){const v=u[g];u[g]=u[_],u[_]=v}}}invert(){return new Oe(this)}}Yr.THUMBNAIL_SCALE_FACTOR=2;class os extends ne{constructor(i,o,u,c,h,p,g){if(super(o,u),this.dataWidth=c,this.dataHeight=h,this.left=p,this.top=g,i.BYTES_PER_ELEMENT===4){const _=o*u,v=new Uint8ClampedArray(_);for(let A=0;A<_;A++){const b=i[A],R=b>>16&255,k=b>>7&510,z=b&255;v[A]=(R+k+z)/4&255}this.luminances=v}else this.luminances=i;if(c===void 0&&(this.dataWidth=o),h===void 0&&(this.dataHeight=u),p===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+u>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const u=this.getWidth();(o==null||o.length<u)&&(o=new Uint8ClampedArray(u));const c=(i+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,c,o,0,u),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const u=i*o,c=new Uint8ClampedArray(u);let h=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return j.arraycopy(this.luminances,h,c,0,u),c;for(let p=0;p<o;p++){const g=p*i;j.arraycopy(this.luminances,h,c,g,i),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,o,u,c){return new os(this.luminances,u,c,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new Oe(this)}}class hr extends te{static forName(i){return this.getCharacterSetECIByName(i)}}class Oa{}Oa.ISO_8859_1=te.ISO8859_1;class Jl{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class uh{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class eu{constructor(i){this.previous=i}getPrevious(){return this.previous}}class ki extends eu{constructor(i,o,u){super(i),this.value=o,this.bitCount=u}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new ki(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ki(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+B.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class tu extends ki{constructor(i,o,u){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=u}appendTo(i,o){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):u===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+u],8)}addBinaryShift(i,o){return new tu(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function l0(S,i,o){return new tu(S,i,o)}function Fs(S,i,o){return new ki(S,i,o)}const u0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],un=0,gi=1,vr=2,qr=3,Kr=4,Us=new ki(null,0,0),nu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function Ho(S){for(let i of S)D.fill(i,-1);return S[un][Kr]=0,S[gi][Kr]=0,S[gi][un]=28,S[qr][Kr]=0,S[vr][Kr]=0,S[vr][un]=15,S}const ru=Ho(D.createInt32Array(6,6));class dr{constructor(i,o,u,c){this.token=i,this.mode=o,this.binaryShiftByteCount=u,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let u=this.bitCount,c=this.token;if(i!==this.mode){let p=nu[this.mode][i];c=Fs(c,p&65535,p>>16),u+=p>>16}let h=i===vr?4:5;return c=Fs(c,o,h),new dr(c,i,0,u+h)}shiftAndAppend(i,o){let u=this.token,c=this.mode===vr?4:5;return u=Fs(u,ru[this.mode][i],c),u=Fs(u,o,5),new dr(u,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(i){let o=this.token,u=this.mode,c=this.bitCount;if(this.mode===Kr||this.mode===vr){let g=nu[u][un];o=Fs(o,g&65535,g>>16),c+=g>>16,u=un}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new dr(o,u,this.binaryShiftByteCount+1,c+h);return p.binaryShiftByteCount===2047+31&&(p=p.endBinaryShift(i+1)),p}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=l0(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new dr(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(nu[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=dr.calculateBinaryShiftCost(i)-dr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let c=this.endBinaryShift(i.length).token;c!==null;c=c.getPrevious())o.unshift(c);let u=new G;for(const c of o)c.appendTo(u,i);return u}toString(){return Ce.format("%s bits=%d bytes=%d",u0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}dr.INITIAL_STATE=new dr(Us,un,0,0);function c0(S){const i=Ce.getCharCode(" "),o=Ce.getCharCode("."),u=Ce.getCharCode(",");S[un][i]=1;const c=Ce.getCharCode("Z"),h=Ce.getCharCode("A");for(let R=h;R<=c;R++)S[un][R]=R-h+2;S[gi][i]=1;const p=Ce.getCharCode("z"),g=Ce.getCharCode("a");for(let R=g;R<=p;R++)S[gi][R]=R-g+2;S[vr][i]=1;const _=Ce.getCharCode("9"),v=Ce.getCharCode("0");for(let R=v;R<=_;R++)S[vr][R]=R-v+2;S[vr][u]=12,S[vr][o]=13;const A=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<A.length;R++)S[qr][Ce.getCharCode(A[R])]=R;const b=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<b.length;R++)Ce.getCharCode(b[R])>0&&(S[Kr][Ce.getCharCode(b[R])]=R);return S}const Qr=c0(D.createInt32Array(5,256));class Di{constructor(i){this.text=i}encode(){const i=Ce.getCharCode(" "),o=Ce.getCharCode(`
`);let u=uh.singletonList(dr.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let p,g=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case Ce.getCharCode("\r"):p=g===o?2:0;break;case Ce.getCharCode("."):p=g===i?3:0;break;case Ce.getCharCode(","):p=g===i?4:0;break;case Ce.getCharCode(":"):p=g===i?5:0;break;default:p=0}p>0?(u=Di.updateStateListForPair(u,h,p),h++):u=this.updateStateListForChar(u,h)}return uh.min(u,(h,p)=>h.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const u=[];for(let c of i)this.updateStateForChar(c,o,u);return Di.simplifyStates(u)}updateStateForChar(i,o,u){let c=this.text[o]&255,h=Qr[i.getMode()][c]>0,p=null;for(let g=0;g<=Kr;g++){let _=Qr[g][c];if(_>0){if(p==null&&(p=i.endBinaryShift(o)),!h||g===i.getMode()||g===vr){const v=p.latchAndAppend(g,_);u.push(v)}if(!h&&ru[i.getMode()][g]>=0){const v=p.shiftAndAppend(g,_);u.push(v)}}}if(i.getBinaryShiftByteCount()>0||Qr[i.getMode()][c]===0){let g=i.addBinaryShiftChar(o);u.push(g)}}static updateStateListForPair(i,o,u){const c=[];for(let h of i)this.updateStateForPair(h,o,u,c);return this.simplifyStates(c)}static updateStateForPair(i,o,u,c){let h=i.endBinaryShift(o);if(c.push(h.latchAndAppend(Kr,u)),i.getMode()!==Kr&&c.push(h.shiftAndAppend(Kr,u)),u===3||u===4){let p=h.latchAndAppend(vr,16-u).latchAndAppend(vr,1);c.push(p)}if(i.getBinaryShiftByteCount()>0){let p=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);c.push(p)}}static simplifyStates(i){let o=[];for(const u of i){let c=!0;for(const h of o){if(h.isBetterThanOrEqualTo(u)){c=!1;break}u.isBetterThanOrEqualTo(h)&&(o=o.filter(p=>p!==h))}c&&o.push(u)}return o}}class ot{constructor(){}static encodeBytes(i){return ot.encode(i,ot.DEFAULT_EC_PERCENT,ot.DEFAULT_AZTEC_LAYERS)}static encode(i,o,u){let c=new Di(i).encode(),h=B.truncDivision(c.getSize()*o,100)+11,p=c.getSize()+h,g,_,v,A,b;if(u!==ot.DEFAULT_AZTEC_LAYERS){if(g=u<0,_=Math.abs(u),_>(g?ot.MAX_NB_BITS_COMPACT:ot.MAX_NB_BITS))throw new I(Ce.format("Illegal value %s for layers",u));v=ot.totalBitsInLayer(_,g),A=ot.WORD_SIZE[_];let oe=v-v%A;if(b=ot.stuffBits(c,A),b.getSize()+h>oe)throw new I("Data to large for user specified layer");if(g&&b.getSize()>A*64)throw new I("Data to large for user specified layer")}else{A=0,b=null;for(let oe=0;;oe++){if(oe>ot.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(g=oe<=3,_=g?oe+1:oe,v=ot.totalBitsInLayer(_,g),p>v)continue;(b==null||A!==ot.WORD_SIZE[_])&&(A=ot.WORD_SIZE[_],b=ot.stuffBits(c,A));let Ye=v-v%A;if(!(g&&b.getSize()>A*64)&&b.getSize()+h<=Ye)break}}let R=ot.generateCheckWords(b,v,A),k=b.getSize()/A,z=ot.generateModeMessage(g,_,k),H=(g?11:14)+_*4,Z=new Int32Array(H),q;if(g){q=H;for(let oe=0;oe<Z.length;oe++)Z[oe]=oe}else{q=H+1+2*B.truncDivision(B.truncDivision(H,2)-1,15);let oe=B.truncDivision(H,2),Ye=B.truncDivision(q,2);for(let We=0;We<oe;We++){let Bt=We+B.truncDivision(We,15);Z[oe-We-1]=Ye-Bt-1,Z[oe+We]=Ye+Bt+1}}let ce=new gt(q);for(let oe=0,Ye=0;oe<_;oe++){let We=(_-oe)*4+(g?9:12);for(let Bt=0;Bt<We;Bt++){let $n=Bt*2;for(let Xn=0;Xn<2;Xn++)R.get(Ye+$n+Xn)&&ce.set(Z[oe*2+Xn],Z[oe*2+Bt]),R.get(Ye+We*2+$n+Xn)&&ce.set(Z[oe*2+Bt],Z[H-1-oe*2-Xn]),R.get(Ye+We*4+$n+Xn)&&ce.set(Z[H-1-oe*2-Xn],Z[H-1-oe*2-Bt]),R.get(Ye+We*6+$n+Xn)&&ce.set(Z[H-1-oe*2-Bt],Z[oe*2+Xn])}Ye+=We*8}if(ot.drawModeMessage(ce,g,q,z),g)ot.drawBullsEye(ce,B.truncDivision(q,2),5);else{ot.drawBullsEye(ce,B.truncDivision(q,2),7);for(let oe=0,Ye=0;oe<B.truncDivision(H,2)-1;oe+=15,Ye+=16)for(let We=B.truncDivision(q,2)&1;We<q;We+=2)ce.set(B.truncDivision(q,2)-Ye,We),ce.set(B.truncDivision(q,2)+Ye,We),ce.set(We,B.truncDivision(q,2)-Ye),ce.set(We,B.truncDivision(q,2)+Ye)}let de=new Jl;return de.setCompact(g),de.setSize(q),de.setLayers(_),de.setCodeWords(k),de.setMatrix(ce),de}static drawBullsEye(i,o,u){for(let c=0;c<u;c+=2)for(let h=o-c;h<=o+c;h++)i.set(h,o-c),i.set(h,o+c),i.set(o-c,h),i.set(o+c,h);i.set(o-u,o-u),i.set(o-u+1,o-u),i.set(o-u,o-u+1),i.set(o+u,o-u),i.set(o+u,o-u+1),i.set(o+u,o+u-1)}static generateModeMessage(i,o,u){let c=new G;return i?(c.appendBits(o-1,2),c.appendBits(u-1,6),c=ot.generateCheckWords(c,28,4)):(c.appendBits(o-1,5),c.appendBits(u-1,11),c=ot.generateCheckWords(c,40,4)),c}static drawModeMessage(i,o,u,c){let h=B.truncDivision(u,2);if(o)for(let p=0;p<7;p++){let g=h-3+p;c.get(p)&&i.set(g,h-5),c.get(p+7)&&i.set(h+5,g),c.get(20-p)&&i.set(g,h+5),c.get(27-p)&&i.set(h-5,g)}else for(let p=0;p<10;p++){let g=h-5+p+B.truncDivision(p,5);c.get(p)&&i.set(g,h-7),c.get(p+10)&&i.set(h+7,g),c.get(29-p)&&i.set(g,h+7),c.get(39-p)&&i.set(h-7,g)}}static generateCheckWords(i,o,u){let c=i.getSize()/u,h=new Ql(ot.getGF(u)),p=B.truncDivision(o,u),g=ot.bitsToWords(i,u,p);h.encode(g,p-c);let _=o%u,v=new G;v.appendBits(0,_);for(const A of Array.from(g))v.appendBits(A,u);return v}static bitsToWords(i,o,u){let c=new Int32Array(u),h,p;for(h=0,p=i.getSize()/o;h<p;h++){let g=0;for(let _=0;_<o;_++)g|=i.get(h*o+_)?1<<o-_-1:0;c[h]=g}return c}static getGF(i){switch(i){case 4:return it.AZTEC_PARAM;case 6:return it.AZTEC_DATA_6;case 8:return it.AZTEC_DATA_8;case 10:return it.AZTEC_DATA_10;case 12:return it.AZTEC_DATA_12;default:throw new I("Unsupported word size "+i)}}static stuffBits(i,o){let u=new G,c=i.getSize(),h=(1<<o)-2;for(let p=0;p<c;p+=o){let g=0;for(let _=0;_<o;_++)(p+_>=c||i.get(p+_))&&(g|=1<<o-1-_);(g&h)===h?(u.appendBits(g&h,o),p--):g&h?u.appendBits(g,o):(u.appendBits(g|1,o),p--)}return u}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}ot.DEFAULT_EC_PERCENT=33,ot.DEFAULT_AZTEC_LAYERS=0,ot.MAX_NB_BITS=32,ot.MAX_NB_BITS_COMPACT=4,ot.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vs{encode(i,o,u,c){return this.encodeWithHints(i,o,u,c,null)}encodeWithHints(i,o,u,c,h){let p=Oa.ISO_8859_1,g=ot.DEFAULT_EC_PERCENT,_=ot.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has($t.CHARACTER_SET)&&(p=hr.forName(h.get($t.CHARACTER_SET).toString())),h.has($t.ERROR_CORRECTION)&&(g=B.parseInt(h.get($t.ERROR_CORRECTION).toString())),h.has($t.AZTEC_LAYERS)&&(_=B.parseInt(h.get($t.AZTEC_LAYERS).toString()))),Vs.encodeLayers(i,o,u,c,p,g,_)}static encodeLayers(i,o,u,c,h,p,g){if(o!==ue.AZTEC)throw new I("Can only encode AZTEC, but got "+o);let _=ot.encode(Ce.getBytes(i,h),p,g);return Vs.renderResult(_,u,c)}static renderResult(i,o,u){let c=i.getMatrix();if(c==null)throw new Nr;let h=c.getWidth(),p=c.getHeight(),g=Math.max(o,h),_=Math.max(u,p),v=Math.min(g/h,_/p),A=(g-h*v)/2,b=(_-p*v)/2,R=new gt(g,_);for(let k=0,z=b;k<p;k++,z+=v)for(let H=0,Z=A;H<h;H++,Z+=v)c.get(H,k)&&R.setRegion(Z,z,v,v);return R}}n.AbstractExpandedDecoder=Ia,n.ArgumentException=C,n.ArithmeticException=bi,n.AztecCode=Jl,n.AztecCodeReader=Oo,n.AztecCodeWriter=Vs,n.AztecDecoder=mt,n.AztecDetector=Vl,n.AztecDetectorResult=Bl,n.AztecEncoder=ot,n.AztecHighLevelEncoder=Di,n.AztecPoint=Fn,n.BarcodeFormat=ue,n.Binarizer=W,n.BinaryBitmap=O,n.BitArray=G,n.BitMatrix=gt,n.BitSource=ks,n.BrowserAztecCodeReader=t0,n.BrowserBarcodeReader=Lo,n.BrowserCodeReader=It,n.BrowserDatamatrixCodeReader=$l,n.BrowserMultiFormatReader=ah,n.BrowserPDF417Reader=Oi,n.BrowserQRCodeReader=lh,n.BrowserQRCodeSvgWriter=Mi,n.CharacterSetECI=te,n.ChecksumException=V,n.Code128Reader=_e,n.Code39Reader=Jt,n.DataMatrixDecodedBitStreamParser=ur,n.DataMatrixReader=_t,n.DecodeHintType=ie,n.DecoderResult=Rs,n.DefaultGridSampler=Ul,n.DetectorResult=Po,n.EAN13Reader=Ri,n.EncodeHintType=$t,n.Exception=w,n.FormatException=Y,n.GenericGF=it,n.GenericGFPoly=vn,n.GlobalHistogramBinarizer=et,n.GridSampler=Fl,n.GridSamplerInstance=ui,n.HTMLCanvasElementLuminanceSource=pe,n.HybridBinarizer=ke,n.ITFReader=xt,n.IllegalArgumentException=I,n.IllegalStateException=Nr,n.InvertedLuminanceSource=Oe,n.LuminanceSource=ne,n.MathUtils=st,n.MultiFormatOneDReader=Pi,n.MultiFormatReader=oh,n.MultiFormatWriter=ss,n.NotFoundException=ee,n.OneDReader=Zt,n.PDF417DecodedBitStreamParser=K,n.PDF417DecoderErrorCorrection=ba,n.PDF417Reader=mn,n.PDF417ResultMetadata=Kl,n.PerspectiveTransform=ar,n.PlanarYUVLuminanceSource=Yr,n.QRCodeByteMatrix=jo,n.QRCodeDataMask=In,n.QRCodeDecodedBitStreamParser=Rt,n.QRCodeDecoderErrorCorrectionLevel=Xe,n.QRCodeDecoderFormatInformation=Cn,n.QRCodeEncoder=Ct,n.QRCodeEncoderQRCode=is,n.QRCodeMaskUtil=Lt,n.QRCodeMatrixUtil=Ne,n.QRCodeMode=Re,n.QRCodeReader=pn,n.QRCodeVersion=ye,n.QRCodeWriter=pi,n.RGBLuminanceSource=os,n.RSS14Reader=Wt,n.RSSExpandedReader=re,n.ReaderException=cr,n.ReedSolomonDecoder=Ps,n.ReedSolomonEncoder=Ql,n.ReedSolomonException=Ns,n.Result=je,n.ResultMetadataType=St,n.ResultPoint=Ie,n.StringUtils=Ce,n.UnsupportedOperationException=Me,n.VideoInputDevice=Be,n.WhiteRectangleDetector=li,n.WriterException=wt,n.ZXingArrays=D,n.ZXingCharset=hr,n.ZXingInteger=B,n.ZXingStandardCharsets=Oa,n.ZXingStringBuilder=Je,n.ZXingStringEncoding=Ze,n.ZXingSystem=j,n.createAbstractExpandedDecoder=Do,Object.defineProperty(n,"__esModule",{value:!0})})})(Lp,Lp.exports);var Ut=Lp.exports;const f6=Bp(Ut),p6=Yx({__proto__:null,default:f6},[Ut]);var Fx=function(){function t(e,n,r){if(this.formatMap=new Map([[Ae.QR_CODE,Ut.BarcodeFormat.QR_CODE],[Ae.AZTEC,Ut.BarcodeFormat.AZTEC],[Ae.CODABAR,Ut.BarcodeFormat.CODABAR],[Ae.CODE_39,Ut.BarcodeFormat.CODE_39],[Ae.CODE_93,Ut.BarcodeFormat.CODE_93],[Ae.CODE_128,Ut.BarcodeFormat.CODE_128],[Ae.DATA_MATRIX,Ut.BarcodeFormat.DATA_MATRIX],[Ae.MAXICODE,Ut.BarcodeFormat.MAXICODE],[Ae.ITF,Ut.BarcodeFormat.ITF],[Ae.EAN_13,Ut.BarcodeFormat.EAN_13],[Ae.EAN_8,Ut.BarcodeFormat.EAN_8],[Ae.PDF_417,Ut.BarcodeFormat.PDF_417],[Ae.RSS_14,Ut.BarcodeFormat.RSS_14],[Ae.RSS_EXPANDED,Ut.BarcodeFormat.RSS_EXPANDED],[Ae.UPC_A,Ut.BarcodeFormat.UPC_A],[Ae.UPC_E,Ut.BarcodeFormat.UPC_E],[Ae.UPC_EAN_EXTENSION,Ut.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!p6)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(e),l=new Map;l.set(Ut.DecodeHintType.POSSIBLE_FORMATS,s),l.set(Ut.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,s){try{r(n.decode(e))}catch(l){s(l)}})},t.prototype.decode=function(e){var n=new Ut.MultiFormatReader(this.verbose,this.hints),r=new Ut.HTMLCanvasElementLuminanceSource(e),s=new Ut.BinaryBitmap(new Ut.HybridBinarizer(r)),l=n.decode(s);return{text:l.text,format:IT.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var l=s[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),g6=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function y(C){try{w(r.next(C))}catch(I){d(I)}}function x(C){try{w(r.throw(C))}catch(I){d(I)}}function w(C){C.done?l(C.value):s(C.value).then(y,x)}w((r=r.apply(t,e||[])).next())})},m6=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,s,l,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(C){return x([w,C])}}function x(w){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(r=1,s&&(l=w[0]&2?s.return:w[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,w[1])).done)return l;switch(s=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,s=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(C){w=[6,C],s=0}finally{r=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Ux=function(){function t(e,n,r){if(this.formatMap=new Map([[Ae.QR_CODE,"qr_code"],[Ae.AZTEC,"aztec"],[Ae.CODABAR,"codabar"],[Ae.CODE_39,"code_39"],[Ae.CODE_93,"code_93"],[Ae.CODE_128,"code_128"],[Ae.DATA_MATRIX,"data_matrix"],[Ae.ITF,"itf"],[Ae.EAN_13,"ean_13"],[Ae.EAN_8,"ean_8"],[Ae.PDF_417,"pdf417"],[Ae.UPC_A,"upc_a"],[Ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return g6(this,void 0,void 0,function(){var n,r;return m6(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:IT.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,s=0,l=e;s<l.length;s++){var d=l[s],y=d.boundingBox.width*d.boundingBox.height;y>r&&(r=y,n=d)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var l=s[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Vx=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function y(C){try{w(r.next(C))}catch(I){d(I)}}function x(C){try{w(r.throw(C))}catch(I){d(I)}}function w(C){C.done?l(C.value):s(C.value).then(y,x)}w((r=r.apply(t,e||[])).next())})},zx=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,s,l,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(C){return x([w,C])}}function x(w){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(r=1,s&&(l=w[0]&2?s.return:w[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,w[1])).done)return l;switch(s=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,s=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(C){w=[6,C],s=0}finally{r=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},_6=function(){function t(e,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Ux.isSupported()?(this.primaryDecoder=new Ux(e,r,s),this.secondaryDecoder=new Fx(e,r,s)):this.primaryDecoder=new Fx(e,r,s)}return t.prototype.decodeAsync=function(e){return Vx(this,void 0,void 0,function(){var n;return zx(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Vx(this,void 0,void 0,function(){var n,r;return zx(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];e+=s}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Fm=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sf=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function y(C){try{w(r.next(C))}catch(I){d(I)}}function x(C){try{w(r.throw(C))}catch(I){d(I)}}function w(C){C.done?l(C.value):s(C.value).then(y,x)}w((r=r.apply(t,e||[])).next())})},of=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,s,l,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(C){return x([w,C])}}function x(w){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(r=1,s&&(l=w[0]&2?s.return:w[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,w[1])).done)return l;switch(s=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,s=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(C){w=[6,C],s=0}finally{r=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},NT=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),y6=function(t){Fm(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(NT),x6=function(t){Fm(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(y6),w6=function(t){Fm(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(NT),v6=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new x6(this.track)},t.prototype.torchFeature=function(){return new w6(this.track)},t}(),E6=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,s),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,s){return sf(this,void 0,void 0,function(){var l,d;return of(this,function(y){switch(y.label){case 0:return l=new t(e,n,s),r.aspectRatio?(d={aspectRatio:r.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:y.sent(),y.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return sf(this,void 0,void 0,function(){return of(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var s=e.mediaStream.getVideoTracks(),l=s.length,d=0;e.mediaStream.getVideoTracks().forEach(function(y){e.mediaStream.removeTrack(y),y.stop(),++d,d>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new v6(this.getFirstTrackOrFail())},t}(),A6=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return sf(this,void 0,void 0,function(){return of(this,function(s){return[2,E6.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return sf(this,void 0,void 0,function(){var n,r;return of(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new t(r)]}})})},t}(),jx=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function y(C){try{w(r.next(C))}catch(I){d(I)}}function x(C){try{w(r.throw(C))}catch(I){d(I)}}function w(C){C.done?l(C.value):s(C.value).then(y,x)}w((r=r.apply(t,e||[])).next())})},Hx=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,s,l,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(C){return x([w,C])}}function x(w){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(r=1,s&&(l=w[0]&2?s.return:w[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,w[1])).done)return l;switch(s=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,s=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(C){w=[6,C],s=0}finally{r=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},T6=function(){function t(){}return t.failIfNotSupported=function(){return jx(this,void 0,void 0,function(){return Hx(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return jx(this,void 0,void 0,function(){return Hx(this,function(n){return[2,A6.create(e)]})})},t}(),C6=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function y(C){try{w(r.next(C))}catch(I){d(I)}}function x(C){try{w(r.throw(C))}catch(I){d(I)}}function w(C){C.done?l(C.value):s(C.value).then(y,x)}w((r=r.apply(t,e||[])).next())})},I6=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,s,l,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(C){return x([w,C])}}function x(w){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(r=1,s&&(l=w[0]&2?s.return:w[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,w[1])).done)return l;switch(s=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,s=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(C){w=[6,C],s=0}finally{r=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},S6=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=el.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=el.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return C6(this,void 0,void 0,function(){var e,n,r,s,l,d,y;return I6(this,function(x){switch(x.label){case 0:return e=function(w){for(var C=w.getVideoTracks(),I=0,O=C;I<O.length;I++){var V=O[I];V.enabled=!1,V.stop(),w.removeTrack(V)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=x.sent(),s=[],l=0,d=r;l<d.length;l++)y=d[l],y.kind==="videoinput"&&s.push({id:y.deviceId,label:y.label});return e(n),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(l){for(var d=[],y=0,x=l;y<x.length;y++){var w=x[y];w.kind==="video"&&d.push({id:w.id,label:w.label})}e(d)},s=MediaStreamTrack;s.getSources(r)})},t}(),en;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(en||(en={}));var b6=function(){function t(){this.state=en.NOT_STARTED,this.onGoingTransactionNewState=en.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===en.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=en.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===en.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=en.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==en.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case en.UNKNOWN:throw"Transition from unknown is not allowed";case en.NOT_STARTED:this.failIfNewStateIs(e,[en.PAUSED]);break;case en.SCANNING:break;case en.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,s=n;r<s.length;r++){var l=s[r];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),R6=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===en.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==en.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===en.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===en.PAUSED},t}(),N6=function(){function t(){}return t.create=function(){return new R6(new b6)},t}(),P6=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dr=function(t){P6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(xi),O6=function(){function t(e,n){this.logger=n,this.fps=Dr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Dr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?RT.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Fi(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Wx=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new bT(this.verbose),this.qrcode=new _6(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=N6.create()}return t.prototype.start=function(e,n,r,s){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;s?d=s:d=this.verbose?this.logger.log:function(){};var y=O6.create(n,this.logger);this.clearElement();var x=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=x,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Dr.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var I=this,O=this.stateManagerProxy.startTransition(en.SCANNING);return new Promise(function(V,W){var j=w?y.videoConstraints:I.createVideoConstraints(e);if(!j){O.cancel(),W("videoConstraints should be defined");return}var J={};(!w||y.aspectRatio)&&(J.aspectRatio=y.aspectRatio);var F={onRenderSurfaceReady:function(D,B){I.setupUi(D,B,y),I.isScanning=!0,I.foreverScan(y,r,d)}};T6.failIfNotSupported().then(function(D){D.create(j).then(function(B){return B.render(l.element,J,F).then(function(G){I.renderedCamera=G,O.execute(),V(null)}).catch(function(G){O.cancel(),W(G)})}).catch(function(B){O.cancel(),W(el.errorGettingUserMedia(B))})}).catch(function(D){O.cancel(),W(el.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(en.PAUSED),this.showPausedState(),(Fi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(en.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(en.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var l=document.getElementById(Dr.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Fi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,l){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var d=new Image;d.onload=function(){var y=d.width,x=d.height,w=document.getElementById(r.elementId),C=w.clientWidth?w.clientWidth:Dr.DEFAULT_WIDTH,I=Math.max(w.clientHeight?w.clientHeight:x,Dr.FILE_SCAN_MIN_HEIGHT),O=r.computeCanvasDrawConfig(y,x,C,I);if(n){var V=r.createCanvasElement(C,I,"qr-canvas-visible");V.style.display="inline-block",w.appendChild(V);var W=V.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=C,W.canvas.height=I,W.drawImage(d,0,0,y,x,O.x,O.y,O.width,O.height)}var j=Dr.FILE_SCAN_HIDDEN_CANVAS_PADDING,J=Math.max(d.width,O.width),F=Math.max(d.height,O.height),D=J+2*j,B=F+2*j,G=r.createCanvasElement(D,B);w.appendChild(G);var ae=G.getContext("2d");if(!ae)throw"Unable to get 2d context from canvas";ae.canvas.width=D,ae.canvas.height=B,ae.drawImage(d,0,0,y,x,j,j,J,F);try{r.qrcode.decodeRobustlyAsync(G).then(function(ie){s(Lx.createFromQrcodeResult(ie))}).catch(l)}catch(ie){l("QR code parse error, error = ".concat(ie))}},d.onerror=l,d.onabort=l,d.onstalled=l,d.onsuspend=l,d.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return S6.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!RT.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Ae.QR_CODE,Ae.AZTEC,Ae.CODABAR,Ae.CODE_39,Ae.CODE_93,Ae.CODE_128,Ae.DATA_MATRIX,Ae.MAXICODE,Ae.ITF,Ae.EAN_13,Ae.EAN_8,Ae.PDF_417,Ae.RSS_14,Ae.RSS_EXPANDED,Ae.UPC_A,Ae.UPC_E,Ae.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,l=e.formatsToSupport;s<l.length;s++){var d=l[s];h6(d)?r.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Fi(e))return!0;if(!Fi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Fi(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Fi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var s=this,l=r.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(e,n,l),y=function(w){if(w<Dr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Dr.MIN_QR_BOX_SIZE,"px.")},x=function(w){return w>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};y(d.width),y(d.height),d.width=x(d.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var s=Fi(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(s);var l=this.toQrdimensions(e,n,s);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=r.isShadedBoxEnabled()&&l.height<=n,y={x:0,y:0,width:e,height:n},x=d?this.getShadedRegionBounds(e,n,l):y,w=this.createCanvasElement(x.width,x.height),C={willReadFrequently:!0},I=w.getContext("2d",C);I.canvas.width=x.width,I.canvas.height=x.height,this.element.append(w),d&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=I,this.canvasElement=w},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=el.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,Lx.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var l=el.codeParseError(s);return n(l,ST.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),d=l.videoWidth/l.clientWidth,y=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*d,w=this.qrRegion.height*y,C=this.qrRegion.x*d,I=this.qrRegion.y*y;this.context.drawImage(l,C,I,x,w,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,n,r)},s.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(V){!V&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){O()})):O()}).catch(function(V){s.logger.logError("Error happend while scanning context",V),O()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",s={user:!0,environment:!0},l="exact",d=function(W){if(W in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(W,"'")},y=Object.keys(e);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var x=Object.keys(e)[0];if(x!==n&&x!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(x===n){var w=e.facingMode;if(typeof w=="string"){if(d(w))return{facingMode:w}}else if(typeof w=="object")if(l in w){if(d(w["".concat(l)]))return{facingMode:{exact:w["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var C=typeof w;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(l in I)return{deviceId:{exact:I["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var O=typeof I;throw"Invalid type of 'deviceId' = ".concat(O)}}}var V=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(V)},t.prototype.computeCanvasDrawConfig=function(e,n,r,s){if(e<=r&&n<=s){var l=(r-e)/2,d=(s-n)/2;return{x:l,y:d,width:e,height:n}}else{var y=e,x=n;return e>r&&(n=r/e*n,e=r),n>s&&(e=s/n*e,n=s),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(x)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Dr.BORDER_SHADER_MATCH_COLOR:Dr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var s=e,l=n,d=document.createElement("canvas");return d.style.width="".concat(s,"px"),d.style.height="".concat(l,"px"),d.style.display="none",d.id=Fi(r)?"qr-canvas":r,d},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,s){if(!(n-s.width<1||r-s.height<1)){var l=document.createElement("div");l.style.position="absolute";var d=(n-s.width)/2,y=(r-s.height)/2;if(l.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Dr.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var x=5,w=40;this.insertShaderBorders(l,w,x,-x,null,0,!0),this.insertShaderBorders(l,w,x,-x,null,0,!1),this.insertShaderBorders(l,w,x,null,-x,0,!0),this.insertShaderBorders(l,w,x,null,-x,0,!1),this.insertShaderBorders(l,x,w+x,-x,null,-x,!0),this.insertShaderBorders(l,x,w+x,null,-x,-x,!0),this.insertShaderBorders(l,x,w+x,-x,null,-x,!1),this.insertShaderBorders(l,x,w+x,null,-x,-x,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,r,s,l,d,y){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=Dr.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(n,"px"),x.style.height="".concat(r,"px"),s!==null&&(x.style.top="".concat(s,"px")),l!==null&&(x.style.bottom="".concat(l,"px")),y?x.style.left="".concat(d,"px"):x.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),e.appendChild(x)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Um="data:image/svg+xml;base64,",M6=Um+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",k6=Um+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Gx=Um+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",D6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Zx=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),L6=function(){function t(){this.data=Zx.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Zx.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),B6=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Bx.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(s);var l=document.createElement("a");l.innerText=Bx.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),F6=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Gx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=D6,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Gx,this.infoIcon.style.opacity="0.6")},t}(),U6=function(){function t(){var e=this;this.infoDiv=new B6,this.infoIcon=new F6(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),V6=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function y(C){try{w(r.next(C))}catch(I){d(I)}}function x(C){try{w(r.throw(C))}catch(I){d(I)}}function w(C){C.done?l(C.value):s(C.value).then(y,x)}w((r=r.apply(t,e||[])).next())})},z6=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,s,l,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(C){return x([w,C])}}function x(w){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(r=1,s&&(l=w[0]&2?s.return:w[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,w[1])).done)return l;switch(s=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,s=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(C){w=[6,C],s=0}finally{r=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},$x=function(){function t(){}return t.hasPermissions=function(){return V6(this,void 0,void 0,function(){var e,n,r,s;return z6(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=l.sent(),n=0,r=e;n<r.length;n++)if(s=r[n],s.kind==="videoinput"&&s.label)return[2,!0];return[2,!1]}})})},t}(),Gs=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===Eo.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Eo.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return xi.DEFAULT_SUPPORTED_SCAN_TYPE;var n=xi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,s=e;r<s.length;r++){var l=s[r];if(!xi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return e},t}(),Fr=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),ms=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(Fr.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),PT=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function y(C){try{w(r.next(C))}catch(I){d(I)}}function x(C){try{w(r.throw(C))}catch(I){d(I)}}function w(C){C.done?l(C.value):s(C.value).then(y,x)}w((r=r.apply(t,e||[])).next())})},OT=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,s,l,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(C){return x([w,C])}}function x(w){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(r=1,s&&(l=w[0]&2?s.return:w[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,w[1])).done)return l;switch(s=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,s=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){n.label=w[1];break}if(w[0]===6&&n.label<l[1]){n.label=l[1],l=w;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(w);break}l[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(C){w=[6,C],s=0}finally{r=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Xx=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return PT(this,void 0,void 0,function(){var e,n;return OT(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?vt.torchOffButton():vt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?vt.torchOnFailedMessage():vt.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),j6=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=ms.createElement("button",Fr.TORCH_BUTTON_ID),this.torchController=new Xx(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=vt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var s=this;this.torchButton.addEventListener("click",function(l){return PT(r,void 0,void 0,function(){return OT(this,function(d){switch(d.label){case 0:return[4,s.torchController.flipState()];case 1:return d.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(Fr.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(Fr.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(Fr.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(Fr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Xx(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=vt.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,s){var l=new t(n,s);return l.render(e,r),l},t}(),H6=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=ms.createElement("button",Fr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(y){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=ms.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(y){if(!(y==null||y.target==null)){var x=y.target;if(!(x.files&&x.files.length===0)){var w=x.files,C=w[0],I=C.name;l.setImageNameToButton(I),r(C)}}});var d=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(d),this.fileBasedScanRegion.addEventListener("dragenter",function(y){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(y){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(y){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),y.stopPropagation(),y.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(y){y.stopPropagation(),y.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var x=y.dataTransfer;if(x){var w=x.files;if(!w||w.length===0)return;for(var C=!1,I=0;I<w.length;++I){var O=w.item(I);if(O){var V=/image.*/;if(O.type.match(V)){C=!0;var W=O.name;l.setImageNameToButton(W),r(O),d.innerText=vt.dragAndDropMessage();break}}}C||(d.innerText=vt.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=vt.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),s=e.length,l=e.substring(s-8,s);e="".concat(r,"....").concat(l)}var d=vt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=d},t.prototype.setInitialValueToButton=function(){var e=vt.fileSelectionChooseImage()+" - "+vt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var s=new t(e,n,r);return s},t}(),W6=function(){function t(e){this.selectElement=ms.createElement("select",Fr.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var s=vt.selectCamera();n.innerText="".concat(s," (").concat(this.cameras.length,")  ")}for(var l=1,d=0,y=this.cameras;d<y.length;d++){var x=y[d],w=x.id,C=x.label==null?w:x.label;(!C||C==="")&&(C=[vt.anonymousCameraPrefix(),l++].join(" "));var I=document.createElement("option");I.value=w,I.innerText=C,this.options.push(I),this.selectElement.appendChild(I)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var s=r[n];if(s.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),G6=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ms.createElement("input",Fr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=vt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=vt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,s){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),Lr;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Lr||(Lr={}));function Z6(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function $6(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var X6=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Gs(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new bT(this.verbose),this.persistedDataManager=new L6,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,d){if(e)e(l,d);else{if(r.lastMatchFound===l)return;r.lastMatchFound=l,r.setHeaderMessage(vt.lastMatch(l),Lr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,d){n&&n(l,d)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new Wx(this.getScanRegionId(),$6(this.config,this.verbose))},t.prototype.pause=function(e){(Fi(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,s){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(l){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(l){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",l),s(l)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=xi.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!xi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=xi.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=xi.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:xi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:xi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:xi.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Gs.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),l=this.getDashboardId();s.id=l,s.style.width="100%",e.appendChild(s),this.setupInitialDashboard(s)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new U6;r.renderInto(n);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",n.appendChild(s)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(vt.cameraPermissionRequesting());var l=function(){r||s.createPermissionButton(e,n)};Wx.getCameras().then(function(d){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),d&&d.length>0?(e.removeChild(n),s.renderCameraSelection(d)):(s.setHeaderMessage(vt.noCameraFound(),Lr.STATUS_WARNING),l())}).catch(function(d){s.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:l(),s.setHeaderMessage(d,Lr.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,s=ms.createElement("button",this.getCameraPermissionButtonId());s.innerText=vt.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,r.createCameraListUi(e,n,s)}),n.appendChild(s)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(Gs.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){$x.hasPermissions().then(function(s){s?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(s){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Gs.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var s=document.createElement("div");s.style.textAlign="center",r.appendChild(s),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,s),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Gs.isFileScanType(this.currentScanType),r=this,s=function(l){if(!r.html5Qrcode)throw"html5Qrcode not defined";Gs.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(vt.loadingImage()),r.html5Qrcode.scanFileV2(l,!0).then(function(d){r.resetHeaderMessage(),r.qrCodeSuccessCallback(d.decodedText,d)}).catch(function(d){r.setHeaderMessage(d,Lr.STATUS_WARNING),r.qrCodeErrorCallback(d,ST.createFrom(d))}))};this.fileSelectionUi=H6.create(e,n,s)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var l=G6.create(s,!1),d=function(j){var J=j.zoomFeature();if(J.isSupported()){l.setOnCameraZoomValueChangeCallback(function(D){J.apply(D)});var F=1;n.config.defaultZoomValueIfSupported&&(F=n.config.defaultZoomValueIfSupported),F=d6(F,J.min(),J.max()),l.setValues(J.min(),J.max(),F,J.step()),l.show()}},y=W6.create(s,e),x=document.createElement("span"),w=ms.createElement("button",Fr.CAMERA_START_BUTTON_ID);w.innerText=vt.scanButtonStartScanningText(),x.appendChild(w);var C=ms.createElement("button",Fr.CAMERA_STOP_BUTTON_ID);C.innerText=vt.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,x.appendChild(C);var I,O=function(j){if(!j.torchFeature().isSupported()){I&&I.hide();return}I?I.updateTorchCapability(j.torchFeature()):I=j6.create(x,j.torchFeature(),{display:"none",marginLeft:"5px"},function(J){r.setHeaderMessage(J,Lr.STATUS_WARNING)}),I.show()};s.appendChild(x);var V=function(j){j||(w.style.display="none"),w.innerText=vt.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,j&&(w.style.display="inline-block")};if(w.addEventListener("click",function(j){w.innerText=vt.scanButtonScanningStarting(),y.disable(),w.disabled=!0,w.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var J=y.getValue();r.persistedDataManager.setLastUsedCameraId(J),r.html5Qrcode.start(J,Z6(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(F){C.disabled=!1,C.style.display="inline-block",V(!1);var D=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&O(D),n.config.showZoomSliderIfSupported===!0&&d(D)}).catch(function(F){r.showHideScanTypeSwapLink(!0),y.enable(),V(!0),r.setHeaderMessage(F,Lr.STATUS_WARNING)})}),y.hasSingleItem()&&w.click(),C.addEventListener("click",function(j){if(!r.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,r.html5Qrcode.stop().then(function(J){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),y.enable(),w.disabled=!1,C.style.display="none",w.style.display="inline-block",I&&(I.reset(),I.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(J){C.disabled=!1,r.setHeaderMessage(J,Lr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var W=r.persistedDataManager.getLastUsedCameraId();y.hasValue(W)?(y.setValue(W),w.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=vt.textIfCameraScanSelected(),r=vt.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var d=ms.createElement("span",this.getDashboardSectionSwapLinkId());d.style.textDecoration="underline",d.style.cursor="pointer",d.innerText=Gs.isCameraScanType(this.currentScanType)?n:r,d.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Gs.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),d.innerText=r,e.currentScanType=Eo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),d.innerText=n,e.currentScanType=Eo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),l.appendChild(d),s.appendChild(l)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){$x.hasPermissions().then(function(r){if(r){var s=document.getElementById(n.getCameraPermissionButtonId());if(!s)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=Lr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case Lr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Lr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Lr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=M6,this.cameraScanImage.alt=vt.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=k6,this.fileScanImage.alt=vt.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Fr.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Fr.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function Y6(){const[t,e]=me.useState(null);return me.useEffect(()=>{const n=new X6("reader",{qrbox:{width:250,height:250},fps:5});n.render(r,s);function r(l){n.clear(),e(l)}function s(l){console.warn(l)}},[]),P.jsx("div",{children:t?P.jsxs("div",{children:["Success: ",P.jsx("a",{href:t,children:t})," "]}):P.jsx("div",{id:"reader"})})}function q6(){return P.jsxs("div",{children:[P.jsx(Jc,{}),P.jsx("div",{children:P.jsx("div",{class:"flex flex-col justify-center items-center h-full",children:P.jsxs("div",{class:"relative flex flex-col items-center rounded-[20px] w-full mx-auto p-4 bg-white bg-clip-border shadow-3xl shadow-shadow-500 dark:!bg-navy-800 dark:text-white dark:!shadow-none",children:[P.jsxs("div",{class:"relative flex h-32 w-full justify-center rounded-xl bg-cover",children:[P.jsx("img",{src:"https://source.unsplash.com/Y0hLfXje8bQ",class:"absolute flex h-32 w-full justify-center rounded-xl bg-cover"}),P.jsx("div",{class:"absolute -bottom-12 flex h-[87px] w-[87px] items-center justify-center rounded-full border-[4px] border-white bg-pink-400 dark:!border-navy-700",children:P.jsx("img",{class:"h-full w-full rounded-full",src:"https://horizon-tailwind-react-git-tailwind-components-horizon-ui.vercel.app/static/media/avatar11.1060b63041fdffa5f8ef.png",alt:""})})]}),P.jsx("div",{class:"mt-16 flex flex-col items-center",children:P.jsx("p",{class:"text-base font-normal text-gray-600",children:"Product Manager"})}),P.jsx("div",{class:"mt-1 flex flex-col items-center",children:P.jsx("p",{class:"text-base font-normal text-gray-600",children:"Your points"})}),P.jsx("div",{class:"mt-2 flex items-center bg-green-200 text-gray-800",children:P.jsx("div",{class:"p-4 w-full",children:P.jsxs("div",{class:"grid grid-cols-12 gap-4",children:[P.jsx("div",{class:"col-span-12 sm:col-span-6 md:col-span-3",children:P.jsxs("div",{class:"flex flex-row bg-white shadow-sm rounded p-4",children:[P.jsx("div",{class:"flex items-center justify-center flex-shrink-0 h-12 w-12 rounded-xl bg-blue-100 text-blue-500",children:P.jsx("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:P.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),P.jsxs("div",{class:"flex flex-col flex-grow ml-4",children:[P.jsx("div",{class:"text-sm text-gray-500",children:"Point Recieved"}),P.jsx("div",{class:"font-bold text-lg",children:"1259"})]})]})}),P.jsx("div",{class:"col-span-12 sm:col-span-6 md:col-span-3",children:P.jsxs("div",{class:"flex flex-row bg-white shadow-sm rounded p-4",children:[P.jsx("div",{class:"flex items-center justify-center flex-shrink-0 h-12 w-12 rounded-xl bg-green-100 text-green-500",children:P.jsx("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:P.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),P.jsxs("div",{class:"flex flex-col flex-grow ml-4",children:[P.jsx("div",{class:"text-sm text-gray-500",children:"Points Spend"}),P.jsx("div",{class:"font-bold text-lg",children:"230"})]})]})}),P.jsx("div",{class:"col-span-12 sm:col-span-6 md:col-span-3",children:P.jsxs("div",{class:"flex flex-row bg-white shadow-sm rounded p-4",children:[P.jsx("div",{class:"flex items-center justify-center flex-shrink-0 h-12 w-12 rounded-xl bg-orange-100 text-orange-500",children:P.jsx("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:P.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z "})})}),P.jsxs("div",{class:"flex flex-col flex-grow ml-4",children:[P.jsx("div",{class:"text-sm text-gray-500",children:"No of shops"}),P.jsx("div",{class:"font-bold text-lg",children:"5"})]})]})}),P.jsx("div",{class:"col-span-12 sm:col-span-6 md:col-span-3",children:P.jsxs("div",{class:"flex flex-row bg-white shadow-sm rounded p-4",children:[P.jsx("div",{class:"flex items-center justify-center flex-shrink-0 h-12 w-12 rounded-xl bg-red-100 text-red-500",children:P.jsx("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:P.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),P.jsxs("div",{class:"flex flex-col flex-grow ml-4",children:[P.jsx("div",{class:"text-sm text-gray-500",children:"Total Points"}),P.jsx("div",{class:"font-bold text-lg",children:"$ 32k"})]})]})})]})})}),P.jsxs("div",{class:"grid gap-6 text-center md:grid-cols-2 flex justify-between items-center py-2 px-9",children:[P.jsxs("div",{class:" mt-6 flex flex-col items-center",children:[P.jsx("p",{children:"Location on google maps"}),P.jsx(c6,{})]}),P.jsx("div",{class:" mt-6 flex flex-col items-center",children:P.jsx(Y6,{})})]})]})})})]})}const K6=()=>{const t={supportedMethods:"https://google.com/pay",data:{merchantId:"your-merchant-id",allowedPaymentMethods:["CARD","TOKENIZED_CARD"]}},e={id:"order-123",displayItems:[{label:"PWA Demo Payment",amount:{currency:"USD",value:"0.01"}}],total:{label:"Total",amount:{currency:"USD",value:"0.01"}}},n=async()=>{try{const s=await new PaymentRequest([t],e).show();console.log(s)}catch(r){console.error("Payment error:",r)}};return P.jsx("div",{children:P.jsx("button",{id:"google-pay-button",onClick:n,children:"Google Pay"})})};function Q6(){const[t,e]=me.useState(null),[n,r]=me.useState(""),[s,l]=me.useState(""),[d,y]=me.useState(""),x=async()=>{const w=["Miniso","Nolimit","Aldo","KFC"],C=["I001","I002","I003"];w.includes(n)&&C.includes(s)?e("Payment successful!"):e("Payment failed. Please check your inputs.")};return P.jsxs("div",{children:[P.jsx("div",{className:"z-40",children:P.jsx(Jc,{})}),P.jsxs("div",{class:"min-h-screen bg-green-400 flex justify-center items-center",children:[P.jsx("div",{class:"absolute w-60 h-60 rounded-xl bg-green-300 -bottom-15 -left-16 z-0 transform rotate-45 hidden md:block"}),P.jsx("div",{class:"absolute w-48 h-48 rounded-xl bg-green-300 -bottom-6 -right-10 transform rotate-12 hidden md:block"}),P.jsxs("div",{class:"py-12 px-12 bg-white rounded-2xl shadow-xl z-20",children:[P.jsxs("div",{children:[P.jsx("h1",{class:"text-3xl font-bold text-center mb-4 cursor-pointer",children:"Online Payements"}),P.jsx("p",{class:"w-80 text-center text-sm mb-8 font-semibold text-gray-700 tracking-wide cursor-pointer",children:"Everyday Payemts Simplified!"})]}),P.jsxs("div",{class:"space-y-4",children:[P.jsx("input",{type:"text",placeholder:"Name of the shop",className:"block text-sm py-3 px-4 rounded-lg w-full border outline-none",value:n,onChange:w=>r(w.target.value)}),P.jsx("input",{type:"text",placeholder:"Invoice number",className:"block text-sm py-3 px-4 rounded-lg w-full border outline-none",value:s,onChange:w=>l(w.target.value)}),P.jsx("input",{type:"number",placeholder:"Amount",className:"block text-sm py-3 px-4 rounded-lg w-full border outline-none",value:d,onChange:w=>y(w.target.value)})]}),P.jsx("div",{children:P.jsx(K6,{})}),P.jsx("div",{class:"text-center mt-6",children:P.jsx("button",{className:"py-3 w-64 text-xl text-white bg-green-400 rounded-2xl",onClick:x,children:"Pay Here"})}),t&&P.jsx("div",{className:"text-center mt-4 text-green-500",children:t})]})]})]})}function J6(){return P.jsxs("div",{children:[P.jsx(Jc,{}),P.jsxs("section",{class:" bg-green-300 flex flex-col md:flex-row h-screen items-center",children:[P.jsx("div",{class:"bg-green-600 hidden lg:block w-full md:w-1/2 xl:w-3/3 h-screen",children:P.jsx("img",{src:"https://source.unsplash.com/g01EGebFdiA",alt:"",class:"w-full h-full object-cover"})}),P.jsx("div",{class:`bg-green-300 w-full md:max-w-md lg:max-w-full md:mx-auto md:mx-0 md:w-1/2 xl:w-1/3 h-screen px-6 lg:px-16 xl:px-12
            flex items-center justify-center`,children:P.jsxs("div",{class:"w-full h-100",children:[P.jsx("h1",{class:"text-xl md:text-2xl font-bold leading-tight mt-12",children:"Transfer Money to a BayMax Friend"}),P.jsxs("form",{class:"mt-6",action:"#",method:"POST",children:[P.jsxs("div",{children:[P.jsx("label",{class:"block text-gray-700",children:"Name"}),P.jsx("input",{type:"name",name:"",id:"",placeholder:"Enter Name",class:"w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500 focus:bg-white focus:outline-none",autofocus:!0,autocomplete:!0,required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{class:"block text-gray-700",children:"Email Address"}),P.jsx("input",{type:"email",name:"",id:"",placeholder:"Enter Email Address",class:"w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500 focus:bg-white focus:outline-none",autofocus:!0,autocomplete:!0,required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{class:"block text-gray-700",children:"Transfer Amount"}),P.jsx("input",{type:"number",name:"",id:"",placeholder:"Amount",class:"w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500 focus:bg-white focus:outline-none",autofocus:!0,autocomplete:!0,required:!0})]}),P.jsx("button",{type:"submit",class:`w-full block bg-green-600 hover:bg-green-700 focus:bg-indigo-400 text-white font-semibold rounded-lg
                  px-4 py-3 mt-6`,children:"Transfer"})]}),P.jsx("hr",{class:"my-6 border-black w-full"})]})})]})]})}function ek(){const{currentUser:t}=me.useContext(CT),e=({children:n})=>t?n:P.jsx(i3,{to:"/login"});return P.jsx(d3,{children:P.jsxs(o3,{children:[P.jsx(ls,{path:"/",element:P.jsx(s6,{})}),P.jsx(ls,{path:"/signup",element:P.jsx(i6,{})}),P.jsx(ls,{path:"/login",element:P.jsx(o6,{})}),P.jsx(ls,{path:"/wallet",element:P.jsx(e,{children:P.jsx(a6,{})})}),P.jsx(ls,{path:"/transfer",element:P.jsx(J6,{})}),P.jsx(ls,{path:"/payment",element:P.jsx(Q6,{})}),P.jsx(ls,{path:"/cards",element:P.jsx(q6,{})}),P.jsx(ls,{path:"/support",element:P.jsx(l6,{})})]})})}c1.createRoot(document.getElementById("root")).render(P.jsx(s2.StrictMode,{children:P.jsx(r6,{children:P.jsx(ek,{})})}));
